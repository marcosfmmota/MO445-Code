<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>libIFT: /home/vdalla/ift/demo/VISVA/externals/liboldift/src/nifti1_io.c File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" async src="http://www.mathjax.org/mathjax/MathJax.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">libIFT
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_b6c2a257bfab6380ca9b3cb94b12cb25.html">demo</a></li><li class="navelem"><a class="el" href="../../dir_302cff6795e290971fa041382f402ab8.html">VISVA</a></li><li class="navelem"><a class="el" href="../../dir_aafbe313a01795e2c0743efb348f50c0.html">externals</a></li><li class="navelem"><a class="el" href="../../dir_2fb498b2373985bbbc04232a708549af.html">liboldift</a></li><li class="navelem"><a class="el" href="../../dir_42e9a53b45504b8d8a8ecfe06b3fc4c9.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">nifti1_io.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">Description</h2>
<div class="textblock"><p>main collection of nifti1 i/o routines </p>
<ul>
<li>written by Bob Cox, SSCC NIMH</li>
<li>revised by Mark Jenkinson, FMRIB</li>
<li>revised by Rick Reynolds, SSCC, NIMH</li>
<li>revised by Kate Fissell, University of Pittsburgh</li>
</ul>
<p>The library history can be viewed via "nifti_tool -nifti_hist". <br />
The library version can be viewed via "nifti_tool -nifti_ver". </p>
</div><div class="textblock"><code>#include &quot;nifti1_io.h&quot;</code><br />
<code>#include &lt;sys/types.h&gt;</code><br />
<code>#include &lt;sys/stat.h&gt;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a148bab4a37578f745cc4101f14e8aae8"><td class="memItemLeft" align="right" valign="top"><a id="a148bab4a37578f745cc4101f14e8aae8"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>_NIFTI1_IO_C_</b></td></tr>
<tr class="separator:a148bab4a37578f745cc4101f14e8aae8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaeaa9824c28fc85a0be4845d9ddfaa10"><td class="memItemLeft" align="right" valign="top"><a id="aaeaa9824c28fc85a0be4845d9ddfaa10"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>USE_STAT</b></td></tr>
<tr class="separator:aaeaa9824c28fc85a0be4845d9ddfaa10"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adb36b06f4bb37bb8679f2802a8379cc2"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><b>ERREX</b>(msg)</td></tr>
<tr class="separator:adb36b06f4bb37bb8679f2802a8379cc2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adb36b06f4bb37bb8679f2802a8379cc2"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><b>ERREX</b>(msg)</td></tr>
<tr class="separator:adb36b06f4bb37bb8679f2802a8379cc2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adb36b06f4bb37bb8679f2802a8379cc2"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><b>ERREX</b>(msg)</td></tr>
<tr class="separator:adb36b06f4bb37bb8679f2802a8379cc2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a876ce77f3c672c7162658151e648389e"><td class="memItemLeft" align="right" valign="top"><a id="a876ce77f3c672c7162658151e648389e"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>CR</b>&#160;&#160;&#160;0x0D</td></tr>
<tr class="separator:a876ce77f3c672c7162658151e648389e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a350c9d6cb81908d59427ee96844d1a9c"><td class="memItemLeft" align="right" valign="top"><a id="a350c9d6cb81908d59427ee96844d1a9c"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>LF</b>&#160;&#160;&#160;0x0A</td></tr>
<tr class="separator:a350c9d6cb81908d59427ee96844d1a9c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6845c373b96ecf443011866936371867"><td class="memItemLeft" align="right" valign="top"><a id="a6845c373b96ecf443011866936371867"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>QQNUM</b>(n1,  n2)&#160;&#160;&#160;if( strcmp(lhs,#n1)==0 ) nim-&gt;n2=strtod(rhs,NULL)</td></tr>
<tr class="separator:a6845c373b96ecf443011866936371867"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abbcee41b78b18c2fc70c7785aaec9643"><td class="memItemLeft" align="right" valign="top"><a id="abbcee41b78b18c2fc70c7785aaec9643"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>QNUM</b>(nam)&#160;&#160;&#160;QQNUM(nam,nam)</td></tr>
<tr class="separator:abbcee41b78b18c2fc70c7785aaec9643"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a16c52f11f247cdfa73aa1d651cf4354b"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><b>QSTR</b>(nam,  ml)</td></tr>
<tr class="separator:a16c52f11f247cdfa73aa1d651cf4354b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab45c7582be67e3173e4aafdff68d7506"><td class="memItemLeft" align="right" valign="top"><a id="ab45c7582be67e3173e4aafdff68d7506"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>ISEND</b>(c)&#160;&#160;&#160;( (c)==']' || (c)=='}' || (c)=='\0' )</td></tr>
<tr class="separator:ab45c7582be67e3173e4aafdff68d7506"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a8c680710c3af059adf3315644cf9911d"><td class="memItemLeft" align="right" valign="top"><a id="a8c680710c3af059adf3315644cf9911d"></a>
static int&#160;</td><td class="memItemRight" valign="bottom"><b>nifti_read_extensions</b> (<a class="el" href="../../d0/de7/structnifti__image.html">nifti_image</a> *nim, znzFile fp, int remain)</td></tr>
<tr class="separator:a8c680710c3af059adf3315644cf9911d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a86dbbd5ff55e391bb18111b18830e02a"><td class="memItemLeft" align="right" valign="top"><a id="a86dbbd5ff55e391bb18111b18830e02a"></a>
static int&#160;</td><td class="memItemRight" valign="bottom"><b>nifti_read_next_extension</b> (<a class="el" href="../../d4/d55/structnifti1__extension.html">nifti1_extension</a> *nex, <a class="el" href="../../d0/de7/structnifti__image.html">nifti_image</a> *nim, int remain, znzFile fp)</td></tr>
<tr class="separator:a86dbbd5ff55e391bb18111b18830e02a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad57f643311329d028c772747174cc766"><td class="memItemLeft" align="right" valign="top"><a id="ad57f643311329d028c772747174cc766"></a>
static int&#160;</td><td class="memItemRight" valign="bottom"><b>nifti_check_extension</b> (<a class="el" href="../../d0/de7/structnifti__image.html">nifti_image</a> *nim, int size, int code, int rem)</td></tr>
<tr class="separator:ad57f643311329d028c772747174cc766"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac8736170acc80de408fb141885a9ddc6"><td class="memItemLeft" align="right" valign="top"><a id="ac8736170acc80de408fb141885a9ddc6"></a>
static void&#160;</td><td class="memItemRight" valign="bottom"><b>update_nifti_image_for_brick_list</b> (<a class="el" href="../../d0/de7/structnifti__image.html">nifti_image</a> *nim, int nbricks)</td></tr>
<tr class="separator:ac8736170acc80de408fb141885a9ddc6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a934c31cc4e51427f7ae7b12f71245e96"><td class="memItemLeft" align="right" valign="top"><a id="a934c31cc4e51427f7ae7b12f71245e96"></a>
static int&#160;</td><td class="memItemRight" valign="bottom"><b>nifti_add_exten_to_list</b> (<a class="el" href="../../d4/d55/structnifti1__extension.html">nifti1_extension</a> *new_ext, <a class="el" href="../../d4/d55/structnifti1__extension.html">nifti1_extension</a> **list, int new_length)</td></tr>
<tr class="separator:a934c31cc4e51427f7ae7b12f71245e96"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad2fdded289974c00b2b373525e44e40f"><td class="memItemLeft" align="right" valign="top"><a id="ad2fdded289974c00b2b373525e44e40f"></a>
static int&#160;</td><td class="memItemRight" valign="bottom"><b>nifti_fill_extension</b> (<a class="el" href="../../d4/d55/structnifti1__extension.html">nifti1_extension</a> *ext, const char *data, int len, int ecode)</td></tr>
<tr class="separator:ad2fdded289974c00b2b373525e44e40f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a58a169ce9ca5571d5de95ec712aba987"><td class="memItemLeft" align="right" valign="top"><a id="a58a169ce9ca5571d5de95ec712aba987"></a>
static int&#160;</td><td class="memItemRight" valign="bottom"><b>nifti_load_NBL_bricks</b> (<a class="el" href="../../d0/de7/structnifti__image.html">nifti_image</a> *nim, int *slist, int *sindex, <a class="el" href="../../d1/dba/structnifti__brick__list.html">nifti_brick_list</a> *NBL, znzFile fp)</td></tr>
<tr class="separator:a58a169ce9ca5571d5de95ec712aba987"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7d6a8dbab91a717575c2f253b49b7c70"><td class="memItemLeft" align="right" valign="top"><a id="a7d6a8dbab91a717575c2f253b49b7c70"></a>
static int&#160;</td><td class="memItemRight" valign="bottom"><b>nifti_alloc_NBL_mem</b> (<a class="el" href="../../d0/de7/structnifti__image.html">nifti_image</a> *nim, int nbricks, <a class="el" href="../../d1/dba/structnifti__brick__list.html">nifti_brick_list</a> *nbl)</td></tr>
<tr class="separator:a7d6a8dbab91a717575c2f253b49b7c70"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0008828465241469325be9befd3f0360"><td class="memItemLeft" align="right" valign="top"><a id="a0008828465241469325be9befd3f0360"></a>
static int&#160;</td><td class="memItemRight" valign="bottom"><b>nifti_copynsort</b> (int nbricks, const int *blist, int **slist, int **sindex)</td></tr>
<tr class="separator:a0008828465241469325be9befd3f0360"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a600d30a45bfb688328684edfa49ba3cd"><td class="memItemLeft" align="right" valign="top"><a id="a600d30a45bfb688328684edfa49ba3cd"></a>
static int&#160;</td><td class="memItemRight" valign="bottom"><b>nifti_NBL_matches_nim</b> (const <a class="el" href="../../d0/de7/structnifti__image.html">nifti_image</a> *nim, const <a class="el" href="../../d1/dba/structnifti__brick__list.html">nifti_brick_list</a> *NBL)</td></tr>
<tr class="separator:a600d30a45bfb688328684edfa49ba3cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac23c3144213d5a2cfeffbd98c6a98aef"><td class="memItemLeft" align="right" valign="top"><a id="ac23c3144213d5a2cfeffbd98c6a98aef"></a>
static int&#160;</td><td class="memItemRight" valign="bottom"><b>rci_read_data</b> (<a class="el" href="../../d0/de7/structnifti__image.html">nifti_image</a> *nim, int *pivots, int *prods, int nprods, const int dims[], char *data, znzFile fp, size_t base_offset)</td></tr>
<tr class="separator:ac23c3144213d5a2cfeffbd98c6a98aef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a54328f3f7da6f8580541cf8dcf415942"><td class="memItemLeft" align="right" valign="top"><a id="a54328f3f7da6f8580541cf8dcf415942"></a>
static int&#160;</td><td class="memItemRight" valign="bottom"><b>rci_alloc_mem</b> (void **data, int prods[8], int nprods, int nbyper)</td></tr>
<tr class="separator:a54328f3f7da6f8580541cf8dcf415942"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8e99c6b776df16915efd0b78768b4e12"><td class="memItemLeft" align="right" valign="top"><a id="a8e99c6b776df16915efd0b78768b4e12"></a>
static int&#160;</td><td class="memItemRight" valign="bottom"><b>make_pivot_list</b> (<a class="el" href="../../d0/de7/structnifti__image.html">nifti_image</a> *nim, const int dims[], int pivots[], int prods[], int *nprods)</td></tr>
<tr class="separator:a8e99c6b776df16915efd0b78768b4e12"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adc09bcd675b8337ce10b130abb41d5b4"><td class="memItemLeft" align="right" valign="top"><a id="adc09bcd675b8337ce10b130abb41d5b4"></a>
static int&#160;</td><td class="memItemRight" valign="bottom"><b>compare_strlist</b> (const char *str, char **strlist, int len)</td></tr>
<tr class="separator:adc09bcd675b8337ce10b130abb41d5b4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4ee307b64e786b4ae70ffb8ed655da6d"><td class="memItemLeft" align="right" valign="top"><a id="a4ee307b64e786b4ae70ffb8ed655da6d"></a>
static int&#160;</td><td class="memItemRight" valign="bottom"><b>fileext_compare</b> (const char *test_ext, const char *known_ext)</td></tr>
<tr class="separator:a4ee307b64e786b4ae70ffb8ed655da6d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0aab011945007f3b880da814a41119ce"><td class="memItemLeft" align="right" valign="top"><a id="a0aab011945007f3b880da814a41119ce"></a>
static int&#160;</td><td class="memItemRight" valign="bottom"><b>fileext_n_compare</b> (const char *test_ext, const char *known_ext, int maxlen)</td></tr>
<tr class="separator:a0aab011945007f3b880da814a41119ce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a91c6f4bde98cb29e0f9020efa0e88c46"><td class="memItemLeft" align="right" valign="top"><a id="a91c6f4bde98cb29e0f9020efa0e88c46"></a>
static int&#160;</td><td class="memItemRight" valign="bottom"><b>is_mixedcase</b> (const char *str)</td></tr>
<tr class="separator:a91c6f4bde98cb29e0f9020efa0e88c46"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab501543cefb2a1d9b0878293c3110e60"><td class="memItemLeft" align="right" valign="top"><a id="ab501543cefb2a1d9b0878293c3110e60"></a>
static int&#160;</td><td class="memItemRight" valign="bottom"><b>is_uppercase</b> (const char *str)</td></tr>
<tr class="separator:ab501543cefb2a1d9b0878293c3110e60"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a27bb80a30a865ee1204846e8c42a3110"><td class="memItemLeft" align="right" valign="top"><a id="a27bb80a30a865ee1204846e8c42a3110"></a>
static int&#160;</td><td class="memItemRight" valign="bottom"><b>make_lowercase</b> (char *str)</td></tr>
<tr class="separator:a27bb80a30a865ee1204846e8c42a3110"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5fefd12734bd7588365b5c63c47a944d"><td class="memItemLeft" align="right" valign="top"><a id="a5fefd12734bd7588365b5c63c47a944d"></a>
static int&#160;</td><td class="memItemRight" valign="bottom"><b>make_uppercase</b> (char *str)</td></tr>
<tr class="separator:a5fefd12734bd7588365b5c63c47a944d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7110d663bba57662aca0fdb21f391d7e"><td class="memItemLeft" align="right" valign="top"><a id="a7110d663bba57662aca0fdb21f391d7e"></a>
static int&#160;</td><td class="memItemRight" valign="bottom"><b>need_nhdr_swap</b> (short dim0, int hdrsize)</td></tr>
<tr class="separator:a7110d663bba57662aca0fdb21f391d7e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab287cdd0c9227d8915cba394c8befc33"><td class="memItemLeft" align="right" valign="top"><a id="ab287cdd0c9227d8915cba394c8befc33"></a>
static int&#160;</td><td class="memItemRight" valign="bottom"><b>print_hex_vals</b> (const char *data, int nbytes, FILE *fp)</td></tr>
<tr class="separator:ab287cdd0c9227d8915cba394c8befc33"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a657ffcc0968376b25022c9bb8e8f86b2"><td class="memItemLeft" align="right" valign="top"><a id="a657ffcc0968376b25022c9bb8e8f86b2"></a>
static int&#160;</td><td class="memItemRight" valign="bottom"><b>unescape_string</b> (char *str)</td></tr>
<tr class="separator:a657ffcc0968376b25022c9bb8e8f86b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5aaf50756c4354e413bcab30fb245aff"><td class="memItemLeft" align="right" valign="top"><a id="a5aaf50756c4354e413bcab30fb245aff"></a>
static char *&#160;</td><td class="memItemRight" valign="bottom"><b>escapize_string</b> (const char *str)</td></tr>
<tr class="separator:a5aaf50756c4354e413bcab30fb245aff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa101788c6fedf7aca40e9eed8f7f53b2"><td class="memItemLeft" align="right" valign="top">static znzFile&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d14/nifti1__io_8c.html#aa101788c6fedf7aca40e9eed8f7f53b2">nifti_image_load_prep</a> (<a class="el" href="../../d0/de7/structnifti__image.html">nifti_image</a> *nim)</td></tr>
<tr class="separator:aa101788c6fedf7aca40e9eed8f7f53b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9e66d666ed98926b3c5caca789c318d4"><td class="memItemLeft" align="right" valign="top"><a id="a9e66d666ed98926b3c5caca789c318d4"></a>
static int&#160;</td><td class="memItemRight" valign="bottom"><b>has_ascii_header</b> (znzFile fp)</td></tr>
<tr class="separator:a9e66d666ed98926b3c5caca789c318d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab8596d26f949ed9371fb73abd1f1ccee"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d14/nifti1__io_8c.html#ab8596d26f949ed9371fb73abd1f1ccee">nifti_disp_lib_hist</a> (void)</td></tr>
<tr class="separator:ab8596d26f949ed9371fb73abd1f1ccee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa4648105a0f3099213eaf094b10cc8b0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d14/nifti1__io_8c.html#aa4648105a0f3099213eaf094b10cc8b0">nifti_disp_lib_version</a> (void)</td></tr>
<tr class="separator:aa4648105a0f3099213eaf094b10cc8b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6a60e69105dc0a2c7767beb376808143"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d0/de7/structnifti__image.html">nifti_image</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d14/nifti1__io_8c.html#a6a60e69105dc0a2c7767beb376808143">nifti_image_read_bricks</a> (const char *hname, int nbricks, const int *blist, <a class="el" href="../../d1/dba/structnifti__brick__list.html">nifti_brick_list</a> *NBL)</td></tr>
<tr class="separator:a6a60e69105dc0a2c7767beb376808143"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af6c9efd3e09141592c41803377c689a9"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d14/nifti1__io_8c.html#af6c9efd3e09141592c41803377c689a9">nifti_update_dims_from_array</a> (<a class="el" href="../../d0/de7/structnifti__image.html">nifti_image</a> *nim)</td></tr>
<tr class="separator:af6c9efd3e09141592c41803377c689a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7634eeeda561a1a22064b20bca2e877a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d14/nifti1__io_8c.html#a7634eeeda561a1a22064b20bca2e877a">nifti_image_load_bricks</a> (<a class="el" href="../../d0/de7/structnifti__image.html">nifti_image</a> *nim, int nbricks, const int *blist, <a class="el" href="../../d1/dba/structnifti__brick__list.html">nifti_brick_list</a> *NBL)</td></tr>
<tr class="separator:a7634eeeda561a1a22064b20bca2e877a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab1b499958b62d1c0f3bbc929ca2431f2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d14/nifti1__io_8c.html#ab1b499958b62d1c0f3bbc929ca2431f2">nifti_free_NBL</a> (<a class="el" href="../../d1/dba/structnifti__brick__list.html">nifti_brick_list</a> *NBL)</td></tr>
<tr class="separator:ab1b499958b62d1c0f3bbc929ca2431f2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4062dff607da27712e1abbcdedd3c82e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d14/nifti1__io_8c.html#a4062dff607da27712e1abbcdedd3c82e">valid_nifti_brick_list</a> (<a class="el" href="../../d0/de7/structnifti__image.html">nifti_image</a> *nim, int nbricks, const int *blist, int disp_error)</td></tr>
<tr class="separator:a4062dff607da27712e1abbcdedd3c82e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3152dd3d1140f401aea7754bf37fd3c2"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d14/nifti1__io_8c.html#a3152dd3d1140f401aea7754bf37fd3c2">nifti_disp_matrix_orient</a> (const char *mesg, <a class="el" href="../../d9/d6d/structmat44.html">mat44</a> mat)</td></tr>
<tr class="separator:a3152dd3d1140f401aea7754bf37fd3c2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a98f42fe4268d9fff8a5b8c984f8731f1"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d14/nifti1__io_8c.html#a98f42fe4268d9fff8a5b8c984f8731f1">nifti_strdup</a> (const char *str)</td></tr>
<tr class="separator:a98f42fe4268d9fff8a5b8c984f8731f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adfa192edb2b6c605c831a781b6d0dd1b"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d14/nifti1__io_8c.html#adfa192edb2b6c605c831a781b6d0dd1b">nifti_datatype_string</a> (int dt)</td></tr>
<tr class="separator:adfa192edb2b6c605c831a781b6d0dd1b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2d77002f1a31d0651eaa2462d6273169"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d14/nifti1__io_8c.html#a2d77002f1a31d0651eaa2462d6273169">nifti_is_inttype</a> (int dt)</td></tr>
<tr class="separator:a2d77002f1a31d0651eaa2462d6273169"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a90a17b3e9891b6f16d7b454b5442646d"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d14/nifti1__io_8c.html#a90a17b3e9891b6f16d7b454b5442646d">nifti_units_string</a> (int uu)</td></tr>
<tr class="separator:a90a17b3e9891b6f16d7b454b5442646d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7472700981faa470501958c621c9ee61"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d14/nifti1__io_8c.html#a7472700981faa470501958c621c9ee61">nifti_xform_string</a> (int xx)</td></tr>
<tr class="separator:a7472700981faa470501958c621c9ee61"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3354f25465b96de45211544ff6570e74"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d14/nifti1__io_8c.html#a3354f25465b96de45211544ff6570e74">nifti_intent_string</a> (int ii)</td></tr>
<tr class="separator:a3354f25465b96de45211544ff6570e74"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2e4ce3c3c610064c01eeeac244101159"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d14/nifti1__io_8c.html#a2e4ce3c3c610064c01eeeac244101159">nifti_slice_string</a> (int ss)</td></tr>
<tr class="separator:a2e4ce3c3c610064c01eeeac244101159"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a50ab65b744fa58802a77988df9eab9eb"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d14/nifti1__io_8c.html#a50ab65b744fa58802a77988df9eab9eb">nifti_orientation_string</a> (int ii)</td></tr>
<tr class="separator:a50ab65b744fa58802a77988df9eab9eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeeccf4be6839946794c2cc1fdef26d4f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d14/nifti1__io_8c.html#aeeccf4be6839946794c2cc1fdef26d4f">nifti_datatype_sizes</a> (int datatype, int *nbyper, int *swapsize)</td></tr>
<tr class="separator:aeeccf4be6839946794c2cc1fdef26d4f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4b183639b2e242ac32210fe3437f60d2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/d6d/structmat44.html">mat44</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d14/nifti1__io_8c.html#a4b183639b2e242ac32210fe3437f60d2">nifti_quatern_to_mat44</a> (float qb, float qc, float qd, float qx, float qy, float qz, float dx, float dy, float dz, float qfac)</td></tr>
<tr class="separator:a4b183639b2e242ac32210fe3437f60d2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a84b68d5634ec94b5132e0067733e9f28"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d14/nifti1__io_8c.html#a84b68d5634ec94b5132e0067733e9f28">nifti_mat44_to_quatern</a> (<a class="el" href="../../d9/d6d/structmat44.html">mat44</a> R, float *qb, float *qc, float *qd, float *qx, float *qy, float *qz, float *dx, float *dy, float *dz, float *qfac)</td></tr>
<tr class="separator:a84b68d5634ec94b5132e0067733e9f28"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abf7254db0ad36f998a92ac6f42f9c5c9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/d6d/structmat44.html">mat44</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d14/nifti1__io_8c.html#abf7254db0ad36f998a92ac6f42f9c5c9">nifti_mat44_inverse</a> (<a class="el" href="../../d9/d6d/structmat44.html">mat44</a> R)</td></tr>
<tr class="separator:abf7254db0ad36f998a92ac6f42f9c5c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8c07c7b62ab67f0d0e901fdf4b755707"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/d6d/structmat44.html">mat44</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d14/nifti1__io_8c.html#a8c07c7b62ab67f0d0e901fdf4b755707">nifti_make_orthog_mat44</a> (float r11, float r12, float r13, float r21, float r22, float r23, float r31, float r32, float r33)</td></tr>
<tr class="separator:a8c07c7b62ab67f0d0e901fdf4b755707"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac4d58f4a9ed98b1b4ea642c95886d346"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d7/d16/structmat33.html">mat33</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d14/nifti1__io_8c.html#ac4d58f4a9ed98b1b4ea642c95886d346">nifti_mat33_inverse</a> (<a class="el" href="../../d7/d16/structmat33.html">mat33</a> R)</td></tr>
<tr class="separator:ac4d58f4a9ed98b1b4ea642c95886d346"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9d50d3f27b0f6a7710d10c00d5041b63"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d14/nifti1__io_8c.html#a9d50d3f27b0f6a7710d10c00d5041b63">nifti_mat33_determ</a> (<a class="el" href="../../d7/d16/structmat33.html">mat33</a> R)</td></tr>
<tr class="separator:a9d50d3f27b0f6a7710d10c00d5041b63"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9a52da66c78e82f5d63a388b813466a3"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d14/nifti1__io_8c.html#a9a52da66c78e82f5d63a388b813466a3">nifti_mat33_rownorm</a> (<a class="el" href="../../d7/d16/structmat33.html">mat33</a> A)</td></tr>
<tr class="separator:a9a52da66c78e82f5d63a388b813466a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4ccc9daef977faa38f1b05647f835e8d"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d14/nifti1__io_8c.html#a4ccc9daef977faa38f1b05647f835e8d">nifti_mat33_colnorm</a> (<a class="el" href="../../d7/d16/structmat33.html">mat33</a> A)</td></tr>
<tr class="separator:a4ccc9daef977faa38f1b05647f835e8d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a44785e6bf9b19f120a9158cc1af312f6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d7/d16/structmat33.html">mat33</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d14/nifti1__io_8c.html#a44785e6bf9b19f120a9158cc1af312f6">nifti_mat33_mul</a> (<a class="el" href="../../d7/d16/structmat33.html">mat33</a> A, <a class="el" href="../../d7/d16/structmat33.html">mat33</a> B)</td></tr>
<tr class="separator:a44785e6bf9b19f120a9158cc1af312f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a32d3a6d10f5e97ddc243001727c129a1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d7/d16/structmat33.html">mat33</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d14/nifti1__io_8c.html#a32d3a6d10f5e97ddc243001727c129a1">nifti_mat33_polar</a> (<a class="el" href="../../d7/d16/structmat33.html">mat33</a> A)</td></tr>
<tr class="separator:a32d3a6d10f5e97ddc243001727c129a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad8ba2d4a127c3ee26af9909ce2aa59e8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d14/nifti1__io_8c.html#ad8ba2d4a127c3ee26af9909ce2aa59e8">nifti_mat44_to_orientation</a> (<a class="el" href="../../d9/d6d/structmat44.html">mat44</a> R, int *icod, int *jcod, int *kcod)</td></tr>
<tr class="separator:ad8ba2d4a127c3ee26af9909ce2aa59e8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9c64a35264c605640a30af4eec6d99bc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d14/nifti1__io_8c.html#a9c64a35264c605640a30af4eec6d99bc">nifti_swap_2bytes</a> (size_t n, void *ar)</td></tr>
<tr class="separator:a9c64a35264c605640a30af4eec6d99bc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a53b22afe7c9c2520e831da6044823c39"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d14/nifti1__io_8c.html#a53b22afe7c9c2520e831da6044823c39">nifti_swap_4bytes</a> (size_t n, void *ar)</td></tr>
<tr class="separator:a53b22afe7c9c2520e831da6044823c39"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a61af0e2662990502b18c2e6ecf1b0fee"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d14/nifti1__io_8c.html#a61af0e2662990502b18c2e6ecf1b0fee">nifti_swap_8bytes</a> (size_t n, void *ar)</td></tr>
<tr class="separator:a61af0e2662990502b18c2e6ecf1b0fee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5cf6e5dd1d6eb0b43a8df38e6c833fb5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d14/nifti1__io_8c.html#a5cf6e5dd1d6eb0b43a8df38e6c833fb5">nifti_swap_16bytes</a> (size_t n, void *ar)</td></tr>
<tr class="separator:a5cf6e5dd1d6eb0b43a8df38e6c833fb5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa7d743976d0ffdf6e320a71a8a32d006"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d14/nifti1__io_8c.html#aa7d743976d0ffdf6e320a71a8a32d006">nifti_swap_Nbytes</a> (size_t n, int siz, void *ar)</td></tr>
<tr class="separator:aa7d743976d0ffdf6e320a71a8a32d006"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a50dc91b6264f53456387f95907bc86ee"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d14/nifti1__io_8c.html#a50dc91b6264f53456387f95907bc86ee">swap_nifti_header</a> (struct <a class="el" href="../../dd/d75/structnifti__1__header.html">nifti_1_header</a> *h, int is_nifti)</td></tr>
<tr class="separator:a50dc91b6264f53456387f95907bc86ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a08ff63c999a17b9a7343a5918d73d414"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d14/nifti1__io_8c.html#a08ff63c999a17b9a7343a5918d73d414">nifti_swap_as_analyze</a> (<a class="el" href="../../de/d05/structnifti__analyze75.html">nifti_analyze75</a> *h)</td></tr>
<tr class="separator:a08ff63c999a17b9a7343a5918d73d414"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6b59987a39c86d4e247c953570784917"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d14/nifti1__io_8c.html#a6b59987a39c86d4e247c953570784917">old_swap_nifti_header</a> (struct <a class="el" href="../../dd/d75/structnifti__1__header.html">nifti_1_header</a> *h, int is_nifti)</td></tr>
<tr class="separator:a6b59987a39c86d4e247c953570784917"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad87cfcf2fe9635136a11811b6f345eab"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d14/nifti1__io_8c.html#ad87cfcf2fe9635136a11811b6f345eab">nifti_get_filesize</a> (const char *pathname)</td></tr>
<tr class="separator:ad87cfcf2fe9635136a11811b6f345eab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0816cfcf9fa0b51a66dd1fa434510e8d"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d14/nifti1__io_8c.html#a0816cfcf9fa0b51a66dd1fa434510e8d">nifti_get_volsize</a> (const <a class="el" href="../../d0/de7/structnifti__image.html">nifti_image</a> *nim)</td></tr>
<tr class="separator:a0816cfcf9fa0b51a66dd1fa434510e8d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aebd0c1d644fdafa59727dd8f57ae6686"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d14/nifti1__io_8c.html#aebd0c1d644fdafa59727dd8f57ae6686">nifti_fileexists</a> (const char *fname)</td></tr>
<tr class="separator:aebd0c1d644fdafa59727dd8f57ae6686"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad1eede55fd34a457e1738aa9d0f75036"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d14/nifti1__io_8c.html#ad1eede55fd34a457e1738aa9d0f75036">nifti_is_complete_filename</a> (const char *fname)</td></tr>
<tr class="separator:ad1eede55fd34a457e1738aa9d0f75036"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a836b54d494e9d2718e5541978ae3fc29"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d14/nifti1__io_8c.html#a836b54d494e9d2718e5541978ae3fc29">nifti_validfilename</a> (const char *fname)</td></tr>
<tr class="separator:a836b54d494e9d2718e5541978ae3fc29"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a338a5f9b74c37ee28ca8683324434a05"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d14/nifti1__io_8c.html#a338a5f9b74c37ee28ca8683324434a05">nifti_find_file_extension</a> (const char *name)</td></tr>
<tr class="separator:a338a5f9b74c37ee28ca8683324434a05"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c17ed984533a4dede09b3bb6fa1fa17"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d14/nifti1__io_8c.html#a6c17ed984533a4dede09b3bb6fa1fa17">nifti_is_gzfile</a> (const char *fname)</td></tr>
<tr class="separator:a6c17ed984533a4dede09b3bb6fa1fa17"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a64c9a0bd020345de7e07606f07dcb960"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d14/nifti1__io_8c.html#a64c9a0bd020345de7e07606f07dcb960">nifti_compiled_with_zlib</a> (void)</td></tr>
<tr class="separator:a64c9a0bd020345de7e07606f07dcb960"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a19cb2bca24ab79a5f0a0ec9b770d7454"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d14/nifti1__io_8c.html#a19cb2bca24ab79a5f0a0ec9b770d7454">nifti_makebasename</a> (const char *fname)</td></tr>
<tr class="separator:a19cb2bca24ab79a5f0a0ec9b770d7454"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad76d66da1e384dc54a092e033bd8e195"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d14/nifti1__io_8c.html#ad76d66da1e384dc54a092e033bd8e195">nifti_set_debug_level</a> (int level)</td></tr>
<tr class="separator:ad76d66da1e384dc54a092e033bd8e195"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a10072c5930f7f0c69c91821edbf44b97"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d14/nifti1__io_8c.html#a10072c5930f7f0c69c91821edbf44b97">nifti_set_skip_blank_ext</a> (int skip)</td></tr>
<tr class="separator:a10072c5930f7f0c69c91821edbf44b97"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a85d02757a3ef2462045bb89d634b8036"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d14/nifti1__io_8c.html#a85d02757a3ef2462045bb89d634b8036">nifti_set_allow_upper_fext</a> (int allow)</td></tr>
<tr class="separator:a85d02757a3ef2462045bb89d634b8036"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acde0b000cd0b4c5edbe33454ebc0c86f"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d14/nifti1__io_8c.html#acde0b000cd0b4c5edbe33454ebc0c86f">nifti_findhdrname</a> (const char *fname)</td></tr>
<tr class="separator:acde0b000cd0b4c5edbe33454ebc0c86f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a166171eee037df0d1f28a824e35faea5"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d14/nifti1__io_8c.html#a166171eee037df0d1f28a824e35faea5">nifti_findimgname</a> (const char *fname, int nifti_type)</td></tr>
<tr class="separator:a166171eee037df0d1f28a824e35faea5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a03d86f65680b215db89c24723ad73a8c"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d14/nifti1__io_8c.html#a03d86f65680b215db89c24723ad73a8c">nifti_makehdrname</a> (const char *prefix, int nifti_type, int check, int comp)</td></tr>
<tr class="separator:a03d86f65680b215db89c24723ad73a8c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a80ba47331f082db092ef29d11c64fa31"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d14/nifti1__io_8c.html#a80ba47331f082db092ef29d11c64fa31">nifti_makeimgname</a> (const char *prefix, int nifti_type, int check, int comp)</td></tr>
<tr class="separator:a80ba47331f082db092ef29d11c64fa31"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a296fad01763163289b0e1030d3a0ebaa"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d14/nifti1__io_8c.html#a296fad01763163289b0e1030d3a0ebaa">nifti_set_filenames</a> (<a class="el" href="../../d0/de7/structnifti__image.html">nifti_image</a> *nim, const char *prefix, int check, int set_byte_order)</td></tr>
<tr class="separator:a296fad01763163289b0e1030d3a0ebaa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a46c9636636122200ee108fb179dc23de"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d14/nifti1__io_8c.html#a46c9636636122200ee108fb179dc23de">nifti_type_and_names_match</a> (<a class="el" href="../../d0/de7/structnifti__image.html">nifti_image</a> *nim, int show_warn)</td></tr>
<tr class="separator:a46c9636636122200ee108fb179dc23de"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5c42d2b1cf63b30950078ec5562e1f58"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d14/nifti1__io_8c.html#a5c42d2b1cf63b30950078ec5562e1f58">is_valid_nifti_type</a> (int nifti_type)</td></tr>
<tr class="separator:a5c42d2b1cf63b30950078ec5562e1f58"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab03e74e929ca87ec226bd2e59899fc95"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d14/nifti1__io_8c.html#ab03e74e929ca87ec226bd2e59899fc95">nifti_is_valid_datatype</a> (int dtype)</td></tr>
<tr class="separator:ab03e74e929ca87ec226bd2e59899fc95"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5cb621a9f499db8c3f9de3c73628cc76"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d14/nifti1__io_8c.html#a5cb621a9f499db8c3f9de3c73628cc76">nifti_set_type_from_names</a> (<a class="el" href="../../d0/de7/structnifti__image.html">nifti_image</a> *nim)</td></tr>
<tr class="separator:a5cb621a9f499db8c3f9de3c73628cc76"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a247e5a0c2b32a30837187b56d1de553a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d14/nifti1__io_8c.html#a247e5a0c2b32a30837187b56d1de553a">is_nifti_file</a> (const char *hname)</td></tr>
<tr class="separator:a247e5a0c2b32a30837187b56d1de553a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af9d6192cbeeb85cde0a3c41acf9c2208"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d14/nifti1__io_8c.html#af9d6192cbeeb85cde0a3c41acf9c2208">disp_nifti_1_header</a> (const char *info, const <a class="el" href="../../dd/d75/structnifti__1__header.html">nifti_1_header</a> *hp)</td></tr>
<tr class="separator:af9d6192cbeeb85cde0a3c41acf9c2208"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa7bd8fbb331c8d278506afb6f37fdbc2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d0/de7/structnifti__image.html">nifti_image</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d14/nifti1__io_8c.html#aa7bd8fbb331c8d278506afb6f37fdbc2">nifti_convert_nhdr2nim</a> (struct <a class="el" href="../../dd/d75/structnifti__1__header.html">nifti_1_header</a> nhdr, const char *fname)</td></tr>
<tr class="separator:aa7bd8fbb331c8d278506afb6f37fdbc2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa3ba2c9ea10502fd5e619e55eb5ec662"><td class="memItemLeft" align="right" valign="top">znzFile&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d14/nifti1__io_8c.html#aa3ba2c9ea10502fd5e619e55eb5ec662">nifti_image_open</a> (const char *hname, char *opts, <a class="el" href="../../d0/de7/structnifti__image.html">nifti_image</a> **nim)</td></tr>
<tr class="memdesc:aa3ba2c9ea10502fd5e619e55eb5ec662"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read in NIFTI-1 or ANALYZE-7.5 file (pair) header information into a <a class="el" href="../../d0/de7/structnifti__image.html" title="High level data structure for open nifti datasets in the nifti1_io API. Note that this structure is n...">nifti_image</a> struct.  <a href="#aa3ba2c9ea10502fd5e619e55eb5ec662">More...</a><br /></td></tr>
<tr class="separator:aa3ba2c9ea10502fd5e619e55eb5ec662"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5708391aec2c027b721fa0d40851d288"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../dd/d75/structnifti__1__header.html">nifti_1_header</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d14/nifti1__io_8c.html#a5708391aec2c027b721fa0d40851d288">nifti_read_header</a> (const char *hname, int *swapped, int check)</td></tr>
<tr class="separator:a5708391aec2c027b721fa0d40851d288"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a963647a644c757bf79652cf79d69ae18"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d14/nifti1__io_8c.html#a963647a644c757bf79652cf79d69ae18">nifti_hdr_looks_good</a> (const <a class="el" href="../../dd/d75/structnifti__1__header.html">nifti_1_header</a> *hdr)</td></tr>
<tr class="separator:a963647a644c757bf79652cf79d69ae18"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9da495aabf70c7111f574dc3985e6467"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d0/de7/structnifti__image.html">nifti_image</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d14/nifti1__io_8c.html#a9da495aabf70c7111f574dc3985e6467">nifti_image_read</a> (const char *hname, int read_data)</td></tr>
<tr class="memdesc:a9da495aabf70c7111f574dc3985e6467"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read a nifti header and optionally the data, creating a <a class="el" href="../../d0/de7/structnifti__image.html" title="High level data structure for open nifti datasets in the nifti1_io API. Note that this structure is n...">nifti_image</a>.  <a href="#a9da495aabf70c7111f574dc3985e6467">More...</a><br /></td></tr>
<tr class="separator:a9da495aabf70c7111f574dc3985e6467"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab1e7cfdc675f67b4dca809bae81e6e15"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d0/de7/structnifti__image.html">nifti_image</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d14/nifti1__io_8c.html#ab1e7cfdc675f67b4dca809bae81e6e15">nifti_read_ascii_image</a> (znzFile fp, char *fname, int flen, int read_data)</td></tr>
<tr class="separator:ab1e7cfdc675f67b4dca809bae81e6e15"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af302324afc85693788cd7483b054fc86"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d14/nifti1__io_8c.html#af302324afc85693788cd7483b054fc86">nifti_add_extension</a> (<a class="el" href="../../d0/de7/structnifti__image.html">nifti_image</a> *nim, const char *data, int len, int ecode)</td></tr>
<tr class="separator:af302324afc85693788cd7483b054fc86"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae4827bde194fb79b17406da16216f81f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d14/nifti1__io_8c.html#ae4827bde194fb79b17406da16216f81f">valid_nifti_extensions</a> (const <a class="el" href="../../d0/de7/structnifti__image.html">nifti_image</a> *nim)</td></tr>
<tr class="separator:ae4827bde194fb79b17406da16216f81f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:affc673e2c2768319574e46169462f115"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d14/nifti1__io_8c.html#affc673e2c2768319574e46169462f115">nifti_is_valid_ecode</a> (int ecode)</td></tr>
<tr class="separator:affc673e2c2768319574e46169462f115"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2e75db3fcfbe1c2f7343611ab9cfcb8d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d14/nifti1__io_8c.html#a2e75db3fcfbe1c2f7343611ab9cfcb8d">nifti_image_load</a> (<a class="el" href="../../d0/de7/structnifti__image.html">nifti_image</a> *nim)</td></tr>
<tr class="memdesc:a2e75db3fcfbe1c2f7343611ab9cfcb8d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Load the image blob into a previously initialized <a class="el" href="../../d0/de7/structnifti__image.html" title="High level data structure for open nifti datasets in the nifti1_io API. Note that this structure is n...">nifti_image</a>.  <a href="#a2e75db3fcfbe1c2f7343611ab9cfcb8d">More...</a><br /></td></tr>
<tr class="separator:a2e75db3fcfbe1c2f7343611ab9cfcb8d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afb6dff710966b4a8611726a9f846c683"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d14/nifti1__io_8c.html#afb6dff710966b4a8611726a9f846c683">nifti_read_buffer</a> (znzFile fp, void *dataptr, size_t ntot, <a class="el" href="../../d0/de7/structnifti__image.html">nifti_image</a> *nim)</td></tr>
<tr class="separator:afb6dff710966b4a8611726a9f846c683"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a963b6ef9c3532b8dc0e7a243c42d1436"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d14/nifti1__io_8c.html#a963b6ef9c3532b8dc0e7a243c42d1436">nifti_image_unload</a> (<a class="el" href="../../d0/de7/structnifti__image.html">nifti_image</a> *nim)</td></tr>
<tr class="separator:a963b6ef9c3532b8dc0e7a243c42d1436"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2fe83552d8121a492fe07b5f42397c9d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d14/nifti1__io_8c.html#a2fe83552d8121a492fe07b5f42397c9d">nifti_image_free</a> (<a class="el" href="../../d0/de7/structnifti__image.html">nifti_image</a> *nim)</td></tr>
<tr class="separator:a2fe83552d8121a492fe07b5f42397c9d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afd96262c6dd96e05ceaa08b3fbdff2c9"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d14/nifti1__io_8c.html#afd96262c6dd96e05ceaa08b3fbdff2c9">nifti_free_extensions</a> (<a class="el" href="../../d0/de7/structnifti__image.html">nifti_image</a> *nim)</td></tr>
<tr class="separator:afd96262c6dd96e05ceaa08b3fbdff2c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa8098d5521db8f070543122d7ef2ee7e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d14/nifti1__io_8c.html#aa8098d5521db8f070543122d7ef2ee7e">nifti_image_infodump</a> (const <a class="el" href="../../d0/de7/structnifti__image.html">nifti_image</a> *nim)</td></tr>
<tr class="separator:aa8098d5521db8f070543122d7ef2ee7e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a201ad43a22bd93e945acbb41b4bd5dca"><td class="memItemLeft" align="right" valign="top"><a id="a201ad43a22bd93e945acbb41b4bd5dca"></a>
size_t&#160;</td><td class="memItemRight" valign="bottom"><b>nifti_write_buffer</b> (znzFile fp, const void *buffer, size_t numbytes)</td></tr>
<tr class="separator:a201ad43a22bd93e945acbb41b4bd5dca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab8f4f74b33a153219e5c47e6f8046bf3"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d14/nifti1__io_8c.html#ab8f4f74b33a153219e5c47e6f8046bf3">nifti_write_all_data</a> (znzFile fp, <a class="el" href="../../d0/de7/structnifti__image.html">nifti_image</a> *nim, const <a class="el" href="../../d1/dba/structnifti__brick__list.html">nifti_brick_list</a> *NBL)</td></tr>
<tr class="separator:ab8f4f74b33a153219e5c47e6f8046bf3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a168ce9544bc6faca188d35d9d87e1d42"><td class="memItemLeft" align="right" valign="top"><a id="a168ce9544bc6faca188d35d9d87e1d42"></a>
static int&#160;</td><td class="memItemRight" valign="bottom"><b>nifti_write_extensions</b> (znzFile fp, <a class="el" href="../../d0/de7/structnifti__image.html">nifti_image</a> *nim)</td></tr>
<tr class="separator:a168ce9544bc6faca188d35d9d87e1d42"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2fa149a7af0a94b2718035809c3bf930"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d0/de7/structnifti__image.html">nifti_image</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d14/nifti1__io_8c.html#a2fa149a7af0a94b2718035809c3bf930">nifti_simple_init_nim</a> (void)</td></tr>
<tr class="separator:a2fa149a7af0a94b2718035809c3bf930"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2fde930d314f2fea6ce083c4db0412ee"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../dd/d75/structnifti__1__header.html">nifti_1_header</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d14/nifti1__io_8c.html#a2fde930d314f2fea6ce083c4db0412ee">nifti_make_new_header</a> (const int arg_dims[], int arg_dtype)</td></tr>
<tr class="separator:a2fde930d314f2fea6ce083c4db0412ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab18d6d70c046482f92fb802b74aafb11"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d0/de7/structnifti__image.html">nifti_image</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d14/nifti1__io_8c.html#ab18d6d70c046482f92fb802b74aafb11">nifti_make_new_nim</a> (const int dims[], int datatype, int data_fill)</td></tr>
<tr class="separator:ab18d6d70c046482f92fb802b74aafb11"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad1d2054b280d453c7bf680fc21b587a3"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../dd/d75/structnifti__1__header.html">nifti_1_header</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d14/nifti1__io_8c.html#ad1d2054b280d453c7bf680fc21b587a3">nifti_convert_nim2nhdr</a> (const <a class="el" href="../../d0/de7/structnifti__image.html">nifti_image</a> *nim)</td></tr>
<tr class="separator:ad1d2054b280d453c7bf680fc21b587a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a09f349a4065872bb274e95fe2a13b727"><td class="memItemLeft" align="right" valign="top"><a id="a09f349a4065872bb274e95fe2a13b727"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>nifti_copy_extensions</b> (<a class="el" href="../../d0/de7/structnifti__image.html">nifti_image</a> *nim_dest, const <a class="el" href="../../d0/de7/structnifti__image.html">nifti_image</a> *nim_src)</td></tr>
<tr class="separator:a09f349a4065872bb274e95fe2a13b727"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acd2f650ca248b801fb9b412c9cda0ae8"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d14/nifti1__io_8c.html#acd2f650ca248b801fb9b412c9cda0ae8">nifti_extension_size</a> (<a class="el" href="../../d0/de7/structnifti__image.html">nifti_image</a> *nim)</td></tr>
<tr class="separator:acd2f650ca248b801fb9b412c9cda0ae8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af37b47d8dcd832f0a2ea9758001ac622"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d14/nifti1__io_8c.html#af37b47d8dcd832f0a2ea9758001ac622">nifti_set_iname_offset</a> (<a class="el" href="../../d0/de7/structnifti__image.html">nifti_image</a> *nim)</td></tr>
<tr class="separator:af37b47d8dcd832f0a2ea9758001ac622"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a05ad147bd1f78fe6790ef1dc93278712"><td class="memItemLeft" align="right" valign="top">znzFile&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d14/nifti1__io_8c.html#a05ad147bd1f78fe6790ef1dc93278712">nifti_image_write_hdr_img</a> (<a class="el" href="../../d0/de7/structnifti__image.html">nifti_image</a> *nim, int write_data, const char *opts)</td></tr>
<tr class="separator:a05ad147bd1f78fe6790ef1dc93278712"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a23ba2ececf435189365329d11d138a24"><td class="memItemLeft" align="right" valign="top">znzFile&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d14/nifti1__io_8c.html#a23ba2ececf435189365329d11d138a24">nifti_image_write_hdr_img2</a> (<a class="el" href="../../d0/de7/structnifti__image.html">nifti_image</a> *nim, int write_opts, const char *opts, znzFile imgfile, const <a class="el" href="../../d1/dba/structnifti__brick__list.html">nifti_brick_list</a> *NBL)</td></tr>
<tr class="separator:a23ba2ececf435189365329d11d138a24"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad66767a91af38b906c955fb45b9e225b"><td class="memItemLeft" align="right" valign="top">znzFile&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d14/nifti1__io_8c.html#ad66767a91af38b906c955fb45b9e225b">nifti_write_ascii_image</a> (<a class="el" href="../../d0/de7/structnifti__image.html">nifti_image</a> *nim, const <a class="el" href="../../d1/dba/structnifti__brick__list.html">nifti_brick_list</a> *NBL, const char *opts, int write_data, int leave_open)</td></tr>
<tr class="separator:ad66767a91af38b906c955fb45b9e225b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aae590e6d7a9f46f6f8f454c00b6698bf"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d14/nifti1__io_8c.html#aae590e6d7a9f46f6f8f454c00b6698bf">nifti_image_write</a> (<a class="el" href="../../d0/de7/structnifti__image.html">nifti_image</a> *nim)</td></tr>
<tr class="separator:aae590e6d7a9f46f6f8f454c00b6698bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8864ea68cc4a23ce82f3bb4b545243ca"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d14/nifti1__io_8c.html#a8864ea68cc4a23ce82f3bb4b545243ca">nifti_image_write_bricks</a> (<a class="el" href="../../d0/de7/structnifti__image.html">nifti_image</a> *nim, const <a class="el" href="../../d1/dba/structnifti__brick__list.html">nifti_brick_list</a> *NBL)</td></tr>
<tr class="separator:a8864ea68cc4a23ce82f3bb4b545243ca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a795557a96c6144716d0636879cf02bd5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d0/de7/structnifti__image.html">nifti_image</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d14/nifti1__io_8c.html#a795557a96c6144716d0636879cf02bd5">nifti_copy_nim_info</a> (const <a class="el" href="../../d0/de7/structnifti__image.html">nifti_image</a> *src)</td></tr>
<tr class="separator:a795557a96c6144716d0636879cf02bd5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1edffc55474a393f60573a1fc6ef5544"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d14/nifti1__io_8c.html#a1edffc55474a393f60573a1fc6ef5544">nifti_image_to_ascii</a> (const <a class="el" href="../../d0/de7/structnifti__image.html">nifti_image</a> *nim)</td></tr>
<tr class="separator:a1edffc55474a393f60573a1fc6ef5544"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adf2a70eac549a80a246d380240a8d822"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d14/nifti1__io_8c.html#adf2a70eac549a80a246d380240a8d822">nifti_short_order</a> (void)</td></tr>
<tr class="separator:adf2a70eac549a80a246d380240a8d822"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a645c453f65af3a1ff1be3081ed34b49e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d0/de7/structnifti__image.html">nifti_image</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d14/nifti1__io_8c.html#a645c453f65af3a1ff1be3081ed34b49e">nifti_image_from_ascii</a> (const char *str, int *bytes_read)</td></tr>
<tr class="separator:a645c453f65af3a1ff1be3081ed34b49e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8cb200f44ed38709f534827ecf0aebed"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d14/nifti1__io_8c.html#a8cb200f44ed38709f534827ecf0aebed">nifti_nim_is_valid</a> (<a class="el" href="../../d0/de7/structnifti__image.html">nifti_image</a> *nim, int complain)</td></tr>
<tr class="separator:a8cb200f44ed38709f534827ecf0aebed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad9d44ba79bad0716b08d2888c5874012"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d14/nifti1__io_8c.html#ad9d44ba79bad0716b08d2888c5874012">nifti_nim_has_valid_dims</a> (<a class="el" href="../../d0/de7/structnifti__image.html">nifti_image</a> *nim, int complain)</td></tr>
<tr class="separator:ad9d44ba79bad0716b08d2888c5874012"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6932258d1d9e2ed4afd94eac5c13a5d7"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d14/nifti1__io_8c.html#a6932258d1d9e2ed4afd94eac5c13a5d7">nifti_read_collapsed_image</a> (<a class="el" href="../../d0/de7/structnifti__image.html">nifti_image</a> *nim, const int dims [8], void **data)</td></tr>
<tr class="separator:a6932258d1d9e2ed4afd94eac5c13a5d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ade275c37bf3a8ea203d30ac8d6a43f18"><td class="memItemLeft" align="right" valign="top"><a id="ade275c37bf3a8ea203d30ac8d6a43f18"></a>
static void&#160;</td><td class="memItemRight" valign="bottom"><b>compute_strides</b> (int *strides, const int *size, int nbyper)</td></tr>
<tr class="separator:ade275c37bf3a8ea203d30ac8d6a43f18"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a29be9ec9401b961191b3641055867387"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d14/nifti1__io_8c.html#a29be9ec9401b961191b3641055867387">nifti_read_subregion_image</a> (<a class="el" href="../../d0/de7/structnifti__image.html">nifti_image</a> *nim, int *start_index, int *region_size, void **data)</td></tr>
<tr class="separator:a29be9ec9401b961191b3641055867387"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af07be076f40f7b4bd284488221c6d26f"><td class="memItemLeft" align="right" valign="top">int *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d14/nifti1__io_8c.html#af07be076f40f7b4bd284488221c6d26f">nifti_get_intlist</a> (int nvals, const char *str)</td></tr>
<tr class="separator:af07be076f40f7b4bd284488221c6d26f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad43861b84225c2e9ad861ddada7a6041"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d14/nifti1__io_8c.html#ad43861b84225c2e9ad861ddada7a6041">nifti_datatype_from_string</a> (const char *name)</td></tr>
<tr class="separator:ad43861b84225c2e9ad861ddada7a6041"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9d6ade79714c193d2ab7bfa6301619c4"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d14/nifti1__io_8c.html#a9d6ade79714c193d2ab7bfa6301619c4">nifti_datatype_to_string</a> (int dtype)</td></tr>
<tr class="separator:a9d6ade79714c193d2ab7bfa6301619c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a56b62ecbde8ff299d1911abe1f5961f3"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d14/nifti1__io_8c.html#a56b62ecbde8ff299d1911abe1f5961f3">nifti_datatype_is_valid</a> (int dtype, int for_nifti)</td></tr>
<tr class="separator:a56b62ecbde8ff299d1911abe1f5961f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af31bef0754f87cbc281f3db357314e0c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d14/nifti1__io_8c.html#af31bef0754f87cbc281f3db357314e0c">nifti_test_datatype_sizes</a> (int verb)</td></tr>
<tr class="separator:af31bef0754f87cbc281f3db357314e0c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaa80306264031fb13a769618e5fdb278"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d14/nifti1__io_8c.html#aaa80306264031fb13a769618e5fdb278">nifti_disp_type_list</a> (int which)</td></tr>
<tr class="separator:aaa80306264031fb13a769618e5fdb278"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:acc75a1d8e7f1941d286aa0a41e2b8bdd"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d14/nifti1__io_8c.html#acc75a1d8e7f1941d286aa0a41e2b8bdd">gni_history</a> []</td></tr>
<tr class="separator:acc75a1d8e7f1941d286aa0a41e2b8bdd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a302d793722030c31c9e19661816622a1"><td class="memItemLeft" align="right" valign="top"><a id="a302d793722030c31c9e19661816622a1"></a>
static char&#160;</td><td class="memItemRight" valign="bottom"><b>gni_version</b> [] = &quot;nifti library version 1.43 (7 July, 2010)&quot;</td></tr>
<tr class="separator:a302d793722030c31c9e19661816622a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6e047e1dc2f826a4adff048bee8f5df7"><td class="memItemLeft" align="right" valign="top">static nifti_global_options&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a></td></tr>
<tr class="separator:a6e047e1dc2f826a4adff048bee8f5df7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:add56f2785b8987898a86fab47fdbe21b"><td class="memItemLeft" align="right" valign="top">static nifti_type_ele&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d14/nifti1__io_8c.html#add56f2785b8987898a86fab47fdbe21b">nifti_type_list</a> []</td></tr>
<tr class="separator:add56f2785b8987898a86fab47fdbe21b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="adb36b06f4bb37bb8679f2802a8379cc2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adb36b06f4bb37bb8679f2802a8379cc2">&#9670;&nbsp;</a></span>ERREX <span class="overload">[1/3]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ERREX</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">msg</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line"><span class="keywordflow">do</span>{ fprintf(stderr,<span class="stringliteral">&quot;** ERROR: nifti_convert_nhdr2nim: %s\n&quot;</span>, (msg) ) ;  \</div><div class="line">     return NULL ; } <span class="keywordflow">while</span>(0)</div></div><!-- fragment -->
</div>
</div>
<a id="adb36b06f4bb37bb8679f2802a8379cc2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adb36b06f4bb37bb8679f2802a8379cc2">&#9670;&nbsp;</a></span>ERREX <span class="overload">[2/3]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ERREX</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">msg</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line"><span class="keywordflow">do</span>{ fprintf(stderr,<span class="stringliteral">&quot;** ERROR: nifti_image_open(%s): %s\n&quot;</span>,  \</div><div class="line">             (hname != NULL) ? hname : <span class="stringliteral">&quot;(null)&quot;</span> , (msg) ) ;  \</div><div class="line">     return fptr ; } <span class="keywordflow">while</span>(0)</div></div><!-- fragment -->
</div>
</div>
<a id="adb36b06f4bb37bb8679f2802a8379cc2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adb36b06f4bb37bb8679f2802a8379cc2">&#9670;&nbsp;</a></span>ERREX <span class="overload">[3/3]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ERREX</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">msg</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line"><span class="keywordflow">do</span>{ fprintf(stderr,<span class="stringliteral">&quot;** ERROR: nifti_image_write_hdr_img: %s\n&quot;</span>,(msg)) ;  \</div><div class="line">     return fp ; } <span class="keywordflow">while</span>(0)</div></div><!-- fragment -->
</div>
</div>
<a id="a16c52f11f247cdfa73aa1d651cf4354b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a16c52f11f247cdfa73aa1d651cf4354b">&#9670;&nbsp;</a></span>QSTR</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define QSTR</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">nam, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">ml&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line"><span class="keywordflow">if</span>( strcmp(lhs,#nam) == 0 )                           \</div><div class="line">                       strncpy(nim-&gt;nam,rhs,ml), nim-&gt;nam[ml]=<span class="charliteral">&#39;\0&#39;</span></div></div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="af9d6192cbeeb85cde0a3c41acf9c2208"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af9d6192cbeeb85cde0a3c41acf9c2208">&#9670;&nbsp;</a></span>disp_nifti_1_header()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int disp_nifti_1_header </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../dd/d75/structnifti__1__header.html">nifti_1_header</a> *&#160;</td>
          <td class="paramname"><em>hp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>display the contents of the <a class="el" href="../../dd/d75/structnifti__1__header.html" title="Data structure defining the fields in the nifti1 header. This binary header should be found at the be...">nifti_1_header</a> (send to stdout)</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">info</td><td>if non-NULL, print this character string </td></tr>
    <tr><td class="paramname">hp</td><td>pointer to <a class="el" href="../../dd/d75/structnifti__1__header.html" title="Data structure defining the fields in the nifti1 header. This binary header should be found at the be...">nifti_1_header</a> </td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><div class="line"><a name="l03506"></a><span class="lineno"> 3506</span>&#160;{</div><div class="line"><a name="l03507"></a><span class="lineno"> 3507</span>&#160;   <span class="keywordtype">int</span> c;</div><div class="line"><a name="l03508"></a><span class="lineno"> 3508</span>&#160;</div><div class="line"><a name="l03509"></a><span class="lineno"> 3509</span>&#160;   fputs( <span class="stringliteral">&quot;-------------------------------------------------------\n&quot;</span>, stdout );</div><div class="line"><a name="l03510"></a><span class="lineno"> 3510</span>&#160;   <span class="keywordflow">if</span> ( info )  fputs( info, stdout );</div><div class="line"><a name="l03511"></a><span class="lineno"> 3511</span>&#160;   <span class="keywordflow">if</span> ( !hp  ){ fputs(<span class="stringliteral">&quot; ** no nifti_1_header to display!\n&quot;</span>,stdout); <span class="keywordflow">return</span> 1; }</div><div class="line"><a name="l03512"></a><span class="lineno"> 3512</span>&#160;</div><div class="line"><a name="l03513"></a><span class="lineno"> 3513</span>&#160;   fprintf(stdout,<span class="stringliteral">&quot; nifti_1_header :\n&quot;</span></div><div class="line"><a name="l03514"></a><span class="lineno"> 3514</span>&#160;           <span class="stringliteral">&quot;    sizeof_hdr     = %d\n&quot;</span></div><div class="line"><a name="l03515"></a><span class="lineno"> 3515</span>&#160;           <span class="stringliteral">&quot;    data_type[10]  = &quot;</span>, hp-&gt;<a class="code" href="../../dd/d75/structnifti__1__header.html#af1d99efbd3af0180f9335cbb1b822248">sizeof_hdr</a>);</div><div class="line"><a name="l03516"></a><span class="lineno"> 3516</span>&#160;   print_hex_vals(hp-&gt;<a class="code" href="../../dd/d75/structnifti__1__header.html#ae42d74b56440de615e0fac8ee0b97270">data_type</a>, 10, stdout);</div><div class="line"><a name="l03517"></a><span class="lineno"> 3517</span>&#160;   fprintf(stdout, <span class="stringliteral">&quot;\n&quot;</span></div><div class="line"><a name="l03518"></a><span class="lineno"> 3518</span>&#160;           <span class="stringliteral">&quot;    db_name[18]    = &quot;</span>);</div><div class="line"><a name="l03519"></a><span class="lineno"> 3519</span>&#160;   print_hex_vals(hp-&gt;<a class="code" href="../../dd/d75/structnifti__1__header.html#a8e11f9c2255109c60b0ffc86f352ed42">db_name</a>, 18, stdout);</div><div class="line"><a name="l03520"></a><span class="lineno"> 3520</span>&#160;   fprintf(stdout, <span class="stringliteral">&quot;\n&quot;</span></div><div class="line"><a name="l03521"></a><span class="lineno"> 3521</span>&#160;           <span class="stringliteral">&quot;    extents        = %d\n&quot;</span></div><div class="line"><a name="l03522"></a><span class="lineno"> 3522</span>&#160;           <span class="stringliteral">&quot;    session_error  = %d\n&quot;</span></div><div class="line"><a name="l03523"></a><span class="lineno"> 3523</span>&#160;           <span class="stringliteral">&quot;    regular        = 0x%x\n&quot;</span></div><div class="line"><a name="l03524"></a><span class="lineno"> 3524</span>&#160;           <span class="stringliteral">&quot;    dim_info       = 0x%x\n&quot;</span>,</div><div class="line"><a name="l03525"></a><span class="lineno"> 3525</span>&#160;      hp-&gt;<a class="code" href="../../dd/d75/structnifti__1__header.html#ab37ea6af93cab84f95d97ee4fdbc3f4d">extents</a>, hp-&gt;<a class="code" href="../../dd/d75/structnifti__1__header.html#a1011d5320abdedcb710552cae92f86db">session_error</a>, hp-&gt;<a class="code" href="../../dd/d75/structnifti__1__header.html#acd9cfc4f9d1117a803c4a619132583d7">regular</a>, hp-&gt;<a class="code" href="../../dd/d75/structnifti__1__header.html#a7d3eb58a5415d9c65f3df444ac94fc74">dim_info</a> );</div><div class="line"><a name="l03526"></a><span class="lineno"> 3526</span>&#160;   fprintf(stdout, <span class="stringliteral">&quot;    dim[8]         =&quot;</span>);</div><div class="line"><a name="l03527"></a><span class="lineno"> 3527</span>&#160;   <span class="keywordflow">for</span> ( c = 0; c &lt; 8; c++ ) fprintf(stdout,<span class="stringliteral">&quot; %d&quot;</span>, hp-&gt;<a class="code" href="../../dd/d75/structnifti__1__header.html#ace3aeebb3c10362c5c2e48cee87a7f2e">dim</a>[c]);</div><div class="line"><a name="l03528"></a><span class="lineno"> 3528</span>&#160;   fprintf(stdout, <span class="stringliteral">&quot;\n&quot;</span></div><div class="line"><a name="l03529"></a><span class="lineno"> 3529</span>&#160;           <span class="stringliteral">&quot;    intent_p1      = %f\n&quot;</span></div><div class="line"><a name="l03530"></a><span class="lineno"> 3530</span>&#160;           <span class="stringliteral">&quot;    intent_p2      = %f\n&quot;</span></div><div class="line"><a name="l03531"></a><span class="lineno"> 3531</span>&#160;           <span class="stringliteral">&quot;    intent_p3      = %f\n&quot;</span></div><div class="line"><a name="l03532"></a><span class="lineno"> 3532</span>&#160;           <span class="stringliteral">&quot;    intent_code    = %d\n&quot;</span></div><div class="line"><a name="l03533"></a><span class="lineno"> 3533</span>&#160;           <span class="stringliteral">&quot;    datatype       = %d\n&quot;</span></div><div class="line"><a name="l03534"></a><span class="lineno"> 3534</span>&#160;           <span class="stringliteral">&quot;    bitpix         = %d\n&quot;</span></div><div class="line"><a name="l03535"></a><span class="lineno"> 3535</span>&#160;           <span class="stringliteral">&quot;    slice_start    = %d\n&quot;</span></div><div class="line"><a name="l03536"></a><span class="lineno"> 3536</span>&#160;           <span class="stringliteral">&quot;    pixdim[8]      =&quot;</span>,</div><div class="line"><a name="l03537"></a><span class="lineno"> 3537</span>&#160;           hp-&gt;<a class="code" href="../../dd/d75/structnifti__1__header.html#a5c875c40271c15601b3389450fba85b3">intent_p1</a>, hp-&gt;<a class="code" href="../../dd/d75/structnifti__1__header.html#ab39ee04eb345e95dd4e5183e0f84c02b">intent_p2</a>, hp-&gt;<a class="code" href="../../dd/d75/structnifti__1__header.html#aa1eeee8a4cd325b413c5d368ec8fc534">intent_p3</a>, hp-&gt;<a class="code" href="../../dd/d75/structnifti__1__header.html#a017e9d430b66386e569c6b9cd11059ed">intent_code</a>,</div><div class="line"><a name="l03538"></a><span class="lineno"> 3538</span>&#160;           hp-&gt;<a class="code" href="../../dd/d75/structnifti__1__header.html#ad5f8888fcc5fde14d3e387653721e270">datatype</a>, hp-&gt;<a class="code" href="../../dd/d75/structnifti__1__header.html#a60fc36ed5afd638fd7da425ad7ecae94">bitpix</a>, hp-&gt;<a class="code" href="../../dd/d75/structnifti__1__header.html#adc0e937b2b556da163772b20da729778">slice_start</a>);</div><div class="line"><a name="l03539"></a><span class="lineno"> 3539</span>&#160;   <span class="comment">/* break pixdim over 2 lines */</span></div><div class="line"><a name="l03540"></a><span class="lineno"> 3540</span>&#160;   <span class="keywordflow">for</span> ( c = 0; c &lt; 4; c++ ) fprintf(stdout,<span class="stringliteral">&quot; %f&quot;</span>, hp-&gt;<a class="code" href="../../dd/d75/structnifti__1__header.html#afa546a9f49e7e080f952927d6bcdfbbe">pixdim</a>[c]);</div><div class="line"><a name="l03541"></a><span class="lineno"> 3541</span>&#160;   fprintf(stdout, <span class="stringliteral">&quot;\n                    &quot;</span>);</div><div class="line"><a name="l03542"></a><span class="lineno"> 3542</span>&#160;   <span class="keywordflow">for</span> ( c = 4; c &lt; 8; c++ ) fprintf(stdout,<span class="stringliteral">&quot; %f&quot;</span>, hp-&gt;<a class="code" href="../../dd/d75/structnifti__1__header.html#afa546a9f49e7e080f952927d6bcdfbbe">pixdim</a>[c]);</div><div class="line"><a name="l03543"></a><span class="lineno"> 3543</span>&#160;   fprintf(stdout, <span class="stringliteral">&quot;\n&quot;</span></div><div class="line"><a name="l03544"></a><span class="lineno"> 3544</span>&#160;           <span class="stringliteral">&quot;    vox_offset     = %f\n&quot;</span></div><div class="line"><a name="l03545"></a><span class="lineno"> 3545</span>&#160;           <span class="stringliteral">&quot;    scl_slope      = %f\n&quot;</span></div><div class="line"><a name="l03546"></a><span class="lineno"> 3546</span>&#160;           <span class="stringliteral">&quot;    scl_inter      = %f\n&quot;</span></div><div class="line"><a name="l03547"></a><span class="lineno"> 3547</span>&#160;           <span class="stringliteral">&quot;    slice_end      = %d\n&quot;</span></div><div class="line"><a name="l03548"></a><span class="lineno"> 3548</span>&#160;           <span class="stringliteral">&quot;    slice_code     = %d\n&quot;</span></div><div class="line"><a name="l03549"></a><span class="lineno"> 3549</span>&#160;           <span class="stringliteral">&quot;    xyzt_units     = 0x%x\n&quot;</span></div><div class="line"><a name="l03550"></a><span class="lineno"> 3550</span>&#160;           <span class="stringliteral">&quot;    cal_max        = %f\n&quot;</span></div><div class="line"><a name="l03551"></a><span class="lineno"> 3551</span>&#160;           <span class="stringliteral">&quot;    cal_min        = %f\n&quot;</span></div><div class="line"><a name="l03552"></a><span class="lineno"> 3552</span>&#160;           <span class="stringliteral">&quot;    slice_duration = %f\n&quot;</span></div><div class="line"><a name="l03553"></a><span class="lineno"> 3553</span>&#160;           <span class="stringliteral">&quot;    toffset        = %f\n&quot;</span></div><div class="line"><a name="l03554"></a><span class="lineno"> 3554</span>&#160;           <span class="stringliteral">&quot;    glmax          = %d\n&quot;</span></div><div class="line"><a name="l03555"></a><span class="lineno"> 3555</span>&#160;           <span class="stringliteral">&quot;    glmin          = %d\n&quot;</span>,</div><div class="line"><a name="l03556"></a><span class="lineno"> 3556</span>&#160;           hp-&gt;<a class="code" href="../../dd/d75/structnifti__1__header.html#aa3a09932cda88dd765a438c9b9c46503">vox_offset</a>, hp-&gt;<a class="code" href="../../dd/d75/structnifti__1__header.html#a45a97dd330a77ab680ef91c47a761c29">scl_slope</a>, hp-&gt;<a class="code" href="../../dd/d75/structnifti__1__header.html#aca24a8965851296a63d13da6c7cc3456">scl_inter</a>, hp-&gt;<a class="code" href="../../dd/d75/structnifti__1__header.html#a260d55840377fe1bcfb49bda5f85b76c">slice_end</a>,</div><div class="line"><a name="l03557"></a><span class="lineno"> 3557</span>&#160;           hp-&gt;<a class="code" href="../../dd/d75/structnifti__1__header.html#af25a6170a90128800e3986b68fc79e4d">slice_code</a>, hp-&gt;<a class="code" href="../../dd/d75/structnifti__1__header.html#a6b95dab630916801b716f52513305e93">xyzt_units</a>, hp-&gt;<a class="code" href="../../dd/d75/structnifti__1__header.html#af415db2201f47d61354766245c3f2520">cal_max</a>, hp-&gt;<a class="code" href="../../dd/d75/structnifti__1__header.html#a600fb5b0c533454bbbc61b2e0696c9a8">cal_min</a>,</div><div class="line"><a name="l03558"></a><span class="lineno"> 3558</span>&#160;           hp-&gt;<a class="code" href="../../dd/d75/structnifti__1__header.html#a70400549d1f42d7f777915273576549b">slice_duration</a>, hp-&gt;<a class="code" href="../../dd/d75/structnifti__1__header.html#a0d2b669f776a2b7fb84807ea2f7b4231">toffset</a>, hp-&gt;<a class="code" href="../../dd/d75/structnifti__1__header.html#a07e91b15b45a914b71ff41f93fe64e56">glmax</a>, hp-&gt;<a class="code" href="../../dd/d75/structnifti__1__header.html#acc037ae9773f9e79333f0927ed3a38ce">glmin</a>);</div><div class="line"><a name="l03559"></a><span class="lineno"> 3559</span>&#160;   fprintf(stdout,</div><div class="line"><a name="l03560"></a><span class="lineno"> 3560</span>&#160;           <span class="stringliteral">&quot;    descrip        = &#39;%.80s&#39;\n&quot;</span></div><div class="line"><a name="l03561"></a><span class="lineno"> 3561</span>&#160;           <span class="stringliteral">&quot;    aux_file       = &#39;%.24s&#39;\n&quot;</span></div><div class="line"><a name="l03562"></a><span class="lineno"> 3562</span>&#160;           <span class="stringliteral">&quot;    qform_code     = %d\n&quot;</span></div><div class="line"><a name="l03563"></a><span class="lineno"> 3563</span>&#160;           <span class="stringliteral">&quot;    sform_code     = %d\n&quot;</span></div><div class="line"><a name="l03564"></a><span class="lineno"> 3564</span>&#160;           <span class="stringliteral">&quot;    quatern_b      = %f\n&quot;</span></div><div class="line"><a name="l03565"></a><span class="lineno"> 3565</span>&#160;           <span class="stringliteral">&quot;    quatern_c      = %f\n&quot;</span></div><div class="line"><a name="l03566"></a><span class="lineno"> 3566</span>&#160;           <span class="stringliteral">&quot;    quatern_d      = %f\n&quot;</span></div><div class="line"><a name="l03567"></a><span class="lineno"> 3567</span>&#160;           <span class="stringliteral">&quot;    qoffset_x      = %f\n&quot;</span></div><div class="line"><a name="l03568"></a><span class="lineno"> 3568</span>&#160;           <span class="stringliteral">&quot;    qoffset_y      = %f\n&quot;</span></div><div class="line"><a name="l03569"></a><span class="lineno"> 3569</span>&#160;           <span class="stringliteral">&quot;    qoffset_z      = %f\n&quot;</span></div><div class="line"><a name="l03570"></a><span class="lineno"> 3570</span>&#160;           <span class="stringliteral">&quot;    srow_x[4]      = %f, %f, %f, %f\n&quot;</span></div><div class="line"><a name="l03571"></a><span class="lineno"> 3571</span>&#160;           <span class="stringliteral">&quot;    srow_y[4]      = %f, %f, %f, %f\n&quot;</span></div><div class="line"><a name="l03572"></a><span class="lineno"> 3572</span>&#160;           <span class="stringliteral">&quot;    srow_z[4]      = %f, %f, %f, %f\n&quot;</span></div><div class="line"><a name="l03573"></a><span class="lineno"> 3573</span>&#160;           <span class="stringliteral">&quot;    intent_name    = &#39;%-.16s&#39;\n&quot;</span></div><div class="line"><a name="l03574"></a><span class="lineno"> 3574</span>&#160;           <span class="stringliteral">&quot;    magic          = &#39;%-.4s&#39;\n&quot;</span>,</div><div class="line"><a name="l03575"></a><span class="lineno"> 3575</span>&#160;           hp-&gt;<a class="code" href="../../dd/d75/structnifti__1__header.html#a9cba1416b512dc30a93f8a2964626e5b">descrip</a>, hp-&gt;<a class="code" href="../../dd/d75/structnifti__1__header.html#a3259014f48a26b81d606ff5017de5c2c">aux_file</a>, hp-&gt;<a class="code" href="../../dd/d75/structnifti__1__header.html#a95ae85e5e0bba57c4b3cbd8a0b32168b">qform_code</a>, hp-&gt;<a class="code" href="../../dd/d75/structnifti__1__header.html#a48d14671528f3dfe0593320006877a8a">sform_code</a>,</div><div class="line"><a name="l03576"></a><span class="lineno"> 3576</span>&#160;           hp-&gt;<a class="code" href="../../dd/d75/structnifti__1__header.html#a530588bf405af52255dc064a6f451c71">quatern_b</a>, hp-&gt;<a class="code" href="../../dd/d75/structnifti__1__header.html#a3ade0b01649a3d990ee1dfdef8c452c4">quatern_c</a>, hp-&gt;<a class="code" href="../../dd/d75/structnifti__1__header.html#af47d0d4ae23f57441edcef9594fd1495">quatern_d</a>,</div><div class="line"><a name="l03577"></a><span class="lineno"> 3577</span>&#160;           hp-&gt;<a class="code" href="../../dd/d75/structnifti__1__header.html#a6fbfa89133238e59e6220e0b778c93ef">qoffset_x</a>, hp-&gt;<a class="code" href="../../dd/d75/structnifti__1__header.html#a5cfb257cbd7a4b7dde2350877cd126c5">qoffset_y</a>, hp-&gt;<a class="code" href="../../dd/d75/structnifti__1__header.html#a962002307f10b359788cea98ebcb40b6">qoffset_z</a>,</div><div class="line"><a name="l03578"></a><span class="lineno"> 3578</span>&#160;           hp-&gt;<a class="code" href="../../dd/d75/structnifti__1__header.html#ab672320f8968eb98b208b340c87515ba">srow_x</a>[0], hp-&gt;<a class="code" href="../../dd/d75/structnifti__1__header.html#ab672320f8968eb98b208b340c87515ba">srow_x</a>[1], hp-&gt;<a class="code" href="../../dd/d75/structnifti__1__header.html#ab672320f8968eb98b208b340c87515ba">srow_x</a>[2], hp-&gt;<a class="code" href="../../dd/d75/structnifti__1__header.html#ab672320f8968eb98b208b340c87515ba">srow_x</a>[3],</div><div class="line"><a name="l03579"></a><span class="lineno"> 3579</span>&#160;           hp-&gt;<a class="code" href="../../dd/d75/structnifti__1__header.html#ae5572284c9945360d4fa5c3b4e734a99">srow_y</a>[0], hp-&gt;<a class="code" href="../../dd/d75/structnifti__1__header.html#ae5572284c9945360d4fa5c3b4e734a99">srow_y</a>[1], hp-&gt;<a class="code" href="../../dd/d75/structnifti__1__header.html#ae5572284c9945360d4fa5c3b4e734a99">srow_y</a>[2], hp-&gt;<a class="code" href="../../dd/d75/structnifti__1__header.html#ae5572284c9945360d4fa5c3b4e734a99">srow_y</a>[3],</div><div class="line"><a name="l03580"></a><span class="lineno"> 3580</span>&#160;           hp-&gt;<a class="code" href="../../dd/d75/structnifti__1__header.html#ac2cbc8f49e749336687f095733d0b4a3">srow_z</a>[0], hp-&gt;<a class="code" href="../../dd/d75/structnifti__1__header.html#ac2cbc8f49e749336687f095733d0b4a3">srow_z</a>[1], hp-&gt;<a class="code" href="../../dd/d75/structnifti__1__header.html#ac2cbc8f49e749336687f095733d0b4a3">srow_z</a>[2], hp-&gt;<a class="code" href="../../dd/d75/structnifti__1__header.html#ac2cbc8f49e749336687f095733d0b4a3">srow_z</a>[3],</div><div class="line"><a name="l03581"></a><span class="lineno"> 3581</span>&#160;           hp-&gt;<a class="code" href="../../dd/d75/structnifti__1__header.html#a6932fdbc1090aa2682eff0131ad52401">intent_name</a>, hp-&gt;<a class="code" href="../../dd/d75/structnifti__1__header.html#a5937e065e772aed3e49608b27db0c466">magic</a>);</div><div class="line"><a name="l03582"></a><span class="lineno"> 3582</span>&#160;   fputs( <span class="stringliteral">&quot;-------------------------------------------------------\n&quot;</span>, stdout );</div><div class="line"><a name="l03583"></a><span class="lineno"> 3583</span>&#160;   fflush(stdout);</div><div class="line"><a name="l03584"></a><span class="lineno"> 3584</span>&#160;</div><div class="line"><a name="l03585"></a><span class="lineno"> 3585</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03586"></a><span class="lineno"> 3586</span>&#160;}</div><div class="ttc" id="structnifti__1__header_html_acc037ae9773f9e79333f0927ed3a38ce"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#acc037ae9773f9e79333f0927ed3a38ce">nifti_1_header::glmin</a></div><div class="ttdeci">int glmin</div><div class="ttdef"><b>Definition:</b> nifti1.h:180</div></div>
<div class="ttc" id="structnifti__1__header_html_a1011d5320abdedcb710552cae92f86db"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#a1011d5320abdedcb710552cae92f86db">nifti_1_header::session_error</a></div><div class="ttdeci">short session_error</div><div class="ttdef"><b>Definition:</b> nifti1.h:152</div></div>
<div class="ttc" id="structnifti__1__header_html_a07e91b15b45a914b71ff41f93fe64e56"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#a07e91b15b45a914b71ff41f93fe64e56">nifti_1_header::glmax</a></div><div class="ttdeci">int glmax</div><div class="ttdef"><b>Definition:</b> nifti1.h:179</div></div>
<div class="ttc" id="structnifti__1__header_html_aca24a8965851296a63d13da6c7cc3456"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#aca24a8965851296a63d13da6c7cc3456">nifti_1_header::scl_inter</a></div><div class="ttdeci">float scl_inter</div><div class="ttdef"><b>Definition:</b> nifti1.h:171</div></div>
<div class="ttc" id="structnifti__1__header_html_af1d99efbd3af0180f9335cbb1b822248"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#af1d99efbd3af0180f9335cbb1b822248">nifti_1_header::sizeof_hdr</a></div><div class="ttdeci">int sizeof_hdr</div><div class="ttdef"><b>Definition:</b> nifti1.h:148</div></div>
<div class="ttc" id="structnifti__1__header_html_a6fbfa89133238e59e6220e0b778c93ef"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#a6fbfa89133238e59e6220e0b778c93ef">nifti_1_header::qoffset_x</a></div><div class="ttdeci">float qoffset_x</div><div class="ttdef"><b>Definition:</b> nifti1.h:192</div></div>
<div class="ttc" id="structnifti__1__header_html_a5cfb257cbd7a4b7dde2350877cd126c5"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#a5cfb257cbd7a4b7dde2350877cd126c5">nifti_1_header::qoffset_y</a></div><div class="ttdeci">float qoffset_y</div><div class="ttdef"><b>Definition:</b> nifti1.h:193</div></div>
<div class="ttc" id="structnifti__1__header_html_a60fc36ed5afd638fd7da425ad7ecae94"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#a60fc36ed5afd638fd7da425ad7ecae94">nifti_1_header::bitpix</a></div><div class="ttdeci">short bitpix</div><div class="ttdef"><b>Definition:</b> nifti1.h:166</div></div>
<div class="ttc" id="structnifti__1__header_html_a7d3eb58a5415d9c65f3df444ac94fc74"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#a7d3eb58a5415d9c65f3df444ac94fc74">nifti_1_header::dim_info</a></div><div class="ttdeci">char dim_info</div><div class="ttdef"><b>Definition:</b> nifti1.h:154</div></div>
<div class="ttc" id="structnifti__1__header_html_a3ade0b01649a3d990ee1dfdef8c452c4"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#a3ade0b01649a3d990ee1dfdef8c452c4">nifti_1_header::quatern_c</a></div><div class="ttdeci">float quatern_c</div><div class="ttdef"><b>Definition:</b> nifti1.h:190</div></div>
<div class="ttc" id="structnifti__1__header_html_a9cba1416b512dc30a93f8a2964626e5b"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#a9cba1416b512dc30a93f8a2964626e5b">nifti_1_header::descrip</a></div><div class="ttdeci">char descrip[80]</div><div class="ttdef"><b>Definition:</b> nifti1.h:183</div></div>
<div class="ttc" id="structnifti__1__header_html_a48d14671528f3dfe0593320006877a8a"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#a48d14671528f3dfe0593320006877a8a">nifti_1_header::sform_code</a></div><div class="ttdeci">short sform_code</div><div class="ttdef"><b>Definition:</b> nifti1.h:187</div></div>
<div class="ttc" id="structnifti__1__header_html_acd9cfc4f9d1117a803c4a619132583d7"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#acd9cfc4f9d1117a803c4a619132583d7">nifti_1_header::regular</a></div><div class="ttdeci">char regular</div><div class="ttdef"><b>Definition:</b> nifti1.h:153</div></div>
<div class="ttc" id="structnifti__1__header_html_a600fb5b0c533454bbbc61b2e0696c9a8"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#a600fb5b0c533454bbbc61b2e0696c9a8">nifti_1_header::cal_min</a></div><div class="ttdeci">float cal_min</div><div class="ttdef"><b>Definition:</b> nifti1.h:176</div></div>
<div class="ttc" id="structnifti__1__header_html_ad5f8888fcc5fde14d3e387653721e270"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#ad5f8888fcc5fde14d3e387653721e270">nifti_1_header::datatype</a></div><div class="ttdeci">short datatype</div><div class="ttdef"><b>Definition:</b> nifti1.h:165</div></div>
<div class="ttc" id="structnifti__1__header_html_aa1eeee8a4cd325b413c5d368ec8fc534"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#aa1eeee8a4cd325b413c5d368ec8fc534">nifti_1_header::intent_p3</a></div><div class="ttdeci">float intent_p3</div><div class="ttdef"><b>Definition:</b> nifti1.h:162</div></div>
<div class="ttc" id="structnifti__1__header_html_a017e9d430b66386e569c6b9cd11059ed"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#a017e9d430b66386e569c6b9cd11059ed">nifti_1_header::intent_code</a></div><div class="ttdeci">short intent_code</div><div class="ttdef"><b>Definition:</b> nifti1.h:164</div></div>
<div class="ttc" id="structnifti__1__header_html_ace3aeebb3c10362c5c2e48cee87a7f2e"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#ace3aeebb3c10362c5c2e48cee87a7f2e">nifti_1_header::dim</a></div><div class="ttdeci">short dim[8]</div><div class="ttdef"><b>Definition:</b> nifti1.h:157</div></div>
<div class="ttc" id="structnifti__1__header_html_a6b95dab630916801b716f52513305e93"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#a6b95dab630916801b716f52513305e93">nifti_1_header::xyzt_units</a></div><div class="ttdeci">char xyzt_units</div><div class="ttdef"><b>Definition:</b> nifti1.h:174</div></div>
<div class="ttc" id="structnifti__1__header_html_a8e11f9c2255109c60b0ffc86f352ed42"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#a8e11f9c2255109c60b0ffc86f352ed42">nifti_1_header::db_name</a></div><div class="ttdeci">char db_name[18]</div><div class="ttdef"><b>Definition:</b> nifti1.h:150</div></div>
<div class="ttc" id="structnifti__1__header_html_aa3a09932cda88dd765a438c9b9c46503"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#aa3a09932cda88dd765a438c9b9c46503">nifti_1_header::vox_offset</a></div><div class="ttdeci">float vox_offset</div><div class="ttdef"><b>Definition:</b> nifti1.h:169</div></div>
<div class="ttc" id="structnifti__1__header_html_afa546a9f49e7e080f952927d6bcdfbbe"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#afa546a9f49e7e080f952927d6bcdfbbe">nifti_1_header::pixdim</a></div><div class="ttdeci">float pixdim[8]</div><div class="ttdef"><b>Definition:</b> nifti1.h:168</div></div>
<div class="ttc" id="structnifti__1__header_html_ac2cbc8f49e749336687f095733d0b4a3"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#ac2cbc8f49e749336687f095733d0b4a3">nifti_1_header::srow_z</a></div><div class="ttdeci">float srow_z[4]</div><div class="ttdef"><b>Definition:</b> nifti1.h:198</div></div>
<div class="ttc" id="structnifti__1__header_html_a530588bf405af52255dc064a6f451c71"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#a530588bf405af52255dc064a6f451c71">nifti_1_header::quatern_b</a></div><div class="ttdeci">float quatern_b</div><div class="ttdef"><b>Definition:</b> nifti1.h:189</div></div>
<div class="ttc" id="structnifti__1__header_html_a3259014f48a26b81d606ff5017de5c2c"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#a3259014f48a26b81d606ff5017de5c2c">nifti_1_header::aux_file</a></div><div class="ttdeci">char aux_file[24]</div><div class="ttdef"><b>Definition:</b> nifti1.h:184</div></div>
<div class="ttc" id="structnifti__1__header_html_a95ae85e5e0bba57c4b3cbd8a0b32168b"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#a95ae85e5e0bba57c4b3cbd8a0b32168b">nifti_1_header::qform_code</a></div><div class="ttdeci">short qform_code</div><div class="ttdef"><b>Definition:</b> nifti1.h:186</div></div>
<div class="ttc" id="structnifti__1__header_html_a6932fdbc1090aa2682eff0131ad52401"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#a6932fdbc1090aa2682eff0131ad52401">nifti_1_header::intent_name</a></div><div class="ttdeci">char intent_name[16]</div><div class="ttdef"><b>Definition:</b> nifti1.h:200</div></div>
<div class="ttc" id="structnifti__1__header_html_ab39ee04eb345e95dd4e5183e0f84c02b"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#ab39ee04eb345e95dd4e5183e0f84c02b">nifti_1_header::intent_p2</a></div><div class="ttdeci">float intent_p2</div><div class="ttdef"><b>Definition:</b> nifti1.h:160</div></div>
<div class="ttc" id="structnifti__1__header_html_a5c875c40271c15601b3389450fba85b3"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#a5c875c40271c15601b3389450fba85b3">nifti_1_header::intent_p1</a></div><div class="ttdeci">float intent_p1</div><div class="ttdef"><b>Definition:</b> nifti1.h:158</div></div>
<div class="ttc" id="structnifti__1__header_html_ab37ea6af93cab84f95d97ee4fdbc3f4d"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#ab37ea6af93cab84f95d97ee4fdbc3f4d">nifti_1_header::extents</a></div><div class="ttdeci">int extents</div><div class="ttdef"><b>Definition:</b> nifti1.h:151</div></div>
<div class="ttc" id="structnifti__1__header_html_af415db2201f47d61354766245c3f2520"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#af415db2201f47d61354766245c3f2520">nifti_1_header::cal_max</a></div><div class="ttdeci">float cal_max</div><div class="ttdef"><b>Definition:</b> nifti1.h:175</div></div>
<div class="ttc" id="structnifti__1__header_html_a5937e065e772aed3e49608b27db0c466"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#a5937e065e772aed3e49608b27db0c466">nifti_1_header::magic</a></div><div class="ttdeci">char magic[4]</div><div class="ttdef"><b>Definition:</b> nifti1.h:202</div></div>
<div class="ttc" id="structnifti__1__header_html_adc0e937b2b556da163772b20da729778"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#adc0e937b2b556da163772b20da729778">nifti_1_header::slice_start</a></div><div class="ttdeci">short slice_start</div><div class="ttdef"><b>Definition:</b> nifti1.h:167</div></div>
<div class="ttc" id="structnifti__1__header_html_a45a97dd330a77ab680ef91c47a761c29"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#a45a97dd330a77ab680ef91c47a761c29">nifti_1_header::scl_slope</a></div><div class="ttdeci">float scl_slope</div><div class="ttdef"><b>Definition:</b> nifti1.h:170</div></div>
<div class="ttc" id="structnifti__1__header_html_ae5572284c9945360d4fa5c3b4e734a99"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#ae5572284c9945360d4fa5c3b4e734a99">nifti_1_header::srow_y</a></div><div class="ttdeci">float srow_y[4]</div><div class="ttdef"><b>Definition:</b> nifti1.h:197</div></div>
<div class="ttc" id="structnifti__1__header_html_af47d0d4ae23f57441edcef9594fd1495"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#af47d0d4ae23f57441edcef9594fd1495">nifti_1_header::quatern_d</a></div><div class="ttdeci">float quatern_d</div><div class="ttdef"><b>Definition:</b> nifti1.h:191</div></div>
<div class="ttc" id="structnifti__1__header_html_a0d2b669f776a2b7fb84807ea2f7b4231"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#a0d2b669f776a2b7fb84807ea2f7b4231">nifti_1_header::toffset</a></div><div class="ttdeci">float toffset</div><div class="ttdef"><b>Definition:</b> nifti1.h:178</div></div>
<div class="ttc" id="structnifti__1__header_html_a962002307f10b359788cea98ebcb40b6"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#a962002307f10b359788cea98ebcb40b6">nifti_1_header::qoffset_z</a></div><div class="ttdeci">float qoffset_z</div><div class="ttdef"><b>Definition:</b> nifti1.h:194</div></div>
<div class="ttc" id="structnifti__1__header_html_ab672320f8968eb98b208b340c87515ba"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#ab672320f8968eb98b208b340c87515ba">nifti_1_header::srow_x</a></div><div class="ttdeci">float srow_x[4]</div><div class="ttdef"><b>Definition:</b> nifti1.h:196</div></div>
<div class="ttc" id="structnifti__1__header_html_a260d55840377fe1bcfb49bda5f85b76c"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#a260d55840377fe1bcfb49bda5f85b76c">nifti_1_header::slice_end</a></div><div class="ttdeci">short slice_end</div><div class="ttdef"><b>Definition:</b> nifti1.h:172</div></div>
<div class="ttc" id="structnifti__1__header_html_a70400549d1f42d7f777915273576549b"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#a70400549d1f42d7f777915273576549b">nifti_1_header::slice_duration</a></div><div class="ttdeci">float slice_duration</div><div class="ttdef"><b>Definition:</b> nifti1.h:177</div></div>
<div class="ttc" id="structnifti__1__header_html_af25a6170a90128800e3986b68fc79e4d"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#af25a6170a90128800e3986b68fc79e4d">nifti_1_header::slice_code</a></div><div class="ttdeci">char slice_code</div><div class="ttdef"><b>Definition:</b> nifti1.h:173</div></div>
<div class="ttc" id="structnifti__1__header_html_ae42d74b56440de615e0fac8ee0b97270"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#ae42d74b56440de615e0fac8ee0b97270">nifti_1_header::data_type</a></div><div class="ttdeci">char data_type[10]</div><div class="ttdef"><b>Definition:</b> nifti1.h:149</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a247e5a0c2b32a30837187b56d1de553a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a247e5a0c2b32a30837187b56d1de553a">&#9670;&nbsp;</a></span>is_nifti_file()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int is_nifti_file </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>hname</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Determine if this is a NIFTI-formatted file.</p>
<pre>
<dl class="section return"><dt>Returns</dt><dd>  0 if file looks like ANALYZE 7.5 [checks sizeof_hdr field == 348]
         1 if file marked as NIFTI (header+data in 1 file)
         2 if file marked as NIFTI (header+data in 2 files)
        -1 if it can't tell, file doesn't exist, etc.

</dd></dl>
</pre><div class="fragment"><div class="line"><a name="l03439"></a><span class="lineno"> 3439</span>&#160;{</div><div class="line"><a name="l03440"></a><span class="lineno"> 3440</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d75/structnifti__1__header.html">nifti_1_header</a> nhdr ;</div><div class="line"><a name="l03441"></a><span class="lineno"> 3441</span>&#160;   znzFile fp ;</div><div class="line"><a name="l03442"></a><span class="lineno"> 3442</span>&#160;   <span class="keywordtype">int</span> ii ;</div><div class="line"><a name="l03443"></a><span class="lineno"> 3443</span>&#160;   <span class="keywordtype">char</span> *tmpname;</div><div class="line"><a name="l03444"></a><span class="lineno"> 3444</span>&#160;</div><div class="line"><a name="l03445"></a><span class="lineno"> 3445</span>&#160;   <span class="comment">/* bad input name? */</span></div><div class="line"><a name="l03446"></a><span class="lineno"> 3446</span>&#160;</div><div class="line"><a name="l03447"></a><span class="lineno"> 3447</span>&#160;   <span class="keywordflow">if</span>( !<a class="code" href="../../d1/d14/nifti1__io_8c.html#a836b54d494e9d2718e5541978ae3fc29">nifti_validfilename</a>(hname) ) <span class="keywordflow">return</span> -1 ;</div><div class="line"><a name="l03448"></a><span class="lineno"> 3448</span>&#160;</div><div class="line"><a name="l03449"></a><span class="lineno"> 3449</span>&#160;   <span class="comment">/* open file */</span></div><div class="line"><a name="l03450"></a><span class="lineno"> 3450</span>&#160;</div><div class="line"><a name="l03451"></a><span class="lineno"> 3451</span>&#160;   tmpname = <a class="code" href="../../d1/d14/nifti1__io_8c.html#acde0b000cd0b4c5edbe33454ebc0c86f">nifti_findhdrname</a>(hname);</div><div class="line"><a name="l03452"></a><span class="lineno"> 3452</span>&#160;   <span class="keywordflow">if</span>( tmpname == NULL ){</div><div class="line"><a name="l03453"></a><span class="lineno"> 3453</span>&#160;      <span class="keywordflow">if</span>( <a class="code" href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a>.debug &gt; 0 )</div><div class="line"><a name="l03454"></a><span class="lineno"> 3454</span>&#160;         fprintf(stderr,<span class="stringliteral">&quot;** no header file found for &#39;%s&#39;\n&quot;</span>,hname);</div><div class="line"><a name="l03455"></a><span class="lineno"> 3455</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l03456"></a><span class="lineno"> 3456</span>&#160;   }</div><div class="line"><a name="l03457"></a><span class="lineno"> 3457</span>&#160;   fp = znzopen( tmpname , <span class="stringliteral">&quot;rb&quot;</span> , <a class="code" href="../../d1/d14/nifti1__io_8c.html#a6c17ed984533a4dede09b3bb6fa1fa17">nifti_is_gzfile</a>(tmpname) ) ;</div><div class="line"><a name="l03458"></a><span class="lineno"> 3458</span>&#160;   free(tmpname);</div><div class="line"><a name="l03459"></a><span class="lineno"> 3459</span>&#160;   <span class="keywordflow">if</span> (znz_isnull(fp))                      <span class="keywordflow">return</span> -1 ;  <span class="comment">/* bad open? */</span></div><div class="line"><a name="l03460"></a><span class="lineno"> 3460</span>&#160;</div><div class="line"><a name="l03461"></a><span class="lineno"> 3461</span>&#160;   <span class="comment">/* read header, close file */</span></div><div class="line"><a name="l03462"></a><span class="lineno"> 3462</span>&#160;</div><div class="line"><a name="l03463"></a><span class="lineno"> 3463</span>&#160;   ii = (int)znzread( &amp;nhdr , 1 , <span class="keyword">sizeof</span>(nhdr) , fp ) ;</div><div class="line"><a name="l03464"></a><span class="lineno"> 3464</span>&#160;   znzclose( fp ) ;</div><div class="line"><a name="l03465"></a><span class="lineno"> 3465</span>&#160;   <span class="keywordflow">if</span>( ii &lt; (<span class="keywordtype">int</span>) <span class="keyword">sizeof</span>(nhdr) )               <span class="keywordflow">return</span> -1 ;  <span class="comment">/* bad read? */</span></div><div class="line"><a name="l03466"></a><span class="lineno"> 3466</span>&#160;</div><div class="line"><a name="l03467"></a><span class="lineno"> 3467</span>&#160;   <span class="comment">/* check for NIFTI-ness */</span></div><div class="line"><a name="l03468"></a><span class="lineno"> 3468</span>&#160;</div><div class="line"><a name="l03469"></a><span class="lineno"> 3469</span>&#160;   <span class="keywordflow">if</span>( NIFTI_VERSION(nhdr) != 0 ){</div><div class="line"><a name="l03470"></a><span class="lineno"> 3470</span>&#160;     <span class="keywordflow">return</span> ( NIFTI_ONEFILE(nhdr) ) ? 1 : 2 ;</div><div class="line"><a name="l03471"></a><span class="lineno"> 3471</span>&#160;   }</div><div class="line"><a name="l03472"></a><span class="lineno"> 3472</span>&#160;</div><div class="line"><a name="l03473"></a><span class="lineno"> 3473</span>&#160;   <span class="comment">/* check for ANALYZE-ness (sizeof_hdr field == 348) */</span></div><div class="line"><a name="l03474"></a><span class="lineno"> 3474</span>&#160;</div><div class="line"><a name="l03475"></a><span class="lineno"> 3475</span>&#160;   ii = nhdr.sizeof_hdr ;</div><div class="line"><a name="l03476"></a><span class="lineno"> 3476</span>&#160;   <span class="keywordflow">if</span>( ii == (<span class="keywordtype">int</span>)<span class="keyword">sizeof</span>(nhdr) ) <span class="keywordflow">return</span> 0 ;  <span class="comment">/* matches */</span></div><div class="line"><a name="l03477"></a><span class="lineno"> 3477</span>&#160;</div><div class="line"><a name="l03478"></a><span class="lineno"> 3478</span>&#160;   <span class="comment">/* try byte-swapping header */</span></div><div class="line"><a name="l03479"></a><span class="lineno"> 3479</span>&#160;</div><div class="line"><a name="l03480"></a><span class="lineno"> 3480</span>&#160;   swap_4(ii) ;</div><div class="line"><a name="l03481"></a><span class="lineno"> 3481</span>&#160;   <span class="keywordflow">if</span>( ii == (<span class="keywordtype">int</span>)<span class="keyword">sizeof</span>(nhdr) ) <span class="keywordflow">return</span> 0 ;  <span class="comment">/* matches */</span></div><div class="line"><a name="l03482"></a><span class="lineno"> 3482</span>&#160;</div><div class="line"><a name="l03483"></a><span class="lineno"> 3483</span>&#160;   <span class="keywordflow">return</span> -1 ;                          <span class="comment">/* not good */</span></div><div class="line"><a name="l03484"></a><span class="lineno"> 3484</span>&#160;}</div><div class="ttc" id="structnifti__1__header_html"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html">nifti_1_header</a></div><div class="ttdoc">Data structure defining the fields in the nifti1 header. This binary header should be found at the be...</div><div class="ttdef"><b>Definition:</b> nifti1.h:144</div></div>
<div class="ttc" id="nifti1__io_8c_html_acde0b000cd0b4c5edbe33454ebc0c86f"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#acde0b000cd0b4c5edbe33454ebc0c86f">nifti_findhdrname</a></div><div class="ttdeci">char * nifti_findhdrname(const char *fname)</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:2735</div></div>
<div class="ttc" id="nifti1__io_8c_html_a6c17ed984533a4dede09b3bb6fa1fa17"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#a6c17ed984533a4dede09b3bb6fa1fa17">nifti_is_gzfile</a></div><div class="ttdeci">int nifti_is_gzfile(const char *fname)</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:2648</div></div>
<div class="ttc" id="nifti1__io_8c_html_a836b54d494e9d2718e5541978ae3fc29"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#a836b54d494e9d2718e5541978ae3fc29">nifti_validfilename</a></div><div class="ttdeci">int nifti_validfilename(const char *fname)</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:2550</div></div>
<div class="ttc" id="nifti1__io_8c_html_a6e047e1dc2f826a4adff048bee8f5df7"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a></div><div class="ttdeci">static nifti_global_options g_opts</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:344</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a5c42d2b1cf63b30950078ec5562e1f58"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5c42d2b1cf63b30950078ec5562e1f58">&#9670;&nbsp;</a></span>is_valid_nifti_type()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int is_valid_nifti_type </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>nifti_type</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>check whether the given type is on the "approved" list</p>
<p>The code is valid if it is non-negative, and does not exceed NIFTI_MAX_FTYPE.</p>
<dl class="section return"><dt>Returns</dt><dd>1 if nifti_type is valid, 0 otherwise </dd></dl>
<dl class="section see"><dt>See also</dt><dd>NIFTI_FTYPE_* codes in nifti1_io.h </dd></dl>
<div class="fragment"><div class="line"><a name="l03330"></a><span class="lineno"> 3330</span>&#160;{</div><div class="line"><a name="l03331"></a><span class="lineno"> 3331</span>&#160;   <span class="keywordflow">if</span>( nifti_type &gt;= NIFTI_FTYPE_ANALYZE &amp;&amp;   <span class="comment">/* smallest type, 0 */</span></div><div class="line"><a name="l03332"></a><span class="lineno"> 3332</span>&#160;       nifti_type &lt;= NIFTI_MAX_FTYPE )</div><div class="line"><a name="l03333"></a><span class="lineno"> 3333</span>&#160;      <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l03334"></a><span class="lineno"> 3334</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03335"></a><span class="lineno"> 3335</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a id="af302324afc85693788cd7483b054fc86"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af302324afc85693788cd7483b054fc86">&#9670;&nbsp;</a></span>nifti_add_extension()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int nifti_add_extension </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d0/de7/structnifti__image.html">nifti_image</a> *&#160;</td>
          <td class="paramname"><em>nim</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ecode</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>nifti_add_extension - add an extension, with a copy of the data</p>
<p>Add an extension to the nim-&gt;ext_list array. Fill this extension with a copy of the data, noting the length and extension code.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">nim</td><td>- <a class="el" href="../../d0/de7/structnifti__image.html" title="High level data structure for open nifti datasets in the nifti1_io API. Note that this structure is n...">nifti_image</a> to add extension to </td></tr>
    <tr><td class="paramname">data</td><td>- raw extension data </td></tr>
    <tr><td class="paramname">length</td><td>- length of raw extension data </td></tr>
    <tr><td class="paramname">ecode</td><td>- extension code</td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd>extension codes NIFTI_ECODE_* in nifti1_io.h </dd>
<dd>
<a class="el" href="../../d1/d14/nifti1__io_8c.html#afd96262c6dd96e05ceaa08b3fbdff2c9">nifti_free_extensions</a>, <a class="el" href="../../d1/d14/nifti1__io_8c.html#ae4827bde194fb79b17406da16216f81f">valid_nifti_extensions</a>, nifti_copy_extensions</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, -1 on error (and free the entire list) </dd></dl>
<div class="fragment"><div class="line"><a name="l04471"></a><span class="lineno"> 4471</span>&#160;{</div><div class="line"><a name="l04472"></a><span class="lineno"> 4472</span>&#160;   <a class="code" href="../../d4/d55/structnifti1__extension.html">nifti1_extension</a> ext;</div><div class="line"><a name="l04473"></a><span class="lineno"> 4473</span>&#160;</div><div class="line"><a name="l04474"></a><span class="lineno"> 4474</span>&#160;   <span class="comment">/* error are printed in functions */</span></div><div class="line"><a name="l04475"></a><span class="lineno"> 4475</span>&#160;   <span class="keywordflow">if</span>( nifti_fill_extension(&amp;ext, data, len, ecode) )                 <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l04476"></a><span class="lineno"> 4476</span>&#160;   <span class="keywordflow">if</span>( nifti_add_exten_to_list(&amp;ext, &amp;nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a9f8f5fc618182c3baa7cd0c59af69c35">ext_list</a>, nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a2b9edee8e340d17e4d87b1c682ca091a">num_ext</a>+1)) <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l04477"></a><span class="lineno"> 4477</span>&#160;</div><div class="line"><a name="l04478"></a><span class="lineno"> 4478</span>&#160;   nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a2b9edee8e340d17e4d87b1c682ca091a">num_ext</a>++;  <span class="comment">/* success, so increment */</span></div><div class="line"><a name="l04479"></a><span class="lineno"> 4479</span>&#160;</div><div class="line"><a name="l04480"></a><span class="lineno"> 4480</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l04481"></a><span class="lineno"> 4481</span>&#160;}</div><div class="ttc" id="structnifti__image_html_a9f8f5fc618182c3baa7cd0c59af69c35"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a9f8f5fc618182c3baa7cd0c59af69c35">nifti_image::ext_list</a></div><div class="ttdeci">nifti1_extension * ext_list</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:168</div></div>
<div class="ttc" id="structnifti1__extension_html"><div class="ttname"><a href="../../d4/d55/structnifti1__extension.html">nifti1_extension</a></div><div class="ttdoc">Data structure defining the fields of a header extension. </div><div class="ttdef"><b>Definition:</b> nifti1.h:293</div></div>
<div class="ttc" id="structnifti__image_html_a2b9edee8e340d17e4d87b1c682ca091a"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a2b9edee8e340d17e4d87b1c682ca091a">nifti_image::num_ext</a></div><div class="ttdeci">int num_ext</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:167</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a64c9a0bd020345de7e07606f07dcb960"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a64c9a0bd020345de7e07606f07dcb960">&#9670;&nbsp;</a></span>nifti_compiled_with_zlib()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int nifti_compiled_with_zlib </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>return whether the given library was compiled with HAVE_ZLIB set </p>
<div class="fragment"><div class="line"><a name="l02667"></a><span class="lineno"> 2667</span>&#160;{</div><div class="line"><a name="l02668"></a><span class="lineno"> 2668</span>&#160;<span class="preprocessor">#ifdef HAVE_ZLIB</span></div><div class="line"><a name="l02669"></a><span class="lineno"> 2669</span>&#160;    <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l02670"></a><span class="lineno"> 2670</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l02671"></a><span class="lineno"> 2671</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02672"></a><span class="lineno"> 2672</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l02673"></a><span class="lineno"> 2673</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a id="aa7bd8fbb331c8d278506afb6f37fdbc2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa7bd8fbb331c8d278506afb6f37fdbc2">&#9670;&nbsp;</a></span>nifti_convert_nhdr2nim()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d0/de7/structnifti__image.html">nifti_image</a>* nifti_convert_nhdr2nim </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/d75/structnifti__1__header.html">nifti_1_header</a>&#160;</td>
          <td class="paramname"><em>nhdr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>fname</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>convert a <a class="el" href="../../dd/d75/structnifti__1__header.html" title="Data structure defining the fields in the nifti1 header. This binary header should be found at the be...">nifti_1_header</a> into a nift1_image</p>
<dl class="section return"><dt>Returns</dt><dd>an allocated <a class="el" href="../../d0/de7/structnifti__image.html" title="High level data structure for open nifti datasets in the nifti1_io API. Note that this structure is n...">nifti_image</a>, or NULL on failure </dd></dl>
<ul>
<li>check if we must swap bytes <br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
</li>
<li>determine if this is a NIFTI-1 compliant header <br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
</li>
<li>in analyze75, the orient code is at the same address as qform_code, but it's just one byte the qform_code will be zero, at which point you can check analyze75_orient if you care to.</li>
<li>set bad grid spacings to 1.0 <br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
</li>
<li>set dimensions of data array <br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
</li>
<li>set the type of data in voxels and how many bytes per voxel <br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
</li>
<li>set the grid spacings <br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
</li>
<li>compute qto_xyz transformation from pixel indexes (i,j,k) to (x,y,z) <br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
</li>
<li>if not nifti or qform_code &lt;= 0, use grid spacing for qto_xyz <br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
</li>
<li>else NIFTI: use the quaternion-specified transformation <br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
</li>
<li>load inverse transformation (x,y,z) -&gt; (i,j,k) <br />
<br />
<br />
<br />
<br />
<br />
<br />
</li>
<li>load sto_xyz affine transformation, if present <br />
<br />
<br />
<br />
<br />
<br />
</li>
<li>if not nifti or sform_code &lt;= 0, then no sto transformation <br />
<br />
<br />
<br />
<br />
</li>
<li>else set the sto transformation from srow_*[] <br />
<br />
<br />
<br />
</li>
<li>set miscellaneous NIFTI stuff <br />
<br />
<br />
</li>
<li>set Miscellaneous ANALYZE stuff <br />
<br />
</li>
<li>set ioff from vox_offset (but at least sizeof(header)) <br />
</li>
<li>deal with file names if set </li>
</ul>
<div class="fragment"><div class="line"><a name="l03601"></a><span class="lineno"> 3601</span>&#160;{</div><div class="line"><a name="l03602"></a><span class="lineno"> 3602</span>&#160;   <span class="keywordtype">int</span>   ii , doswap , ioff ;</div><div class="line"><a name="l03603"></a><span class="lineno"> 3603</span>&#160;   <span class="keywordtype">int</span>   is_nifti , is_onefile ;</div><div class="line"><a name="l03604"></a><span class="lineno"> 3604</span>&#160;   <a class="code" href="../../d0/de7/structnifti__image.html">nifti_image</a> *nim;</div><div class="line"><a name="l03605"></a><span class="lineno"> 3605</span>&#160;</div><div class="line"><a name="l03606"></a><span class="lineno"> 3606</span>&#160;   nim = (<a class="code" href="../../d0/de7/structnifti__image.html">nifti_image</a> *)calloc( 1 , <span class="keyword">sizeof</span>(<a class="code" href="../../d0/de7/structnifti__image.html">nifti_image</a>) ) ;</div><div class="line"><a name="l03607"></a><span class="lineno"> 3607</span>&#160;   <span class="keywordflow">if</span>( !nim ) ERREX(<span class="stringliteral">&quot;failed to allocate nifti image&quot;</span>);</div><div class="line"><a name="l03608"></a><span class="lineno"> 3608</span>&#160;</div><div class="line"><a name="l03609"></a><span class="lineno"> 3609</span>&#160;   <span class="comment">/* be explicit with pointers */</span></div><div class="line"><a name="l03610"></a><span class="lineno"> 3610</span>&#160;   nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a1c7755060c9cca3612f1101684c9845f">fname</a> = NULL;</div><div class="line"><a name="l03611"></a><span class="lineno"> 3611</span>&#160;   nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#aa99806d70cacff119b5b6089c3dfdeda">iname</a> = NULL;</div><div class="line"><a name="l03612"></a><span class="lineno"> 3612</span>&#160;   nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a9c7db78ad411a6e2b8a8ab071bbbe0a8">data</a> = NULL;</div><div class="line"><a name="l03613"></a><span class="lineno"> 3613</span>&#160;</div><div class="line"><a name="l03616"></a><span class="lineno"> 3616</span>&#160;   doswap = need_nhdr_swap(nhdr.<a class="code" href="../../dd/d75/structnifti__1__header.html#ace3aeebb3c10362c5c2e48cee87a7f2e">dim</a>[0], nhdr.<a class="code" href="../../dd/d75/structnifti__1__header.html#af1d99efbd3af0180f9335cbb1b822248">sizeof_hdr</a>); <span class="comment">/* swap data flag */</span></div><div class="line"><a name="l03617"></a><span class="lineno"> 3617</span>&#160;</div><div class="line"><a name="l03618"></a><span class="lineno"> 3618</span>&#160;   <span class="keywordflow">if</span>( doswap &lt; 0 ){</div><div class="line"><a name="l03619"></a><span class="lineno"> 3619</span>&#160;      <span class="keywordflow">if</span>( doswap == -1 ) ERREX(<span class="stringliteral">&quot;bad dim[0]&quot;</span>) ;</div><div class="line"><a name="l03620"></a><span class="lineno"> 3620</span>&#160;      ERREX(<span class="stringliteral">&quot;bad sizeof_hdr&quot;</span>) ;  <span class="comment">/* else */</span></div><div class="line"><a name="l03621"></a><span class="lineno"> 3621</span>&#160;   }</div><div class="line"><a name="l03622"></a><span class="lineno"> 3622</span>&#160;</div><div class="line"><a name="l03625"></a><span class="lineno"> 3625</span>&#160;   is_nifti = NIFTI_VERSION(nhdr) ;</div><div class="line"><a name="l03626"></a><span class="lineno"> 3626</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l03627"></a><span class="lineno"> 3627</span>&#160;<span class="comment">    * before swapping header, record the Analyze75 orient code</span></div><div class="line"><a name="l03628"></a><span class="lineno"> 3628</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l03629"></a><span class="lineno"> 3629</span>&#160;   <span class="keywordflow">if</span>(!is_nifti)</div><div class="line"><a name="l03630"></a><span class="lineno"> 3630</span>&#160;     {</div><div class="line"><a name="l03636"></a><span class="lineno"> 3636</span>&#160;     <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> c = *((<span class="keywordtype">char</span> *)(&amp;nhdr.<a class="code" href="../../dd/d75/structnifti__1__header.html#a95ae85e5e0bba57c4b3cbd8a0b32168b">qform_code</a>));</div><div class="line"><a name="l03637"></a><span class="lineno"> 3637</span>&#160;     nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ae164b68a8420c81d86911bb1c45ae413">analyze75_orient</a> = (analyze_75_orient_code)c;</div><div class="line"><a name="l03638"></a><span class="lineno"> 3638</span>&#160;     }</div><div class="line"><a name="l03639"></a><span class="lineno"> 3639</span>&#160;   <span class="keywordflow">if</span>( doswap ) {</div><div class="line"><a name="l03640"></a><span class="lineno"> 3640</span>&#160;      <span class="keywordflow">if</span> ( <a class="code" href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a>.debug &gt; 3 ) <a class="code" href="../../d1/d14/nifti1__io_8c.html#af9d6192cbeeb85cde0a3c41acf9c2208">disp_nifti_1_header</a>(<span class="stringliteral">&quot;-d ni1 pre-swap: &quot;</span>, &amp;nhdr);</div><div class="line"><a name="l03641"></a><span class="lineno"> 3641</span>&#160;      <a class="code" href="../../d1/d14/nifti1__io_8c.html#a50dc91b6264f53456387f95907bc86ee">swap_nifti_header</a>( &amp;nhdr , is_nifti ) ;</div><div class="line"><a name="l03642"></a><span class="lineno"> 3642</span>&#160;   }</div><div class="line"><a name="l03643"></a><span class="lineno"> 3643</span>&#160;</div><div class="line"><a name="l03644"></a><span class="lineno"> 3644</span>&#160;   <span class="keywordflow">if</span> ( <a class="code" href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a>.debug &gt; 2 ) <a class="code" href="../../d1/d14/nifti1__io_8c.html#af9d6192cbeeb85cde0a3c41acf9c2208">disp_nifti_1_header</a>(<span class="stringliteral">&quot;-d nhdr2nim : &quot;</span>, &amp;nhdr);</div><div class="line"><a name="l03645"></a><span class="lineno"> 3645</span>&#160;</div><div class="line"><a name="l03646"></a><span class="lineno"> 3646</span>&#160;   <span class="keywordflow">if</span>( nhdr.<a class="code" href="../../dd/d75/structnifti__1__header.html#ad5f8888fcc5fde14d3e387653721e270">datatype</a> == DT_BINARY ||</div><div class="line"><a name="l03647"></a><span class="lineno"> 3647</span>&#160;       nhdr.<a class="code" href="../../dd/d75/structnifti__1__header.html#ad5f8888fcc5fde14d3e387653721e270">datatype</a> == DT_UNKNOWN  )    ERREX(<span class="stringliteral">&quot;bad datatype&quot;</span>) ;</div><div class="line"><a name="l03648"></a><span class="lineno"> 3648</span>&#160;</div><div class="line"><a name="l03649"></a><span class="lineno"> 3649</span>&#160;   <span class="keywordflow">if</span>( nhdr.<a class="code" href="../../dd/d75/structnifti__1__header.html#ace3aeebb3c10362c5c2e48cee87a7f2e">dim</a>[1] &lt;= 0 )                ERREX(<span class="stringliteral">&quot;bad dim[1]&quot;</span>) ;</div><div class="line"><a name="l03650"></a><span class="lineno"> 3650</span>&#160;</div><div class="line"><a name="l03651"></a><span class="lineno"> 3651</span>&#160;   <span class="comment">/* fix bad dim[] values in the defined dimension range */</span></div><div class="line"><a name="l03652"></a><span class="lineno"> 3652</span>&#160;   <span class="keywordflow">for</span>( ii=2 ; ii &lt;= nhdr.<a class="code" href="../../dd/d75/structnifti__1__header.html#ace3aeebb3c10362c5c2e48cee87a7f2e">dim</a>[0] ; ii++ )</div><div class="line"><a name="l03653"></a><span class="lineno"> 3653</span>&#160;     <span class="keywordflow">if</span>( nhdr.<a class="code" href="../../dd/d75/structnifti__1__header.html#ace3aeebb3c10362c5c2e48cee87a7f2e">dim</a>[ii] &lt;= 0 ) nhdr.<a class="code" href="../../dd/d75/structnifti__1__header.html#ace3aeebb3c10362c5c2e48cee87a7f2e">dim</a>[ii] = 1 ;</div><div class="line"><a name="l03654"></a><span class="lineno"> 3654</span>&#160;</div><div class="line"><a name="l03655"></a><span class="lineno"> 3655</span>&#160;   <span class="comment">/* fix any remaining bad dim[] values, so garbage does not propagate */</span></div><div class="line"><a name="l03656"></a><span class="lineno"> 3656</span>&#160;   <span class="comment">/* (only values 0 or 1 seem rational, otherwise set to arbirary 1)   */</span></div><div class="line"><a name="l03657"></a><span class="lineno"> 3657</span>&#160;   <span class="keywordflow">for</span>( ii=nhdr.<a class="code" href="../../dd/d75/structnifti__1__header.html#ace3aeebb3c10362c5c2e48cee87a7f2e">dim</a>[0]+1 ; ii &lt;= 7 ; ii++ )</div><div class="line"><a name="l03658"></a><span class="lineno"> 3658</span>&#160;     <span class="keywordflow">if</span>( nhdr.<a class="code" href="../../dd/d75/structnifti__1__header.html#ace3aeebb3c10362c5c2e48cee87a7f2e">dim</a>[ii] != 1 &amp;&amp; nhdr.<a class="code" href="../../dd/d75/structnifti__1__header.html#ace3aeebb3c10362c5c2e48cee87a7f2e">dim</a>[ii] != 0) nhdr.<a class="code" href="../../dd/d75/structnifti__1__header.html#ace3aeebb3c10362c5c2e48cee87a7f2e">dim</a>[ii] = 1 ;</div><div class="line"><a name="l03659"></a><span class="lineno"> 3659</span>&#160;</div><div class="line"><a name="l03660"></a><span class="lineno"> 3660</span>&#160;<span class="preprocessor">#if 0  </span><span class="comment">/* rely on dim[0], do not attempt to modify it   16 Nov 2005 [rickr] */</span><span class="preprocessor"></span></div><div class="line"><a name="l03661"></a><span class="lineno"> 3661</span>&#160;</div><div class="line"><a name="l03663"></a><span class="lineno"> 3663</span>&#160;   <span class="keywordflow">for</span>( ii=7 ; ii &gt;= 2 ; ii-- )            <span class="comment">/* loop backwards until we  */</span></div><div class="line"><a name="l03664"></a><span class="lineno"> 3664</span>&#160;     <span class="keywordflow">if</span>( nhdr.<a class="code" href="../../dd/d75/structnifti__1__header.html#ace3aeebb3c10362c5c2e48cee87a7f2e">dim</a>[ii] &gt; 1 ) break ;        <span class="comment">/* find a dim bigger than 1 */</span></div><div class="line"><a name="l03665"></a><span class="lineno"> 3665</span>&#160;   ndim = ii ;</div><div class="line"><a name="l03666"></a><span class="lineno"> 3666</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l03667"></a><span class="lineno"> 3667</span>&#160;</div><div class="line"><a name="l03670"></a><span class="lineno"> 3670</span>&#160;   <span class="keywordflow">for</span>( ii=1 ; ii &lt;= nhdr.<a class="code" href="../../dd/d75/structnifti__1__header.html#ace3aeebb3c10362c5c2e48cee87a7f2e">dim</a>[0] ; ii++ ){</div><div class="line"><a name="l03671"></a><span class="lineno"> 3671</span>&#160;     <span class="keywordflow">if</span>( nhdr.<a class="code" href="../../dd/d75/structnifti__1__header.html#afa546a9f49e7e080f952927d6bcdfbbe">pixdim</a>[ii] == 0.0         ||</div><div class="line"><a name="l03672"></a><span class="lineno"> 3672</span>&#160;         !IS_GOOD_FLOAT(nhdr.<a class="code" href="../../dd/d75/structnifti__1__header.html#afa546a9f49e7e080f952927d6bcdfbbe">pixdim</a>[ii])  ) nhdr.<a class="code" href="../../dd/d75/structnifti__1__header.html#afa546a9f49e7e080f952927d6bcdfbbe">pixdim</a>[ii] = 1.0 ;</div><div class="line"><a name="l03673"></a><span class="lineno"> 3673</span>&#160;   }</div><div class="line"><a name="l03674"></a><span class="lineno"> 3674</span>&#160;</div><div class="line"><a name="l03675"></a><span class="lineno"> 3675</span>&#160;  is_onefile = is_nifti &amp;&amp; NIFTI_ONEFILE(nhdr) ;</div><div class="line"><a name="l03676"></a><span class="lineno"> 3676</span>&#160;</div><div class="line"><a name="l03677"></a><span class="lineno"> 3677</span>&#160;  <span class="keywordflow">if</span>( is_nifti ) nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ac55996e58670948b220bebbf5d4bb0f4">nifti_type</a> = (is_onefile) ? NIFTI_FTYPE_NIFTI1_1</div><div class="line"><a name="l03678"></a><span class="lineno"> 3678</span>&#160;                                                : NIFTI_FTYPE_NIFTI1_2 ;</div><div class="line"><a name="l03679"></a><span class="lineno"> 3679</span>&#160;  <span class="keywordflow">else</span>           nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ac55996e58670948b220bebbf5d4bb0f4">nifti_type</a> = NIFTI_FTYPE_ANALYZE ;</div><div class="line"><a name="l03680"></a><span class="lineno"> 3680</span>&#160;  </div><div class="line"><a name="l03681"></a><span class="lineno"> 3681</span>&#160;  ii = <a class="code" href="../../d1/d14/nifti1__io_8c.html#adf2a70eac549a80a246d380240a8d822">nifti_short_order</a>() ;</div><div class="line"><a name="l03682"></a><span class="lineno"> 3682</span>&#160;  <span class="keywordflow">if</span>( doswap )   nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a5ce21d97da49b1dcf9415e83bbf07caf">byteorder</a> = REVERSE_ORDER(ii) ;</div><div class="line"><a name="l03683"></a><span class="lineno"> 3683</span>&#160;  <span class="keywordflow">else</span>           nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a5ce21d97da49b1dcf9415e83bbf07caf">byteorder</a> = ii ;</div><div class="line"><a name="l03684"></a><span class="lineno"> 3684</span>&#160;  </div><div class="line"><a name="l03685"></a><span class="lineno"> 3685</span>&#160;</div><div class="line"><a name="l03688"></a><span class="lineno"> 3688</span>&#160;  nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ad61740a0245f2af05ded39cb0648ae07">ndim</a> = nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a054f5f2c357dd6833efd467ac202f0a5">dim</a>[0] = nhdr.<a class="code" href="../../dd/d75/structnifti__1__header.html#ace3aeebb3c10362c5c2e48cee87a7f2e">dim</a>[0];</div><div class="line"><a name="l03689"></a><span class="lineno"> 3689</span>&#160;  nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ab99743dd7967cff6845f1a96b2044167">nx</a>   = nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a054f5f2c357dd6833efd467ac202f0a5">dim</a>[1] = nhdr.<a class="code" href="../../dd/d75/structnifti__1__header.html#ace3aeebb3c10362c5c2e48cee87a7f2e">dim</a>[1];</div><div class="line"><a name="l03690"></a><span class="lineno"> 3690</span>&#160;  nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a5e971f24a97c592fefa28d084c02769a">ny</a>   = nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a054f5f2c357dd6833efd467ac202f0a5">dim</a>[2] = nhdr.<a class="code" href="../../dd/d75/structnifti__1__header.html#ace3aeebb3c10362c5c2e48cee87a7f2e">dim</a>[2];</div><div class="line"><a name="l03691"></a><span class="lineno"> 3691</span>&#160;  nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a8731bb1d867cdd24335e4bc3dd131c44">nz</a>   = nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a054f5f2c357dd6833efd467ac202f0a5">dim</a>[3] = nhdr.<a class="code" href="../../dd/d75/structnifti__1__header.html#ace3aeebb3c10362c5c2e48cee87a7f2e">dim</a>[3];</div><div class="line"><a name="l03692"></a><span class="lineno"> 3692</span>&#160;  nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ab3d3fdfda87503e5e8d53f0342906aba">nt</a>   = nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a054f5f2c357dd6833efd467ac202f0a5">dim</a>[4] = nhdr.<a class="code" href="../../dd/d75/structnifti__1__header.html#ace3aeebb3c10362c5c2e48cee87a7f2e">dim</a>[4];</div><div class="line"><a name="l03693"></a><span class="lineno"> 3693</span>&#160;  nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ab4a9c0956e858fd877ee81796adc66bc">nu</a>   = nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a054f5f2c357dd6833efd467ac202f0a5">dim</a>[5] = nhdr.<a class="code" href="../../dd/d75/structnifti__1__header.html#ace3aeebb3c10362c5c2e48cee87a7f2e">dim</a>[5];</div><div class="line"><a name="l03694"></a><span class="lineno"> 3694</span>&#160;  nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a7e04a5e405f9b79dae5652cdcd3832ef">nv</a>   = nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a054f5f2c357dd6833efd467ac202f0a5">dim</a>[6] = nhdr.<a class="code" href="../../dd/d75/structnifti__1__header.html#ace3aeebb3c10362c5c2e48cee87a7f2e">dim</a>[6];</div><div class="line"><a name="l03695"></a><span class="lineno"> 3695</span>&#160;  nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ae0bc5b6b2e350108e468124b682b715c">nw</a>   = nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a054f5f2c357dd6833efd467ac202f0a5">dim</a>[7] = nhdr.<a class="code" href="../../dd/d75/structnifti__1__header.html#ace3aeebb3c10362c5c2e48cee87a7f2e">dim</a>[7];</div><div class="line"><a name="l03696"></a><span class="lineno"> 3696</span>&#160;</div><div class="line"><a name="l03697"></a><span class="lineno"> 3697</span>&#160;  <span class="keywordflow">for</span>( ii=1, nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a440a3fab2a781b43ed8216e26492597d">nvox</a>=1; ii &lt;= nhdr.<a class="code" href="../../dd/d75/structnifti__1__header.html#ace3aeebb3c10362c5c2e48cee87a7f2e">dim</a>[0]; ii++ )</div><div class="line"><a name="l03698"></a><span class="lineno"> 3698</span>&#160;     nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a440a3fab2a781b43ed8216e26492597d">nvox</a> *= nhdr.<a class="code" href="../../dd/d75/structnifti__1__header.html#ace3aeebb3c10362c5c2e48cee87a7f2e">dim</a>[ii];</div><div class="line"><a name="l03699"></a><span class="lineno"> 3699</span>&#160;  </div><div class="line"><a name="l03702"></a><span class="lineno"> 3702</span>&#160;  nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a51bad5202c3b9943b3c86f80ca5d1cd1">datatype</a> = nhdr.<a class="code" href="../../dd/d75/structnifti__1__header.html#ad5f8888fcc5fde14d3e387653721e270">datatype</a> ;</div><div class="line"><a name="l03703"></a><span class="lineno"> 3703</span>&#160;  </div><div class="line"><a name="l03704"></a><span class="lineno"> 3704</span>&#160;  <a class="code" href="../../d1/d14/nifti1__io_8c.html#aeeccf4be6839946794c2cc1fdef26d4f">nifti_datatype_sizes</a>( nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a51bad5202c3b9943b3c86f80ca5d1cd1">datatype</a> , &amp;(nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a79a4382f115cb6c7f8977c36d73e6749">nbyper</a>) , &amp;(nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ac7e2a08cb9631d0cdf6a29da77cb19ee">swapsize</a>) ) ;</div><div class="line"><a name="l03705"></a><span class="lineno"> 3705</span>&#160;  <span class="keywordflow">if</span>( nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a79a4382f115cb6c7f8977c36d73e6749">nbyper</a> == 0 ){ free(nim); ERREX(<span class="stringliteral">&quot;bad datatype&quot;</span>); }</div><div class="line"><a name="l03706"></a><span class="lineno"> 3706</span>&#160;  </div><div class="line"><a name="l03709"></a><span class="lineno"> 3709</span>&#160;  nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a8d9ddfeecae70399a50dca551d69f774">dx</a> = nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ae71e0af4ae7e67eb52a0f5e36be520a6">pixdim</a>[1] = nhdr.<a class="code" href="../../dd/d75/structnifti__1__header.html#afa546a9f49e7e080f952927d6bcdfbbe">pixdim</a>[1] ;</div><div class="line"><a name="l03710"></a><span class="lineno"> 3710</span>&#160;  nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#afb6cd106a28d4599326042c43d85022b">dy</a> = nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ae71e0af4ae7e67eb52a0f5e36be520a6">pixdim</a>[2] = nhdr.<a class="code" href="../../dd/d75/structnifti__1__header.html#afa546a9f49e7e080f952927d6bcdfbbe">pixdim</a>[2] ;</div><div class="line"><a name="l03711"></a><span class="lineno"> 3711</span>&#160;  nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ac462fb16a688d8dbec164456febdc9c7">dz</a> = nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ae71e0af4ae7e67eb52a0f5e36be520a6">pixdim</a>[3] = nhdr.<a class="code" href="../../dd/d75/structnifti__1__header.html#afa546a9f49e7e080f952927d6bcdfbbe">pixdim</a>[3] ;</div><div class="line"><a name="l03712"></a><span class="lineno"> 3712</span>&#160;  nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ab4e9dd136d1de9fbe03c68f081876b9e">dt</a> = nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ae71e0af4ae7e67eb52a0f5e36be520a6">pixdim</a>[4] = nhdr.<a class="code" href="../../dd/d75/structnifti__1__header.html#afa546a9f49e7e080f952927d6bcdfbbe">pixdim</a>[4] ;</div><div class="line"><a name="l03713"></a><span class="lineno"> 3713</span>&#160;  nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ab1c6399d45bf77d6eff712d318a9d0ca">du</a> = nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ae71e0af4ae7e67eb52a0f5e36be520a6">pixdim</a>[5] = nhdr.<a class="code" href="../../dd/d75/structnifti__1__header.html#afa546a9f49e7e080f952927d6bcdfbbe">pixdim</a>[5] ;</div><div class="line"><a name="l03714"></a><span class="lineno"> 3714</span>&#160;  nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a6155d97e665d879e662bf650c09d0bc1">dv</a> = nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ae71e0af4ae7e67eb52a0f5e36be520a6">pixdim</a>[6] = nhdr.<a class="code" href="../../dd/d75/structnifti__1__header.html#afa546a9f49e7e080f952927d6bcdfbbe">pixdim</a>[6] ;</div><div class="line"><a name="l03715"></a><span class="lineno"> 3715</span>&#160;  nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ab7d8391bc07972e0b051f157dde00a04">dw</a> = nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ae71e0af4ae7e67eb52a0f5e36be520a6">pixdim</a>[7] = nhdr.<a class="code" href="../../dd/d75/structnifti__1__header.html#afa546a9f49e7e080f952927d6bcdfbbe">pixdim</a>[7] ;</div><div class="line"><a name="l03716"></a><span class="lineno"> 3716</span>&#160;  </div><div class="line"><a name="l03719"></a><span class="lineno"> 3719</span>&#160;  <span class="keywordflow">if</span>( !is_nifti || nhdr.<a class="code" href="../../dd/d75/structnifti__1__header.html#a95ae85e5e0bba57c4b3cbd8a0b32168b">qform_code</a> &lt;= 0 ){</div><div class="line"><a name="l03722"></a><span class="lineno"> 3722</span>&#160;    nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a122993357c6c712559c5e0244347c5f3">qto_xyz</a>.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[0][0] = nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a8d9ddfeecae70399a50dca551d69f774">dx</a> ;  <span class="comment">/* grid spacings */</span></div><div class="line"><a name="l03723"></a><span class="lineno"> 3723</span>&#160;    nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a122993357c6c712559c5e0244347c5f3">qto_xyz</a>.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[1][1] = nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#afb6cd106a28d4599326042c43d85022b">dy</a> ;  <span class="comment">/* along diagonal */</span></div><div class="line"><a name="l03724"></a><span class="lineno"> 3724</span>&#160;    nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a122993357c6c712559c5e0244347c5f3">qto_xyz</a>.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[2][2] = nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ac462fb16a688d8dbec164456febdc9c7">dz</a> ;</div><div class="line"><a name="l03725"></a><span class="lineno"> 3725</span>&#160;    </div><div class="line"><a name="l03726"></a><span class="lineno"> 3726</span>&#160;    <span class="comment">/* off diagonal is zero */</span></div><div class="line"><a name="l03727"></a><span class="lineno"> 3727</span>&#160;    </div><div class="line"><a name="l03728"></a><span class="lineno"> 3728</span>&#160;    nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a122993357c6c712559c5e0244347c5f3">qto_xyz</a>.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[0][1]=nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a122993357c6c712559c5e0244347c5f3">qto_xyz</a>.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[0][2]=nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a122993357c6c712559c5e0244347c5f3">qto_xyz</a>.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[0][3] = 0.0;</div><div class="line"><a name="l03729"></a><span class="lineno"> 3729</span>&#160;    nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a122993357c6c712559c5e0244347c5f3">qto_xyz</a>.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[1][0]=nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a122993357c6c712559c5e0244347c5f3">qto_xyz</a>.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[1][2]=nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a122993357c6c712559c5e0244347c5f3">qto_xyz</a>.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[1][3] = 0.0;</div><div class="line"><a name="l03730"></a><span class="lineno"> 3730</span>&#160;    nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a122993357c6c712559c5e0244347c5f3">qto_xyz</a>.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[2][0]=nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a122993357c6c712559c5e0244347c5f3">qto_xyz</a>.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[2][1]=nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a122993357c6c712559c5e0244347c5f3">qto_xyz</a>.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[2][3] = 0.0;</div><div class="line"><a name="l03731"></a><span class="lineno"> 3731</span>&#160;    </div><div class="line"><a name="l03732"></a><span class="lineno"> 3732</span>&#160;    <span class="comment">/* last row is always [ 0 0 0 1 ] */</span></div><div class="line"><a name="l03733"></a><span class="lineno"> 3733</span>&#160;    </div><div class="line"><a name="l03734"></a><span class="lineno"> 3734</span>&#160;    nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a122993357c6c712559c5e0244347c5f3">qto_xyz</a>.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[3][0]=nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a122993357c6c712559c5e0244347c5f3">qto_xyz</a>.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[3][1]=nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a122993357c6c712559c5e0244347c5f3">qto_xyz</a>.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[3][2] = 0.0;</div><div class="line"><a name="l03735"></a><span class="lineno"> 3735</span>&#160;    nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a122993357c6c712559c5e0244347c5f3">qto_xyz</a>.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[3][3]= 1.0 ;</div><div class="line"><a name="l03736"></a><span class="lineno"> 3736</span>&#160;    </div><div class="line"><a name="l03737"></a><span class="lineno"> 3737</span>&#160;    nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#adfcbe7e11b44d8a964d61c3e17554686">qform_code</a> = <a class="code" href="../../d3/db1/group__NIFTI1__XFORM__CODES.html#ga07bbf1c2d76a8d8770fc5d76b24647d1">NIFTI_XFORM_UNKNOWN</a> ;</div><div class="line"><a name="l03738"></a><span class="lineno"> 3738</span>&#160;    </div><div class="line"><a name="l03739"></a><span class="lineno"> 3739</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a>.debug &gt; 1 ) fprintf(stderr,<span class="stringliteral">&quot;-d no qform provided\n&quot;</span>);</div><div class="line"><a name="l03740"></a><span class="lineno"> 3740</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03743"></a><span class="lineno"> 3743</span>&#160;    nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a26fc9296e99700da54ca3749622f83bd">quatern_b</a> = FIXED_FLOAT( nhdr.<a class="code" href="../../dd/d75/structnifti__1__header.html#a530588bf405af52255dc064a6f451c71">quatern_b</a> ) ;</div><div class="line"><a name="l03744"></a><span class="lineno"> 3744</span>&#160;    nim-&gt;quatern_c = FIXED_FLOAT( nhdr.<a class="code" href="../../dd/d75/structnifti__1__header.html#a3ade0b01649a3d990ee1dfdef8c452c4">quatern_c</a> ) ;</div><div class="line"><a name="l03745"></a><span class="lineno"> 3745</span>&#160;    nim-&gt;quatern_d = FIXED_FLOAT( nhdr.<a class="code" href="../../dd/d75/structnifti__1__header.html#af47d0d4ae23f57441edcef9594fd1495">quatern_d</a> ) ;</div><div class="line"><a name="l03746"></a><span class="lineno"> 3746</span>&#160;    </div><div class="line"><a name="l03747"></a><span class="lineno"> 3747</span>&#160;    nim-&gt;qoffset_x = FIXED_FLOAT(nhdr.<a class="code" href="../../dd/d75/structnifti__1__header.html#a6fbfa89133238e59e6220e0b778c93ef">qoffset_x</a>) ;</div><div class="line"><a name="l03748"></a><span class="lineno"> 3748</span>&#160;    nim-&gt;qoffset_y = FIXED_FLOAT(nhdr.<a class="code" href="../../dd/d75/structnifti__1__header.html#a5cfb257cbd7a4b7dde2350877cd126c5">qoffset_y</a>) ;</div><div class="line"><a name="l03749"></a><span class="lineno"> 3749</span>&#160;    nim-&gt;qoffset_z = FIXED_FLOAT(nhdr.<a class="code" href="../../dd/d75/structnifti__1__header.html#a962002307f10b359788cea98ebcb40b6">qoffset_z</a>) ;</div><div class="line"><a name="l03750"></a><span class="lineno"> 3750</span>&#160;    </div><div class="line"><a name="l03751"></a><span class="lineno"> 3751</span>&#160;    nim-&gt;qfac = (nhdr.<a class="code" href="../../dd/d75/structnifti__1__header.html#afa546a9f49e7e080f952927d6bcdfbbe">pixdim</a>[0] &lt; 0.0) ? -1.0 : 1.0 ;  <span class="comment">/* left-handedness? */</span></div><div class="line"><a name="l03752"></a><span class="lineno"> 3752</span>&#160;    </div><div class="line"><a name="l03753"></a><span class="lineno"> 3753</span>&#160;    nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a122993357c6c712559c5e0244347c5f3">qto_xyz</a> = <a class="code" href="../../d1/d14/nifti1__io_8c.html#a4b183639b2e242ac32210fe3437f60d2">nifti_quatern_to_mat44</a>(</div><div class="line"><a name="l03754"></a><span class="lineno"> 3754</span>&#160;                      nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a26fc9296e99700da54ca3749622f83bd">quatern_b</a>, nim-&gt;quatern_c, nim-&gt;quatern_d,</div><div class="line"><a name="l03755"></a><span class="lineno"> 3755</span>&#160;                      nim-&gt;qoffset_x, nim-&gt;qoffset_y, nim-&gt;qoffset_z,</div><div class="line"><a name="l03756"></a><span class="lineno"> 3756</span>&#160;                      nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a8d9ddfeecae70399a50dca551d69f774">dx</a>       , nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#afb6cd106a28d4599326042c43d85022b">dy</a>       , nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ac462fb16a688d8dbec164456febdc9c7">dz</a>       ,</div><div class="line"><a name="l03757"></a><span class="lineno"> 3757</span>&#160;                      nim-&gt;qfac                                      ) ;</div><div class="line"><a name="l03758"></a><span class="lineno"> 3758</span>&#160;</div><div class="line"><a name="l03759"></a><span class="lineno"> 3759</span>&#160;    nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#adfcbe7e11b44d8a964d61c3e17554686">qform_code</a> = nhdr.<a class="code" href="../../dd/d75/structnifti__1__header.html#a95ae85e5e0bba57c4b3cbd8a0b32168b">qform_code</a> ;</div><div class="line"><a name="l03760"></a><span class="lineno"> 3760</span>&#160;</div><div class="line"><a name="l03761"></a><span class="lineno"> 3761</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a>.debug &gt; 1 )</div><div class="line"><a name="l03762"></a><span class="lineno"> 3762</span>&#160;       <a class="code" href="../../d1/d14/nifti1__io_8c.html#a3152dd3d1140f401aea7754bf37fd3c2">nifti_disp_matrix_orient</a>(<span class="stringliteral">&quot;-d qform orientations:\n&quot;</span>, nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a122993357c6c712559c5e0244347c5f3">qto_xyz</a>);</div><div class="line"><a name="l03763"></a><span class="lineno"> 3763</span>&#160;  }</div><div class="line"><a name="l03764"></a><span class="lineno"> 3764</span>&#160;  </div><div class="line"><a name="l03767"></a><span class="lineno"> 3767</span>&#160;  nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a750a76b493a4f2fc04c66ce2d4407bce">qto_ijk</a> = <a class="code" href="../../d1/d14/nifti1__io_8c.html#abf7254db0ad36f998a92ac6f42f9c5c9">nifti_mat44_inverse</a>( nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a122993357c6c712559c5e0244347c5f3">qto_xyz</a> ) ;</div><div class="line"><a name="l03768"></a><span class="lineno"> 3768</span>&#160;  </div><div class="line"><a name="l03771"></a><span class="lineno"> 3771</span>&#160;  <span class="keywordflow">if</span>( !is_nifti || nhdr.<a class="code" href="../../dd/d75/structnifti__1__header.html#a48d14671528f3dfe0593320006877a8a">sform_code</a> &lt;= 0 ){</div><div class="line"><a name="l03774"></a><span class="lineno"> 3774</span>&#160;    nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a964e209d6110bd26df6935ebf4a2a620">sform_code</a> = <a class="code" href="../../d3/db1/group__NIFTI1__XFORM__CODES.html#ga07bbf1c2d76a8d8770fc5d76b24647d1">NIFTI_XFORM_UNKNOWN</a> ;</div><div class="line"><a name="l03775"></a><span class="lineno"> 3775</span>&#160;</div><div class="line"><a name="l03776"></a><span class="lineno"> 3776</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a>.debug &gt; 1 ) fprintf(stderr,<span class="stringliteral">&quot;-d no sform provided\n&quot;</span>);</div><div class="line"><a name="l03777"></a><span class="lineno"> 3777</span>&#160;    </div><div class="line"><a name="l03778"></a><span class="lineno"> 3778</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03781"></a><span class="lineno"> 3781</span>&#160;    nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a69460d9b0b0b19fe740c9b30cfd44e10">sto_xyz</a>.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[0][0] = nhdr.<a class="code" href="../../dd/d75/structnifti__1__header.html#ab672320f8968eb98b208b340c87515ba">srow_x</a>[0] ;</div><div class="line"><a name="l03782"></a><span class="lineno"> 3782</span>&#160;    nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a69460d9b0b0b19fe740c9b30cfd44e10">sto_xyz</a>.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[0][1] = nhdr.<a class="code" href="../../dd/d75/structnifti__1__header.html#ab672320f8968eb98b208b340c87515ba">srow_x</a>[1] ;</div><div class="line"><a name="l03783"></a><span class="lineno"> 3783</span>&#160;    nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a69460d9b0b0b19fe740c9b30cfd44e10">sto_xyz</a>.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[0][2] = nhdr.<a class="code" href="../../dd/d75/structnifti__1__header.html#ab672320f8968eb98b208b340c87515ba">srow_x</a>[2] ;</div><div class="line"><a name="l03784"></a><span class="lineno"> 3784</span>&#160;    nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a69460d9b0b0b19fe740c9b30cfd44e10">sto_xyz</a>.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[0][3] = nhdr.<a class="code" href="../../dd/d75/structnifti__1__header.html#ab672320f8968eb98b208b340c87515ba">srow_x</a>[3] ;</div><div class="line"><a name="l03785"></a><span class="lineno"> 3785</span>&#160;    </div><div class="line"><a name="l03786"></a><span class="lineno"> 3786</span>&#160;    nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a69460d9b0b0b19fe740c9b30cfd44e10">sto_xyz</a>.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[1][0] = nhdr.<a class="code" href="../../dd/d75/structnifti__1__header.html#ae5572284c9945360d4fa5c3b4e734a99">srow_y</a>[0] ;</div><div class="line"><a name="l03787"></a><span class="lineno"> 3787</span>&#160;    nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a69460d9b0b0b19fe740c9b30cfd44e10">sto_xyz</a>.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[1][1] = nhdr.<a class="code" href="../../dd/d75/structnifti__1__header.html#ae5572284c9945360d4fa5c3b4e734a99">srow_y</a>[1] ;</div><div class="line"><a name="l03788"></a><span class="lineno"> 3788</span>&#160;    nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a69460d9b0b0b19fe740c9b30cfd44e10">sto_xyz</a>.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[1][2] = nhdr.<a class="code" href="../../dd/d75/structnifti__1__header.html#ae5572284c9945360d4fa5c3b4e734a99">srow_y</a>[2] ;</div><div class="line"><a name="l03789"></a><span class="lineno"> 3789</span>&#160;    nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a69460d9b0b0b19fe740c9b30cfd44e10">sto_xyz</a>.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[1][3] = nhdr.<a class="code" href="../../dd/d75/structnifti__1__header.html#ae5572284c9945360d4fa5c3b4e734a99">srow_y</a>[3] ;</div><div class="line"><a name="l03790"></a><span class="lineno"> 3790</span>&#160;    </div><div class="line"><a name="l03791"></a><span class="lineno"> 3791</span>&#160;    nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a69460d9b0b0b19fe740c9b30cfd44e10">sto_xyz</a>.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[2][0] = nhdr.<a class="code" href="../../dd/d75/structnifti__1__header.html#ac2cbc8f49e749336687f095733d0b4a3">srow_z</a>[0] ;</div><div class="line"><a name="l03792"></a><span class="lineno"> 3792</span>&#160;    nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a69460d9b0b0b19fe740c9b30cfd44e10">sto_xyz</a>.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[2][1] = nhdr.<a class="code" href="../../dd/d75/structnifti__1__header.html#ac2cbc8f49e749336687f095733d0b4a3">srow_z</a>[1] ;</div><div class="line"><a name="l03793"></a><span class="lineno"> 3793</span>&#160;    nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a69460d9b0b0b19fe740c9b30cfd44e10">sto_xyz</a>.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[2][2] = nhdr.<a class="code" href="../../dd/d75/structnifti__1__header.html#ac2cbc8f49e749336687f095733d0b4a3">srow_z</a>[2] ;</div><div class="line"><a name="l03794"></a><span class="lineno"> 3794</span>&#160;    nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a69460d9b0b0b19fe740c9b30cfd44e10">sto_xyz</a>.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[2][3] = nhdr.<a class="code" href="../../dd/d75/structnifti__1__header.html#ac2cbc8f49e749336687f095733d0b4a3">srow_z</a>[3] ;</div><div class="line"><a name="l03795"></a><span class="lineno"> 3795</span>&#160;    </div><div class="line"><a name="l03796"></a><span class="lineno"> 3796</span>&#160;    <span class="comment">/* last row is always [ 0 0 0 1 ] */</span></div><div class="line"><a name="l03797"></a><span class="lineno"> 3797</span>&#160;    </div><div class="line"><a name="l03798"></a><span class="lineno"> 3798</span>&#160;    nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a69460d9b0b0b19fe740c9b30cfd44e10">sto_xyz</a>.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[3][0]=nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a69460d9b0b0b19fe740c9b30cfd44e10">sto_xyz</a>.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[3][1]=nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a69460d9b0b0b19fe740c9b30cfd44e10">sto_xyz</a>.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[3][2] = 0.0;</div><div class="line"><a name="l03799"></a><span class="lineno"> 3799</span>&#160;    nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a69460d9b0b0b19fe740c9b30cfd44e10">sto_xyz</a>.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[3][3]= 1.0 ;</div><div class="line"><a name="l03800"></a><span class="lineno"> 3800</span>&#160;    </div><div class="line"><a name="l03801"></a><span class="lineno"> 3801</span>&#160;    nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a1cb3cbfb8172a62e676581d3a1e950af">sto_ijk</a> = <a class="code" href="../../d1/d14/nifti1__io_8c.html#abf7254db0ad36f998a92ac6f42f9c5c9">nifti_mat44_inverse</a>( nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a69460d9b0b0b19fe740c9b30cfd44e10">sto_xyz</a> ) ;</div><div class="line"><a name="l03802"></a><span class="lineno"> 3802</span>&#160;    </div><div class="line"><a name="l03803"></a><span class="lineno"> 3803</span>&#160;    nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a964e209d6110bd26df6935ebf4a2a620">sform_code</a> = nhdr.<a class="code" href="../../dd/d75/structnifti__1__header.html#a48d14671528f3dfe0593320006877a8a">sform_code</a> ;</div><div class="line"><a name="l03804"></a><span class="lineno"> 3804</span>&#160;</div><div class="line"><a name="l03805"></a><span class="lineno"> 3805</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a>.debug &gt; 1 )</div><div class="line"><a name="l03806"></a><span class="lineno"> 3806</span>&#160;       <a class="code" href="../../d1/d14/nifti1__io_8c.html#a3152dd3d1140f401aea7754bf37fd3c2">nifti_disp_matrix_orient</a>(<span class="stringliteral">&quot;-d sform orientations:\n&quot;</span>, nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a69460d9b0b0b19fe740c9b30cfd44e10">sto_xyz</a>);</div><div class="line"><a name="l03807"></a><span class="lineno"> 3807</span>&#160;  }</div><div class="line"><a name="l03808"></a><span class="lineno"> 3808</span>&#160;  </div><div class="line"><a name="l03811"></a><span class="lineno"> 3811</span>&#160;  <span class="keywordflow">if</span>( is_nifti ){</div><div class="line"><a name="l03812"></a><span class="lineno"> 3812</span>&#160;    nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#af4d04ce1f0102c2692d89bbd5476a931">scl_slope</a>   = FIXED_FLOAT( nhdr.<a class="code" href="../../dd/d75/structnifti__1__header.html#a45a97dd330a77ab680ef91c47a761c29">scl_slope</a> ) ;</div><div class="line"><a name="l03813"></a><span class="lineno"> 3813</span>&#160;    nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a7a760c43613a8ba94aaf73e571ba195d">scl_inter</a>   = FIXED_FLOAT( nhdr.<a class="code" href="../../dd/d75/structnifti__1__header.html#aca24a8965851296a63d13da6c7cc3456">scl_inter</a> ) ;</div><div class="line"><a name="l03814"></a><span class="lineno"> 3814</span>&#160;    </div><div class="line"><a name="l03815"></a><span class="lineno"> 3815</span>&#160;    nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a56a5855aaf5323044ffdfde0a23214bc">intent_code</a> = nhdr.<a class="code" href="../../dd/d75/structnifti__1__header.html#a017e9d430b66386e569c6b9cd11059ed">intent_code</a> ;</div><div class="line"><a name="l03816"></a><span class="lineno"> 3816</span>&#160;    </div><div class="line"><a name="l03817"></a><span class="lineno"> 3817</span>&#160;    nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a1c3ebd9911ac46b659c268a95014b5e8">intent_p1</a> = FIXED_FLOAT( nhdr.<a class="code" href="../../dd/d75/structnifti__1__header.html#a5c875c40271c15601b3389450fba85b3">intent_p1</a> ) ;</div><div class="line"><a name="l03818"></a><span class="lineno"> 3818</span>&#160;    nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#aacd903b0043fd9378de6927a64bafa85">intent_p2</a> = FIXED_FLOAT( nhdr.<a class="code" href="../../dd/d75/structnifti__1__header.html#ab39ee04eb345e95dd4e5183e0f84c02b">intent_p2</a> ) ;</div><div class="line"><a name="l03819"></a><span class="lineno"> 3819</span>&#160;    nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a45dd58da99fbf651a96f68dc83e504c5">intent_p3</a> = FIXED_FLOAT( nhdr.<a class="code" href="../../dd/d75/structnifti__1__header.html#aa1eeee8a4cd325b413c5d368ec8fc534">intent_p3</a> ) ;</div><div class="line"><a name="l03820"></a><span class="lineno"> 3820</span>&#160;    </div><div class="line"><a name="l03821"></a><span class="lineno"> 3821</span>&#160;    nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ae17bdf0913f6672abdac81c453ecb598">toffset</a>   = FIXED_FLOAT( nhdr.<a class="code" href="../../dd/d75/structnifti__1__header.html#a0d2b669f776a2b7fb84807ea2f7b4231">toffset</a> ) ;</div><div class="line"><a name="l03822"></a><span class="lineno"> 3822</span>&#160;    </div><div class="line"><a name="l03823"></a><span class="lineno"> 3823</span>&#160;    memcpy(nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a0764cacf8341e21232d9423410c2b4c3">intent_name</a>,nhdr.<a class="code" href="../../dd/d75/structnifti__1__header.html#a6932fdbc1090aa2682eff0131ad52401">intent_name</a>,15); nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a0764cacf8341e21232d9423410c2b4c3">intent_name</a>[15] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l03824"></a><span class="lineno"> 3824</span>&#160;    </div><div class="line"><a name="l03825"></a><span class="lineno"> 3825</span>&#160;    nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a5fa377516ee62469a9051a5834f080af">xyz_units</a>  = XYZT_TO_SPACE(nhdr.<a class="code" href="../../dd/d75/structnifti__1__header.html#a6b95dab630916801b716f52513305e93">xyzt_units</a>) ;</div><div class="line"><a name="l03826"></a><span class="lineno"> 3826</span>&#160;    nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a43e8d714fac078daffbe590253776d4c">time_units</a> = XYZT_TO_TIME (nhdr.<a class="code" href="../../dd/d75/structnifti__1__header.html#a6b95dab630916801b716f52513305e93">xyzt_units</a>) ;</div><div class="line"><a name="l03827"></a><span class="lineno"> 3827</span>&#160;    </div><div class="line"><a name="l03828"></a><span class="lineno"> 3828</span>&#160;    nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a50953906569b58e6b1aaeb7759767b34">freq_dim</a>  = DIM_INFO_TO_FREQ_DIM ( nhdr.<a class="code" href="../../dd/d75/structnifti__1__header.html#a7d3eb58a5415d9c65f3df444ac94fc74">dim_info</a> ) ;</div><div class="line"><a name="l03829"></a><span class="lineno"> 3829</span>&#160;    nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a731f0b9d7b95bc17f9f1a0a568d8ca71">phase_dim</a> = DIM_INFO_TO_PHASE_DIM( nhdr.<a class="code" href="../../dd/d75/structnifti__1__header.html#a7d3eb58a5415d9c65f3df444ac94fc74">dim_info</a> ) ;</div><div class="line"><a name="l03830"></a><span class="lineno"> 3830</span>&#160;    nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ae37a59a187aa187528020cc3abeba5e3">slice_dim</a> = DIM_INFO_TO_SLICE_DIM( nhdr.<a class="code" href="../../dd/d75/structnifti__1__header.html#a7d3eb58a5415d9c65f3df444ac94fc74">dim_info</a> ) ;</div><div class="line"><a name="l03831"></a><span class="lineno"> 3831</span>&#160;    </div><div class="line"><a name="l03832"></a><span class="lineno"> 3832</span>&#160;    nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a0188187b073521e823b51cb5250d3fd4">slice_code</a>     = nhdr.<a class="code" href="../../dd/d75/structnifti__1__header.html#af25a6170a90128800e3986b68fc79e4d">slice_code</a>  ;</div><div class="line"><a name="l03833"></a><span class="lineno"> 3833</span>&#160;    nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ade42791ee9c492d506e6c353a61a8c41">slice_start</a>    = nhdr.<a class="code" href="../../dd/d75/structnifti__1__header.html#adc0e937b2b556da163772b20da729778">slice_start</a> ;</div><div class="line"><a name="l03834"></a><span class="lineno"> 3834</span>&#160;    nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ac67dffa9ebbf79fe08b511cdb9e2476f">slice_end</a>      = nhdr.<a class="code" href="../../dd/d75/structnifti__1__header.html#a260d55840377fe1bcfb49bda5f85b76c">slice_end</a>   ;</div><div class="line"><a name="l03835"></a><span class="lineno"> 3835</span>&#160;    nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a0f2e675a17830fb17c58602e0d6ebd3b">slice_duration</a> = FIXED_FLOAT(nhdr.<a class="code" href="../../dd/d75/structnifti__1__header.html#a70400549d1f42d7f777915273576549b">slice_duration</a>) ;</div><div class="line"><a name="l03836"></a><span class="lineno"> 3836</span>&#160;  }</div><div class="line"><a name="l03837"></a><span class="lineno"> 3837</span>&#160;  </div><div class="line"><a name="l03840"></a><span class="lineno"> 3840</span>&#160;  nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a7d7c74c824d3c8b50a27322366d243f9">cal_min</a> = FIXED_FLOAT(nhdr.<a class="code" href="../../dd/d75/structnifti__1__header.html#a600fb5b0c533454bbbc61b2e0696c9a8">cal_min</a>) ;</div><div class="line"><a name="l03841"></a><span class="lineno"> 3841</span>&#160;  nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a7422e0ecfa446e37bd83fc4fe082135d">cal_max</a> = FIXED_FLOAT(nhdr.<a class="code" href="../../dd/d75/structnifti__1__header.html#af415db2201f47d61354766245c3f2520">cal_max</a>) ;</div><div class="line"><a name="l03842"></a><span class="lineno"> 3842</span>&#160;  </div><div class="line"><a name="l03843"></a><span class="lineno"> 3843</span>&#160;  memcpy(nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a3c79d06a583b3e3a902c5ec33eaab687">descrip</a> ,nhdr.<a class="code" href="../../dd/d75/structnifti__1__header.html#a9cba1416b512dc30a93f8a2964626e5b">descrip</a> ,79) ; nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a3c79d06a583b3e3a902c5ec33eaab687">descrip</a> [79] = <span class="charliteral">&#39;\0&#39;</span> ;</div><div class="line"><a name="l03844"></a><span class="lineno"> 3844</span>&#160;  memcpy(nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ada65c236666fdfa352b2bff24557f704">aux_file</a>,nhdr.<a class="code" href="../../dd/d75/structnifti__1__header.html#a3259014f48a26b81d606ff5017de5c2c">aux_file</a>,23) ; nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ada65c236666fdfa352b2bff24557f704">aux_file</a>[23] = <span class="charliteral">&#39;\0&#39;</span> ;</div><div class="line"><a name="l03845"></a><span class="lineno"> 3845</span>&#160;  </div><div class="line"><a name="l03848"></a><span class="lineno"> 3848</span>&#160;   is_onefile = is_nifti &amp;&amp; NIFTI_ONEFILE(nhdr) ;</div><div class="line"><a name="l03849"></a><span class="lineno"> 3849</span>&#160;</div><div class="line"><a name="l03850"></a><span class="lineno"> 3850</span>&#160;   <span class="keywordflow">if</span>( is_onefile ){</div><div class="line"><a name="l03851"></a><span class="lineno"> 3851</span>&#160;     ioff = (int)nhdr.<a class="code" href="../../dd/d75/structnifti__1__header.html#aa3a09932cda88dd765a438c9b9c46503">vox_offset</a> ;</div><div class="line"><a name="l03852"></a><span class="lineno"> 3852</span>&#160;     <span class="keywordflow">if</span>( ioff &lt; (<span class="keywordtype">int</span>) <span class="keyword">sizeof</span>(nhdr) ) ioff = (int) <span class="keyword">sizeof</span>(nhdr) ;</div><div class="line"><a name="l03853"></a><span class="lineno"> 3853</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03854"></a><span class="lineno"> 3854</span>&#160;     ioff = (int)nhdr.<a class="code" href="../../dd/d75/structnifti__1__header.html#aa3a09932cda88dd765a438c9b9c46503">vox_offset</a> ;</div><div class="line"><a name="l03855"></a><span class="lineno"> 3855</span>&#160;   }</div><div class="line"><a name="l03856"></a><span class="lineno"> 3856</span>&#160;   nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a856fc94a5daed16225264dc8daa96013">iname_offset</a> = ioff ;</div><div class="line"><a name="l03857"></a><span class="lineno"> 3857</span>&#160;</div><div class="line"><a name="l03858"></a><span class="lineno"> 3858</span>&#160;</div><div class="line"><a name="l03860"></a><span class="lineno"> 3860</span>&#160;   <span class="keywordflow">if</span> (fname!=NULL) {</div><div class="line"><a name="l03861"></a><span class="lineno"> 3861</span>&#160;       <a class="code" href="../../d1/d14/nifti1__io_8c.html#a296fad01763163289b0e1030d3a0ebaa">nifti_set_filenames</a>(nim,fname,0,0);</div><div class="line"><a name="l03862"></a><span class="lineno"> 3862</span>&#160;       <span class="keywordflow">if</span> (nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#aa99806d70cacff119b5b6089c3dfdeda">iname</a>==NULL)  { ERREX(<span class="stringliteral">&quot;bad filename&quot;</span>); }</div><div class="line"><a name="l03863"></a><span class="lineno"> 3863</span>&#160;   } <span class="keywordflow">else</span> { </div><div class="line"><a name="l03864"></a><span class="lineno"> 3864</span>&#160;     nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a1c7755060c9cca3612f1101684c9845f">fname</a> = NULL;  </div><div class="line"><a name="l03865"></a><span class="lineno"> 3865</span>&#160;     nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#aa99806d70cacff119b5b6089c3dfdeda">iname</a> = NULL; </div><div class="line"><a name="l03866"></a><span class="lineno"> 3866</span>&#160;   }</div><div class="line"><a name="l03867"></a><span class="lineno"> 3867</span>&#160;</div><div class="line"><a name="l03868"></a><span class="lineno"> 3868</span>&#160;   <span class="comment">/* clear extension fields */</span></div><div class="line"><a name="l03869"></a><span class="lineno"> 3869</span>&#160;   nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a2b9edee8e340d17e4d87b1c682ca091a">num_ext</a> = 0;</div><div class="line"><a name="l03870"></a><span class="lineno"> 3870</span>&#160;   nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a9f8f5fc618182c3baa7cd0c59af69c35">ext_list</a> = NULL;</div><div class="line"><a name="l03871"></a><span class="lineno"> 3871</span>&#160;</div><div class="line"><a name="l03872"></a><span class="lineno"> 3872</span>&#160;   <span class="keywordflow">return</span> nim;</div><div class="line"><a name="l03873"></a><span class="lineno"> 3873</span>&#160;}</div><div class="ttc" id="structnifti__image_html_ade42791ee9c492d506e6c353a61a8c41"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#ade42791ee9c492d506e6c353a61a8c41">nifti_image::slice_start</a></div><div class="ttdeci">int slice_start</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:127</div></div>
<div class="ttc" id="nifti1__io_8c_html_aeeccf4be6839946794c2cc1fdef26d4f"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#aeeccf4be6839946794c2cc1fdef26d4f">nifti_datatype_sizes</a></div><div class="ttdeci">void nifti_datatype_sizes(int datatype, int *nbyper, int *swapsize)</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:1413</div></div>
<div class="ttc" id="structnifti__image_html_a122993357c6c712559c5e0244347c5f3"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a122993357c6c712559c5e0244347c5f3">nifti_image::qto_xyz</a></div><div class="ttdeci">mat44 qto_xyz</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:137</div></div>
<div class="ttc" id="structmat44_html_ad11c8da60dd84b24824f70b08948d6e3"><div class="ttname"><a href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">mat44::m</a></div><div class="ttdeci">float m[4][4]</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:60</div></div>
<div class="ttc" id="structnifti__image_html_aa99806d70cacff119b5b6089c3dfdeda"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#aa99806d70cacff119b5b6089c3dfdeda">nifti_image::iname</a></div><div class="ttdeci">char * iname</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:161</div></div>
<div class="ttc" id="structnifti__1__header_html_aca24a8965851296a63d13da6c7cc3456"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#aca24a8965851296a63d13da6c7cc3456">nifti_1_header::scl_inter</a></div><div class="ttdeci">float scl_inter</div><div class="ttdef"><b>Definition:</b> nifti1.h:171</div></div>
<div class="ttc" id="structnifti__image_html_ae164b68a8420c81d86911bb1c45ae413"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#ae164b68a8420c81d86911bb1c45ae413">nifti_image::analyze75_orient</a></div><div class="ttdeci">analyze_75_orient_code analyze75_orient</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:169</div></div>
<div class="ttc" id="structnifti__1__header_html_af1d99efbd3af0180f9335cbb1b822248"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#af1d99efbd3af0180f9335cbb1b822248">nifti_1_header::sizeof_hdr</a></div><div class="ttdeci">int sizeof_hdr</div><div class="ttdef"><b>Definition:</b> nifti1.h:148</div></div>
<div class="ttc" id="structnifti__image_html_a45dd58da99fbf651a96f68dc83e504c5"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a45dd58da99fbf651a96f68dc83e504c5">nifti_image::intent_p3</a></div><div class="ttdeci">float intent_p3</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:154</div></div>
<div class="ttc" id="structnifti__image_html_a7a760c43613a8ba94aaf73e571ba195d"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a7a760c43613a8ba94aaf73e571ba195d">nifti_image::scl_inter</a></div><div class="ttdeci">float scl_inter</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:114</div></div>
<div class="ttc" id="structnifti__image_html_a731f0b9d7b95bc17f9f1a0a568d8ca71"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a731f0b9d7b95bc17f9f1a0a568d8ca71">nifti_image::phase_dim</a></div><div class="ttdeci">int phase_dim</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:123</div></div>
<div class="ttc" id="structnifti__image_html_afb6cd106a28d4599326042c43d85022b"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#afb6cd106a28d4599326042c43d85022b">nifti_image::dy</a></div><div class="ttdeci">float dy</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:105</div></div>
<div class="ttc" id="structnifti__image_html_a8d9ddfeecae70399a50dca551d69f774"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a8d9ddfeecae70399a50dca551d69f774">nifti_image::dx</a></div><div class="ttdeci">float dx</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:104</div></div>
<div class="ttc" id="structnifti__image_html_ae71e0af4ae7e67eb52a0f5e36be520a6"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#ae71e0af4ae7e67eb52a0f5e36be520a6">nifti_image::pixdim</a></div><div class="ttdeci">float pixdim[8]</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:111</div></div>
<div class="ttc" id="nifti1__io_8c_html_a3152dd3d1140f401aea7754bf37fd3c2"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#a3152dd3d1140f401aea7754bf37fd3c2">nifti_disp_matrix_orient</a></div><div class="ttdeci">int nifti_disp_matrix_orient(const char *mesg, mat44 mat)</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:1132</div></div>
<div class="ttc" id="structnifti__image_html_ac7e2a08cb9631d0cdf6a29da77cb19ee"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#ac7e2a08cb9631d0cdf6a29da77cb19ee">nifti_image::swapsize</a></div><div class="ttdeci">int swapsize</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:163</div></div>
<div class="ttc" id="structnifti__1__header_html_a6fbfa89133238e59e6220e0b778c93ef"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#a6fbfa89133238e59e6220e0b778c93ef">nifti_1_header::qoffset_x</a></div><div class="ttdeci">float qoffset_x</div><div class="ttdef"><b>Definition:</b> nifti1.h:192</div></div>
<div class="ttc" id="structnifti__image_html_ab4e9dd136d1de9fbe03c68f081876b9e"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#ab4e9dd136d1de9fbe03c68f081876b9e">nifti_image::dt</a></div><div class="ttdeci">float dt</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:107</div></div>
<div class="ttc" id="structnifti__1__header_html_a5cfb257cbd7a4b7dde2350877cd126c5"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#a5cfb257cbd7a4b7dde2350877cd126c5">nifti_1_header::qoffset_y</a></div><div class="ttdeci">float qoffset_y</div><div class="ttdef"><b>Definition:</b> nifti1.h:193</div></div>
<div class="ttc" id="structnifti__1__header_html_a7d3eb58a5415d9c65f3df444ac94fc74"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#a7d3eb58a5415d9c65f3df444ac94fc74">nifti_1_header::dim_info</a></div><div class="ttdeci">char dim_info</div><div class="ttdef"><b>Definition:</b> nifti1.h:154</div></div>
<div class="ttc" id="structnifti__image_html"><div class="ttname"><a href="../../d0/de7/structnifti__image.html">nifti_image</a></div><div class="ttdoc">High level data structure for open nifti datasets in the nifti1_io API. Note that this structure is n...</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:89</div></div>
<div class="ttc" id="structnifti__image_html_a440a3fab2a781b43ed8216e26492597d"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a440a3fab2a781b43ed8216e26492597d">nifti_image::nvox</a></div><div class="ttdeci">size_t nvox</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:100</div></div>
<div class="ttc" id="structnifti__1__header_html_a3ade0b01649a3d990ee1dfdef8c452c4"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#a3ade0b01649a3d990ee1dfdef8c452c4">nifti_1_header::quatern_c</a></div><div class="ttdeci">float quatern_c</div><div class="ttdef"><b>Definition:</b> nifti1.h:190</div></div>
<div class="ttc" id="structnifti__image_html_ada65c236666fdfa352b2bff24557f704"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#ada65c236666fdfa352b2bff24557f704">nifti_image::aux_file</a></div><div class="ttdeci">char aux_file[24]</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:158</div></div>
<div class="ttc" id="structnifti__1__header_html_a9cba1416b512dc30a93f8a2964626e5b"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#a9cba1416b512dc30a93f8a2964626e5b">nifti_1_header::descrip</a></div><div class="ttdeci">char descrip[80]</div><div class="ttdef"><b>Definition:</b> nifti1.h:183</div></div>
<div class="ttc" id="structnifti__image_html_a7e04a5e405f9b79dae5652cdcd3832ef"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a7e04a5e405f9b79dae5652cdcd3832ef">nifti_image::nv</a></div><div class="ttdeci">int nv</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:97</div></div>
<div class="ttc" id="structnifti__image_html_a51bad5202c3b9943b3c86f80ca5d1cd1"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a51bad5202c3b9943b3c86f80ca5d1cd1">nifti_image::datatype</a></div><div class="ttdeci">int datatype</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:102</div></div>
<div class="ttc" id="structnifti__1__header_html_a48d14671528f3dfe0593320006877a8a"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#a48d14671528f3dfe0593320006877a8a">nifti_1_header::sform_code</a></div><div class="ttdeci">short sform_code</div><div class="ttdef"><b>Definition:</b> nifti1.h:187</div></div>
<div class="ttc" id="nifti1__io_8c_html_abf7254db0ad36f998a92ac6f42f9c5c9"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#abf7254db0ad36f998a92ac6f42f9c5c9">nifti_mat44_inverse</a></div><div class="ttdeci">mat44 nifti_mat44_inverse(mat44 R)</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:1668</div></div>
<div class="ttc" id="structnifti__1__header_html_a600fb5b0c533454bbbc61b2e0696c9a8"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#a600fb5b0c533454bbbc61b2e0696c9a8">nifti_1_header::cal_min</a></div><div class="ttdeci">float cal_min</div><div class="ttdef"><b>Definition:</b> nifti1.h:176</div></div>
<div class="ttc" id="structnifti__1__header_html_ad5f8888fcc5fde14d3e387653721e270"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#ad5f8888fcc5fde14d3e387653721e270">nifti_1_header::datatype</a></div><div class="ttdeci">short datatype</div><div class="ttdef"><b>Definition:</b> nifti1.h:165</div></div>
<div class="ttc" id="structnifti__image_html_ab1c6399d45bf77d6eff712d318a9d0ca"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#ab1c6399d45bf77d6eff712d318a9d0ca">nifti_image::du</a></div><div class="ttdeci">float du</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:108</div></div>
<div class="ttc" id="structnifti__1__header_html_aa1eeee8a4cd325b413c5d368ec8fc534"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#aa1eeee8a4cd325b413c5d368ec8fc534">nifti_1_header::intent_p3</a></div><div class="ttdeci">float intent_p3</div><div class="ttdef"><b>Definition:</b> nifti1.h:162</div></div>
<div class="ttc" id="structnifti__image_html_ab4a9c0956e858fd877ee81796adc66bc"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#ab4a9c0956e858fd877ee81796adc66bc">nifti_image::nu</a></div><div class="ttdeci">int nu</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:96</div></div>
<div class="ttc" id="nifti1__io_8c_html_adf2a70eac549a80a246d380240a8d822"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#adf2a70eac549a80a246d380240a8d822">nifti_short_order</a></div><div class="ttdeci">int nifti_short_order(void)</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:6321</div></div>
<div class="ttc" id="structnifti__1__header_html_a017e9d430b66386e569c6b9cd11059ed"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#a017e9d430b66386e569c6b9cd11059ed">nifti_1_header::intent_code</a></div><div class="ttdeci">short intent_code</div><div class="ttdef"><b>Definition:</b> nifti1.h:164</div></div>
<div class="ttc" id="structnifti__1__header_html_ace3aeebb3c10362c5c2e48cee87a7f2e"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#ace3aeebb3c10362c5c2e48cee87a7f2e">nifti_1_header::dim</a></div><div class="ttdeci">short dim[8]</div><div class="ttdef"><b>Definition:</b> nifti1.h:157</div></div>
<div class="ttc" id="structnifti__1__header_html_a6b95dab630916801b716f52513305e93"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#a6b95dab630916801b716f52513305e93">nifti_1_header::xyzt_units</a></div><div class="ttdeci">char xyzt_units</div><div class="ttdef"><b>Definition:</b> nifti1.h:174</div></div>
<div class="ttc" id="structnifti__image_html_a7422e0ecfa446e37bd83fc4fe082135d"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a7422e0ecfa446e37bd83fc4fe082135d">nifti_image::cal_max</a></div><div class="ttdeci">float cal_max</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:117</div></div>
<div class="ttc" id="structnifti__image_html_a0f2e675a17830fb17c58602e0d6ebd3b"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a0f2e675a17830fb17c58602e0d6ebd3b">nifti_image::slice_duration</a></div><div class="ttdeci">float slice_duration</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:129</div></div>
<div class="ttc" id="structnifti__1__header_html_aa3a09932cda88dd765a438c9b9c46503"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#aa3a09932cda88dd765a438c9b9c46503">nifti_1_header::vox_offset</a></div><div class="ttdeci">float vox_offset</div><div class="ttdef"><b>Definition:</b> nifti1.h:169</div></div>
<div class="ttc" id="structnifti__image_html_ae0bc5b6b2e350108e468124b682b715c"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#ae0bc5b6b2e350108e468124b682b715c">nifti_image::nw</a></div><div class="ttdeci">int nw</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:98</div></div>
<div class="ttc" id="structnifti__image_html_a6155d97e665d879e662bf650c09d0bc1"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a6155d97e665d879e662bf650c09d0bc1">nifti_image::dv</a></div><div class="ttdeci">float dv</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:109</div></div>
<div class="ttc" id="structnifti__1__header_html_afa546a9f49e7e080f952927d6bcdfbbe"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#afa546a9f49e7e080f952927d6bcdfbbe">nifti_1_header::pixdim</a></div><div class="ttdeci">float pixdim[8]</div><div class="ttdef"><b>Definition:</b> nifti1.h:168</div></div>
<div class="ttc" id="structnifti__image_html_ab7d8391bc07972e0b051f157dde00a04"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#ab7d8391bc07972e0b051f157dde00a04">nifti_image::dw</a></div><div class="ttdeci">float dw</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:110</div></div>
<div class="ttc" id="structnifti__image_html_ad61740a0245f2af05ded39cb0648ae07"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#ad61740a0245f2af05ded39cb0648ae07">nifti_image::ndim</a></div><div class="ttdeci">int ndim</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:91</div></div>
<div class="ttc" id="structnifti__image_html_adfcbe7e11b44d8a964d61c3e17554686"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#adfcbe7e11b44d8a964d61c3e17554686">nifti_image::qform_code</a></div><div class="ttdeci">int qform_code</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:119</div></div>
<div class="ttc" id="structnifti__image_html_a50953906569b58e6b1aaeb7759767b34"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a50953906569b58e6b1aaeb7759767b34">nifti_image::freq_dim</a></div><div class="ttdeci">int freq_dim</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:122</div></div>
<div class="ttc" id="structnifti__image_html_a43e8d714fac078daffbe590253776d4c"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a43e8d714fac078daffbe590253776d4c">nifti_image::time_units</a></div><div class="ttdeci">int time_units</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:146</div></div>
<div class="ttc" id="structnifti__1__header_html_ac2cbc8f49e749336687f095733d0b4a3"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#ac2cbc8f49e749336687f095733d0b4a3">nifti_1_header::srow_z</a></div><div class="ttdeci">float srow_z[4]</div><div class="ttdef"><b>Definition:</b> nifti1.h:198</div></div>
<div class="ttc" id="structnifti__image_html_a856fc94a5daed16225264dc8daa96013"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a856fc94a5daed16225264dc8daa96013">nifti_image::iname_offset</a></div><div class="ttdeci">int iname_offset</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:162</div></div>
<div class="ttc" id="structnifti__1__header_html_a530588bf405af52255dc064a6f451c71"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#a530588bf405af52255dc064a6f451c71">nifti_1_header::quatern_b</a></div><div class="ttdeci">float quatern_b</div><div class="ttdef"><b>Definition:</b> nifti1.h:189</div></div>
<div class="ttc" id="structnifti__image_html_a3c79d06a583b3e3a902c5ec33eaab687"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a3c79d06a583b3e3a902c5ec33eaab687">nifti_image::descrip</a></div><div class="ttdeci">char descrip[80]</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:157</div></div>
<div class="ttc" id="structnifti__1__header_html_a3259014f48a26b81d606ff5017de5c2c"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#a3259014f48a26b81d606ff5017de5c2c">nifti_1_header::aux_file</a></div><div class="ttdeci">char aux_file[24]</div><div class="ttdef"><b>Definition:</b> nifti1.h:184</div></div>
<div class="ttc" id="structnifti__image_html_a964e209d6110bd26df6935ebf4a2a620"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a964e209d6110bd26df6935ebf4a2a620">nifti_image::sform_code</a></div><div class="ttdeci">int sform_code</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:120</div></div>
<div class="ttc" id="structnifti__1__header_html_a95ae85e5e0bba57c4b3cbd8a0b32168b"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#a95ae85e5e0bba57c4b3cbd8a0b32168b">nifti_1_header::qform_code</a></div><div class="ttdeci">short qform_code</div><div class="ttdef"><b>Definition:</b> nifti1.h:186</div></div>
<div class="ttc" id="structnifti__image_html_a69460d9b0b0b19fe740c9b30cfd44e10"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a69460d9b0b0b19fe740c9b30cfd44e10">nifti_image::sto_xyz</a></div><div class="ttdeci">mat44 sto_xyz</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:140</div></div>
<div class="ttc" id="structnifti__1__header_html_a6932fdbc1090aa2682eff0131ad52401"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#a6932fdbc1090aa2682eff0131ad52401">nifti_1_header::intent_name</a></div><div class="ttdeci">char intent_name[16]</div><div class="ttdef"><b>Definition:</b> nifti1.h:200</div></div>
<div class="ttc" id="group__NIFTI1__XFORM__CODES_html_ga07bbf1c2d76a8d8770fc5d76b24647d1"><div class="ttname"><a href="../../d3/db1/group__NIFTI1__XFORM__CODES.html#ga07bbf1c2d76a8d8770fc5d76b24647d1">NIFTI_XFORM_UNKNOWN</a></div><div class="ttdeci">#define NIFTI_XFORM_UNKNOWN</div><div class="ttdef"><b>Definition:</b> nifti1.h:1215</div></div>
<div class="ttc" id="structnifti__image_html_a054f5f2c357dd6833efd467ac202f0a5"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a054f5f2c357dd6833efd467ac202f0a5">nifti_image::dim</a></div><div class="ttdeci">int dim[8]</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:99</div></div>
<div class="ttc" id="structnifti__1__header_html_ab39ee04eb345e95dd4e5183e0f84c02b"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#ab39ee04eb345e95dd4e5183e0f84c02b">nifti_1_header::intent_p2</a></div><div class="ttdeci">float intent_p2</div><div class="ttdef"><b>Definition:</b> nifti1.h:160</div></div>
<div class="ttc" id="structnifti__image_html_a5ce21d97da49b1dcf9415e83bbf07caf"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a5ce21d97da49b1dcf9415e83bbf07caf">nifti_image::byteorder</a></div><div class="ttdeci">int byteorder</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:164</div></div>
<div class="ttc" id="structnifti__image_html_a56a5855aaf5323044ffdfde0a23214bc"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a56a5855aaf5323044ffdfde0a23214bc">nifti_image::intent_code</a></div><div class="ttdeci">int intent_code</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:151</div></div>
<div class="ttc" id="structnifti__1__header_html_a5c875c40271c15601b3389450fba85b3"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#a5c875c40271c15601b3389450fba85b3">nifti_1_header::intent_p1</a></div><div class="ttdeci">float intent_p1</div><div class="ttdef"><b>Definition:</b> nifti1.h:158</div></div>
<div class="ttc" id="structnifti__image_html_a1c3ebd9911ac46b659c268a95014b5e8"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a1c3ebd9911ac46b659c268a95014b5e8">nifti_image::intent_p1</a></div><div class="ttdeci">float intent_p1</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:152</div></div>
<div class="ttc" id="structnifti__image_html_a0188187b073521e823b51cb5250d3fd4"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a0188187b073521e823b51cb5250d3fd4">nifti_image::slice_code</a></div><div class="ttdeci">int slice_code</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:126</div></div>
<div class="ttc" id="structnifti__image_html_a8731bb1d867cdd24335e4bc3dd131c44"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a8731bb1d867cdd24335e4bc3dd131c44">nifti_image::nz</a></div><div class="ttdeci">int nz</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:94</div></div>
<div class="ttc" id="structnifti__image_html_ac55996e58670948b220bebbf5d4bb0f4"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#ac55996e58670948b220bebbf5d4bb0f4">nifti_image::nifti_type</a></div><div class="ttdeci">int nifti_type</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:148</div></div>
<div class="ttc" id="structnifti__1__header_html_af415db2201f47d61354766245c3f2520"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#af415db2201f47d61354766245c3f2520">nifti_1_header::cal_max</a></div><div class="ttdeci">float cal_max</div><div class="ttdef"><b>Definition:</b> nifti1.h:175</div></div>
<div class="ttc" id="nifti1__io_8c_html_a50dc91b6264f53456387f95907bc86ee"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#a50dc91b6264f53456387f95907bc86ee">swap_nifti_header</a></div><div class="ttdeci">void swap_nifti_header(struct nifti_1_header *h, int is_nifti)</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:2266</div></div>
<div class="ttc" id="structnifti__image_html_ae17bdf0913f6672abdac81c453ecb598"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#ae17bdf0913f6672abdac81c453ecb598">nifti_image::toffset</a></div><div class="ttdeci">float toffset</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:143</div></div>
<div class="ttc" id="structnifti__1__header_html_adc0e937b2b556da163772b20da729778"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#adc0e937b2b556da163772b20da729778">nifti_1_header::slice_start</a></div><div class="ttdeci">short slice_start</div><div class="ttdef"><b>Definition:</b> nifti1.h:167</div></div>
<div class="ttc" id="structnifti__image_html_ab3d3fdfda87503e5e8d53f0342906aba"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#ab3d3fdfda87503e5e8d53f0342906aba">nifti_image::nt</a></div><div class="ttdeci">int nt</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:95</div></div>
<div class="ttc" id="structnifti__1__header_html_a45a97dd330a77ab680ef91c47a761c29"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#a45a97dd330a77ab680ef91c47a761c29">nifti_1_header::scl_slope</a></div><div class="ttdeci">float scl_slope</div><div class="ttdef"><b>Definition:</b> nifti1.h:170</div></div>
<div class="ttc" id="structnifti__image_html_af4d04ce1f0102c2692d89bbd5476a931"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#af4d04ce1f0102c2692d89bbd5476a931">nifti_image::scl_slope</a></div><div class="ttdeci">float scl_slope</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:113</div></div>
<div class="ttc" id="structnifti__1__header_html_ae5572284c9945360d4fa5c3b4e734a99"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#ae5572284c9945360d4fa5c3b4e734a99">nifti_1_header::srow_y</a></div><div class="ttdeci">float srow_y[4]</div><div class="ttdef"><b>Definition:</b> nifti1.h:197</div></div>
<div class="ttc" id="structnifti__image_html_a9f8f5fc618182c3baa7cd0c59af69c35"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a9f8f5fc618182c3baa7cd0c59af69c35">nifti_image::ext_list</a></div><div class="ttdeci">nifti1_extension * ext_list</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:168</div></div>
<div class="ttc" id="structnifti__image_html_a5e971f24a97c592fefa28d084c02769a"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a5e971f24a97c592fefa28d084c02769a">nifti_image::ny</a></div><div class="ttdeci">int ny</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:93</div></div>
<div class="ttc" id="structnifti__image_html_a7d7c74c824d3c8b50a27322366d243f9"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a7d7c74c824d3c8b50a27322366d243f9">nifti_image::cal_min</a></div><div class="ttdeci">float cal_min</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:116</div></div>
<div class="ttc" id="structnifti__1__header_html_af47d0d4ae23f57441edcef9594fd1495"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#af47d0d4ae23f57441edcef9594fd1495">nifti_1_header::quatern_d</a></div><div class="ttdeci">float quatern_d</div><div class="ttdef"><b>Definition:</b> nifti1.h:191</div></div>
<div class="ttc" id="structnifti__image_html_a750a76b493a4f2fc04c66ce2d4407bce"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a750a76b493a4f2fc04c66ce2d4407bce">nifti_image::qto_ijk</a></div><div class="ttdeci">mat44 qto_ijk</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:138</div></div>
<div class="ttc" id="structnifti__1__header_html_a0d2b669f776a2b7fb84807ea2f7b4231"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#a0d2b669f776a2b7fb84807ea2f7b4231">nifti_1_header::toffset</a></div><div class="ttdeci">float toffset</div><div class="ttdef"><b>Definition:</b> nifti1.h:178</div></div>
<div class="ttc" id="structnifti__image_html_ac462fb16a688d8dbec164456febdc9c7"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#ac462fb16a688d8dbec164456febdc9c7">nifti_image::dz</a></div><div class="ttdeci">float dz</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:106</div></div>
<div class="ttc" id="nifti1__io_8c_html_a4b183639b2e242ac32210fe3437f60d2"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#a4b183639b2e242ac32210fe3437f60d2">nifti_quatern_to_mat44</a></div><div class="ttdeci">mat44 nifti_quatern_to_mat44(float qb, float qc, float qd, float qx, float qy, float qz, float dx, float dy, float dz, float qfac)</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:1466</div></div>
<div class="ttc" id="structnifti__image_html_a1c7755060c9cca3612f1101684c9845f"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a1c7755060c9cca3612f1101684c9845f">nifti_image::fname</a></div><div class="ttdeci">char * fname</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:160</div></div>
<div class="ttc" id="structnifti__image_html_a0764cacf8341e21232d9423410c2b4c3"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a0764cacf8341e21232d9423410c2b4c3">nifti_image::intent_name</a></div><div class="ttdeci">char intent_name[16]</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:155</div></div>
<div class="ttc" id="nifti1__io_8c_html_a296fad01763163289b0e1030d3a0ebaa"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#a296fad01763163289b0e1030d3a0ebaa">nifti_set_filenames</a></div><div class="ttdeci">int nifti_set_filenames(nifti_image *nim, const char *prefix, int check, int set_byte_order)</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:3054</div></div>
<div class="ttc" id="structnifti__image_html_a9c7db78ad411a6e2b8a8ab071bbbe0a8"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a9c7db78ad411a6e2b8a8ab071bbbe0a8">nifti_image::data</a></div><div class="ttdeci">void * data</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:165</div></div>
<div class="ttc" id="structnifti__image_html_a79a4382f115cb6c7f8977c36d73e6749"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a79a4382f115cb6c7f8977c36d73e6749">nifti_image::nbyper</a></div><div class="ttdeci">int nbyper</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:101</div></div>
<div class="ttc" id="nifti1__io_8c_html_af9d6192cbeeb85cde0a3c41acf9c2208"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#af9d6192cbeeb85cde0a3c41acf9c2208">disp_nifti_1_header</a></div><div class="ttdeci">int disp_nifti_1_header(const char *info, const nifti_1_header *hp)</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:3505</div></div>
<div class="ttc" id="structnifti__1__header_html_a962002307f10b359788cea98ebcb40b6"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#a962002307f10b359788cea98ebcb40b6">nifti_1_header::qoffset_z</a></div><div class="ttdeci">float qoffset_z</div><div class="ttdef"><b>Definition:</b> nifti1.h:194</div></div>
<div class="ttc" id="structnifti__image_html_ac67dffa9ebbf79fe08b511cdb9e2476f"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#ac67dffa9ebbf79fe08b511cdb9e2476f">nifti_image::slice_end</a></div><div class="ttdeci">int slice_end</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:128</div></div>
<div class="ttc" id="structnifti__image_html_ae37a59a187aa187528020cc3abeba5e3"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#ae37a59a187aa187528020cc3abeba5e3">nifti_image::slice_dim</a></div><div class="ttdeci">int slice_dim</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:124</div></div>
<div class="ttc" id="structnifti__1__header_html_ab672320f8968eb98b208b340c87515ba"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#ab672320f8968eb98b208b340c87515ba">nifti_1_header::srow_x</a></div><div class="ttdeci">float srow_x[4]</div><div class="ttdef"><b>Definition:</b> nifti1.h:196</div></div>
<div class="ttc" id="structnifti__1__header_html_a260d55840377fe1bcfb49bda5f85b76c"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#a260d55840377fe1bcfb49bda5f85b76c">nifti_1_header::slice_end</a></div><div class="ttdeci">short slice_end</div><div class="ttdef"><b>Definition:</b> nifti1.h:172</div></div>
<div class="ttc" id="structnifti__1__header_html_a70400549d1f42d7f777915273576549b"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#a70400549d1f42d7f777915273576549b">nifti_1_header::slice_duration</a></div><div class="ttdeci">float slice_duration</div><div class="ttdef"><b>Definition:</b> nifti1.h:177</div></div>
<div class="ttc" id="structnifti__1__header_html_af25a6170a90128800e3986b68fc79e4d"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#af25a6170a90128800e3986b68fc79e4d">nifti_1_header::slice_code</a></div><div class="ttdeci">char slice_code</div><div class="ttdef"><b>Definition:</b> nifti1.h:173</div></div>
<div class="ttc" id="nifti1__io_8c_html_a6e047e1dc2f826a4adff048bee8f5df7"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a></div><div class="ttdeci">static nifti_global_options g_opts</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:344</div></div>
<div class="ttc" id="structnifti__image_html_a1cb3cbfb8172a62e676581d3a1e950af"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a1cb3cbfb8172a62e676581d3a1e950af">nifti_image::sto_ijk</a></div><div class="ttdeci">mat44 sto_ijk</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:141</div></div>
<div class="ttc" id="structnifti__image_html_a2b9edee8e340d17e4d87b1c682ca091a"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a2b9edee8e340d17e4d87b1c682ca091a">nifti_image::num_ext</a></div><div class="ttdeci">int num_ext</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:167</div></div>
<div class="ttc" id="structnifti__image_html_aacd903b0043fd9378de6927a64bafa85"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#aacd903b0043fd9378de6927a64bafa85">nifti_image::intent_p2</a></div><div class="ttdeci">float intent_p2</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:153</div></div>
<div class="ttc" id="structnifti__image_html_a26fc9296e99700da54ca3749622f83bd"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a26fc9296e99700da54ca3749622f83bd">nifti_image::quatern_b</a></div><div class="ttdeci">float quatern_b</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:133</div></div>
<div class="ttc" id="structnifti__image_html_ab99743dd7967cff6845f1a96b2044167"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#ab99743dd7967cff6845f1a96b2044167">nifti_image::nx</a></div><div class="ttdeci">int nx</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:92</div></div>
<div class="ttc" id="structnifti__image_html_a5fa377516ee62469a9051a5834f080af"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a5fa377516ee62469a9051a5834f080af">nifti_image::xyz_units</a></div><div class="ttdeci">int xyz_units</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:145</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad1d2054b280d453c7bf680fc21b587a3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad1d2054b280d453c7bf680fc21b587a3">&#9670;&nbsp;</a></span>nifti_convert_nim2nhdr()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../dd/d75/structnifti__1__header.html">nifti_1_header</a> nifti_convert_nim2nhdr </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d0/de7/structnifti__image.html">nifti_image</a> *&#160;</td>
          <td class="paramname"><em>nim</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>convert a <a class="el" href="../../d0/de7/structnifti__image.html" title="High level data structure for open nifti datasets in the nifti1_io API. Note that this structure is n...">nifti_image</a> structure to a <a class="el" href="../../dd/d75/structnifti__1__header.html" title="Data structure defining the fields in the nifti1 header. This binary header should be found at the be...">nifti_1_header</a> struct</p>
<p>No allocation is done, this should be used via structure copy. As in: </p><pre>
<a class="el" href="../../dd/d75/structnifti__1__header.html" title="Data structure defining the fields in the nifti1 header. This binary header should be found at the be...">nifti_1_header</a> my_header;
my_header = nifti_convert_nim2nhdr(my_nim_pointer);
</pre> <ul>
<li>load the ANALYZE-7.5 generic parts of the header struct <br />
</li>
<li>Load NIFTI specific stuff into the header </li>
</ul>
<div class="fragment"><div class="line"><a name="l05408"></a><span class="lineno"> 5408</span>&#160;{</div><div class="line"><a name="l05409"></a><span class="lineno"> 5409</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d75/structnifti__1__header.html">nifti_1_header</a> nhdr;</div><div class="line"><a name="l05410"></a><span class="lineno"> 5410</span>&#160;</div><div class="line"><a name="l05411"></a><span class="lineno"> 5411</span>&#160;   memset(&amp;nhdr,0,<span class="keyword">sizeof</span>(nhdr)) ;  <span class="comment">/* zero out header, to be safe */</span></div><div class="line"><a name="l05412"></a><span class="lineno"> 5412</span>&#160;</div><div class="line"><a name="l05413"></a><span class="lineno"> 5413</span>&#160;</div><div class="line"><a name="l05416"></a><span class="lineno"> 5416</span>&#160;   nhdr.sizeof_hdr = <span class="keyword">sizeof</span>(nhdr) ;</div><div class="line"><a name="l05417"></a><span class="lineno"> 5417</span>&#160;   nhdr.regular    = <span class="charliteral">&#39;r&#39;</span> ;             <span class="comment">/* for some stupid reason */</span></div><div class="line"><a name="l05418"></a><span class="lineno"> 5418</span>&#160;</div><div class="line"><a name="l05419"></a><span class="lineno"> 5419</span>&#160;   nhdr.dim[0] = nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ad61740a0245f2af05ded39cb0648ae07">ndim</a> ;</div><div class="line"><a name="l05420"></a><span class="lineno"> 5420</span>&#160;   nhdr.dim[1] = nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ab99743dd7967cff6845f1a96b2044167">nx</a> ; nhdr.dim[2] = nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a5e971f24a97c592fefa28d084c02769a">ny</a> ; nhdr.dim[3] = nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a8731bb1d867cdd24335e4bc3dd131c44">nz</a> ;</div><div class="line"><a name="l05421"></a><span class="lineno"> 5421</span>&#160;   nhdr.dim[4] = nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ab3d3fdfda87503e5e8d53f0342906aba">nt</a> ; nhdr.dim[5] = nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ab4a9c0956e858fd877ee81796adc66bc">nu</a> ; nhdr.dim[6] = nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a7e04a5e405f9b79dae5652cdcd3832ef">nv</a> ;</div><div class="line"><a name="l05422"></a><span class="lineno"> 5422</span>&#160;   nhdr.dim[7] = nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ae0bc5b6b2e350108e468124b682b715c">nw</a> ;</div><div class="line"><a name="l05423"></a><span class="lineno"> 5423</span>&#160;</div><div class="line"><a name="l05424"></a><span class="lineno"> 5424</span>&#160;   nhdr.pixdim[0] = 0.0 ;</div><div class="line"><a name="l05425"></a><span class="lineno"> 5425</span>&#160;   nhdr.pixdim[1] = nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a8d9ddfeecae70399a50dca551d69f774">dx</a> ; nhdr.pixdim[2] = nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#afb6cd106a28d4599326042c43d85022b">dy</a> ;</div><div class="line"><a name="l05426"></a><span class="lineno"> 5426</span>&#160;   nhdr.pixdim[3] = nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ac462fb16a688d8dbec164456febdc9c7">dz</a> ; nhdr.pixdim[4] = nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ab4e9dd136d1de9fbe03c68f081876b9e">dt</a> ;</div><div class="line"><a name="l05427"></a><span class="lineno"> 5427</span>&#160;   nhdr.pixdim[5] = nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ab1c6399d45bf77d6eff712d318a9d0ca">du</a> ; nhdr.pixdim[6] = nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a6155d97e665d879e662bf650c09d0bc1">dv</a> ;</div><div class="line"><a name="l05428"></a><span class="lineno"> 5428</span>&#160;   nhdr.pixdim[7] = nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ab7d8391bc07972e0b051f157dde00a04">dw</a> ;</div><div class="line"><a name="l05429"></a><span class="lineno"> 5429</span>&#160;</div><div class="line"><a name="l05430"></a><span class="lineno"> 5430</span>&#160;   nhdr.datatype = nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a51bad5202c3b9943b3c86f80ca5d1cd1">datatype</a> ;</div><div class="line"><a name="l05431"></a><span class="lineno"> 5431</span>&#160;   nhdr.bitpix   = 8 * nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a79a4382f115cb6c7f8977c36d73e6749">nbyper</a> ;</div><div class="line"><a name="l05432"></a><span class="lineno"> 5432</span>&#160;</div><div class="line"><a name="l05433"></a><span class="lineno"> 5433</span>&#160;   <span class="keywordflow">if</span>( nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a7422e0ecfa446e37bd83fc4fe082135d">cal_max</a> &gt; nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a7d7c74c824d3c8b50a27322366d243f9">cal_min</a> ){</div><div class="line"><a name="l05434"></a><span class="lineno"> 5434</span>&#160;     nhdr.cal_max = nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a7422e0ecfa446e37bd83fc4fe082135d">cal_max</a> ;</div><div class="line"><a name="l05435"></a><span class="lineno"> 5435</span>&#160;     nhdr.cal_min = nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a7d7c74c824d3c8b50a27322366d243f9">cal_min</a> ;</div><div class="line"><a name="l05436"></a><span class="lineno"> 5436</span>&#160;   }</div><div class="line"><a name="l05437"></a><span class="lineno"> 5437</span>&#160;</div><div class="line"><a name="l05438"></a><span class="lineno"> 5438</span>&#160;   <span class="keywordflow">if</span>( nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#af4d04ce1f0102c2692d89bbd5476a931">scl_slope</a> != 0.0 ){</div><div class="line"><a name="l05439"></a><span class="lineno"> 5439</span>&#160;     nhdr.scl_slope = nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#af4d04ce1f0102c2692d89bbd5476a931">scl_slope</a> ;</div><div class="line"><a name="l05440"></a><span class="lineno"> 5440</span>&#160;     nhdr.scl_inter = nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a7a760c43613a8ba94aaf73e571ba195d">scl_inter</a> ;</div><div class="line"><a name="l05441"></a><span class="lineno"> 5441</span>&#160;   }</div><div class="line"><a name="l05442"></a><span class="lineno"> 5442</span>&#160;</div><div class="line"><a name="l05443"></a><span class="lineno"> 5443</span>&#160;   <span class="keywordflow">if</span>( nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a3c79d06a583b3e3a902c5ec33eaab687">descrip</a>[0] != <span class="charliteral">&#39;\0&#39;</span> ){</div><div class="line"><a name="l05444"></a><span class="lineno"> 5444</span>&#160;     memcpy(nhdr.descrip ,nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a3c79d06a583b3e3a902c5ec33eaab687">descrip</a> ,79) ; nhdr.descrip[79] = <span class="charliteral">&#39;\0&#39;</span> ;</div><div class="line"><a name="l05445"></a><span class="lineno"> 5445</span>&#160;   }</div><div class="line"><a name="l05446"></a><span class="lineno"> 5446</span>&#160;   <span class="keywordflow">if</span>( nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ada65c236666fdfa352b2bff24557f704">aux_file</a>[0] != <span class="charliteral">&#39;\0&#39;</span> ){</div><div class="line"><a name="l05447"></a><span class="lineno"> 5447</span>&#160;     memcpy(nhdr.aux_file ,nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ada65c236666fdfa352b2bff24557f704">aux_file</a> ,23) ; nhdr.aux_file[23] = <span class="charliteral">&#39;\0&#39;</span> ;</div><div class="line"><a name="l05448"></a><span class="lineno"> 5448</span>&#160;   }</div><div class="line"><a name="l05449"></a><span class="lineno"> 5449</span>&#160;</div><div class="line"><a name="l05452"></a><span class="lineno"> 5452</span>&#160;   <span class="keywordflow">if</span>( nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ac55996e58670948b220bebbf5d4bb0f4">nifti_type</a> &gt; NIFTI_FTYPE_ANALYZE ){ <span class="comment">/* then not ANALYZE */</span></div><div class="line"><a name="l05453"></a><span class="lineno"> 5453</span>&#160;</div><div class="line"><a name="l05454"></a><span class="lineno"> 5454</span>&#160;     <span class="keywordflow">if</span>( nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ac55996e58670948b220bebbf5d4bb0f4">nifti_type</a> == NIFTI_FTYPE_NIFTI1_1 ) strcpy(nhdr.magic,<span class="stringliteral">&quot;n+1&quot;</span>) ;</div><div class="line"><a name="l05455"></a><span class="lineno"> 5455</span>&#160;     <span class="keywordflow">else</span>                                          strcpy(nhdr.magic,<span class="stringliteral">&quot;ni1&quot;</span>) ;</div><div class="line"><a name="l05456"></a><span class="lineno"> 5456</span>&#160;</div><div class="line"><a name="l05457"></a><span class="lineno"> 5457</span>&#160;     nhdr.pixdim[1] = fabs(nhdr.pixdim[1]) ; nhdr.pixdim[2] = fabs(nhdr.pixdim[2]) ;</div><div class="line"><a name="l05458"></a><span class="lineno"> 5458</span>&#160;     nhdr.pixdim[3] = fabs(nhdr.pixdim[3]) ; nhdr.pixdim[4] = fabs(nhdr.pixdim[4]) ;</div><div class="line"><a name="l05459"></a><span class="lineno"> 5459</span>&#160;     nhdr.pixdim[5] = fabs(nhdr.pixdim[5]) ; nhdr.pixdim[6] = fabs(nhdr.pixdim[6]) ;</div><div class="line"><a name="l05460"></a><span class="lineno"> 5460</span>&#160;     nhdr.pixdim[7] = fabs(nhdr.pixdim[7]) ;</div><div class="line"><a name="l05461"></a><span class="lineno"> 5461</span>&#160;</div><div class="line"><a name="l05462"></a><span class="lineno"> 5462</span>&#160;     nhdr.intent_code = nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a56a5855aaf5323044ffdfde0a23214bc">intent_code</a> ;</div><div class="line"><a name="l05463"></a><span class="lineno"> 5463</span>&#160;     nhdr.intent_p1   = nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a1c3ebd9911ac46b659c268a95014b5e8">intent_p1</a> ;</div><div class="line"><a name="l05464"></a><span class="lineno"> 5464</span>&#160;     nhdr.intent_p2   = nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#aacd903b0043fd9378de6927a64bafa85">intent_p2</a> ;</div><div class="line"><a name="l05465"></a><span class="lineno"> 5465</span>&#160;     nhdr.intent_p3   = nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a45dd58da99fbf651a96f68dc83e504c5">intent_p3</a> ;</div><div class="line"><a name="l05466"></a><span class="lineno"> 5466</span>&#160;     <span class="keywordflow">if</span>( nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a0764cacf8341e21232d9423410c2b4c3">intent_name</a>[0] != <span class="charliteral">&#39;\0&#39;</span> ){</div><div class="line"><a name="l05467"></a><span class="lineno"> 5467</span>&#160;       memcpy(nhdr.intent_name,nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a0764cacf8341e21232d9423410c2b4c3">intent_name</a>,15) ;</div><div class="line"><a name="l05468"></a><span class="lineno"> 5468</span>&#160;       nhdr.intent_name[15] = <span class="charliteral">&#39;\0&#39;</span> ;</div><div class="line"><a name="l05469"></a><span class="lineno"> 5469</span>&#160;     }</div><div class="line"><a name="l05470"></a><span class="lineno"> 5470</span>&#160;</div><div class="line"><a name="l05471"></a><span class="lineno"> 5471</span>&#160;     nhdr.vox_offset  = (float) nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a856fc94a5daed16225264dc8daa96013">iname_offset</a> ;</div><div class="line"><a name="l05472"></a><span class="lineno"> 5472</span>&#160;     nhdr.xyzt_units  = SPACE_TIME_TO_XYZT( nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a5fa377516ee62469a9051a5834f080af">xyz_units</a>, nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a43e8d714fac078daffbe590253776d4c">time_units</a> ) ;</div><div class="line"><a name="l05473"></a><span class="lineno"> 5473</span>&#160;     nhdr.toffset     = nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ae17bdf0913f6672abdac81c453ecb598">toffset</a> ;</div><div class="line"><a name="l05474"></a><span class="lineno"> 5474</span>&#160;</div><div class="line"><a name="l05475"></a><span class="lineno"> 5475</span>&#160;     <span class="keywordflow">if</span>( nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#adfcbe7e11b44d8a964d61c3e17554686">qform_code</a> &gt; 0 ){</div><div class="line"><a name="l05476"></a><span class="lineno"> 5476</span>&#160;       nhdr.qform_code = nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#adfcbe7e11b44d8a964d61c3e17554686">qform_code</a> ;</div><div class="line"><a name="l05477"></a><span class="lineno"> 5477</span>&#160;       nhdr.quatern_b  = nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a26fc9296e99700da54ca3749622f83bd">quatern_b</a> ;</div><div class="line"><a name="l05478"></a><span class="lineno"> 5478</span>&#160;       nhdr.quatern_c  = nim-&gt;quatern_c ;</div><div class="line"><a name="l05479"></a><span class="lineno"> 5479</span>&#160;       nhdr.quatern_d  = nim-&gt;quatern_d ;</div><div class="line"><a name="l05480"></a><span class="lineno"> 5480</span>&#160;       nhdr.qoffset_x  = nim-&gt;qoffset_x ;</div><div class="line"><a name="l05481"></a><span class="lineno"> 5481</span>&#160;       nhdr.qoffset_y  = nim-&gt;qoffset_y ;</div><div class="line"><a name="l05482"></a><span class="lineno"> 5482</span>&#160;       nhdr.qoffset_z  = nim-&gt;qoffset_z ;</div><div class="line"><a name="l05483"></a><span class="lineno"> 5483</span>&#160;       nhdr.pixdim[0]  = (nim-&gt;qfac &gt;= 0.0) ? 1.0 : -1.0 ;</div><div class="line"><a name="l05484"></a><span class="lineno"> 5484</span>&#160;     }</div><div class="line"><a name="l05485"></a><span class="lineno"> 5485</span>&#160;</div><div class="line"><a name="l05486"></a><span class="lineno"> 5486</span>&#160;     <span class="keywordflow">if</span>( nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a964e209d6110bd26df6935ebf4a2a620">sform_code</a> &gt; 0 ){</div><div class="line"><a name="l05487"></a><span class="lineno"> 5487</span>&#160;       nhdr.sform_code = nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a964e209d6110bd26df6935ebf4a2a620">sform_code</a> ;</div><div class="line"><a name="l05488"></a><span class="lineno"> 5488</span>&#160;       nhdr.srow_x[0]  = nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a69460d9b0b0b19fe740c9b30cfd44e10">sto_xyz</a>.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[0][0] ;</div><div class="line"><a name="l05489"></a><span class="lineno"> 5489</span>&#160;       nhdr.srow_x[1]  = nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a69460d9b0b0b19fe740c9b30cfd44e10">sto_xyz</a>.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[0][1] ;</div><div class="line"><a name="l05490"></a><span class="lineno"> 5490</span>&#160;       nhdr.srow_x[2]  = nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a69460d9b0b0b19fe740c9b30cfd44e10">sto_xyz</a>.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[0][2] ;</div><div class="line"><a name="l05491"></a><span class="lineno"> 5491</span>&#160;       nhdr.srow_x[3]  = nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a69460d9b0b0b19fe740c9b30cfd44e10">sto_xyz</a>.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[0][3] ;</div><div class="line"><a name="l05492"></a><span class="lineno"> 5492</span>&#160;       nhdr.srow_y[0]  = nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a69460d9b0b0b19fe740c9b30cfd44e10">sto_xyz</a>.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[1][0] ;</div><div class="line"><a name="l05493"></a><span class="lineno"> 5493</span>&#160;       nhdr.srow_y[1]  = nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a69460d9b0b0b19fe740c9b30cfd44e10">sto_xyz</a>.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[1][1] ;</div><div class="line"><a name="l05494"></a><span class="lineno"> 5494</span>&#160;       nhdr.srow_y[2]  = nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a69460d9b0b0b19fe740c9b30cfd44e10">sto_xyz</a>.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[1][2] ;</div><div class="line"><a name="l05495"></a><span class="lineno"> 5495</span>&#160;       nhdr.srow_y[3]  = nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a69460d9b0b0b19fe740c9b30cfd44e10">sto_xyz</a>.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[1][3] ;</div><div class="line"><a name="l05496"></a><span class="lineno"> 5496</span>&#160;       nhdr.srow_z[0]  = nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a69460d9b0b0b19fe740c9b30cfd44e10">sto_xyz</a>.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[2][0] ;</div><div class="line"><a name="l05497"></a><span class="lineno"> 5497</span>&#160;       nhdr.srow_z[1]  = nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a69460d9b0b0b19fe740c9b30cfd44e10">sto_xyz</a>.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[2][1] ;</div><div class="line"><a name="l05498"></a><span class="lineno"> 5498</span>&#160;       nhdr.srow_z[2]  = nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a69460d9b0b0b19fe740c9b30cfd44e10">sto_xyz</a>.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[2][2] ;</div><div class="line"><a name="l05499"></a><span class="lineno"> 5499</span>&#160;       nhdr.srow_z[3]  = nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a69460d9b0b0b19fe740c9b30cfd44e10">sto_xyz</a>.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[2][3] ;</div><div class="line"><a name="l05500"></a><span class="lineno"> 5500</span>&#160;     }</div><div class="line"><a name="l05501"></a><span class="lineno"> 5501</span>&#160;</div><div class="line"><a name="l05502"></a><span class="lineno"> 5502</span>&#160;     nhdr.dim_info = FPS_INTO_DIM_INFO( nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a50953906569b58e6b1aaeb7759767b34">freq_dim</a> ,</div><div class="line"><a name="l05503"></a><span class="lineno"> 5503</span>&#160;                                        nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a731f0b9d7b95bc17f9f1a0a568d8ca71">phase_dim</a> , nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ae37a59a187aa187528020cc3abeba5e3">slice_dim</a> ) ;</div><div class="line"><a name="l05504"></a><span class="lineno"> 5504</span>&#160;     nhdr.slice_code     = nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a0188187b073521e823b51cb5250d3fd4">slice_code</a> ;</div><div class="line"><a name="l05505"></a><span class="lineno"> 5505</span>&#160;     nhdr.slice_start    = nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ade42791ee9c492d506e6c353a61a8c41">slice_start</a> ;</div><div class="line"><a name="l05506"></a><span class="lineno"> 5506</span>&#160;     nhdr.slice_end      = nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ac67dffa9ebbf79fe08b511cdb9e2476f">slice_end</a> ;</div><div class="line"><a name="l05507"></a><span class="lineno"> 5507</span>&#160;     nhdr.slice_duration = nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a0f2e675a17830fb17c58602e0d6ebd3b">slice_duration</a> ;</div><div class="line"><a name="l05508"></a><span class="lineno"> 5508</span>&#160;   }</div><div class="line"><a name="l05509"></a><span class="lineno"> 5509</span>&#160;</div><div class="line"><a name="l05510"></a><span class="lineno"> 5510</span>&#160;   <span class="keywordflow">return</span> nhdr;</div><div class="line"><a name="l05511"></a><span class="lineno"> 5511</span>&#160;}</div><div class="ttc" id="structnifti__image_html_ade42791ee9c492d506e6c353a61a8c41"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#ade42791ee9c492d506e6c353a61a8c41">nifti_image::slice_start</a></div><div class="ttdeci">int slice_start</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:127</div></div>
<div class="ttc" id="structmat44_html_ad11c8da60dd84b24824f70b08948d6e3"><div class="ttname"><a href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">mat44::m</a></div><div class="ttdeci">float m[4][4]</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:60</div></div>
<div class="ttc" id="structnifti__image_html_a45dd58da99fbf651a96f68dc83e504c5"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a45dd58da99fbf651a96f68dc83e504c5">nifti_image::intent_p3</a></div><div class="ttdeci">float intent_p3</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:154</div></div>
<div class="ttc" id="structnifti__image_html_a7a760c43613a8ba94aaf73e571ba195d"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a7a760c43613a8ba94aaf73e571ba195d">nifti_image::scl_inter</a></div><div class="ttdeci">float scl_inter</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:114</div></div>
<div class="ttc" id="structnifti__image_html_a731f0b9d7b95bc17f9f1a0a568d8ca71"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a731f0b9d7b95bc17f9f1a0a568d8ca71">nifti_image::phase_dim</a></div><div class="ttdeci">int phase_dim</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:123</div></div>
<div class="ttc" id="structnifti__1__header_html"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html">nifti_1_header</a></div><div class="ttdoc">Data structure defining the fields in the nifti1 header. This binary header should be found at the be...</div><div class="ttdef"><b>Definition:</b> nifti1.h:144</div></div>
<div class="ttc" id="structnifti__image_html_afb6cd106a28d4599326042c43d85022b"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#afb6cd106a28d4599326042c43d85022b">nifti_image::dy</a></div><div class="ttdeci">float dy</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:105</div></div>
<div class="ttc" id="structnifti__image_html_a8d9ddfeecae70399a50dca551d69f774"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a8d9ddfeecae70399a50dca551d69f774">nifti_image::dx</a></div><div class="ttdeci">float dx</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:104</div></div>
<div class="ttc" id="structnifti__image_html_ab4e9dd136d1de9fbe03c68f081876b9e"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#ab4e9dd136d1de9fbe03c68f081876b9e">nifti_image::dt</a></div><div class="ttdeci">float dt</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:107</div></div>
<div class="ttc" id="structnifti__image_html_ada65c236666fdfa352b2bff24557f704"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#ada65c236666fdfa352b2bff24557f704">nifti_image::aux_file</a></div><div class="ttdeci">char aux_file[24]</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:158</div></div>
<div class="ttc" id="structnifti__image_html_a7e04a5e405f9b79dae5652cdcd3832ef"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a7e04a5e405f9b79dae5652cdcd3832ef">nifti_image::nv</a></div><div class="ttdeci">int nv</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:97</div></div>
<div class="ttc" id="structnifti__image_html_a51bad5202c3b9943b3c86f80ca5d1cd1"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a51bad5202c3b9943b3c86f80ca5d1cd1">nifti_image::datatype</a></div><div class="ttdeci">int datatype</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:102</div></div>
<div class="ttc" id="structnifti__image_html_ab1c6399d45bf77d6eff712d318a9d0ca"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#ab1c6399d45bf77d6eff712d318a9d0ca">nifti_image::du</a></div><div class="ttdeci">float du</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:108</div></div>
<div class="ttc" id="structnifti__image_html_ab4a9c0956e858fd877ee81796adc66bc"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#ab4a9c0956e858fd877ee81796adc66bc">nifti_image::nu</a></div><div class="ttdeci">int nu</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:96</div></div>
<div class="ttc" id="structnifti__image_html_a7422e0ecfa446e37bd83fc4fe082135d"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a7422e0ecfa446e37bd83fc4fe082135d">nifti_image::cal_max</a></div><div class="ttdeci">float cal_max</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:117</div></div>
<div class="ttc" id="structnifti__image_html_a0f2e675a17830fb17c58602e0d6ebd3b"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a0f2e675a17830fb17c58602e0d6ebd3b">nifti_image::slice_duration</a></div><div class="ttdeci">float slice_duration</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:129</div></div>
<div class="ttc" id="structnifti__image_html_ae0bc5b6b2e350108e468124b682b715c"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#ae0bc5b6b2e350108e468124b682b715c">nifti_image::nw</a></div><div class="ttdeci">int nw</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:98</div></div>
<div class="ttc" id="structnifti__image_html_a6155d97e665d879e662bf650c09d0bc1"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a6155d97e665d879e662bf650c09d0bc1">nifti_image::dv</a></div><div class="ttdeci">float dv</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:109</div></div>
<div class="ttc" id="structnifti__image_html_ab7d8391bc07972e0b051f157dde00a04"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#ab7d8391bc07972e0b051f157dde00a04">nifti_image::dw</a></div><div class="ttdeci">float dw</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:110</div></div>
<div class="ttc" id="structnifti__image_html_ad61740a0245f2af05ded39cb0648ae07"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#ad61740a0245f2af05ded39cb0648ae07">nifti_image::ndim</a></div><div class="ttdeci">int ndim</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:91</div></div>
<div class="ttc" id="structnifti__image_html_adfcbe7e11b44d8a964d61c3e17554686"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#adfcbe7e11b44d8a964d61c3e17554686">nifti_image::qform_code</a></div><div class="ttdeci">int qform_code</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:119</div></div>
<div class="ttc" id="structnifti__image_html_a50953906569b58e6b1aaeb7759767b34"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a50953906569b58e6b1aaeb7759767b34">nifti_image::freq_dim</a></div><div class="ttdeci">int freq_dim</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:122</div></div>
<div class="ttc" id="structnifti__image_html_a43e8d714fac078daffbe590253776d4c"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a43e8d714fac078daffbe590253776d4c">nifti_image::time_units</a></div><div class="ttdeci">int time_units</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:146</div></div>
<div class="ttc" id="structnifti__image_html_a856fc94a5daed16225264dc8daa96013"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a856fc94a5daed16225264dc8daa96013">nifti_image::iname_offset</a></div><div class="ttdeci">int iname_offset</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:162</div></div>
<div class="ttc" id="structnifti__image_html_a3c79d06a583b3e3a902c5ec33eaab687"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a3c79d06a583b3e3a902c5ec33eaab687">nifti_image::descrip</a></div><div class="ttdeci">char descrip[80]</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:157</div></div>
<div class="ttc" id="structnifti__image_html_a964e209d6110bd26df6935ebf4a2a620"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a964e209d6110bd26df6935ebf4a2a620">nifti_image::sform_code</a></div><div class="ttdeci">int sform_code</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:120</div></div>
<div class="ttc" id="structnifti__image_html_a69460d9b0b0b19fe740c9b30cfd44e10"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a69460d9b0b0b19fe740c9b30cfd44e10">nifti_image::sto_xyz</a></div><div class="ttdeci">mat44 sto_xyz</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:140</div></div>
<div class="ttc" id="structnifti__image_html_a56a5855aaf5323044ffdfde0a23214bc"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a56a5855aaf5323044ffdfde0a23214bc">nifti_image::intent_code</a></div><div class="ttdeci">int intent_code</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:151</div></div>
<div class="ttc" id="structnifti__image_html_a1c3ebd9911ac46b659c268a95014b5e8"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a1c3ebd9911ac46b659c268a95014b5e8">nifti_image::intent_p1</a></div><div class="ttdeci">float intent_p1</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:152</div></div>
<div class="ttc" id="structnifti__image_html_a0188187b073521e823b51cb5250d3fd4"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a0188187b073521e823b51cb5250d3fd4">nifti_image::slice_code</a></div><div class="ttdeci">int slice_code</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:126</div></div>
<div class="ttc" id="structnifti__image_html_a8731bb1d867cdd24335e4bc3dd131c44"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a8731bb1d867cdd24335e4bc3dd131c44">nifti_image::nz</a></div><div class="ttdeci">int nz</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:94</div></div>
<div class="ttc" id="structnifti__image_html_ac55996e58670948b220bebbf5d4bb0f4"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#ac55996e58670948b220bebbf5d4bb0f4">nifti_image::nifti_type</a></div><div class="ttdeci">int nifti_type</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:148</div></div>
<div class="ttc" id="structnifti__image_html_ae17bdf0913f6672abdac81c453ecb598"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#ae17bdf0913f6672abdac81c453ecb598">nifti_image::toffset</a></div><div class="ttdeci">float toffset</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:143</div></div>
<div class="ttc" id="structnifti__image_html_ab3d3fdfda87503e5e8d53f0342906aba"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#ab3d3fdfda87503e5e8d53f0342906aba">nifti_image::nt</a></div><div class="ttdeci">int nt</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:95</div></div>
<div class="ttc" id="structnifti__image_html_af4d04ce1f0102c2692d89bbd5476a931"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#af4d04ce1f0102c2692d89bbd5476a931">nifti_image::scl_slope</a></div><div class="ttdeci">float scl_slope</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:113</div></div>
<div class="ttc" id="structnifti__image_html_a5e971f24a97c592fefa28d084c02769a"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a5e971f24a97c592fefa28d084c02769a">nifti_image::ny</a></div><div class="ttdeci">int ny</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:93</div></div>
<div class="ttc" id="structnifti__image_html_a7d7c74c824d3c8b50a27322366d243f9"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a7d7c74c824d3c8b50a27322366d243f9">nifti_image::cal_min</a></div><div class="ttdeci">float cal_min</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:116</div></div>
<div class="ttc" id="structnifti__image_html_ac462fb16a688d8dbec164456febdc9c7"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#ac462fb16a688d8dbec164456febdc9c7">nifti_image::dz</a></div><div class="ttdeci">float dz</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:106</div></div>
<div class="ttc" id="structnifti__image_html_a0764cacf8341e21232d9423410c2b4c3"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a0764cacf8341e21232d9423410c2b4c3">nifti_image::intent_name</a></div><div class="ttdeci">char intent_name[16]</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:155</div></div>
<div class="ttc" id="structnifti__image_html_a79a4382f115cb6c7f8977c36d73e6749"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a79a4382f115cb6c7f8977c36d73e6749">nifti_image::nbyper</a></div><div class="ttdeci">int nbyper</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:101</div></div>
<div class="ttc" id="structnifti__image_html_ac67dffa9ebbf79fe08b511cdb9e2476f"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#ac67dffa9ebbf79fe08b511cdb9e2476f">nifti_image::slice_end</a></div><div class="ttdeci">int slice_end</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:128</div></div>
<div class="ttc" id="structnifti__image_html_ae37a59a187aa187528020cc3abeba5e3"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#ae37a59a187aa187528020cc3abeba5e3">nifti_image::slice_dim</a></div><div class="ttdeci">int slice_dim</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:124</div></div>
<div class="ttc" id="structnifti__image_html_aacd903b0043fd9378de6927a64bafa85"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#aacd903b0043fd9378de6927a64bafa85">nifti_image::intent_p2</a></div><div class="ttdeci">float intent_p2</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:153</div></div>
<div class="ttc" id="structnifti__image_html_a26fc9296e99700da54ca3749622f83bd"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a26fc9296e99700da54ca3749622f83bd">nifti_image::quatern_b</a></div><div class="ttdeci">float quatern_b</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:133</div></div>
<div class="ttc" id="structnifti__image_html_ab99743dd7967cff6845f1a96b2044167"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#ab99743dd7967cff6845f1a96b2044167">nifti_image::nx</a></div><div class="ttdeci">int nx</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:92</div></div>
<div class="ttc" id="structnifti__image_html_a5fa377516ee62469a9051a5834f080af"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a5fa377516ee62469a9051a5834f080af">nifti_image::xyz_units</a></div><div class="ttdeci">int xyz_units</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:145</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a795557a96c6144716d0636879cf02bd5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a795557a96c6144716d0636879cf02bd5">&#9670;&nbsp;</a></span>nifti_copy_nim_info()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d0/de7/structnifti__image.html">nifti_image</a>* nifti_copy_nim_info </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d0/de7/structnifti__image.html">nifti_image</a> *&#160;</td>
          <td class="paramname"><em>src</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>copy the <a class="el" href="../../d0/de7/structnifti__image.html" title="High level data structure for open nifti datasets in the nifti1_io API. Note that this structure is n...">nifti_image</a> structure, without data</p>
<p>Duplicate the structure, including fname, iname and extensions. Leave the data pointer as NULL. </p>
<div class="fragment"><div class="line"><a name="l05883"></a><span class="lineno"> 5883</span>&#160;{</div><div class="line"><a name="l05884"></a><span class="lineno"> 5884</span>&#160;  <a class="code" href="../../d0/de7/structnifti__image.html">nifti_image</a> *dest;</div><div class="line"><a name="l05885"></a><span class="lineno"> 5885</span>&#160;  dest = (<a class="code" href="../../d0/de7/structnifti__image.html">nifti_image</a> *)calloc(1,<span class="keyword">sizeof</span>(<a class="code" href="../../d0/de7/structnifti__image.html">nifti_image</a>));</div><div class="line"><a name="l05886"></a><span class="lineno"> 5886</span>&#160;  <span class="keywordflow">if</span>( !dest ){</div><div class="line"><a name="l05887"></a><span class="lineno"> 5887</span>&#160;     fprintf(stderr,<span class="stringliteral">&quot;** NCNI: failed to alloc nifti_image\n&quot;</span>);</div><div class="line"><a name="l05888"></a><span class="lineno"> 5888</span>&#160;     <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l05889"></a><span class="lineno"> 5889</span>&#160;  }</div><div class="line"><a name="l05890"></a><span class="lineno"> 5890</span>&#160;  memcpy(dest, src, <span class="keyword">sizeof</span>(<a class="code" href="../../d0/de7/structnifti__image.html">nifti_image</a>));</div><div class="line"><a name="l05891"></a><span class="lineno"> 5891</span>&#160;  <span class="keywordflow">if</span>( src-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a1c7755060c9cca3612f1101684c9845f">fname</a> ) dest-&gt;fname = <a class="code" href="../../d1/d14/nifti1__io_8c.html#a98f42fe4268d9fff8a5b8c984f8731f1">nifti_strdup</a>(src-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a1c7755060c9cca3612f1101684c9845f">fname</a>);</div><div class="line"><a name="l05892"></a><span class="lineno"> 5892</span>&#160;  <span class="keywordflow">if</span>( src-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#aa99806d70cacff119b5b6089c3dfdeda">iname</a> ) dest-&gt;iname = <a class="code" href="../../d1/d14/nifti1__io_8c.html#a98f42fe4268d9fff8a5b8c984f8731f1">nifti_strdup</a>(src-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#aa99806d70cacff119b5b6089c3dfdeda">iname</a>);</div><div class="line"><a name="l05893"></a><span class="lineno"> 5893</span>&#160;  dest-&gt;num_ext = 0;</div><div class="line"><a name="l05894"></a><span class="lineno"> 5894</span>&#160;  dest-&gt;ext_list = NULL;</div><div class="line"><a name="l05895"></a><span class="lineno"> 5895</span>&#160;  <span class="comment">/* errors will be printed in NCE(), continue in either case */</span></div><div class="line"><a name="l05896"></a><span class="lineno"> 5896</span>&#160;  (void)nifti_copy_extensions(dest, src);</div><div class="line"><a name="l05897"></a><span class="lineno"> 5897</span>&#160;</div><div class="line"><a name="l05898"></a><span class="lineno"> 5898</span>&#160;  dest-&gt;data = NULL;</div><div class="line"><a name="l05899"></a><span class="lineno"> 5899</span>&#160;</div><div class="line"><a name="l05900"></a><span class="lineno"> 5900</span>&#160;  <span class="keywordflow">return</span> dest;</div><div class="line"><a name="l05901"></a><span class="lineno"> 5901</span>&#160;}</div><div class="ttc" id="structnifti__image_html_aa99806d70cacff119b5b6089c3dfdeda"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#aa99806d70cacff119b5b6089c3dfdeda">nifti_image::iname</a></div><div class="ttdeci">char * iname</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:161</div></div>
<div class="ttc" id="nifti1__io_8c_html_a98f42fe4268d9fff8a5b8c984f8731f1"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#a98f42fe4268d9fff8a5b8c984f8731f1">nifti_strdup</a></div><div class="ttdeci">char * nifti_strdup(const char *str)</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:1157</div></div>
<div class="ttc" id="structnifti__image_html"><div class="ttname"><a href="../../d0/de7/structnifti__image.html">nifti_image</a></div><div class="ttdoc">High level data structure for open nifti datasets in the nifti1_io API. Note that this structure is n...</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:89</div></div>
<div class="ttc" id="structnifti__image_html_a1c7755060c9cca3612f1101684c9845f"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a1c7755060c9cca3612f1101684c9845f">nifti_image::fname</a></div><div class="ttdeci">char * fname</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:160</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad43861b84225c2e9ad861ddada7a6041"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad43861b84225c2e9ad861ddada7a6041">&#9670;&nbsp;</a></span>nifti_datatype_from_string()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int nifti_datatype_from_string </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Given a NIFTI_TYPE string, such as "NIFTI_TYPE_INT16", return the corresponding integral type code. The type code is the macro value defined in nifti1.h. </p>
<div class="fragment"><div class="line"><a name="l07381"></a><span class="lineno"> 7381</span>&#160;{</div><div class="line"><a name="l07382"></a><span class="lineno"> 7382</span>&#160;    <span class="keywordtype">int</span> tablen = <span class="keyword">sizeof</span>(<a class="code" href="../../d1/d14/nifti1__io_8c.html#add56f2785b8987898a86fab47fdbe21b">nifti_type_list</a>)/<span class="keyword">sizeof</span>(nifti_type_ele);</div><div class="line"><a name="l07383"></a><span class="lineno"> 7383</span>&#160;    <span class="keywordtype">int</span> c;</div><div class="line"><a name="l07384"></a><span class="lineno"> 7384</span>&#160;</div><div class="line"><a name="l07385"></a><span class="lineno"> 7385</span>&#160;    <span class="keywordflow">if</span>( !name ) <span class="keywordflow">return</span> DT_UNKNOWN;</div><div class="line"><a name="l07386"></a><span class="lineno"> 7386</span>&#160;</div><div class="line"><a name="l07387"></a><span class="lineno"> 7387</span>&#160;    <span class="keywordflow">for</span>( c = tablen-1; c &gt; 0; c-- )</div><div class="line"><a name="l07388"></a><span class="lineno"> 7388</span>&#160;        <span class="keywordflow">if</span>( !strcmp(name, <a class="code" href="../../d1/d14/nifti1__io_8c.html#add56f2785b8987898a86fab47fdbe21b">nifti_type_list</a>[c].name) )</div><div class="line"><a name="l07389"></a><span class="lineno"> 7389</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l07390"></a><span class="lineno"> 7390</span>&#160;</div><div class="line"><a name="l07391"></a><span class="lineno"> 7391</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d1/d14/nifti1__io_8c.html#add56f2785b8987898a86fab47fdbe21b">nifti_type_list</a>[c].type;</div><div class="line"><a name="l07392"></a><span class="lineno"> 7392</span>&#160;}</div><div class="ttc" id="nifti1__io_8c_html_add56f2785b8987898a86fab47fdbe21b"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#add56f2785b8987898a86fab47fdbe21b">nifti_type_list</a></div><div class="ttdeci">static nifti_type_ele nifti_type_list[]</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:351</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a56b62ecbde8ff299d1911abe1f5961f3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a56b62ecbde8ff299d1911abe1f5961f3">&#9670;&nbsp;</a></span>nifti_datatype_is_valid()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int nifti_datatype_is_valid </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>dtype</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>for_nifti</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Determine whether dtype is a valid NIFTI_TYPE.</p>
<p>DT_UNKNOWN is considered invalid</p>
<p>The only difference 'for_nifti' makes is that DT_BINARY should be invalid for a NIfTI dataset. </p>
<div class="fragment"><div class="line"><a name="l07422"></a><span class="lineno"> 7422</span>&#160;{</div><div class="line"><a name="l07423"></a><span class="lineno"> 7423</span>&#160;    <span class="keywordtype">int</span> tablen = <span class="keyword">sizeof</span>(<a class="code" href="../../d1/d14/nifti1__io_8c.html#add56f2785b8987898a86fab47fdbe21b">nifti_type_list</a>)/<span class="keyword">sizeof</span>(nifti_type_ele);</div><div class="line"><a name="l07424"></a><span class="lineno"> 7424</span>&#160;    <span class="keywordtype">int</span> c;</div><div class="line"><a name="l07425"></a><span class="lineno"> 7425</span>&#160;</div><div class="line"><a name="l07426"></a><span class="lineno"> 7426</span>&#160;    <span class="comment">/* special case */</span></div><div class="line"><a name="l07427"></a><span class="lineno"> 7427</span>&#160;    <span class="keywordflow">if</span>( for_nifti &amp;&amp; dtype == DT_BINARY ) <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l07428"></a><span class="lineno"> 7428</span>&#160;</div><div class="line"><a name="l07429"></a><span class="lineno"> 7429</span>&#160;    <span class="keywordflow">for</span>( c = tablen-1; c &gt; 0; c-- )</div><div class="line"><a name="l07430"></a><span class="lineno"> 7430</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="../../d1/d14/nifti1__io_8c.html#add56f2785b8987898a86fab47fdbe21b">nifti_type_list</a>[c].type == dtype )</div><div class="line"><a name="l07431"></a><span class="lineno"> 7431</span>&#160;            <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l07432"></a><span class="lineno"> 7432</span>&#160;</div><div class="line"><a name="l07433"></a><span class="lineno"> 7433</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l07434"></a><span class="lineno"> 7434</span>&#160;}</div><div class="ttc" id="nifti1__io_8c_html_add56f2785b8987898a86fab47fdbe21b"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#add56f2785b8987898a86fab47fdbe21b">nifti_type_list</a></div><div class="ttdeci">static nifti_type_ele nifti_type_list[]</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:351</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aeeccf4be6839946794c2cc1fdef26d4f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeeccf4be6839946794c2cc1fdef26d4f">&#9670;&nbsp;</a></span>nifti_datatype_sizes()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void nifti_datatype_sizes </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>datatype</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>nbyper</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>swapsize</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Given a datatype code, set number of bytes per voxel and the swapsize.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">datatype</td><td>nifti1 datatype code </td></tr>
    <tr><td class="paramname">nbyper</td><td>pointer to return value: number of bytes per voxel </td></tr>
    <tr><td class="paramname">swapsize</td><td>pointer to return value: size of swap blocks</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>appropriate values at nbyper and swapsize</dd></dl>
<p>The swapsize is set to 0 if this datatype doesn't ever need swapping.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="../../d7/de9/group__NIFTI1__DATATYPES.html" title="nifti1 datatype codes ">NIFTI1_DATATYPES</a> in nifti1.h </dd></dl>
<div class="fragment"><div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;{</div><div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;   <span class="keywordtype">int</span> nb=0, ss=0 ;</div><div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;   <span class="keywordflow">switch</span>( <a class="code" href="../../dd/d75/structnifti__1__header.html#ad5f8888fcc5fde14d3e387653721e270">datatype</a> ){</div><div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;     <span class="keywordflow">case</span> DT_INT8:</div><div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;     <span class="keywordflow">case</span> DT_UINT8:       nb =  1 ; ss =  0 ; break ;</div><div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;</div><div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;     <span class="keywordflow">case</span> DT_INT16:</div><div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;     <span class="keywordflow">case</span> DT_UINT16:      nb =  2 ; ss =  2 ; break ;</div><div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;</div><div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;     <span class="keywordflow">case</span> DT_RGB24:       nb =  3 ; ss =  0 ; break ;</div><div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;     <span class="keywordflow">case</span> DT_RGBA32:      nb =  4 ; ss =  0 ; break ;</div><div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;</div><div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;     <span class="keywordflow">case</span> DT_INT32:</div><div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;     <span class="keywordflow">case</span> DT_UINT32:</div><div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;     <span class="keywordflow">case</span> DT_FLOAT32:     nb =  4 ; ss =  4 ; break ;</div><div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;</div><div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;     <span class="keywordflow">case</span> DT_COMPLEX64:   nb =  8 ; ss =  4 ; break ;</div><div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;</div><div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;     <span class="keywordflow">case</span> DT_FLOAT64:</div><div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;     <span class="keywordflow">case</span> DT_INT64:</div><div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;     <span class="keywordflow">case</span> DT_UINT64:      nb =  8 ; ss =  8 ; break ;</div><div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;</div><div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;     <span class="keywordflow">case</span> DT_FLOAT128:    nb = 16 ; ss = 16 ; break ;</div><div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;</div><div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;     <span class="keywordflow">case</span> DT_COMPLEX128:  nb = 16 ; ss =  8 ; break ;</div><div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;</div><div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;     <span class="keywordflow">case</span> DT_COMPLEX256:  nb = 32 ; ss = 16 ; break ;</div><div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;   }</div><div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;</div><div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;   ASSIF(nbyper,nb) ; ASSIF(swapsize,ss) ; return ;</div><div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;}</div><div class="ttc" id="structnifti__1__header_html_ad5f8888fcc5fde14d3e387653721e270"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#ad5f8888fcc5fde14d3e387653721e270">nifti_1_header::datatype</a></div><div class="ttdeci">short datatype</div><div class="ttdef"><b>Definition:</b> nifti1.h:165</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="adfa192edb2b6c605c831a781b6d0dd1b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adfa192edb2b6c605c831a781b6d0dd1b">&#9670;&nbsp;</a></span>nifti_datatype_string()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* nifti_datatype_string </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>dt</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return a pointer to a string holding the name of a NIFTI datatype.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dt</td><td>NIfTI-1 datatype</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>pointer to static string holding the datatype name</dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>Do not free() or modify this string! It points to static storage.</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="../../d7/de9/group__NIFTI1__DATATYPES.html" title="nifti1 datatype codes ">NIFTI1_DATATYPES</a> group in nifti1.h </dd></dl>
<div class="fragment"><div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;{</div><div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;   <span class="keywordflow">switch</span>( dt ){</div><div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;     <span class="keywordflow">case</span> DT_UNKNOWN:    <span class="keywordflow">return</span> <span class="stringliteral">&quot;UNKNOWN&quot;</span>    ;</div><div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;     <span class="keywordflow">case</span> DT_BINARY:     <span class="keywordflow">return</span> <span class="stringliteral">&quot;BINARY&quot;</span>     ;</div><div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;     <span class="keywordflow">case</span> DT_INT8:       <span class="keywordflow">return</span> <span class="stringliteral">&quot;INT8&quot;</span>       ;</div><div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;     <span class="keywordflow">case</span> DT_UINT8:      <span class="keywordflow">return</span> <span class="stringliteral">&quot;UINT8&quot;</span>      ;</div><div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;     <span class="keywordflow">case</span> DT_INT16:      <span class="keywordflow">return</span> <span class="stringliteral">&quot;INT16&quot;</span>      ;</div><div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;     <span class="keywordflow">case</span> DT_UINT16:     <span class="keywordflow">return</span> <span class="stringliteral">&quot;UINT16&quot;</span>     ;</div><div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;     <span class="keywordflow">case</span> DT_INT32:      <span class="keywordflow">return</span> <span class="stringliteral">&quot;INT32&quot;</span>      ;</div><div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;     <span class="keywordflow">case</span> DT_UINT32:     <span class="keywordflow">return</span> <span class="stringliteral">&quot;UINT32&quot;</span>     ;</div><div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;     <span class="keywordflow">case</span> DT_INT64:      <span class="keywordflow">return</span> <span class="stringliteral">&quot;INT64&quot;</span>      ;</div><div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;     <span class="keywordflow">case</span> DT_UINT64:     <span class="keywordflow">return</span> <span class="stringliteral">&quot;UINT64&quot;</span>     ;</div><div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;     <span class="keywordflow">case</span> DT_FLOAT32:    <span class="keywordflow">return</span> <span class="stringliteral">&quot;FLOAT32&quot;</span>    ;</div><div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;     <span class="keywordflow">case</span> DT_FLOAT64:    <span class="keywordflow">return</span> <span class="stringliteral">&quot;FLOAT64&quot;</span>    ;</div><div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;     <span class="keywordflow">case</span> DT_FLOAT128:   <span class="keywordflow">return</span> <span class="stringliteral">&quot;FLOAT128&quot;</span>   ;</div><div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;     <span class="keywordflow">case</span> DT_COMPLEX64:  <span class="keywordflow">return</span> <span class="stringliteral">&quot;COMPLEX64&quot;</span>  ;</div><div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;     <span class="keywordflow">case</span> DT_COMPLEX128: <span class="keywordflow">return</span> <span class="stringliteral">&quot;COMPLEX128&quot;</span> ;</div><div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;     <span class="keywordflow">case</span> DT_COMPLEX256: <span class="keywordflow">return</span> <span class="stringliteral">&quot;COMPLEX256&quot;</span> ;</div><div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;     <span class="keywordflow">case</span> DT_RGB24:      <span class="keywordflow">return</span> <span class="stringliteral">&quot;RGB24&quot;</span>      ;</div><div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;     <span class="keywordflow">case</span> DT_RGBA32:     <span class="keywordflow">return</span> <span class="stringliteral">&quot;RGBA32&quot;</span>     ;</div><div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;   }</div><div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;   <span class="keywordflow">return</span> <span class="stringliteral">&quot;**ILLEGAL**&quot;</span> ;</div><div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a id="a9d6ade79714c193d2ab7bfa6301619c4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9d6ade79714c193d2ab7bfa6301619c4">&#9670;&nbsp;</a></span>nifti_datatype_to_string()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* nifti_datatype_to_string </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>dtype</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Given a NIFTI_TYPE value, such as NIFTI_TYPE_INT16, return the corresponding macro label as a string. The dtype code is the macro value defined in nifti1.h. </p>
<div class="fragment"><div class="line"><a name="l07401"></a><span class="lineno"> 7401</span>&#160;{</div><div class="line"><a name="l07402"></a><span class="lineno"> 7402</span>&#160;    <span class="keywordtype">int</span> tablen = <span class="keyword">sizeof</span>(<a class="code" href="../../d1/d14/nifti1__io_8c.html#add56f2785b8987898a86fab47fdbe21b">nifti_type_list</a>)/<span class="keyword">sizeof</span>(nifti_type_ele);</div><div class="line"><a name="l07403"></a><span class="lineno"> 7403</span>&#160;    <span class="keywordtype">int</span> c;</div><div class="line"><a name="l07404"></a><span class="lineno"> 7404</span>&#160;</div><div class="line"><a name="l07405"></a><span class="lineno"> 7405</span>&#160;    <span class="keywordflow">for</span>( c = tablen-1; c &gt; 0; c-- )</div><div class="line"><a name="l07406"></a><span class="lineno"> 7406</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="../../d1/d14/nifti1__io_8c.html#add56f2785b8987898a86fab47fdbe21b">nifti_type_list</a>[c].type == dtype )</div><div class="line"><a name="l07407"></a><span class="lineno"> 7407</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l07408"></a><span class="lineno"> 7408</span>&#160;</div><div class="line"><a name="l07409"></a><span class="lineno"> 7409</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d1/d14/nifti1__io_8c.html#add56f2785b8987898a86fab47fdbe21b">nifti_type_list</a>[c].name;</div><div class="line"><a name="l07410"></a><span class="lineno"> 7410</span>&#160;}</div><div class="ttc" id="nifti1__io_8c_html_add56f2785b8987898a86fab47fdbe21b"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#add56f2785b8987898a86fab47fdbe21b">nifti_type_list</a></div><div class="ttdeci">static nifti_type_ele nifti_type_list[]</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:351</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab8596d26f949ed9371fb73abd1f1ccee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab8596d26f949ed9371fb73abd1f1ccee">&#9670;&nbsp;</a></span>nifti_disp_lib_hist()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void nifti_disp_lib_hist </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>display the nifti library module history (via stdout) </p>
<div class="fragment"><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;{</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;   <span class="keywordtype">int</span> c, len = <span class="keyword">sizeof</span>(<a class="code" href="../../d1/d14/nifti1__io_8c.html#acc75a1d8e7f1941d286aa0a41e2b8bdd">gni_history</a>)/<span class="keyword">sizeof</span>(<span class="keywordtype">char</span> *);</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;   <span class="keywordflow">for</span>( c = 0; c &lt; len; c++ )</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;       fputs(<a class="code" href="../../d1/d14/nifti1__io_8c.html#acc75a1d8e7f1941d286aa0a41e2b8bdd">gni_history</a>[c], stdout);</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;}</div><div class="ttc" id="nifti1__io_8c_html_acc75a1d8e7f1941d286aa0a41e2b8bdd"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#acc75a1d8e7f1941d286aa0a41e2b8bdd">gni_history</a></div><div class="ttdeci">static char * gni_history[]</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:31</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa4648105a0f3099213eaf094b10cc8b0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa4648105a0f3099213eaf094b10cc8b0">&#9670;&nbsp;</a></span>nifti_disp_lib_version()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void nifti_disp_lib_version </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>display the nifti library version (via stdout) </p>
<div class="fragment"><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;{</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;   printf(<span class="stringliteral">&quot;%s, compiled %s\n&quot;</span>, gni_version, __DATE__);</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a id="a3152dd3d1140f401aea7754bf37fd3c2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3152dd3d1140f401aea7754bf37fd3c2">&#9670;&nbsp;</a></span>nifti_disp_matrix_orient()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int nifti_disp_matrix_orient </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>mesg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/d6d/structmat44.html">mat44</a>&#160;</td>
          <td class="paramname"><em>mat</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>display the orientation from the quaternian fields</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mesg</td><td>if non-NULL, display this message first </td></tr>
    <tr><td class="paramname">mat</td><td>the matrix to convert to "nearest" orientation</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>-1 if results cannot be determined, 0 if okay </dd></dl>
<div class="fragment"><div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;{</div><div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;   <span class="keywordtype">int</span> i, j, k;</div><div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;</div><div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;   <span class="keywordflow">if</span> ( mesg ) fputs( mesg, stderr );  <span class="comment">/* use stdout? */</span></div><div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;</div><div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;   <a class="code" href="../../d1/d14/nifti1__io_8c.html#ad8ba2d4a127c3ee26af9909ce2aa59e8">nifti_mat44_to_orientation</a>( mat, &amp;i,&amp;j,&amp;k );</div><div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;   <span class="keywordflow">if</span> ( i &lt;= 0 || j &lt;= 0 || k &lt;= 0 ) <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;</div><div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;   <span class="comment">/* so we have good codes */</span></div><div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;   fprintf(stderr, <span class="stringliteral">&quot;  i orientation = &#39;%s&#39;\n&quot;</span></div><div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;                   <span class="stringliteral">&quot;  j orientation = &#39;%s&#39;\n&quot;</span></div><div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;                   <span class="stringliteral">&quot;  k orientation = &#39;%s&#39;\n&quot;</span>,</div><div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;                   <a class="code" href="../../d1/d14/nifti1__io_8c.html#a50ab65b744fa58802a77988df9eab9eb">nifti_orientation_string</a>(i),</div><div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;                   <a class="code" href="../../d1/d14/nifti1__io_8c.html#a50ab65b744fa58802a77988df9eab9eb">nifti_orientation_string</a>(j),</div><div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;                   <a class="code" href="../../d1/d14/nifti1__io_8c.html#a50ab65b744fa58802a77988df9eab9eb">nifti_orientation_string</a>(k) );</div><div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;}</div><div class="ttc" id="nifti1__io_8c_html_ad8ba2d4a127c3ee26af9909ce2aa59e8"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#ad8ba2d4a127c3ee26af9909ce2aa59e8">nifti_mat44_to_orientation</a></div><div class="ttdeci">void nifti_mat44_to_orientation(mat44 R, int *icod, int *jcod, int *kcod)</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:1966</div></div>
<div class="ttc" id="nifti1__io_8c_html_a50ab65b744fa58802a77988df9eab9eb"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#a50ab65b744fa58802a77988df9eab9eb">nifti_orientation_string</a></div><div class="ttdeci">char * nifti_orientation_string(int ii)</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:1387</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aaa80306264031fb13a769618e5fdb278"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaa80306264031fb13a769618e5fdb278">&#9670;&nbsp;</a></span>nifti_disp_type_list()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int nifti_disp_type_list </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>which</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Display the nifti_type_list table.</p>
<p>if which == 1 : display DT_* if which == 2 : display NIFTI_TYPE* else : display all </p>
<div class="fragment"><div class="line"><a name="l07484"></a><span class="lineno"> 7484</span>&#160;{</div><div class="line"><a name="l07485"></a><span class="lineno"> 7485</span>&#160;    <span class="keywordtype">char</span> * style;</div><div class="line"><a name="l07486"></a><span class="lineno"> 7486</span>&#160;    <span class="keywordtype">int</span>    tablen = <span class="keyword">sizeof</span>(<a class="code" href="../../d1/d14/nifti1__io_8c.html#add56f2785b8987898a86fab47fdbe21b">nifti_type_list</a>)/<span class="keyword">sizeof</span>(nifti_type_ele);</div><div class="line"><a name="l07487"></a><span class="lineno"> 7487</span>&#160;    <span class="keywordtype">int</span>    lwhich, c;</div><div class="line"><a name="l07488"></a><span class="lineno"> 7488</span>&#160;</div><div class="line"><a name="l07489"></a><span class="lineno"> 7489</span>&#160;    <span class="keywordflow">if</span>     ( which == 1 ){ lwhich = 1; style = <span class="stringliteral">&quot;DT_&quot;</span>; }</div><div class="line"><a name="l07490"></a><span class="lineno"> 7490</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span>( which == 2 ){ lwhich = 2; style = <span class="stringliteral">&quot;NIFTI_TYPE_&quot;</span>; }</div><div class="line"><a name="l07491"></a><span class="lineno"> 7491</span>&#160;    <span class="keywordflow">else</span>                 { lwhich = 3; style = <span class="stringliteral">&quot;ALL&quot;</span>; }</div><div class="line"><a name="l07492"></a><span class="lineno"> 7492</span>&#160;</div><div class="line"><a name="l07493"></a><span class="lineno"> 7493</span>&#160;    printf(<span class="stringliteral">&quot;nifti_type_list entries (%s) :\n&quot;</span></div><div class="line"><a name="l07494"></a><span class="lineno"> 7494</span>&#160;           <span class="stringliteral">&quot;  name                    type    nbyper    swapsize\n&quot;</span></div><div class="line"><a name="l07495"></a><span class="lineno"> 7495</span>&#160;           <span class="stringliteral">&quot;  ---------------------   ----    ------    --------\n&quot;</span>, style);</div><div class="line"><a name="l07496"></a><span class="lineno"> 7496</span>&#160;</div><div class="line"><a name="l07497"></a><span class="lineno"> 7497</span>&#160;    <span class="keywordflow">for</span>( c = 0; c &lt; tablen; c++ )</div><div class="line"><a name="l07498"></a><span class="lineno"> 7498</span>&#160;        <span class="keywordflow">if</span>( (lwhich &amp; 1 &amp;&amp; <a class="code" href="../../d1/d14/nifti1__io_8c.html#add56f2785b8987898a86fab47fdbe21b">nifti_type_list</a>[c].name[0] == <span class="charliteral">&#39;D&#39;</span>)  ||</div><div class="line"><a name="l07499"></a><span class="lineno"> 7499</span>&#160;            (lwhich &amp; 2 &amp;&amp; <a class="code" href="../../d1/d14/nifti1__io_8c.html#add56f2785b8987898a86fab47fdbe21b">nifti_type_list</a>[c].name[0] == <span class="charliteral">&#39;N&#39;</span>)     )</div><div class="line"><a name="l07500"></a><span class="lineno"> 7500</span>&#160;            printf(<span class="stringliteral">&quot;  %-22s %5d     %3d      %5d\n&quot;</span>,</div><div class="line"><a name="l07501"></a><span class="lineno"> 7501</span>&#160;                   <a class="code" href="../../d1/d14/nifti1__io_8c.html#add56f2785b8987898a86fab47fdbe21b">nifti_type_list</a>[c].name,</div><div class="line"><a name="l07502"></a><span class="lineno"> 7502</span>&#160;                   <a class="code" href="../../d1/d14/nifti1__io_8c.html#add56f2785b8987898a86fab47fdbe21b">nifti_type_list</a>[c].type,</div><div class="line"><a name="l07503"></a><span class="lineno"> 7503</span>&#160;                   <a class="code" href="../../d1/d14/nifti1__io_8c.html#add56f2785b8987898a86fab47fdbe21b">nifti_type_list</a>[c].nbyper,</div><div class="line"><a name="l07504"></a><span class="lineno"> 7504</span>&#160;                   <a class="code" href="../../d1/d14/nifti1__io_8c.html#add56f2785b8987898a86fab47fdbe21b">nifti_type_list</a>[c].swapsize);</div><div class="line"><a name="l07505"></a><span class="lineno"> 7505</span>&#160;</div><div class="line"><a name="l07506"></a><span class="lineno"> 7506</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l07507"></a><span class="lineno"> 7507</span>&#160;}</div><div class="ttc" id="nifti1__io_8c_html_add56f2785b8987898a86fab47fdbe21b"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#add56f2785b8987898a86fab47fdbe21b">nifti_type_list</a></div><div class="ttdeci">static nifti_type_ele nifti_type_list[]</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:351</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="acd2f650ca248b801fb9b412c9cda0ae8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acd2f650ca248b801fb9b412c9cda0ae8">&#9670;&nbsp;</a></span>nifti_extension_size()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int nifti_extension_size </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d0/de7/structnifti__image.html">nifti_image</a> *&#160;</td>
          <td class="paramname"><em>nim</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>compute the total size of all extensions</p>
<dl class="section return"><dt>Returns</dt><dd>the total of all esize fields</dd></dl>
<p>Note that each esize includes 4 bytes for ecode, 4 bytes for esize, and the bytes used for the data. Each esize also needs to be a multiple of 16, so it may be greater than the sum of its 3 parts. </p>
<div class="fragment"><div class="line"><a name="l05587"></a><span class="lineno"> 5587</span>&#160;{</div><div class="line"><a name="l05588"></a><span class="lineno"> 5588</span>&#160;   <span class="keywordtype">int</span> c, size = 0;</div><div class="line"><a name="l05589"></a><span class="lineno"> 5589</span>&#160;</div><div class="line"><a name="l05590"></a><span class="lineno"> 5590</span>&#160;   <span class="keywordflow">if</span>( !nim || nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a2b9edee8e340d17e4d87b1c682ca091a">num_ext</a> &lt;= 0 ) <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l05591"></a><span class="lineno"> 5591</span>&#160;</div><div class="line"><a name="l05592"></a><span class="lineno"> 5592</span>&#160;   <span class="keywordflow">if</span>( <a class="code" href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a>.debug &gt; 2 ) fprintf(stderr,<span class="stringliteral">&quot;-d ext sizes:&quot;</span>);</div><div class="line"><a name="l05593"></a><span class="lineno"> 5593</span>&#160;</div><div class="line"><a name="l05594"></a><span class="lineno"> 5594</span>&#160;   <span class="keywordflow">for</span> ( c = 0; c &lt; nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a2b9edee8e340d17e4d87b1c682ca091a">num_ext</a>; c++ ){</div><div class="line"><a name="l05595"></a><span class="lineno"> 5595</span>&#160;      size += nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a9f8f5fc618182c3baa7cd0c59af69c35">ext_list</a>[c].<a class="code" href="../../d4/d55/structnifti1__extension.html#ab28de104ee23ab3703a07312b45b3edc">esize</a>;</div><div class="line"><a name="l05596"></a><span class="lineno"> 5596</span>&#160;      <span class="keywordflow">if</span>( <a class="code" href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a>.debug &gt; 2 ) fprintf(stderr,<span class="stringliteral">&quot;  %d&quot;</span>,nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a9f8f5fc618182c3baa7cd0c59af69c35">ext_list</a>[c].<a class="code" href="../../d4/d55/structnifti1__extension.html#ab28de104ee23ab3703a07312b45b3edc">esize</a>);</div><div class="line"><a name="l05597"></a><span class="lineno"> 5597</span>&#160;   }</div><div class="line"><a name="l05598"></a><span class="lineno"> 5598</span>&#160;</div><div class="line"><a name="l05599"></a><span class="lineno"> 5599</span>&#160;   <span class="keywordflow">if</span>( <a class="code" href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a>.debug &gt; 2 ) fprintf(stderr,<span class="stringliteral">&quot; (total = %d)\n&quot;</span>,size);</div><div class="line"><a name="l05600"></a><span class="lineno"> 5600</span>&#160;</div><div class="line"><a name="l05601"></a><span class="lineno"> 5601</span>&#160;   <span class="keywordflow">return</span> size;</div><div class="line"><a name="l05602"></a><span class="lineno"> 5602</span>&#160;}</div><div class="ttc" id="structnifti1__extension_html_ab28de104ee23ab3703a07312b45b3edc"><div class="ttname"><a href="../../d4/d55/structnifti1__extension.html#ab28de104ee23ab3703a07312b45b3edc">nifti1_extension::esize</a></div><div class="ttdeci">int esize</div><div class="ttdef"><b>Definition:</b> nifti1.h:294</div></div>
<div class="ttc" id="structnifti__image_html_a9f8f5fc618182c3baa7cd0c59af69c35"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a9f8f5fc618182c3baa7cd0c59af69c35">nifti_image::ext_list</a></div><div class="ttdeci">nifti1_extension * ext_list</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:168</div></div>
<div class="ttc" id="nifti1__io_8c_html_a6e047e1dc2f826a4adff048bee8f5df7"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a></div><div class="ttdeci">static nifti_global_options g_opts</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:344</div></div>
<div class="ttc" id="structnifti__image_html_a2b9edee8e340d17e4d87b1c682ca091a"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a2b9edee8e340d17e4d87b1c682ca091a">nifti_image::num_ext</a></div><div class="ttdeci">int num_ext</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:167</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aebd0c1d644fdafa59727dd8f57ae6686"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aebd0c1d644fdafa59727dd8f57ae6686">&#9670;&nbsp;</a></span>nifti_fileexists()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int nifti_fileexists </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>fname</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>simple check for file existence</p>
<dl class="section return"><dt>Returns</dt><dd>1 on existence, 0 otherwise </dd></dl>
<div class="fragment"><div class="line"><a name="l02482"></a><span class="lineno"> 2482</span>&#160;{</div><div class="line"><a name="l02483"></a><span class="lineno"> 2483</span>&#160;   znzFile fp;</div><div class="line"><a name="l02484"></a><span class="lineno"> 2484</span>&#160;   fp = znzopen( fname , <span class="stringliteral">&quot;rb&quot;</span> , 1 ) ;</div><div class="line"><a name="l02485"></a><span class="lineno"> 2485</span>&#160;   <span class="keywordflow">if</span>( !znz_isnull(fp) )  { znzclose(fp);  <span class="keywordflow">return</span> 1; }</div><div class="line"><a name="l02486"></a><span class="lineno"> 2486</span>&#160;   <span class="keywordflow">return</span> 0; <span class="comment">/* fp is NULL */</span></div><div class="line"><a name="l02487"></a><span class="lineno"> 2487</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a id="a338a5f9b74c37ee28ca8683324434a05"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a338a5f9b74c37ee28ca8683324434a05">&#9670;&nbsp;</a></span>nifti_find_file_extension()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* nifti_find_file_extension </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>check the end of the filename for a valid nifti extension</p>
<p>Valid extensions are currently .nii, .hdr, .img, .nia, or any of them followed by .gz. Note that '.' is part of the extension.</p>
<p>Uppercase extensions are also valid, but not mixed case.</p>
<dl class="section return"><dt>Returns</dt><dd>a pointer to the extension (within the filename), or NULL </dd></dl>
<div class="fragment"><div class="line"><a name="l02584"></a><span class="lineno"> 2584</span>&#160;{</div><div class="line"><a name="l02585"></a><span class="lineno"> 2585</span>&#160;   <span class="keywordtype">char</span> * ext, extcopy[8];</div><div class="line"><a name="l02586"></a><span class="lineno"> 2586</span>&#160;   <span class="keywordtype">int</span>    len;</div><div class="line"><a name="l02587"></a><span class="lineno"> 2587</span>&#160;   <span class="keywordtype">char</span>   extnii[8] = <span class="stringliteral">&quot;.nii&quot;</span>;   <span class="comment">/* modifiable, for possible uppercase */</span></div><div class="line"><a name="l02588"></a><span class="lineno"> 2588</span>&#160;   <span class="keywordtype">char</span>   exthdr[8] = <span class="stringliteral">&quot;.hdr&quot;</span>;   <span class="comment">/* (leave space for .gz) */</span></div><div class="line"><a name="l02589"></a><span class="lineno"> 2589</span>&#160;   <span class="keywordtype">char</span>   extimg[8] = <span class="stringliteral">&quot;.img&quot;</span>;</div><div class="line"><a name="l02590"></a><span class="lineno"> 2590</span>&#160;   <span class="keywordtype">char</span>   extnia[8] = <span class="stringliteral">&quot;.nia&quot;</span>;</div><div class="line"><a name="l02591"></a><span class="lineno"> 2591</span>&#160;   <span class="keywordtype">char</span>   extgz[4]  = <span class="stringliteral">&quot;.gz&quot;</span>;</div><div class="line"><a name="l02592"></a><span class="lineno"> 2592</span>&#160;   <span class="keywordtype">char</span> * elist[4]  = { NULL, NULL, NULL, NULL};</div><div class="line"><a name="l02593"></a><span class="lineno"> 2593</span>&#160;</div><div class="line"><a name="l02594"></a><span class="lineno"> 2594</span>&#160;   <span class="comment">/* stupid compiler... */</span></div><div class="line"><a name="l02595"></a><span class="lineno"> 2595</span>&#160;   elist[0] = extnii; elist[1] = exthdr; elist[2] = extimg; elist[3] = extnia;</div><div class="line"><a name="l02596"></a><span class="lineno"> 2596</span>&#160;</div><div class="line"><a name="l02597"></a><span class="lineno"> 2597</span>&#160;   <span class="keywordflow">if</span> ( ! name ) <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l02598"></a><span class="lineno"> 2598</span>&#160;</div><div class="line"><a name="l02599"></a><span class="lineno"> 2599</span>&#160;   len = (int)strlen(name);</div><div class="line"><a name="l02600"></a><span class="lineno"> 2600</span>&#160;   <span class="keywordflow">if</span> ( len &lt; 4 ) <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l02601"></a><span class="lineno"> 2601</span>&#160;</div><div class="line"><a name="l02602"></a><span class="lineno"> 2602</span>&#160;   ext = (<span class="keywordtype">char</span> *)name + len - 4;</div><div class="line"><a name="l02603"></a><span class="lineno"> 2603</span>&#160;</div><div class="line"><a name="l02604"></a><span class="lineno"> 2604</span>&#160;   <span class="comment">/* make manipulation copy, and possibly convert to lowercase */</span></div><div class="line"><a name="l02605"></a><span class="lineno"> 2605</span>&#160;   strcpy(extcopy, ext);</div><div class="line"><a name="l02606"></a><span class="lineno"> 2606</span>&#160;   <span class="keywordflow">if</span>( <a class="code" href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a>.allow_upper_fext ) make_lowercase(extcopy);</div><div class="line"><a name="l02607"></a><span class="lineno"> 2607</span>&#160;</div><div class="line"><a name="l02608"></a><span class="lineno"> 2608</span>&#160;   <span class="comment">/* if it look like a basic extension, fail or return it */</span></div><div class="line"><a name="l02609"></a><span class="lineno"> 2609</span>&#160;   <span class="keywordflow">if</span>( compare_strlist(extcopy, elist, 4) &gt;= 0 ) {</div><div class="line"><a name="l02610"></a><span class="lineno"> 2610</span>&#160;      <span class="keywordflow">if</span>( is_mixedcase(ext) ) {</div><div class="line"><a name="l02611"></a><span class="lineno"> 2611</span>&#160;         fprintf(stderr,<span class="stringliteral">&quot;** mixed case extension &#39;%s&#39; is not valid\n&quot;</span>, ext);</div><div class="line"><a name="l02612"></a><span class="lineno"> 2612</span>&#160;         <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l02613"></a><span class="lineno"> 2613</span>&#160;      }</div><div class="line"><a name="l02614"></a><span class="lineno"> 2614</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">return</span> ext;</div><div class="line"><a name="l02615"></a><span class="lineno"> 2615</span>&#160;   }</div><div class="line"><a name="l02616"></a><span class="lineno"> 2616</span>&#160;</div><div class="line"><a name="l02617"></a><span class="lineno"> 2617</span>&#160;<span class="preprocessor">#ifdef HAVE_ZLIB</span></div><div class="line"><a name="l02618"></a><span class="lineno"> 2618</span>&#160;   <span class="keywordflow">if</span> ( len &lt; 7 ) <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l02619"></a><span class="lineno"> 2619</span>&#160;</div><div class="line"><a name="l02620"></a><span class="lineno"> 2620</span>&#160;   ext = (<span class="keywordtype">char</span> *)name + len - 7;</div><div class="line"><a name="l02621"></a><span class="lineno"> 2621</span>&#160;</div><div class="line"><a name="l02622"></a><span class="lineno"> 2622</span>&#160;   <span class="comment">/* make manipulation copy, and possibly convert to lowercase */</span></div><div class="line"><a name="l02623"></a><span class="lineno"> 2623</span>&#160;   strcpy(extcopy, ext);</div><div class="line"><a name="l02624"></a><span class="lineno"> 2624</span>&#160;   <span class="keywordflow">if</span>( <a class="code" href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a>.allow_upper_fext ) make_lowercase(extcopy);</div><div class="line"><a name="l02625"></a><span class="lineno"> 2625</span>&#160;</div><div class="line"><a name="l02626"></a><span class="lineno"> 2626</span>&#160;   <span class="comment">/* go after .gz extensions using the modifiable strings */</span></div><div class="line"><a name="l02627"></a><span class="lineno"> 2627</span>&#160;   strcat(elist[0], extgz); strcat(elist[1], extgz); strcat(elist[2], extgz);</div><div class="line"><a name="l02628"></a><span class="lineno"> 2628</span>&#160;</div><div class="line"><a name="l02629"></a><span class="lineno"> 2629</span>&#160;   <span class="keywordflow">if</span>( compare_strlist(extcopy, elist, 3) &gt;= 0 ) {</div><div class="line"><a name="l02630"></a><span class="lineno"> 2630</span>&#160;      <span class="keywordflow">if</span>( is_mixedcase(ext) ) {</div><div class="line"><a name="l02631"></a><span class="lineno"> 2631</span>&#160;         fprintf(stderr,<span class="stringliteral">&quot;** mixed case extension &#39;%s&#39; is not valid\n&quot;</span>, ext);</div><div class="line"><a name="l02632"></a><span class="lineno"> 2632</span>&#160;         <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l02633"></a><span class="lineno"> 2633</span>&#160;      }</div><div class="line"><a name="l02634"></a><span class="lineno"> 2634</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">return</span> ext;</div><div class="line"><a name="l02635"></a><span class="lineno"> 2635</span>&#160;   }</div><div class="line"><a name="l02636"></a><span class="lineno"> 2636</span>&#160;</div><div class="line"><a name="l02637"></a><span class="lineno"> 2637</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l02638"></a><span class="lineno"> 2638</span>&#160;</div><div class="line"><a name="l02639"></a><span class="lineno"> 2639</span>&#160;   <span class="keywordflow">if</span>( <a class="code" href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a>.debug &gt; 1 )</div><div class="line"><a name="l02640"></a><span class="lineno"> 2640</span>&#160;      fprintf(stderr,<span class="stringliteral">&quot;** find_file_ext: failed for name &#39;%s&#39;\n&quot;</span>, name);</div><div class="line"><a name="l02641"></a><span class="lineno"> 2641</span>&#160;</div><div class="line"><a name="l02642"></a><span class="lineno"> 2642</span>&#160;   <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l02643"></a><span class="lineno"> 2643</span>&#160;}</div><div class="ttc" id="nifti1__io_8c_html_a6e047e1dc2f826a4adff048bee8f5df7"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a></div><div class="ttdeci">static nifti_global_options g_opts</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:344</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="acde0b000cd0b4c5edbe33454ebc0c86f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acde0b000cd0b4c5edbe33454ebc0c86f">&#9670;&nbsp;</a></span>nifti_findhdrname()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* nifti_findhdrname </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>fname</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>check current directory for existing header file</p>
<dl class="section return"><dt>Returns</dt><dd>filename of header on success and NULL if no appropriate file could be found</dd></dl>
<p>If fname has an uppercase extension, check for uppercase files.</p>
<p>NB: it allocates memory for hdrname which should be freed when no longer required </p>
<ul>
<li>check input file(s) for sanity <br />
<br />
<br />
<br />
</li>
<li>return filename if it has a valid extension and exists (except if it is an .img file (and maybe .gz)) <br />
<br />
<br />
</li>
<li>if .img, look for .hdr, .hdr.gz, .nii, .nii.gz, in that order <br />
<br />
</li>
<li>else, look for .nii, .nii.gz, .hdr, .hdr.gz, in that order <br />
</li>
<li>if nothing has been found, return NULL </li>
</ul>
<div class="fragment"><div class="line"><a name="l02736"></a><span class="lineno"> 2736</span>&#160;{</div><div class="line"><a name="l02737"></a><span class="lineno"> 2737</span>&#160;   <span class="keywordtype">char</span> *basename, *hdrname, *ext;</div><div class="line"><a name="l02738"></a><span class="lineno"> 2738</span>&#160;   <span class="keywordtype">char</span>  elist[2][5] = { <span class="stringliteral">&quot;.hdr&quot;</span>, <span class="stringliteral">&quot;.nii&quot;</span> };</div><div class="line"><a name="l02739"></a><span class="lineno"> 2739</span>&#160;   <span class="keywordtype">char</span>  extzip[4]   = <span class="stringliteral">&quot;.gz&quot;</span>;</div><div class="line"><a name="l02740"></a><span class="lineno"> 2740</span>&#160;   <span class="keywordtype">int</span>   efirst = 1;    <span class="comment">/* init to .nii extension */</span></div><div class="line"><a name="l02741"></a><span class="lineno"> 2741</span>&#160;   <span class="keywordtype">int</span>   eisupper = 0;  <span class="comment">/* init to lowercase extensions */</span></div><div class="line"><a name="l02742"></a><span class="lineno"> 2742</span>&#160;</div><div class="line"><a name="l02744"></a><span class="lineno"> 2744</span>&#160;   <span class="keywordflow">if</span>( !<a class="code" href="../../d1/d14/nifti1__io_8c.html#a836b54d494e9d2718e5541978ae3fc29">nifti_validfilename</a>(fname) ) <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l02745"></a><span class="lineno"> 2745</span>&#160;</div><div class="line"><a name="l02746"></a><span class="lineno"> 2746</span>&#160;   basename = <a class="code" href="../../d1/d14/nifti1__io_8c.html#a19cb2bca24ab79a5f0a0ec9b770d7454">nifti_makebasename</a>(fname);</div><div class="line"><a name="l02747"></a><span class="lineno"> 2747</span>&#160;   <span class="keywordflow">if</span>( !basename ) <span class="keywordflow">return</span> NULL;   <span class="comment">/* only on string alloc failure */</span></div><div class="line"><a name="l02748"></a><span class="lineno"> 2748</span>&#160;</div><div class="line"><a name="l02751"></a><span class="lineno"> 2751</span>&#160;   ext = <a class="code" href="../../d1/d14/nifti1__io_8c.html#a338a5f9b74c37ee28ca8683324434a05">nifti_find_file_extension</a>(fname);</div><div class="line"><a name="l02752"></a><span class="lineno"> 2752</span>&#160;</div><div class="line"><a name="l02753"></a><span class="lineno"> 2753</span>&#160;   <span class="keywordflow">if</span>( ext ) eisupper = is_uppercase(ext);  <span class="comment">/* do we look for uppercase? */</span></div><div class="line"><a name="l02754"></a><span class="lineno"> 2754</span>&#160;   </div><div class="line"><a name="l02755"></a><span class="lineno"> 2755</span>&#160;   <span class="comment">/* if the file exists and is a valid header name (not .img), return it */</span></div><div class="line"><a name="l02756"></a><span class="lineno"> 2756</span>&#160;   <span class="keywordflow">if</span> ( ext &amp;&amp; <a class="code" href="../../d1/d14/nifti1__io_8c.html#aebd0c1d644fdafa59727dd8f57ae6686">nifti_fileexists</a>(fname) ) { </div><div class="line"><a name="l02757"></a><span class="lineno"> 2757</span>&#160;     <span class="comment">/* allow for uppercase extension */</span></div><div class="line"><a name="l02758"></a><span class="lineno"> 2758</span>&#160;     <span class="keywordflow">if</span> ( fileext_n_compare(ext,<span class="stringliteral">&quot;.img&quot;</span>,4) != 0 ){</div><div class="line"><a name="l02759"></a><span class="lineno"> 2759</span>&#160;        hdrname = <a class="code" href="../../d1/d14/nifti1__io_8c.html#a98f42fe4268d9fff8a5b8c984f8731f1">nifti_strdup</a>(fname); </div><div class="line"><a name="l02760"></a><span class="lineno"> 2760</span>&#160;        free(basename);</div><div class="line"><a name="l02761"></a><span class="lineno"> 2761</span>&#160;        <span class="keywordflow">return</span> hdrname; </div><div class="line"><a name="l02762"></a><span class="lineno"> 2762</span>&#160;     } <span class="keywordflow">else</span></div><div class="line"><a name="l02763"></a><span class="lineno"> 2763</span>&#160;        efirst = 0;     <span class="comment">/* note for below */</span></div><div class="line"><a name="l02764"></a><span class="lineno"> 2764</span>&#160;   }</div><div class="line"><a name="l02765"></a><span class="lineno"> 2765</span>&#160;</div><div class="line"><a name="l02766"></a><span class="lineno"> 2766</span>&#160;   <span class="comment">/* So the requested name is a basename, contains .img, or does not exist. */</span></div><div class="line"><a name="l02767"></a><span class="lineno"> 2767</span>&#160;   <span class="comment">/* In any case, use basename. */</span></div><div class="line"><a name="l02768"></a><span class="lineno"> 2768</span>&#160;</div><div class="line"><a name="l02772"></a><span class="lineno"> 2772</span>&#160;   <span class="comment">/* if we get more extension choices, this could be a loop */</span></div><div class="line"><a name="l02773"></a><span class="lineno"> 2773</span>&#160;</div><div class="line"><a name="l02774"></a><span class="lineno"> 2774</span>&#160;   <span class="comment">/* note: efirst is 0 in the case of &quot;.img&quot; */</span></div><div class="line"><a name="l02775"></a><span class="lineno"> 2775</span>&#160;</div><div class="line"><a name="l02776"></a><span class="lineno"> 2776</span>&#160;   <span class="comment">/* if the user passed an uppercase entension (.IMG), search for uppercase */</span></div><div class="line"><a name="l02777"></a><span class="lineno"> 2777</span>&#160;   <span class="keywordflow">if</span>( eisupper ) {</div><div class="line"><a name="l02778"></a><span class="lineno"> 2778</span>&#160;      make_uppercase(elist[0]);</div><div class="line"><a name="l02779"></a><span class="lineno"> 2779</span>&#160;      make_uppercase(elist[1]);</div><div class="line"><a name="l02780"></a><span class="lineno"> 2780</span>&#160;      make_uppercase(extzip);</div><div class="line"><a name="l02781"></a><span class="lineno"> 2781</span>&#160;   }</div><div class="line"><a name="l02782"></a><span class="lineno"> 2782</span>&#160;</div><div class="line"><a name="l02783"></a><span class="lineno"> 2783</span>&#160;   hdrname = (<span class="keywordtype">char</span> *)calloc(<span class="keyword">sizeof</span>(<span class="keywordtype">char</span>),strlen(basename)+8);</div><div class="line"><a name="l02784"></a><span class="lineno"> 2784</span>&#160;   <span class="keywordflow">if</span>( !hdrname ){</div><div class="line"><a name="l02785"></a><span class="lineno"> 2785</span>&#160;      fprintf(stderr,<span class="stringliteral">&quot;** nifti_findhdrname: failed to alloc hdrname\n&quot;</span>);</div><div class="line"><a name="l02786"></a><span class="lineno"> 2786</span>&#160;      free(basename);</div><div class="line"><a name="l02787"></a><span class="lineno"> 2787</span>&#160;      <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l02788"></a><span class="lineno"> 2788</span>&#160;   }</div><div class="line"><a name="l02789"></a><span class="lineno"> 2789</span>&#160;</div><div class="line"><a name="l02790"></a><span class="lineno"> 2790</span>&#160;   strcpy(hdrname,basename);</div><div class="line"><a name="l02791"></a><span class="lineno"> 2791</span>&#160;   strcat(hdrname,elist[efirst]);</div><div class="line"><a name="l02792"></a><span class="lineno"> 2792</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d1/d14/nifti1__io_8c.html#aebd0c1d644fdafa59727dd8f57ae6686">nifti_fileexists</a>(hdrname)) { free(basename); <span class="keywordflow">return</span> hdrname; }</div><div class="line"><a name="l02793"></a><span class="lineno"> 2793</span>&#160;<span class="preprocessor">#ifdef HAVE_ZLIB</span></div><div class="line"><a name="l02794"></a><span class="lineno"> 2794</span>&#160;   strcat(hdrname,extzip); </div><div class="line"><a name="l02795"></a><span class="lineno"> 2795</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d1/d14/nifti1__io_8c.html#aebd0c1d644fdafa59727dd8f57ae6686">nifti_fileexists</a>(hdrname)) { free(basename); <span class="keywordflow">return</span> hdrname; }</div><div class="line"><a name="l02796"></a><span class="lineno"> 2796</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l02797"></a><span class="lineno"> 2797</span>&#160;</div><div class="line"><a name="l02798"></a><span class="lineno"> 2798</span>&#160;   <span class="comment">/* okay, try the other possibility */</span></div><div class="line"><a name="l02799"></a><span class="lineno"> 2799</span>&#160;</div><div class="line"><a name="l02800"></a><span class="lineno"> 2800</span>&#160;   efirst = 1 - efirst;</div><div class="line"><a name="l02801"></a><span class="lineno"> 2801</span>&#160;</div><div class="line"><a name="l02802"></a><span class="lineno"> 2802</span>&#160;   strcpy(hdrname,basename);</div><div class="line"><a name="l02803"></a><span class="lineno"> 2803</span>&#160;   strcat(hdrname,elist[efirst]);</div><div class="line"><a name="l02804"></a><span class="lineno"> 2804</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d1/d14/nifti1__io_8c.html#aebd0c1d644fdafa59727dd8f57ae6686">nifti_fileexists</a>(hdrname)) { free(basename); <span class="keywordflow">return</span> hdrname; }</div><div class="line"><a name="l02805"></a><span class="lineno"> 2805</span>&#160;<span class="preprocessor">#ifdef HAVE_ZLIB</span></div><div class="line"><a name="l02806"></a><span class="lineno"> 2806</span>&#160;   strcat(hdrname,extzip); </div><div class="line"><a name="l02807"></a><span class="lineno"> 2807</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d1/d14/nifti1__io_8c.html#aebd0c1d644fdafa59727dd8f57ae6686">nifti_fileexists</a>(hdrname)) { free(basename); <span class="keywordflow">return</span> hdrname; }</div><div class="line"><a name="l02808"></a><span class="lineno"> 2808</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l02809"></a><span class="lineno"> 2809</span>&#160;</div><div class="line"><a name="l02811"></a><span class="lineno"> 2811</span>&#160;   free(basename); </div><div class="line"><a name="l02812"></a><span class="lineno"> 2812</span>&#160;   free(hdrname); </div><div class="line"><a name="l02813"></a><span class="lineno"> 2813</span>&#160;   <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l02814"></a><span class="lineno"> 2814</span>&#160;}</div><div class="ttc" id="nifti1__io_8c_html_a98f42fe4268d9fff8a5b8c984f8731f1"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#a98f42fe4268d9fff8a5b8c984f8731f1">nifti_strdup</a></div><div class="ttdeci">char * nifti_strdup(const char *str)</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:1157</div></div>
<div class="ttc" id="nifti1__io_8c_html_a338a5f9b74c37ee28ca8683324434a05"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#a338a5f9b74c37ee28ca8683324434a05">nifti_find_file_extension</a></div><div class="ttdeci">char * nifti_find_file_extension(const char *name)</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:2583</div></div>
<div class="ttc" id="nifti1__io_8c_html_a19cb2bca24ab79a5f0a0ec9b770d7454"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#a19cb2bca24ab79a5f0a0ec9b770d7454">nifti_makebasename</a></div><div class="ttdeci">char * nifti_makebasename(const char *fname)</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:2680</div></div>
<div class="ttc" id="nifti1__io_8c_html_aebd0c1d644fdafa59727dd8f57ae6686"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#aebd0c1d644fdafa59727dd8f57ae6686">nifti_fileexists</a></div><div class="ttdeci">int nifti_fileexists(const char *fname)</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:2481</div></div>
<div class="ttc" id="nifti1__io_8c_html_a836b54d494e9d2718e5541978ae3fc29"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#a836b54d494e9d2718e5541978ae3fc29">nifti_validfilename</a></div><div class="ttdeci">int nifti_validfilename(const char *fname)</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:2550</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a166171eee037df0d1f28a824e35faea5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a166171eee037df0d1f28a824e35faea5">&#9670;&nbsp;</a></span>nifti_findimgname()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* nifti_findimgname </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>fname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>nifti_type</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>check current directory for existing image file</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fname</td><td>filename to check for  nifti_type for dataset - this determines whether to first check for ".nii" or ".img" (since both may exist)</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>filename of data/img file on success and NULL if no appropriate file could be found</dd></dl>
<p>If fname has a valid, uppercase extension, apply all extensions as uppercase.</p>
<p>NB: it allocates memory for the image filename, which should be freed when no longer required </p>
<ul>
<li>test for .nii and .img (don't assume input type from image type) <br />
<br />
</li>
<li>if nifti_type = 1, check for .nii first, else .img first <br />
</li>
<li>if nothing has been found, return NULL </li>
</ul>
<div class="fragment"><div class="line"><a name="l02834"></a><span class="lineno"> 2834</span>&#160;{</div><div class="line"><a name="l02835"></a><span class="lineno"> 2835</span>&#160;   <span class="comment">/* store all extensions as strings, in case we need to go uppercase */</span></div><div class="line"><a name="l02836"></a><span class="lineno"> 2836</span>&#160;   <span class="keywordtype">char</span> *basename, *imgname, elist[2][5] = { <span class="stringliteral">&quot;.nii&quot;</span>, <span class="stringliteral">&quot;.img&quot;</span> };</div><div class="line"><a name="l02837"></a><span class="lineno"> 2837</span>&#160;   <span class="keywordtype">char</span>  extzip[4] = <span class="stringliteral">&quot;.gz&quot;</span>;</div><div class="line"><a name="l02838"></a><span class="lineno"> 2838</span>&#160;   <span class="keywordtype">char</span>  extnia[5] = <span class="stringliteral">&quot;.nia&quot;</span>;</div><div class="line"><a name="l02839"></a><span class="lineno"> 2839</span>&#160;   <span class="keywordtype">char</span> *ext;</div><div class="line"><a name="l02840"></a><span class="lineno"> 2840</span>&#160;   <span class="keywordtype">int</span>   <a class="code" href="../../d9/dfd/structfirst.html">first</a>;  <span class="comment">/* first extension to use */</span></div><div class="line"><a name="l02841"></a><span class="lineno"> 2841</span>&#160;</div><div class="line"><a name="l02842"></a><span class="lineno"> 2842</span>&#160;   <span class="comment">/* check input file(s) for sanity */</span></div><div class="line"><a name="l02843"></a><span class="lineno"> 2843</span>&#160;   <span class="keywordflow">if</span>( !<a class="code" href="../../d1/d14/nifti1__io_8c.html#a836b54d494e9d2718e5541978ae3fc29">nifti_validfilename</a>(fname) ) <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l02844"></a><span class="lineno"> 2844</span>&#160;</div><div class="line"><a name="l02845"></a><span class="lineno"> 2845</span>&#160;   basename =  <a class="code" href="../../d1/d14/nifti1__io_8c.html#a19cb2bca24ab79a5f0a0ec9b770d7454">nifti_makebasename</a>(fname);</div><div class="line"><a name="l02846"></a><span class="lineno"> 2846</span>&#160;   imgname = (<span class="keywordtype">char</span> *)calloc(<span class="keyword">sizeof</span>(<span class="keywordtype">char</span>),strlen(basename)+8);</div><div class="line"><a name="l02847"></a><span class="lineno"> 2847</span>&#160;   <span class="keywordflow">if</span>( !imgname ){</div><div class="line"><a name="l02848"></a><span class="lineno"> 2848</span>&#160;      fprintf(stderr,<span class="stringliteral">&quot;** nifti_findimgname: failed to alloc imgname\n&quot;</span>);</div><div class="line"><a name="l02849"></a><span class="lineno"> 2849</span>&#160;      free(basename);</div><div class="line"><a name="l02850"></a><span class="lineno"> 2850</span>&#160;      <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l02851"></a><span class="lineno"> 2851</span>&#160;   }</div><div class="line"><a name="l02852"></a><span class="lineno"> 2852</span>&#160;</div><div class="line"><a name="l02853"></a><span class="lineno"> 2853</span>&#160;   <span class="comment">/* if we are looking for uppercase, apply the fact now */</span></div><div class="line"><a name="l02854"></a><span class="lineno"> 2854</span>&#160;   ext = <a class="code" href="../../d1/d14/nifti1__io_8c.html#a338a5f9b74c37ee28ca8683324434a05">nifti_find_file_extension</a>(fname);</div><div class="line"><a name="l02855"></a><span class="lineno"> 2855</span>&#160;   <span class="keywordflow">if</span>( ext &amp;&amp; is_uppercase(ext) ) {</div><div class="line"><a name="l02856"></a><span class="lineno"> 2856</span>&#160;      make_uppercase(elist[0]);</div><div class="line"><a name="l02857"></a><span class="lineno"> 2857</span>&#160;      make_uppercase(elist[1]);</div><div class="line"><a name="l02858"></a><span class="lineno"> 2858</span>&#160;      make_uppercase(extzip);</div><div class="line"><a name="l02859"></a><span class="lineno"> 2859</span>&#160;      make_uppercase(extnia);</div><div class="line"><a name="l02860"></a><span class="lineno"> 2860</span>&#160;   }</div><div class="line"><a name="l02861"></a><span class="lineno"> 2861</span>&#160;</div><div class="line"><a name="l02862"></a><span class="lineno"> 2862</span>&#160;   <span class="comment">/* only valid extension for ASCII type is .nia, handle first */</span></div><div class="line"><a name="l02863"></a><span class="lineno"> 2863</span>&#160;   <span class="keywordflow">if</span>( nifti_type == NIFTI_FTYPE_ASCII ){</div><div class="line"><a name="l02864"></a><span class="lineno"> 2864</span>&#160;      strcpy(imgname,basename);</div><div class="line"><a name="l02865"></a><span class="lineno"> 2865</span>&#160;      strcat(imgname,extnia);</div><div class="line"><a name="l02866"></a><span class="lineno"> 2866</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d1/d14/nifti1__io_8c.html#aebd0c1d644fdafa59727dd8f57ae6686">nifti_fileexists</a>(imgname)) { free(basename); <span class="keywordflow">return</span> imgname; }</div><div class="line"><a name="l02867"></a><span class="lineno"> 2867</span>&#160;</div><div class="line"><a name="l02868"></a><span class="lineno"> 2868</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02869"></a><span class="lineno"> 2869</span>&#160;</div><div class="line"><a name="l02873"></a><span class="lineno"> 2873</span>&#160;      <span class="comment">/* if we get 3 or more extensions, can make a loop here... */</span></div><div class="line"><a name="l02874"></a><span class="lineno"> 2874</span>&#160;</div><div class="line"><a name="l02875"></a><span class="lineno"> 2875</span>&#160;      <span class="keywordflow">if</span> (nifti_type == NIFTI_FTYPE_NIFTI1_1) <a class="code" href="../../d9/dfd/structfirst.html">first</a> = 0; <span class="comment">/* should match .nii */</span></div><div class="line"><a name="l02876"></a><span class="lineno"> 2876</span>&#160;      <span class="keywordflow">else</span>                                    <a class="code" href="../../d9/dfd/structfirst.html">first</a> = 1; <span class="comment">/* should match .img */</span></div><div class="line"><a name="l02877"></a><span class="lineno"> 2877</span>&#160;</div><div class="line"><a name="l02878"></a><span class="lineno"> 2878</span>&#160;      strcpy(imgname,basename);</div><div class="line"><a name="l02879"></a><span class="lineno"> 2879</span>&#160;      strcat(imgname,elist[<a class="code" href="../../d9/dfd/structfirst.html">first</a>]);</div><div class="line"><a name="l02880"></a><span class="lineno"> 2880</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d1/d14/nifti1__io_8c.html#aebd0c1d644fdafa59727dd8f57ae6686">nifti_fileexists</a>(imgname)) { free(basename); <span class="keywordflow">return</span> imgname; }</div><div class="line"><a name="l02881"></a><span class="lineno"> 2881</span>&#160;<span class="preprocessor">#ifdef HAVE_ZLIB  </span><span class="comment">/* then also check for .gz */</span><span class="preprocessor"></span></div><div class="line"><a name="l02882"></a><span class="lineno"> 2882</span>&#160;      strcat(imgname,extzip);</div><div class="line"><a name="l02883"></a><span class="lineno"> 2883</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d1/d14/nifti1__io_8c.html#aebd0c1d644fdafa59727dd8f57ae6686">nifti_fileexists</a>(imgname)) { free(basename); <span class="keywordflow">return</span> imgname; }</div><div class="line"><a name="l02884"></a><span class="lineno"> 2884</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l02885"></a><span class="lineno"> 2885</span>&#160;</div><div class="line"><a name="l02886"></a><span class="lineno"> 2886</span>&#160;      <span class="comment">/* failed to find image file with expected extension, try the other */</span></div><div class="line"><a name="l02887"></a><span class="lineno"> 2887</span>&#160;</div><div class="line"><a name="l02888"></a><span class="lineno"> 2888</span>&#160;      strcpy(imgname,basename);</div><div class="line"><a name="l02889"></a><span class="lineno"> 2889</span>&#160;      strcat(imgname,elist[1-<a class="code" href="../../d9/dfd/structfirst.html">first</a>]);  <span class="comment">/* can do this with only 2 choices */</span></div><div class="line"><a name="l02890"></a><span class="lineno"> 2890</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d1/d14/nifti1__io_8c.html#aebd0c1d644fdafa59727dd8f57ae6686">nifti_fileexists</a>(imgname)) { free(basename); <span class="keywordflow">return</span> imgname; }</div><div class="line"><a name="l02891"></a><span class="lineno"> 2891</span>&#160;<span class="preprocessor">#ifdef HAVE_ZLIB  </span><span class="comment">/* then also check for .gz */</span><span class="preprocessor"></span></div><div class="line"><a name="l02892"></a><span class="lineno"> 2892</span>&#160;      strcat(imgname,extzip);</div><div class="line"><a name="l02893"></a><span class="lineno"> 2893</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d1/d14/nifti1__io_8c.html#aebd0c1d644fdafa59727dd8f57ae6686">nifti_fileexists</a>(imgname)) { free(basename); <span class="keywordflow">return</span> imgname; }</div><div class="line"><a name="l02894"></a><span class="lineno"> 2894</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l02895"></a><span class="lineno"> 2895</span>&#160;   }</div><div class="line"><a name="l02896"></a><span class="lineno"> 2896</span>&#160;</div><div class="line"><a name="l02898"></a><span class="lineno"> 2898</span>&#160;   free(basename);</div><div class="line"><a name="l02899"></a><span class="lineno"> 2899</span>&#160;   free(imgname);</div><div class="line"><a name="l02900"></a><span class="lineno"> 2900</span>&#160;   <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l02901"></a><span class="lineno"> 2901</span>&#160;}</div><div class="ttc" id="nifti1__io_8c_html_a338a5f9b74c37ee28ca8683324434a05"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#a338a5f9b74c37ee28ca8683324434a05">nifti_find_file_extension</a></div><div class="ttdeci">char * nifti_find_file_extension(const char *name)</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:2583</div></div>
<div class="ttc" id="nifti1__io_8c_html_a19cb2bca24ab79a5f0a0ec9b770d7454"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#a19cb2bca24ab79a5f0a0ec9b770d7454">nifti_makebasename</a></div><div class="ttdeci">char * nifti_makebasename(const char *fname)</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:2680</div></div>
<div class="ttc" id="nifti1__io_8c_html_aebd0c1d644fdafa59727dd8f57ae6686"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#aebd0c1d644fdafa59727dd8f57ae6686">nifti_fileexists</a></div><div class="ttdeci">int nifti_fileexists(const char *fname)</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:2481</div></div>
<div class="ttc" id="structfirst_html"><div class="ttname"><a href="../../d9/dfd/structfirst.html">first</a></div><div class="ttdoc">Node of graph to compute maxflow algorithm. </div></div>
<div class="ttc" id="nifti1__io_8c_html_a836b54d494e9d2718e5541978ae3fc29"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#a836b54d494e9d2718e5541978ae3fc29">nifti_validfilename</a></div><div class="ttdeci">int nifti_validfilename(const char *fname)</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:2550</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="afd96262c6dd96e05ceaa08b3fbdff2c9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afd96262c6dd96e05ceaa08b3fbdff2c9">&#9670;&nbsp;</a></span>nifti_free_extensions()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int nifti_free_extensions </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d0/de7/structnifti__image.html">nifti_image</a> *&#160;</td>
          <td class="paramname"><em>nim</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>free the nifti extensions</p>
<ul>
<li>If any edata pointer is set in the extension list, free() it.</li>
<li>Free ext_list, if it is set.</li>
<li>Clear num_ext and ext_list from nim.</li>
</ul>
<dl class="section return"><dt>Returns</dt><dd>0 on success, -1 on error</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="../../d1/d14/nifti1__io_8c.html#af302324afc85693788cd7483b054fc86">nifti_add_extension</a>, nifti_copy_extensions </dd></dl>
<div class="fragment"><div class="line"><a name="l05051"></a><span class="lineno"> 5051</span>&#160;{</div><div class="line"><a name="l05052"></a><span class="lineno"> 5052</span>&#160;   <span class="keywordtype">int</span> c ;</div><div class="line"><a name="l05053"></a><span class="lineno"> 5053</span>&#160;   <span class="keywordflow">if</span>( nim == NULL ) <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l05054"></a><span class="lineno"> 5054</span>&#160;   <span class="keywordflow">if</span>( nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a2b9edee8e340d17e4d87b1c682ca091a">num_ext</a> &gt; 0 &amp;&amp; nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a9f8f5fc618182c3baa7cd0c59af69c35">ext_list</a> ){</div><div class="line"><a name="l05055"></a><span class="lineno"> 5055</span>&#160;      <span class="keywordflow">for</span>( c = 0; c &lt; nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a2b9edee8e340d17e4d87b1c682ca091a">num_ext</a>; c++ )</div><div class="line"><a name="l05056"></a><span class="lineno"> 5056</span>&#160;         <span class="keywordflow">if</span> ( nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a9f8f5fc618182c3baa7cd0c59af69c35">ext_list</a>[c].<a class="code" href="../../d4/d55/structnifti1__extension.html#a009d6948c0c43bcd1a0fe224d536e7ba">edata</a> ) free(nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a9f8f5fc618182c3baa7cd0c59af69c35">ext_list</a>[c].<a class="code" href="../../d4/d55/structnifti1__extension.html#a009d6948c0c43bcd1a0fe224d536e7ba">edata</a>);</div><div class="line"><a name="l05057"></a><span class="lineno"> 5057</span>&#160;      free(nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a9f8f5fc618182c3baa7cd0c59af69c35">ext_list</a>);</div><div class="line"><a name="l05058"></a><span class="lineno"> 5058</span>&#160;   }</div><div class="line"><a name="l05059"></a><span class="lineno"> 5059</span>&#160;   <span class="comment">/* or if it is inconsistent, warn the user (if we are not in quiet mode) */</span></div><div class="line"><a name="l05060"></a><span class="lineno"> 5060</span>&#160;   <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( (nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a2b9edee8e340d17e4d87b1c682ca091a">num_ext</a> &gt; 0 || nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a9f8f5fc618182c3baa7cd0c59af69c35">ext_list</a> != NULL) &amp;&amp; (<a class="code" href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a>.debug &gt; 0) )</div><div class="line"><a name="l05061"></a><span class="lineno"> 5061</span>&#160;      fprintf(stderr,<span class="stringliteral">&quot;** warning: nifti extension num/ptr mismatch (%d,%p)\n&quot;</span>,</div><div class="line"><a name="l05062"></a><span class="lineno"> 5062</span>&#160;              nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a2b9edee8e340d17e4d87b1c682ca091a">num_ext</a>, (<span class="keywordtype">void</span> *)nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a9f8f5fc618182c3baa7cd0c59af69c35">ext_list</a>);</div><div class="line"><a name="l05063"></a><span class="lineno"> 5063</span>&#160;</div><div class="line"><a name="l05064"></a><span class="lineno"> 5064</span>&#160;   <span class="keywordflow">if</span>( <a class="code" href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a>.debug &gt; 2 )</div><div class="line"><a name="l05065"></a><span class="lineno"> 5065</span>&#160;      fprintf(stderr,<span class="stringliteral">&quot;+d free&#39;d %d extension(s)\n&quot;</span>, nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a2b9edee8e340d17e4d87b1c682ca091a">num_ext</a>);</div><div class="line"><a name="l05066"></a><span class="lineno"> 5066</span>&#160;</div><div class="line"><a name="l05067"></a><span class="lineno"> 5067</span>&#160;   nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a2b9edee8e340d17e4d87b1c682ca091a">num_ext</a> = 0;</div><div class="line"><a name="l05068"></a><span class="lineno"> 5068</span>&#160;   nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a9f8f5fc618182c3baa7cd0c59af69c35">ext_list</a> = NULL;</div><div class="line"><a name="l05069"></a><span class="lineno"> 5069</span>&#160;</div><div class="line"><a name="l05070"></a><span class="lineno"> 5070</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l05071"></a><span class="lineno"> 5071</span>&#160;}</div><div class="ttc" id="structnifti1__extension_html_a009d6948c0c43bcd1a0fe224d536e7ba"><div class="ttname"><a href="../../d4/d55/structnifti1__extension.html#a009d6948c0c43bcd1a0fe224d536e7ba">nifti1_extension::edata</a></div><div class="ttdeci">char * edata</div><div class="ttdef"><b>Definition:</b> nifti1.h:296</div></div>
<div class="ttc" id="structnifti__image_html_a9f8f5fc618182c3baa7cd0c59af69c35"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a9f8f5fc618182c3baa7cd0c59af69c35">nifti_image::ext_list</a></div><div class="ttdeci">nifti1_extension * ext_list</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:168</div></div>
<div class="ttc" id="nifti1__io_8c_html_a6e047e1dc2f826a4adff048bee8f5df7"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a></div><div class="ttdeci">static nifti_global_options g_opts</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:344</div></div>
<div class="ttc" id="structnifti__image_html_a2b9edee8e340d17e4d87b1c682ca091a"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a2b9edee8e340d17e4d87b1c682ca091a">nifti_image::num_ext</a></div><div class="ttdeci">int num_ext</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:167</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab1b499958b62d1c0f3bbc929ca2431f2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab1b499958b62d1c0f3bbc929ca2431f2">&#9670;&nbsp;</a></span>nifti_free_NBL()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void nifti_free_NBL </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d1/dba/structnifti__brick__list.html">nifti_brick_list</a> *&#160;</td>
          <td class="paramname"><em>NBL</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>nifti_free_NBL - free all pointers and clear structure</p>
<p>note: this does not presume to free the structure pointer </p>
<div class="fragment"><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;{</div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;   <span class="keywordtype">int</span> c;</div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;</div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;   <span class="keywordflow">if</span>( NBL-&gt;bricks ){</div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;      <span class="keywordflow">for</span>( c = 0; c &lt; NBL-&gt;nbricks; c++ )</div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;         <span class="keywordflow">if</span>( NBL-&gt;bricks[c] ) free(NBL-&gt;bricks[c]);</div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;      free(NBL-&gt;bricks);</div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;      NBL-&gt;bricks = NULL;</div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;   }</div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;</div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;   NBL-&gt;bsize = NBL-&gt;nbricks = 0;</div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a id="ad87cfcf2fe9635136a11811b6f345eab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad87cfcf2fe9635136a11811b6f345eab">&#9670;&nbsp;</a></span>nifti_get_filesize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int nifti_get_filesize </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>pathname</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>return the size of a file, in bytes</p>
<dl class="section return"><dt>Returns</dt><dd>size of file on success, -1 on error or no file</dd></dl>
<p>changed to return int, -1 means no file or error 20 Dec 2004 [rickr] </p>
<div class="fragment"><div class="line"><a name="l02436"></a><span class="lineno"> 2436</span>&#160;{</div><div class="line"><a name="l02437"></a><span class="lineno"> 2437</span>&#160;   <span class="keyword">struct </span>stat buf ; <span class="keywordtype">int</span> ii ;</div><div class="line"><a name="l02438"></a><span class="lineno"> 2438</span>&#160;</div><div class="line"><a name="l02439"></a><span class="lineno"> 2439</span>&#160;   <span class="keywordflow">if</span>( pathname == NULL || *pathname == <span class="charliteral">&#39;\0&#39;</span> ) <span class="keywordflow">return</span> -1 ;</div><div class="line"><a name="l02440"></a><span class="lineno"> 2440</span>&#160;   ii = stat( pathname , &amp;buf ); <span class="keywordflow">if</span>( ii != 0 ) <span class="keywordflow">return</span> -1 ;</div><div class="line"><a name="l02441"></a><span class="lineno"> 2441</span>&#160;   <span class="keywordflow">return</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>)buf.st_size ;</div><div class="line"><a name="l02442"></a><span class="lineno"> 2442</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a id="af07be076f40f7b4bd284488221c6d26f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af07be076f40f7b4bd284488221c6d26f">&#9670;&nbsp;</a></span>nifti_get_intlist()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int* nifti_get_intlist </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>nvals</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>str</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get an integer list in the range 0..(nvals-1), from the character string str. If we call the output pointer fred, then fred[0] = number of integers in the list (&gt; 0), and fred[i] = i-th integer in the list for i=1..fred[0]. If on return, fred == NULL or fred[0] == 0, then something is wrong, and the caller must deal with that.</p>
<p>Syntax of input string:</p><ul>
<li>initial '{' or '[' is skipped, if present</li>
<li>ends when '}' or ']' or end of string is found</li>
<li>contains entries separated by commas</li>
<li>entries have one of these forms:<ul>
<li>a single number</li>
<li>a dollar sign '$', which means nvals-1</li>
<li>a sequence of consecutive numbers in the form "a..b" or "a-b", where "a" and "b" are single numbers (or '$')</li>
<li>a sequence of evenly spaced numbers in the form "a..b(c)" or "a-b(c)", where "c" encodes the step</li>
</ul>
</li>
<li>Example: "[2,7..4,3..9(2)]" decodes to the list 2 7 6 5 4 3 5 7 9</li>
<li>entries should be in the range 0..nvals-1</li>
</ul>
<p>(borrowed, with permission, from thd_intlist.c) </p>
<ul>
<li>for each sub-selector until end of input... <br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
</li>
<li>get starting value <br />
<br />
<br />
<br />
<br />
<br />
<br />
</li>
<li>if that's it for this sub-selector, add one value to list <br />
<br />
<br />
<br />
<br />
<br />
</li>
<li>otherwise, must have '..' or '-' as next inputs <br />
<br />
<br />
<br />
<br />
</li>
<li>get ending value for loop now <br />
<br />
<br />
<br />
</li>
<li>set default loop step <br />
<br />
<br />
</li>
<li>check if we have a non-default loop step <br />
<br />
</li>
<li>add values to output <br />
</li>
<li>check if we have a comma to skip over </li>
</ul>
<div class="fragment"><div class="line"><a name="l07208"></a><span class="lineno"> 7208</span>&#160;{</div><div class="line"><a name="l07209"></a><span class="lineno"> 7209</span>&#160;   <span class="keywordtype">int</span> *subv = NULL ;</div><div class="line"><a name="l07210"></a><span class="lineno"> 7210</span>&#160;   <span class="keywordtype">int</span> ii , ipos , nout , slen ;</div><div class="line"><a name="l07211"></a><span class="lineno"> 7211</span>&#160;   <span class="keywordtype">int</span> ibot,itop,istep , nused ;</div><div class="line"><a name="l07212"></a><span class="lineno"> 7212</span>&#160;   <span class="keywordtype">char</span> *cpt ;</div><div class="line"><a name="l07213"></a><span class="lineno"> 7213</span>&#160;</div><div class="line"><a name="l07214"></a><span class="lineno"> 7214</span>&#160;   <span class="comment">/* Meaningless input? */</span></div><div class="line"><a name="l07215"></a><span class="lineno"> 7215</span>&#160;   <span class="keywordflow">if</span>( nvals &lt; 1 ) <span class="keywordflow">return</span> NULL ;</div><div class="line"><a name="l07216"></a><span class="lineno"> 7216</span>&#160;</div><div class="line"><a name="l07217"></a><span class="lineno"> 7217</span>&#160;   <span class="comment">/* No selection list? */</span></div><div class="line"><a name="l07218"></a><span class="lineno"> 7218</span>&#160;   <span class="keywordflow">if</span>( str == NULL || str[0] == <span class="charliteral">&#39;\0&#39;</span> ) <span class="keywordflow">return</span> NULL ;</div><div class="line"><a name="l07219"></a><span class="lineno"> 7219</span>&#160;</div><div class="line"><a name="l07220"></a><span class="lineno"> 7220</span>&#160;   <span class="comment">/* skip initial &#39;[&#39; or &#39;{&#39; */</span></div><div class="line"><a name="l07221"></a><span class="lineno"> 7221</span>&#160;   subv = (<span class="keywordtype">int</span> *)malloc( <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>) * 2 ) ;</div><div class="line"><a name="l07222"></a><span class="lineno"> 7222</span>&#160;   <span class="keywordflow">if</span>( !subv ) {</div><div class="line"><a name="l07223"></a><span class="lineno"> 7223</span>&#160;      fprintf(stderr,<span class="stringliteral">&quot;** nifti_get_intlist: failed alloc of 2 ints\n&quot;</span>);</div><div class="line"><a name="l07224"></a><span class="lineno"> 7224</span>&#160;      <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l07225"></a><span class="lineno"> 7225</span>&#160;   }</div><div class="line"><a name="l07226"></a><span class="lineno"> 7226</span>&#160;   subv[0] = nout = 0 ;</div><div class="line"><a name="l07227"></a><span class="lineno"> 7227</span>&#160;</div><div class="line"><a name="l07228"></a><span class="lineno"> 7228</span>&#160;   ipos = 0 ;</div><div class="line"><a name="l07229"></a><span class="lineno"> 7229</span>&#160;   <span class="keywordflow">if</span>( str[ipos] == <span class="charliteral">&#39;[&#39;</span> || str[ipos] == <span class="charliteral">&#39;{&#39;</span> ) ipos++ ;</div><div class="line"><a name="l07230"></a><span class="lineno"> 7230</span>&#160;</div><div class="line"><a name="l07231"></a><span class="lineno"> 7231</span>&#160;   <span class="keywordflow">if</span>( <a class="code" href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a>.debug &gt; 1 )</div><div class="line"><a name="l07232"></a><span class="lineno"> 7232</span>&#160;      fprintf(stderr,<span class="stringliteral">&quot;-d making int_list (vals = %d) from &#39;%s&#39;\n&quot;</span>, nvals, str);</div><div class="line"><a name="l07233"></a><span class="lineno"> 7233</span>&#160;</div><div class="line"><a name="l07236"></a><span class="lineno"> 7236</span>&#160;   slen = (int)strlen(str) ;</div><div class="line"><a name="l07237"></a><span class="lineno"> 7237</span>&#160;   <span class="keywordflow">while</span>( ipos &lt; slen &amp;&amp; !ISEND(str[ipos]) ){</div><div class="line"><a name="l07238"></a><span class="lineno"> 7238</span>&#160;</div><div class="line"><a name="l07239"></a><span class="lineno"> 7239</span>&#160;     <span class="keywordflow">while</span>( isspace((<span class="keywordtype">int</span>) str[ipos]) ) ipos++ ;   <span class="comment">/* skip blanks */</span></div><div class="line"><a name="l07240"></a><span class="lineno"> 7240</span>&#160;      <span class="keywordflow">if</span>( ISEND(str[ipos]) ) <span class="keywordflow">break</span> ;         <span class="comment">/* done */</span></div><div class="line"><a name="l07241"></a><span class="lineno"> 7241</span>&#160;</div><div class="line"><a name="l07244"></a><span class="lineno"> 7244</span>&#160;      <span class="keywordflow">if</span>( str[ipos] == <span class="charliteral">&#39;$&#39;</span> ){  <span class="comment">/* special case */</span></div><div class="line"><a name="l07245"></a><span class="lineno"> 7245</span>&#160;         ibot = nvals-1 ; ipos++ ;</div><div class="line"><a name="l07246"></a><span class="lineno"> 7246</span>&#160;      } <span class="keywordflow">else</span> {                 <span class="comment">/* decode an integer */</span></div><div class="line"><a name="l07247"></a><span class="lineno"> 7247</span>&#160;         ibot = strtol( str+ipos , &amp;cpt , 10 ) ;</div><div class="line"><a name="l07248"></a><span class="lineno"> 7248</span>&#160;         <span class="keywordflow">if</span>( ibot &lt; 0 ){</div><div class="line"><a name="l07249"></a><span class="lineno"> 7249</span>&#160;           fprintf(stderr,<span class="stringliteral">&quot;** ERROR: list index %d is out of range 0..%d\n&quot;</span>,</div><div class="line"><a name="l07250"></a><span class="lineno"> 7250</span>&#160;                   ibot,nvals-1) ;</div><div class="line"><a name="l07251"></a><span class="lineno"> 7251</span>&#160;           free(subv) ; <span class="keywordflow">return</span> NULL ;</div><div class="line"><a name="l07252"></a><span class="lineno"> 7252</span>&#160;         }</div><div class="line"><a name="l07253"></a><span class="lineno"> 7253</span>&#160;         <span class="keywordflow">if</span>( ibot &gt;= nvals ){</div><div class="line"><a name="l07254"></a><span class="lineno"> 7254</span>&#160;           fprintf(stderr,<span class="stringliteral">&quot;** ERROR: list index %d is out of range 0..%d\n&quot;</span>,</div><div class="line"><a name="l07255"></a><span class="lineno"> 7255</span>&#160;                   ibot,nvals-1) ;</div><div class="line"><a name="l07256"></a><span class="lineno"> 7256</span>&#160;           free(subv) ; <span class="keywordflow">return</span> NULL ;</div><div class="line"><a name="l07257"></a><span class="lineno"> 7257</span>&#160;         }</div><div class="line"><a name="l07258"></a><span class="lineno"> 7258</span>&#160;         nused = (cpt-(str+ipos)) ;</div><div class="line"><a name="l07259"></a><span class="lineno"> 7259</span>&#160;         <span class="keywordflow">if</span>( ibot == 0 &amp;&amp; nused == 0 ){</div><div class="line"><a name="l07260"></a><span class="lineno"> 7260</span>&#160;           fprintf(stderr,<span class="stringliteral">&quot;** ERROR: list syntax error &#39;%s&#39;\n&quot;</span>,str+ipos) ;</div><div class="line"><a name="l07261"></a><span class="lineno"> 7261</span>&#160;           free(subv) ; <span class="keywordflow">return</span> NULL ;</div><div class="line"><a name="l07262"></a><span class="lineno"> 7262</span>&#160;         }</div><div class="line"><a name="l07263"></a><span class="lineno"> 7263</span>&#160;         ipos += nused ;</div><div class="line"><a name="l07264"></a><span class="lineno"> 7264</span>&#160;      }</div><div class="line"><a name="l07265"></a><span class="lineno"> 7265</span>&#160;</div><div class="line"><a name="l07266"></a><span class="lineno"> 7266</span>&#160;      <span class="keywordflow">while</span>( isspace((<span class="keywordtype">int</span>) str[ipos]) ) ipos++ ;   <span class="comment">/* skip blanks */</span></div><div class="line"><a name="l07267"></a><span class="lineno"> 7267</span>&#160;</div><div class="line"><a name="l07270"></a><span class="lineno"> 7270</span>&#160;      <span class="keywordflow">if</span>( str[ipos] == <span class="charliteral">&#39;,&#39;</span> || ISEND(str[ipos]) ){</div><div class="line"><a name="l07271"></a><span class="lineno"> 7271</span>&#160;         nout++ ;</div><div class="line"><a name="l07272"></a><span class="lineno"> 7272</span>&#160;         subv = (<span class="keywordtype">int</span> *)realloc( (<span class="keywordtype">char</span> *)subv , <span class="keyword">sizeof</span>(int) * (nout+1) ) ;</div><div class="line"><a name="l07273"></a><span class="lineno"> 7273</span>&#160;         <span class="keywordflow">if</span>( !subv ) {</div><div class="line"><a name="l07274"></a><span class="lineno"> 7274</span>&#160;            fprintf(stderr,<span class="stringliteral">&quot;** nifti_get_intlist: failed realloc of %d ints\n&quot;</span>,</div><div class="line"><a name="l07275"></a><span class="lineno"> 7275</span>&#160;                    nout+1);</div><div class="line"><a name="l07276"></a><span class="lineno"> 7276</span>&#160;            <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l07277"></a><span class="lineno"> 7277</span>&#160;         }</div><div class="line"><a name="l07278"></a><span class="lineno"> 7278</span>&#160;         subv[0]    = nout ;</div><div class="line"><a name="l07279"></a><span class="lineno"> 7279</span>&#160;         subv[nout] = ibot ;</div><div class="line"><a name="l07280"></a><span class="lineno"> 7280</span>&#160;         <span class="keywordflow">if</span>( ISEND(str[ipos]) ) break ; <span class="comment">/* done */</span></div><div class="line"><a name="l07281"></a><span class="lineno"> 7281</span>&#160;         ipos++ ; continue ;            <span class="comment">/* re-start loop at next sub-selector */</span></div><div class="line"><a name="l07282"></a><span class="lineno"> 7282</span>&#160;      }</div><div class="line"><a name="l07283"></a><span class="lineno"> 7283</span>&#160;</div><div class="line"><a name="l07286"></a><span class="lineno"> 7286</span>&#160;      <span class="keywordflow">if</span>( str[ipos] == <span class="charliteral">&#39;-&#39;</span> ){</div><div class="line"><a name="l07287"></a><span class="lineno"> 7287</span>&#160;         ipos++ ;</div><div class="line"><a name="l07288"></a><span class="lineno"> 7288</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( str[ipos] == <span class="charliteral">&#39;.&#39;</span> &amp;&amp; str[ipos+1] == <span class="charliteral">&#39;.&#39;</span> ){</div><div class="line"><a name="l07289"></a><span class="lineno"> 7289</span>&#160;         ipos++ ; ipos++ ;</div><div class="line"><a name="l07290"></a><span class="lineno"> 7290</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l07291"></a><span class="lineno"> 7291</span>&#160;         fprintf(stderr,<span class="stringliteral">&quot;** ERROR: index list syntax is bad: &#39;%s&#39;\n&quot;</span>,</div><div class="line"><a name="l07292"></a><span class="lineno"> 7292</span>&#160;                 str+ipos) ;</div><div class="line"><a name="l07293"></a><span class="lineno"> 7293</span>&#160;         free(subv) ; <span class="keywordflow">return</span> NULL ;</div><div class="line"><a name="l07294"></a><span class="lineno"> 7294</span>&#160;      }</div><div class="line"><a name="l07295"></a><span class="lineno"> 7295</span>&#160;</div><div class="line"><a name="l07298"></a><span class="lineno"> 7298</span>&#160;      <span class="keywordflow">if</span>( str[ipos] == <span class="charliteral">&#39;$&#39;</span> ){  <span class="comment">/* special case */</span></div><div class="line"><a name="l07299"></a><span class="lineno"> 7299</span>&#160;         itop = nvals-1 ; ipos++ ;</div><div class="line"><a name="l07300"></a><span class="lineno"> 7300</span>&#160;      } <span class="keywordflow">else</span> {                 <span class="comment">/* decode an integer */</span></div><div class="line"><a name="l07301"></a><span class="lineno"> 7301</span>&#160;         itop = strtol( str+ipos , &amp;cpt , 10 ) ;</div><div class="line"><a name="l07302"></a><span class="lineno"> 7302</span>&#160;         <span class="keywordflow">if</span>( itop &lt; 0 ){</div><div class="line"><a name="l07303"></a><span class="lineno"> 7303</span>&#160;           fprintf(stderr,<span class="stringliteral">&quot;** ERROR: index %d is out of range 0..%d\n&quot;</span>,</div><div class="line"><a name="l07304"></a><span class="lineno"> 7304</span>&#160;                   itop,nvals-1) ;</div><div class="line"><a name="l07305"></a><span class="lineno"> 7305</span>&#160;           free(subv) ; <span class="keywordflow">return</span> NULL ;</div><div class="line"><a name="l07306"></a><span class="lineno"> 7306</span>&#160;         }</div><div class="line"><a name="l07307"></a><span class="lineno"> 7307</span>&#160;         <span class="keywordflow">if</span>( itop &gt;= nvals ){</div><div class="line"><a name="l07308"></a><span class="lineno"> 7308</span>&#160;           fprintf(stderr,<span class="stringliteral">&quot;** ERROR: index %d is out of range 0..%d\n&quot;</span>,</div><div class="line"><a name="l07309"></a><span class="lineno"> 7309</span>&#160;                   itop,nvals-1) ;</div><div class="line"><a name="l07310"></a><span class="lineno"> 7310</span>&#160;           free(subv) ; <span class="keywordflow">return</span> NULL ;</div><div class="line"><a name="l07311"></a><span class="lineno"> 7311</span>&#160;         }</div><div class="line"><a name="l07312"></a><span class="lineno"> 7312</span>&#160;         nused = (cpt-(str+ipos)) ;</div><div class="line"><a name="l07313"></a><span class="lineno"> 7313</span>&#160;         <span class="keywordflow">if</span>( itop == 0 &amp;&amp; nused == 0 ){</div><div class="line"><a name="l07314"></a><span class="lineno"> 7314</span>&#160;           fprintf(stderr,<span class="stringliteral">&quot;** ERROR: index list syntax error &#39;%s&#39;\n&quot;</span>,str+ipos) ;</div><div class="line"><a name="l07315"></a><span class="lineno"> 7315</span>&#160;           free(subv) ; <span class="keywordflow">return</span> NULL ;</div><div class="line"><a name="l07316"></a><span class="lineno"> 7316</span>&#160;         }</div><div class="line"><a name="l07317"></a><span class="lineno"> 7317</span>&#160;         ipos += nused ;</div><div class="line"><a name="l07318"></a><span class="lineno"> 7318</span>&#160;      }</div><div class="line"><a name="l07319"></a><span class="lineno"> 7319</span>&#160;</div><div class="line"><a name="l07322"></a><span class="lineno"> 7322</span>&#160;      istep = (ibot &lt;= itop) ? 1 : -1 ;</div><div class="line"><a name="l07323"></a><span class="lineno"> 7323</span>&#160;</div><div class="line"><a name="l07324"></a><span class="lineno"> 7324</span>&#160;      <span class="keywordflow">while</span>( isspace((<span class="keywordtype">int</span>) str[ipos]) ) ipos++ ;            <span class="comment">/* skip blanks */</span></div><div class="line"><a name="l07325"></a><span class="lineno"> 7325</span>&#160;</div><div class="line"><a name="l07328"></a><span class="lineno"> 7328</span>&#160;      <span class="keywordflow">if</span>( str[ipos] == <span class="charliteral">&#39;(&#39;</span> ){  <span class="comment">/* decode an integer */</span></div><div class="line"><a name="l07329"></a><span class="lineno"> 7329</span>&#160;         ipos++ ;</div><div class="line"><a name="l07330"></a><span class="lineno"> 7330</span>&#160;         istep = strtol( str+ipos , &amp;cpt , 10 ) ;</div><div class="line"><a name="l07331"></a><span class="lineno"> 7331</span>&#160;         <span class="keywordflow">if</span>( istep == 0 ){</div><div class="line"><a name="l07332"></a><span class="lineno"> 7332</span>&#160;           fprintf(stderr,<span class="stringliteral">&quot;** ERROR: index loop step is 0!\n&quot;</span>) ;</div><div class="line"><a name="l07333"></a><span class="lineno"> 7333</span>&#160;           free(subv) ; <span class="keywordflow">return</span> NULL ;</div><div class="line"><a name="l07334"></a><span class="lineno"> 7334</span>&#160;         }</div><div class="line"><a name="l07335"></a><span class="lineno"> 7335</span>&#160;         nused = (cpt-(str+ipos)) ;</div><div class="line"><a name="l07336"></a><span class="lineno"> 7336</span>&#160;         ipos += nused ;</div><div class="line"><a name="l07337"></a><span class="lineno"> 7337</span>&#160;         <span class="keywordflow">if</span>( str[ipos] == <span class="charliteral">&#39;)&#39;</span> ) ipos++ ;</div><div class="line"><a name="l07338"></a><span class="lineno"> 7338</span>&#160;         <span class="keywordflow">if</span>( (ibot-itop)*istep &gt; 0 ){</div><div class="line"><a name="l07339"></a><span class="lineno"> 7339</span>&#160;           fprintf(stderr,<span class="stringliteral">&quot;** WARNING: index list &#39;%d..%d(%d)&#39; means nothing\n&quot;</span>,</div><div class="line"><a name="l07340"></a><span class="lineno"> 7340</span>&#160;                   ibot,itop,istep ) ;</div><div class="line"><a name="l07341"></a><span class="lineno"> 7341</span>&#160;         }</div><div class="line"><a name="l07342"></a><span class="lineno"> 7342</span>&#160;      }</div><div class="line"><a name="l07343"></a><span class="lineno"> 7343</span>&#160;</div><div class="line"><a name="l07346"></a><span class="lineno"> 7346</span>&#160;      <span class="keywordflow">for</span>( ii=ibot ; (ii-itop)*istep &lt;= 0 ; ii += istep ){</div><div class="line"><a name="l07347"></a><span class="lineno"> 7347</span>&#160;         nout++ ;</div><div class="line"><a name="l07348"></a><span class="lineno"> 7348</span>&#160;         subv = (<span class="keywordtype">int</span> *)realloc( (<span class="keywordtype">char</span> *)subv , <span class="keyword">sizeof</span>(int) * (nout+1) ) ;</div><div class="line"><a name="l07349"></a><span class="lineno"> 7349</span>&#160;         <span class="keywordflow">if</span>( !subv ) {</div><div class="line"><a name="l07350"></a><span class="lineno"> 7350</span>&#160;            fprintf(stderr,<span class="stringliteral">&quot;** nifti_get_intlist: failed realloc of %d ints\n&quot;</span>,</div><div class="line"><a name="l07351"></a><span class="lineno"> 7351</span>&#160;                    nout+1);</div><div class="line"><a name="l07352"></a><span class="lineno"> 7352</span>&#160;            <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l07353"></a><span class="lineno"> 7353</span>&#160;         }</div><div class="line"><a name="l07354"></a><span class="lineno"> 7354</span>&#160;         subv[0]    = nout ;</div><div class="line"><a name="l07355"></a><span class="lineno"> 7355</span>&#160;         subv[nout] = ii ;</div><div class="line"><a name="l07356"></a><span class="lineno"> 7356</span>&#160;      }</div><div class="line"><a name="l07357"></a><span class="lineno"> 7357</span>&#160;</div><div class="line"><a name="l07360"></a><span class="lineno"> 7360</span>&#160;      <span class="keywordflow">while</span>( isspace((<span class="keywordtype">int</span>) str[ipos]) ) ipos++ ;            <span class="comment">/* skip blanks */</span></div><div class="line"><a name="l07361"></a><span class="lineno"> 7361</span>&#160;      <span class="keywordflow">if</span>( str[ipos] == <span class="charliteral">&#39;,&#39;</span> ) ipos++ ;                       <span class="comment">/* skip commas */</span></div><div class="line"><a name="l07362"></a><span class="lineno"> 7362</span>&#160;</div><div class="line"><a name="l07363"></a><span class="lineno"> 7363</span>&#160;   }  <span class="comment">/* end of loop through selector string */</span></div><div class="line"><a name="l07364"></a><span class="lineno"> 7364</span>&#160;</div><div class="line"><a name="l07365"></a><span class="lineno"> 7365</span>&#160;   <span class="keywordflow">if</span>( <a class="code" href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a>.debug &gt; 1 ) {</div><div class="line"><a name="l07366"></a><span class="lineno"> 7366</span>&#160;      fprintf(stderr,<span class="stringliteral">&quot;+d int_list (vals = %d): &quot;</span>, subv[0]);</div><div class="line"><a name="l07367"></a><span class="lineno"> 7367</span>&#160;      <span class="keywordflow">for</span>( ii = 1; ii &lt;= subv[0]; ii++ ) fprintf(stderr,<span class="stringliteral">&quot;%d &quot;</span>, subv[ii]);</div><div class="line"><a name="l07368"></a><span class="lineno"> 7368</span>&#160;      fputc(<span class="charliteral">&#39;\n&#39;</span>,stderr);</div><div class="line"><a name="l07369"></a><span class="lineno"> 7369</span>&#160;   }</div><div class="line"><a name="l07370"></a><span class="lineno"> 7370</span>&#160;</div><div class="line"><a name="l07371"></a><span class="lineno"> 7371</span>&#160;   <span class="keywordflow">if</span>( subv[0] == 0 ){ free(subv); subv = NULL; }</div><div class="line"><a name="l07372"></a><span class="lineno"> 7372</span>&#160;   <span class="keywordflow">return</span> subv ;</div><div class="line"><a name="l07373"></a><span class="lineno"> 7373</span>&#160;}</div><div class="ttc" id="nifti1__io_8c_html_a6e047e1dc2f826a4adff048bee8f5df7"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a></div><div class="ttdeci">static nifti_global_options g_opts</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:344</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a0816cfcf9fa0b51a66dd1fa434510e8d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0816cfcf9fa0b51a66dd1fa434510e8d">&#9670;&nbsp;</a></span>nifti_get_volsize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t nifti_get_volsize </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d0/de7/structnifti__image.html">nifti_image</a> *&#160;</td>
          <td class="paramname"><em>nim</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>return the total volume size, in bytes</p>
<p>This is computed as nvox * nbyper. </p>
<div class="fragment"><div class="line"><a name="l02465"></a><span class="lineno"> 2465</span>&#160;{</div><div class="line"><a name="l02466"></a><span class="lineno"> 2466</span>&#160;   <span class="keywordflow">return</span> nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a79a4382f115cb6c7f8977c36d73e6749">nbyper</a> * nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a440a3fab2a781b43ed8216e26492597d">nvox</a> ; <span class="comment">/* total bytes */</span></div><div class="line"><a name="l02467"></a><span class="lineno"> 2467</span>&#160;}</div><div class="ttc" id="structnifti__image_html_a440a3fab2a781b43ed8216e26492597d"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a440a3fab2a781b43ed8216e26492597d">nifti_image::nvox</a></div><div class="ttdeci">size_t nvox</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:100</div></div>
<div class="ttc" id="structnifti__image_html_a79a4382f115cb6c7f8977c36d73e6749"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a79a4382f115cb6c7f8977c36d73e6749">nifti_image::nbyper</a></div><div class="ttdeci">int nbyper</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:101</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a963647a644c757bf79652cf79d69ae18"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a963647a644c757bf79652cf79d69ae18">&#9670;&nbsp;</a></span>nifti_hdr_looks_good()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int nifti_hdr_looks_good </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../dd/d75/structnifti__1__header.html">nifti_1_header</a> *&#160;</td>
          <td class="paramname"><em>hdr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>decide if this <a class="el" href="../../dd/d75/structnifti__1__header.html" title="Data structure defining the fields in the nifti1 header. This binary header should be found at the be...">nifti_1_header</a> structure looks reasonable</p>
<p>Check dim[0], dim[1], sizeof_hdr, and datatype. Check magic string for "n+1". Maybe more tests will follow.</p>
<dl class="section return"><dt>Returns</dt><dd>1 if the header seems valid, 0 otherwise</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="../../d1/d14/nifti1__io_8c.html#a8cb200f44ed38709f534827ecf0aebed">nifti_nim_is_valid</a>, <a class="el" href="../../d1/d14/nifti1__io_8c.html#ae4827bde194fb79b17406da16216f81f">valid_nifti_extensions</a> </dd></dl>
<div class="fragment"><div class="line"><a name="l04031"></a><span class="lineno"> 4031</span>&#160;{</div><div class="line"><a name="l04032"></a><span class="lineno"> 4032</span>&#160;   <span class="keywordtype">int</span> is_nifti, c, errs = 0;</div><div class="line"><a name="l04033"></a><span class="lineno"> 4033</span>&#160;</div><div class="line"><a name="l04034"></a><span class="lineno"> 4034</span>&#160;   <span class="comment">/* check dim[0] and sizeof_hdr */</span></div><div class="line"><a name="l04035"></a><span class="lineno"> 4035</span>&#160;   <span class="keywordflow">if</span>( need_nhdr_swap(hdr-&gt;dim[0], hdr-&gt;sizeof_hdr) &lt; 0 ){</div><div class="line"><a name="l04036"></a><span class="lineno"> 4036</span>&#160;      <span class="keywordflow">if</span>( <a class="code" href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a>.debug &gt; 0 )</div><div class="line"><a name="l04037"></a><span class="lineno"> 4037</span>&#160;         fprintf(stderr,<span class="stringliteral">&quot;** bad nhdr fields: dim0, sizeof_hdr = %d, %d\n&quot;</span>,</div><div class="line"><a name="l04038"></a><span class="lineno"> 4038</span>&#160;                 hdr-&gt;dim[0], hdr-&gt;sizeof_hdr);</div><div class="line"><a name="l04039"></a><span class="lineno"> 4039</span>&#160;      errs++;</div><div class="line"><a name="l04040"></a><span class="lineno"> 4040</span>&#160;   }</div><div class="line"><a name="l04041"></a><span class="lineno"> 4041</span>&#160;</div><div class="line"><a name="l04042"></a><span class="lineno"> 4042</span>&#160;   <span class="comment">/* check the valid dimension sizes (maybe dim[0] is bad) */</span></div><div class="line"><a name="l04043"></a><span class="lineno"> 4043</span>&#160;   <span class="keywordflow">for</span>( c = 1; c &lt;= hdr-&gt;dim[0] &amp;&amp; c &lt;= 7; c++ )</div><div class="line"><a name="l04044"></a><span class="lineno"> 4044</span>&#160;      <span class="keywordflow">if</span>( hdr-&gt;dim[c] &lt;= 0 ){</div><div class="line"><a name="l04045"></a><span class="lineno"> 4045</span>&#160;         <span class="keywordflow">if</span>( <a class="code" href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a>.debug &gt; 0 )</div><div class="line"><a name="l04046"></a><span class="lineno"> 4046</span>&#160;            fprintf(stderr,<span class="stringliteral">&quot;** bad nhdr field: dim[%d] = %d\n&quot;</span>,c,hdr-&gt;dim[c]);</div><div class="line"><a name="l04047"></a><span class="lineno"> 4047</span>&#160;         errs++;</div><div class="line"><a name="l04048"></a><span class="lineno"> 4048</span>&#160;      }</div><div class="line"><a name="l04049"></a><span class="lineno"> 4049</span>&#160;</div><div class="line"><a name="l04050"></a><span class="lineno"> 4050</span>&#160;   is_nifti = NIFTI_VERSION(*hdr);      <span class="comment">/* determine header type */</span></div><div class="line"><a name="l04051"></a><span class="lineno"> 4051</span>&#160;</div><div class="line"><a name="l04052"></a><span class="lineno"> 4052</span>&#160;   <span class="keywordflow">if</span>( is_nifti ){      <span class="comment">/* NIFTI */</span></div><div class="line"><a name="l04053"></a><span class="lineno"> 4053</span>&#160;</div><div class="line"><a name="l04054"></a><span class="lineno"> 4054</span>&#160;      <span class="keywordflow">if</span>( ! <a class="code" href="../../d1/d14/nifti1__io_8c.html#a56b62ecbde8ff299d1911abe1f5961f3">nifti_datatype_is_valid</a>(hdr-&gt;datatype, 1) ){</div><div class="line"><a name="l04055"></a><span class="lineno"> 4055</span>&#160;         <span class="keywordflow">if</span>( <a class="code" href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a>.debug &gt; 0 )</div><div class="line"><a name="l04056"></a><span class="lineno"> 4056</span>&#160;            fprintf(stderr,<span class="stringliteral">&quot;** bad NIFTI datatype in hdr, %d\n&quot;</span>,hdr-&gt;datatype);</div><div class="line"><a name="l04057"></a><span class="lineno"> 4057</span>&#160;         errs++;</div><div class="line"><a name="l04058"></a><span class="lineno"> 4058</span>&#160;      }</div><div class="line"><a name="l04059"></a><span class="lineno"> 4059</span>&#160;</div><div class="line"><a name="l04060"></a><span class="lineno"> 4060</span>&#160;   } <span class="keywordflow">else</span> {             <span class="comment">/* ANALYZE 7.5 */</span></div><div class="line"><a name="l04061"></a><span class="lineno"> 4061</span>&#160;</div><div class="line"><a name="l04062"></a><span class="lineno"> 4062</span>&#160;      <span class="keywordflow">if</span>( <a class="code" href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a>.debug &gt; 1 )  <span class="comment">/* maybe tell user it&#39;s an ANALYZE hdr */</span></div><div class="line"><a name="l04063"></a><span class="lineno"> 4063</span>&#160;         fprintf(stderr,</div><div class="line"><a name="l04064"></a><span class="lineno"> 4064</span>&#160;            <span class="stringliteral">&quot;-- nhdr magic field implies ANALYZE: magic = &#39;%.4s&#39;\n&quot;</span>,hdr-&gt;magic);</div><div class="line"><a name="l04065"></a><span class="lineno"> 4065</span>&#160;</div><div class="line"><a name="l04066"></a><span class="lineno"> 4066</span>&#160;      <span class="keywordflow">if</span>( ! <a class="code" href="../../d1/d14/nifti1__io_8c.html#a56b62ecbde8ff299d1911abe1f5961f3">nifti_datatype_is_valid</a>(hdr-&gt;datatype, 0) ){</div><div class="line"><a name="l04067"></a><span class="lineno"> 4067</span>&#160;         <span class="keywordflow">if</span>( <a class="code" href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a>.debug &gt; 0 )</div><div class="line"><a name="l04068"></a><span class="lineno"> 4068</span>&#160;           fprintf(stderr,<span class="stringliteral">&quot;** bad ANALYZE datatype in hdr, %d\n&quot;</span>,hdr-&gt;datatype);</div><div class="line"><a name="l04069"></a><span class="lineno"> 4069</span>&#160;         errs++;</div><div class="line"><a name="l04070"></a><span class="lineno"> 4070</span>&#160;      }</div><div class="line"><a name="l04071"></a><span class="lineno"> 4071</span>&#160;   }</div><div class="line"><a name="l04072"></a><span class="lineno"> 4072</span>&#160;</div><div class="line"><a name="l04073"></a><span class="lineno"> 4073</span>&#160;   <span class="keywordflow">if</span>( errs ) <span class="keywordflow">return</span> 0;  <span class="comment">/* problems */</span></div><div class="line"><a name="l04074"></a><span class="lineno"> 4074</span>&#160;</div><div class="line"><a name="l04075"></a><span class="lineno"> 4075</span>&#160;   <span class="keywordflow">if</span>( <a class="code" href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a>.debug &gt; 2 ) fprintf(stderr,<span class="stringliteral">&quot;-d nifti header looks good\n&quot;</span>);</div><div class="line"><a name="l04076"></a><span class="lineno"> 4076</span>&#160;</div><div class="line"><a name="l04077"></a><span class="lineno"> 4077</span>&#160;   <span class="keywordflow">return</span> 1;   <span class="comment">/* looks good */</span></div><div class="line"><a name="l04078"></a><span class="lineno"> 4078</span>&#160;}</div><div class="ttc" id="nifti1__io_8c_html_a56b62ecbde8ff299d1911abe1f5961f3"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#a56b62ecbde8ff299d1911abe1f5961f3">nifti_datatype_is_valid</a></div><div class="ttdeci">int nifti_datatype_is_valid(int dtype, int for_nifti)</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:7421</div></div>
<div class="ttc" id="nifti1__io_8c_html_a6e047e1dc2f826a4adff048bee8f5df7"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a></div><div class="ttdeci">static nifti_global_options g_opts</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:344</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a2fe83552d8121a492fe07b5f42397c9d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2fe83552d8121a492fe07b5f42397c9d">&#9670;&nbsp;</a></span>nifti_image_free()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void nifti_image_free </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d0/de7/structnifti__image.html">nifti_image</a> *&#160;</td>
          <td class="paramname"><em>nim</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>free 'everything' about a <a class="el" href="../../d0/de7/structnifti__image.html" title="High level data structure for open nifti datasets in the nifti1_io API. Note that this structure is n...">nifti_image</a> struct (including the passed struct)</p>
<p>free (only fields which are not NULL):</p><ul>
<li>fname and iname</li>
<li>data</li>
<li>any ext_list[i].edata</li>
<li>ext_list</li>
<li>nim </li>
</ul>
<div class="fragment"><div class="line"><a name="l05029"></a><span class="lineno"> 5029</span>&#160;{</div><div class="line"><a name="l05030"></a><span class="lineno"> 5030</span>&#160;   <span class="keywordflow">if</span>( nim == NULL ) return ;</div><div class="line"><a name="l05031"></a><span class="lineno"> 5031</span>&#160;   <span class="keywordflow">if</span>( nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a1c7755060c9cca3612f1101684c9845f">fname</a> != NULL ) free(nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a1c7755060c9cca3612f1101684c9845f">fname</a>) ;</div><div class="line"><a name="l05032"></a><span class="lineno"> 5032</span>&#160;   <span class="keywordflow">if</span>( nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#aa99806d70cacff119b5b6089c3dfdeda">iname</a> != NULL ) free(nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#aa99806d70cacff119b5b6089c3dfdeda">iname</a>) ;</div><div class="line"><a name="l05033"></a><span class="lineno"> 5033</span>&#160;   <span class="keywordflow">if</span>( nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a9c7db78ad411a6e2b8a8ab071bbbe0a8">data</a>  != NULL ) free(nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a9c7db78ad411a6e2b8a8ab071bbbe0a8">data</a> ) ;</div><div class="line"><a name="l05034"></a><span class="lineno"> 5034</span>&#160;   (void)<a class="code" href="../../d1/d14/nifti1__io_8c.html#afd96262c6dd96e05ceaa08b3fbdff2c9">nifti_free_extensions</a>( nim ) ;</div><div class="line"><a name="l05035"></a><span class="lineno"> 5035</span>&#160;   free(nim) ; return ;</div><div class="line"><a name="l05036"></a><span class="lineno"> 5036</span>&#160;}</div><div class="ttc" id="structnifti__image_html_aa99806d70cacff119b5b6089c3dfdeda"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#aa99806d70cacff119b5b6089c3dfdeda">nifti_image::iname</a></div><div class="ttdeci">char * iname</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:161</div></div>
<div class="ttc" id="nifti1__io_8c_html_afd96262c6dd96e05ceaa08b3fbdff2c9"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#afd96262c6dd96e05ceaa08b3fbdff2c9">nifti_free_extensions</a></div><div class="ttdeci">int nifti_free_extensions(nifti_image *nim)</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:5050</div></div>
<div class="ttc" id="structnifti__image_html_a1c7755060c9cca3612f1101684c9845f"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a1c7755060c9cca3612f1101684c9845f">nifti_image::fname</a></div><div class="ttdeci">char * fname</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:160</div></div>
<div class="ttc" id="structnifti__image_html_a9c7db78ad411a6e2b8a8ab071bbbe0a8"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a9c7db78ad411a6e2b8a8ab071bbbe0a8">nifti_image::data</a></div><div class="ttdeci">void * data</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:165</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a645c453f65af3a1ff1be3081ed34b49e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a645c453f65af3a1ff1be3081ed34b49e">&#9670;&nbsp;</a></span>nifti_image_from_ascii()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d0/de7/structnifti__image.html">nifti_image</a>* nifti_image_from_ascii </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>str</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>bytes_read</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Take an XML-ish ASCII string and create a NIFTI image header to match.</p>
<p>NULL is returned if enough information isn't present in the input string.</p><ul>
<li>The image data can later be loaded with <a class="el" href="../../d1/d14/nifti1__io_8c.html#a2e75db3fcfbe1c2f7343611ab9cfcb8d" title="Load the image blob into a previously initialized nifti_image. ">nifti_image_load()</a>.</li>
<li>The struct returned here can be liberated with <a class="el" href="../../d1/d14/nifti1__io_8c.html#a2fe83552d8121a492fe07b5f42397c9d">nifti_image_free()</a>.</li>
<li>Not a lot of error checking is done here to make sure that the input values are reasonable! </li>
</ul>
<div class="fragment"><div class="line"><a name="l06362"></a><span class="lineno"> 6362</span>&#160;{</div><div class="line"><a name="l06363"></a><span class="lineno"> 6363</span>&#160;   <span class="keywordtype">char</span> lhs[1024] , rhs[1024] ;</div><div class="line"><a name="l06364"></a><span class="lineno"> 6364</span>&#160;   <span class="keywordtype">int</span> ii , spos, nn;</div><div class="line"><a name="l06365"></a><span class="lineno"> 6365</span>&#160;   <a class="code" href="../../d0/de7/structnifti__image.html">nifti_image</a> *nim ;              <span class="comment">/* will be output */</span></div><div class="line"><a name="l06366"></a><span class="lineno"> 6366</span>&#160;</div><div class="line"><a name="l06367"></a><span class="lineno"> 6367</span>&#160;   <span class="keywordflow">if</span>( str == NULL || *str == <span class="charliteral">&#39;\0&#39;</span> ) <span class="keywordflow">return</span> NULL ;  <span class="comment">/* bad input!? */</span></div><div class="line"><a name="l06368"></a><span class="lineno"> 6368</span>&#160;</div><div class="line"><a name="l06369"></a><span class="lineno"> 6369</span>&#160;   <span class="comment">/* scan for opening string */</span></div><div class="line"><a name="l06370"></a><span class="lineno"> 6370</span>&#160;</div><div class="line"><a name="l06371"></a><span class="lineno"> 6371</span>&#160;   spos = 0 ; </div><div class="line"><a name="l06372"></a><span class="lineno"> 6372</span>&#160;   ii = sscanf( str+spos , <span class="stringliteral">&quot;%1023s%n&quot;</span> , lhs , &amp;nn ) ; spos += nn ;</div><div class="line"><a name="l06373"></a><span class="lineno"> 6373</span>&#160;   <span class="keywordflow">if</span>( ii == 0 || strcmp(lhs,<span class="stringliteral">&quot;&lt;nifti_image&quot;</span>) != 0 ) <span class="keywordflow">return</span> NULL ;</div><div class="line"><a name="l06374"></a><span class="lineno"> 6374</span>&#160;</div><div class="line"><a name="l06375"></a><span class="lineno"> 6375</span>&#160;   <span class="comment">/* create empty image struct */</span></div><div class="line"><a name="l06376"></a><span class="lineno"> 6376</span>&#160;</div><div class="line"><a name="l06377"></a><span class="lineno"> 6377</span>&#160;   nim = (<a class="code" href="../../d0/de7/structnifti__image.html">nifti_image</a> *)calloc( 1 , <span class="keyword">sizeof</span>(<a class="code" href="../../d0/de7/structnifti__image.html">nifti_image</a>) ) ;</div><div class="line"><a name="l06378"></a><span class="lineno"> 6378</span>&#160;   <span class="keywordflow">if</span>( !nim ){</div><div class="line"><a name="l06379"></a><span class="lineno"> 6379</span>&#160;      fprintf(stderr,<span class="stringliteral">&quot;** NIFA: failed to alloc nifti_image\n&quot;</span>);</div><div class="line"><a name="l06380"></a><span class="lineno"> 6380</span>&#160;      <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l06381"></a><span class="lineno"> 6381</span>&#160;   }</div><div class="line"><a name="l06382"></a><span class="lineno"> 6382</span>&#160;</div><div class="line"><a name="l06383"></a><span class="lineno"> 6383</span>&#160;   nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ab99743dd7967cff6845f1a96b2044167">nx</a> = nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a5e971f24a97c592fefa28d084c02769a">ny</a> = nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a8731bb1d867cdd24335e4bc3dd131c44">nz</a> = nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ab3d3fdfda87503e5e8d53f0342906aba">nt</a></div><div class="line"><a name="l06384"></a><span class="lineno"> 6384</span>&#160;           = nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ab4a9c0956e858fd877ee81796adc66bc">nu</a> = nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a7e04a5e405f9b79dae5652cdcd3832ef">nv</a> = nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ae0bc5b6b2e350108e468124b682b715c">nw</a> = 1 ;</div><div class="line"><a name="l06385"></a><span class="lineno"> 6385</span>&#160;   nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a8d9ddfeecae70399a50dca551d69f774">dx</a> = nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#afb6cd106a28d4599326042c43d85022b">dy</a> = nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ac462fb16a688d8dbec164456febdc9c7">dz</a> = nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ab4e9dd136d1de9fbe03c68f081876b9e">dt</a></div><div class="line"><a name="l06386"></a><span class="lineno"> 6386</span>&#160;           = nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ab1c6399d45bf77d6eff712d318a9d0ca">du</a> = nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a6155d97e665d879e662bf650c09d0bc1">dv</a> = nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ab7d8391bc07972e0b051f157dde00a04">dw</a> = 0 ;</div><div class="line"><a name="l06387"></a><span class="lineno"> 6387</span>&#160;   nim-&gt;qfac = 1.0 ;</div><div class="line"><a name="l06388"></a><span class="lineno"> 6388</span>&#160;</div><div class="line"><a name="l06389"></a><span class="lineno"> 6389</span>&#160;   nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a5ce21d97da49b1dcf9415e83bbf07caf">byteorder</a> = <a class="code" href="../../d1/d14/nifti1__io_8c.html#adf2a70eac549a80a246d380240a8d822">nifti_short_order</a>() ;</div><div class="line"><a name="l06390"></a><span class="lineno"> 6390</span>&#160;</div><div class="line"><a name="l06391"></a><span class="lineno"> 6391</span>&#160;   <span class="comment">/* starting at str[spos], scan for &quot;equations&quot; of the form</span></div><div class="line"><a name="l06392"></a><span class="lineno"> 6392</span>&#160;<span class="comment">         lhs = &#39;rhs&#39;</span></div><div class="line"><a name="l06393"></a><span class="lineno"> 6393</span>&#160;<span class="comment">      and assign rhs values into the struct component named by lhs */</span></div><div class="line"><a name="l06394"></a><span class="lineno"> 6394</span>&#160;</div><div class="line"><a name="l06395"></a><span class="lineno"> 6395</span>&#160;   <span class="keywordflow">while</span>(1){</div><div class="line"><a name="l06396"></a><span class="lineno"> 6396</span>&#160;</div><div class="line"><a name="l06397"></a><span class="lineno"> 6397</span>&#160;     <span class="keywordflow">while</span>( isspace((<span class="keywordtype">int</span>) str[spos]) ) spos++ ;  <span class="comment">/* skip whitespace */</span></div><div class="line"><a name="l06398"></a><span class="lineno"> 6398</span>&#160;     <span class="keywordflow">if</span>( str[spos] == <span class="charliteral">&#39;\0&#39;</span> ) break ;       <span class="comment">/* end of string? */</span></div><div class="line"><a name="l06399"></a><span class="lineno"> 6399</span>&#160;</div><div class="line"><a name="l06400"></a><span class="lineno"> 6400</span>&#160;     <span class="comment">/* get lhs string */</span></div><div class="line"><a name="l06401"></a><span class="lineno"> 6401</span>&#160;</div><div class="line"><a name="l06402"></a><span class="lineno"> 6402</span>&#160;     ii = sscanf( str+spos , <span class="stringliteral">&quot;%1023s%n&quot;</span> , lhs , &amp;nn ) ; spos += nn ;</div><div class="line"><a name="l06403"></a><span class="lineno"> 6403</span>&#160;     <span class="keywordflow">if</span>( ii == 0 || strcmp(lhs,<span class="stringliteral">&quot;/&gt;&quot;</span>) == 0 ) break ;  <span class="comment">/* end of input? */</span></div><div class="line"><a name="l06404"></a><span class="lineno"> 6404</span>&#160;</div><div class="line"><a name="l06405"></a><span class="lineno"> 6405</span>&#160;     <span class="comment">/* skip whitespace and the &#39;=&#39; marker */</span></div><div class="line"><a name="l06406"></a><span class="lineno"> 6406</span>&#160;</div><div class="line"><a name="l06407"></a><span class="lineno"> 6407</span>&#160;     <span class="keywordflow">while</span>( isspace((<span class="keywordtype">int</span>) str[spos]) || str[spos] == <span class="charliteral">&#39;=&#39;</span> ) spos++ ;</div><div class="line"><a name="l06408"></a><span class="lineno"> 6408</span>&#160;     <span class="keywordflow">if</span>( str[spos] == <span class="charliteral">&#39;\0&#39;</span> ) break ;       <span class="comment">/* end of string? */</span></div><div class="line"><a name="l06409"></a><span class="lineno"> 6409</span>&#160;</div><div class="line"><a name="l06410"></a><span class="lineno"> 6410</span>&#160;     <span class="comment">/* if next character is a quote &#39;, copy everything up to next &#39;</span></div><div class="line"><a name="l06411"></a><span class="lineno"> 6411</span>&#160;<span class="comment">        otherwise, copy everything up to next nonblank              */</span></div><div class="line"><a name="l06412"></a><span class="lineno"> 6412</span>&#160;</div><div class="line"><a name="l06413"></a><span class="lineno"> 6413</span>&#160;     <span class="keywordflow">if</span>( str[spos] == <span class="charliteral">&#39;\&#39;&#39;</span> ){</div><div class="line"><a name="l06414"></a><span class="lineno"> 6414</span>&#160;        ii = spos+1 ;</div><div class="line"><a name="l06415"></a><span class="lineno"> 6415</span>&#160;        <span class="keywordflow">while</span>( str[ii] != <span class="charliteral">&#39;\0&#39;</span> &amp;&amp; str[ii] != <span class="charliteral">&#39;\&#39;&#39;</span> ) ii++ ;</div><div class="line"><a name="l06416"></a><span class="lineno"> 6416</span>&#160;        nn = ii-spos-1 ; <span class="keywordflow">if</span>( nn &gt; 1023 ) nn = 1023 ;</div><div class="line"><a name="l06417"></a><span class="lineno"> 6417</span>&#160;        memcpy(rhs,str+spos+1,nn) ; rhs[nn] = <span class="charliteral">&#39;\0&#39;</span> ;</div><div class="line"><a name="l06418"></a><span class="lineno"> 6418</span>&#160;        spos = (str[ii] == <span class="charliteral">&#39;\&#39;&#39;</span>) ? ii+1 : ii ;</div><div class="line"><a name="l06419"></a><span class="lineno"> 6419</span>&#160;     } <span class="keywordflow">else</span> {</div><div class="line"><a name="l06420"></a><span class="lineno"> 6420</span>&#160;        ii = sscanf( str+spos , <span class="stringliteral">&quot;%1023s%n&quot;</span> , rhs , &amp;nn ) ; spos += nn ;</div><div class="line"><a name="l06421"></a><span class="lineno"> 6421</span>&#160;        <span class="keywordflow">if</span>( ii == 0 ) break ;  <span class="comment">/* nothing found? */</span></div><div class="line"><a name="l06422"></a><span class="lineno"> 6422</span>&#160;     }</div><div class="line"><a name="l06423"></a><span class="lineno"> 6423</span>&#160;     unescape_string(rhs) ;  <span class="comment">/* remove any XML escape sequences */</span></div><div class="line"><a name="l06424"></a><span class="lineno"> 6424</span>&#160;</div><div class="line"><a name="l06425"></a><span class="lineno"> 6425</span>&#160;     <span class="comment">/* Now can do the assignment, based on lhs string.</span></div><div class="line"><a name="l06426"></a><span class="lineno"> 6426</span>&#160;<span class="comment">        Start with special cases that don&#39;t fit the QNUM/QSTR macros. */</span></div><div class="line"><a name="l06427"></a><span class="lineno"> 6427</span>&#160;</div><div class="line"><a name="l06428"></a><span class="lineno"> 6428</span>&#160;     <span class="keywordflow">if</span>( strcmp(lhs,<span class="stringliteral">&quot;nifti_type&quot;</span>) == 0 ){</div><div class="line"><a name="l06429"></a><span class="lineno"> 6429</span>&#160;            <span class="keywordflow">if</span>( strcmp(rhs,<span class="stringliteral">&quot;ANALYZE-7.5&quot;</span>) == 0 )</div><div class="line"><a name="l06430"></a><span class="lineno"> 6430</span>&#160;               nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ac55996e58670948b220bebbf5d4bb0f4">nifti_type</a> = NIFTI_FTYPE_ANALYZE ;</div><div class="line"><a name="l06431"></a><span class="lineno"> 6431</span>&#160;       <span class="keywordflow">else</span> <span class="keywordflow">if</span>( strcmp(rhs,<span class="stringliteral">&quot;NIFTI-1+&quot;</span>)    == 0 )</div><div class="line"><a name="l06432"></a><span class="lineno"> 6432</span>&#160;               nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ac55996e58670948b220bebbf5d4bb0f4">nifti_type</a> = NIFTI_FTYPE_NIFTI1_1 ;</div><div class="line"><a name="l06433"></a><span class="lineno"> 6433</span>&#160;       <span class="keywordflow">else</span> <span class="keywordflow">if</span>( strcmp(rhs,<span class="stringliteral">&quot;NIFTI-1&quot;</span>)     == 0 )</div><div class="line"><a name="l06434"></a><span class="lineno"> 6434</span>&#160;               nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ac55996e58670948b220bebbf5d4bb0f4">nifti_type</a> = NIFTI_FTYPE_NIFTI1_2 ;</div><div class="line"><a name="l06435"></a><span class="lineno"> 6435</span>&#160;       <span class="keywordflow">else</span> <span class="keywordflow">if</span>( strcmp(rhs,<span class="stringliteral">&quot;NIFTI-1A&quot;</span>)    == 0 )</div><div class="line"><a name="l06436"></a><span class="lineno"> 6436</span>&#160;               nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ac55996e58670948b220bebbf5d4bb0f4">nifti_type</a> = NIFTI_FTYPE_ASCII ;</div><div class="line"><a name="l06437"></a><span class="lineno"> 6437</span>&#160;     }</div><div class="line"><a name="l06438"></a><span class="lineno"> 6438</span>&#160;     <span class="keywordflow">else</span> <span class="keywordflow">if</span>( strcmp(lhs,<span class="stringliteral">&quot;header_filename&quot;</span>) == 0 ){</div><div class="line"><a name="l06439"></a><span class="lineno"> 6439</span>&#160;       nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a1c7755060c9cca3612f1101684c9845f">fname</a> = <a class="code" href="../../d1/d14/nifti1__io_8c.html#a98f42fe4268d9fff8a5b8c984f8731f1">nifti_strdup</a>(rhs) ;</div><div class="line"><a name="l06440"></a><span class="lineno"> 6440</span>&#160;     }</div><div class="line"><a name="l06441"></a><span class="lineno"> 6441</span>&#160;     <span class="keywordflow">else</span> <span class="keywordflow">if</span>( strcmp(lhs,<span class="stringliteral">&quot;image_filename&quot;</span>) == 0 ){</div><div class="line"><a name="l06442"></a><span class="lineno"> 6442</span>&#160;       nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#aa99806d70cacff119b5b6089c3dfdeda">iname</a> = <a class="code" href="../../d1/d14/nifti1__io_8c.html#a98f42fe4268d9fff8a5b8c984f8731f1">nifti_strdup</a>(rhs) ;</div><div class="line"><a name="l06443"></a><span class="lineno"> 6443</span>&#160;     }</div><div class="line"><a name="l06444"></a><span class="lineno"> 6444</span>&#160;     <span class="keywordflow">else</span> <span class="keywordflow">if</span>( strcmp(lhs,<span class="stringliteral">&quot;sto_xyz_matrix&quot;</span>) == 0 ){</div><div class="line"><a name="l06445"></a><span class="lineno"> 6445</span>&#160;       sscanf( rhs , <span class="stringliteral">&quot;%f %f %f %f %f %f %f %f %f %f %f %f %f %f %f %f&quot;</span> ,</div><div class="line"><a name="l06446"></a><span class="lineno"> 6446</span>&#160;               &amp;(nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a69460d9b0b0b19fe740c9b30cfd44e10">sto_xyz</a>.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[0][0]) , &amp;(nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a69460d9b0b0b19fe740c9b30cfd44e10">sto_xyz</a>.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[0][1]) ,</div><div class="line"><a name="l06447"></a><span class="lineno"> 6447</span>&#160;               &amp;(nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a69460d9b0b0b19fe740c9b30cfd44e10">sto_xyz</a>.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[0][2]) , &amp;(nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a69460d9b0b0b19fe740c9b30cfd44e10">sto_xyz</a>.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[0][3]) ,</div><div class="line"><a name="l06448"></a><span class="lineno"> 6448</span>&#160;               &amp;(nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a69460d9b0b0b19fe740c9b30cfd44e10">sto_xyz</a>.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[1][0]) , &amp;(nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a69460d9b0b0b19fe740c9b30cfd44e10">sto_xyz</a>.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[1][1]) ,</div><div class="line"><a name="l06449"></a><span class="lineno"> 6449</span>&#160;               &amp;(nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a69460d9b0b0b19fe740c9b30cfd44e10">sto_xyz</a>.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[1][2]) , &amp;(nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a69460d9b0b0b19fe740c9b30cfd44e10">sto_xyz</a>.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[1][3]) ,</div><div class="line"><a name="l06450"></a><span class="lineno"> 6450</span>&#160;               &amp;(nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a69460d9b0b0b19fe740c9b30cfd44e10">sto_xyz</a>.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[2][0]) , &amp;(nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a69460d9b0b0b19fe740c9b30cfd44e10">sto_xyz</a>.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[2][1]) ,</div><div class="line"><a name="l06451"></a><span class="lineno"> 6451</span>&#160;               &amp;(nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a69460d9b0b0b19fe740c9b30cfd44e10">sto_xyz</a>.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[2][2]) , &amp;(nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a69460d9b0b0b19fe740c9b30cfd44e10">sto_xyz</a>.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[2][3]) ,</div><div class="line"><a name="l06452"></a><span class="lineno"> 6452</span>&#160;               &amp;(nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a69460d9b0b0b19fe740c9b30cfd44e10">sto_xyz</a>.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[3][0]) , &amp;(nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a69460d9b0b0b19fe740c9b30cfd44e10">sto_xyz</a>.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[3][1]) ,</div><div class="line"><a name="l06453"></a><span class="lineno"> 6453</span>&#160;               &amp;(nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a69460d9b0b0b19fe740c9b30cfd44e10">sto_xyz</a>.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[3][2]) , &amp;(nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a69460d9b0b0b19fe740c9b30cfd44e10">sto_xyz</a>.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[3][3])  ) ;</div><div class="line"><a name="l06454"></a><span class="lineno"> 6454</span>&#160;     }</div><div class="line"><a name="l06455"></a><span class="lineno"> 6455</span>&#160;     <span class="keywordflow">else</span> <span class="keywordflow">if</span>( strcmp(lhs,<span class="stringliteral">&quot;byteorder&quot;</span>) == 0 ){</div><div class="line"><a name="l06456"></a><span class="lineno"> 6456</span>&#160;       <span class="keywordflow">if</span>( strcmp(rhs,<span class="stringliteral">&quot;MSB_FIRST&quot;</span>) == 0 ) nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a5ce21d97da49b1dcf9415e83bbf07caf">byteorder</a> = MSB_FIRST ;</div><div class="line"><a name="l06457"></a><span class="lineno"> 6457</span>&#160;       <span class="keywordflow">if</span>( strcmp(rhs,<span class="stringliteral">&quot;LSB_FIRST&quot;</span>) == 0 ) nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a5ce21d97da49b1dcf9415e83bbf07caf">byteorder</a> = LSB_FIRST ;</div><div class="line"><a name="l06458"></a><span class="lineno"> 6458</span>&#160;     }</div><div class="line"><a name="l06459"></a><span class="lineno"> 6459</span>&#160;     <span class="keywordflow">else</span> QQNUM(image_offset,iname_offset) ;</div><div class="line"><a name="l06460"></a><span class="lineno"> 6460</span>&#160;     <span class="keywordflow">else</span> QNUM(datatype) ;</div><div class="line"><a name="l06461"></a><span class="lineno"> 6461</span>&#160;     <span class="keywordflow">else</span> QNUM(ndim) ;</div><div class="line"><a name="l06462"></a><span class="lineno"> 6462</span>&#160;     <span class="keywordflow">else</span> QNUM(nx) ;</div><div class="line"><a name="l06463"></a><span class="lineno"> 6463</span>&#160;     <span class="keywordflow">else</span> QNUM(ny) ;</div><div class="line"><a name="l06464"></a><span class="lineno"> 6464</span>&#160;     <span class="keywordflow">else</span> QNUM(nz) ;</div><div class="line"><a name="l06465"></a><span class="lineno"> 6465</span>&#160;     <span class="keywordflow">else</span> QNUM(nt) ;</div><div class="line"><a name="l06466"></a><span class="lineno"> 6466</span>&#160;     <span class="keywordflow">else</span> QNUM(nu) ;</div><div class="line"><a name="l06467"></a><span class="lineno"> 6467</span>&#160;     <span class="keywordflow">else</span> QNUM(nv) ;</div><div class="line"><a name="l06468"></a><span class="lineno"> 6468</span>&#160;     <span class="keywordflow">else</span> QNUM(nw) ;</div><div class="line"><a name="l06469"></a><span class="lineno"> 6469</span>&#160;     <span class="keywordflow">else</span> QNUM(dx) ;</div><div class="line"><a name="l06470"></a><span class="lineno"> 6470</span>&#160;     <span class="keywordflow">else</span> QNUM(dy) ;</div><div class="line"><a name="l06471"></a><span class="lineno"> 6471</span>&#160;     <span class="keywordflow">else</span> QNUM(dz) ;</div><div class="line"><a name="l06472"></a><span class="lineno"> 6472</span>&#160;     <span class="keywordflow">else</span> QNUM(dt) ;</div><div class="line"><a name="l06473"></a><span class="lineno"> 6473</span>&#160;     <span class="keywordflow">else</span> QNUM(du) ;</div><div class="line"><a name="l06474"></a><span class="lineno"> 6474</span>&#160;     <span class="keywordflow">else</span> QNUM(dv) ;</div><div class="line"><a name="l06475"></a><span class="lineno"> 6475</span>&#160;     <span class="keywordflow">else</span> QNUM(dw) ;</div><div class="line"><a name="l06476"></a><span class="lineno"> 6476</span>&#160;     <span class="keywordflow">else</span> QNUM(cal_min) ;</div><div class="line"><a name="l06477"></a><span class="lineno"> 6477</span>&#160;     <span class="keywordflow">else</span> QNUM(cal_max) ;</div><div class="line"><a name="l06478"></a><span class="lineno"> 6478</span>&#160;     <span class="keywordflow">else</span> QNUM(scl_slope) ;</div><div class="line"><a name="l06479"></a><span class="lineno"> 6479</span>&#160;     <span class="keywordflow">else</span> QNUM(scl_inter) ;</div><div class="line"><a name="l06480"></a><span class="lineno"> 6480</span>&#160;     <span class="keywordflow">else</span> QNUM(intent_code) ;</div><div class="line"><a name="l06481"></a><span class="lineno"> 6481</span>&#160;     <span class="keywordflow">else</span> QNUM(intent_p1) ;</div><div class="line"><a name="l06482"></a><span class="lineno"> 6482</span>&#160;     <span class="keywordflow">else</span> QNUM(intent_p2) ;</div><div class="line"><a name="l06483"></a><span class="lineno"> 6483</span>&#160;     <span class="keywordflow">else</span> QNUM(intent_p3) ;</div><div class="line"><a name="l06484"></a><span class="lineno"> 6484</span>&#160;     <span class="keywordflow">else</span> QSTR(intent_name,15) ;</div><div class="line"><a name="l06485"></a><span class="lineno"> 6485</span>&#160;     <span class="keywordflow">else</span> QNUM(toffset) ;</div><div class="line"><a name="l06486"></a><span class="lineno"> 6486</span>&#160;     <span class="keywordflow">else</span> QNUM(xyz_units) ;</div><div class="line"><a name="l06487"></a><span class="lineno"> 6487</span>&#160;     <span class="keywordflow">else</span> QNUM(time_units) ;</div><div class="line"><a name="l06488"></a><span class="lineno"> 6488</span>&#160;     <span class="keywordflow">else</span> QSTR(descrip,79) ;</div><div class="line"><a name="l06489"></a><span class="lineno"> 6489</span>&#160;     <span class="keywordflow">else</span> QSTR(aux_file,23) ;</div><div class="line"><a name="l06490"></a><span class="lineno"> 6490</span>&#160;     <span class="keywordflow">else</span> QNUM(qform_code) ;</div><div class="line"><a name="l06491"></a><span class="lineno"> 6491</span>&#160;     <span class="keywordflow">else</span> QNUM(quatern_b) ;</div><div class="line"><a name="l06492"></a><span class="lineno"> 6492</span>&#160;     <span class="keywordflow">else</span> QNUM(quatern_c) ;</div><div class="line"><a name="l06493"></a><span class="lineno"> 6493</span>&#160;     <span class="keywordflow">else</span> QNUM(quatern_d) ;</div><div class="line"><a name="l06494"></a><span class="lineno"> 6494</span>&#160;     <span class="keywordflow">else</span> QNUM(qoffset_x) ;</div><div class="line"><a name="l06495"></a><span class="lineno"> 6495</span>&#160;     <span class="keywordflow">else</span> QNUM(qoffset_y) ;</div><div class="line"><a name="l06496"></a><span class="lineno"> 6496</span>&#160;     <span class="keywordflow">else</span> QNUM(qoffset_z) ;</div><div class="line"><a name="l06497"></a><span class="lineno"> 6497</span>&#160;     <span class="keywordflow">else</span> QNUM(qfac) ;</div><div class="line"><a name="l06498"></a><span class="lineno"> 6498</span>&#160;     <span class="keywordflow">else</span> QNUM(sform_code) ;</div><div class="line"><a name="l06499"></a><span class="lineno"> 6499</span>&#160;     <span class="keywordflow">else</span> QNUM(freq_dim) ;</div><div class="line"><a name="l06500"></a><span class="lineno"> 6500</span>&#160;     <span class="keywordflow">else</span> QNUM(phase_dim) ;</div><div class="line"><a name="l06501"></a><span class="lineno"> 6501</span>&#160;     <span class="keywordflow">else</span> QNUM(slice_dim) ;</div><div class="line"><a name="l06502"></a><span class="lineno"> 6502</span>&#160;     <span class="keywordflow">else</span> QNUM(slice_code) ;</div><div class="line"><a name="l06503"></a><span class="lineno"> 6503</span>&#160;     <span class="keywordflow">else</span> QNUM(slice_start) ;</div><div class="line"><a name="l06504"></a><span class="lineno"> 6504</span>&#160;     <span class="keywordflow">else</span> QNUM(slice_end) ;</div><div class="line"><a name="l06505"></a><span class="lineno"> 6505</span>&#160;     <span class="keywordflow">else</span> QNUM(slice_duration) ;</div><div class="line"><a name="l06506"></a><span class="lineno"> 6506</span>&#160;     <span class="keywordflow">else</span> QNUM(num_ext) ;</div><div class="line"><a name="l06507"></a><span class="lineno"> 6507</span>&#160;</div><div class="line"><a name="l06508"></a><span class="lineno"> 6508</span>&#160;   } <span class="comment">/* end of while loop */</span></div><div class="line"><a name="l06509"></a><span class="lineno"> 6509</span>&#160;</div><div class="line"><a name="l06510"></a><span class="lineno"> 6510</span>&#160;   <span class="keywordflow">if</span>( bytes_read ) *bytes_read = spos+1;         <span class="comment">/* &quot;process&quot; last &#39;\n&#39; */</span></div><div class="line"><a name="l06511"></a><span class="lineno"> 6511</span>&#160;</div><div class="line"><a name="l06512"></a><span class="lineno"> 6512</span>&#160;   <span class="comment">/* do miscellaneous checking and cleanup */</span></div><div class="line"><a name="l06513"></a><span class="lineno"> 6513</span>&#160;</div><div class="line"><a name="l06514"></a><span class="lineno"> 6514</span>&#160;   <span class="keywordflow">if</span>( nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ad61740a0245f2af05ded39cb0648ae07">ndim</a> &lt;= 0 ){ <a class="code" href="../../d1/d14/nifti1__io_8c.html#a2fe83552d8121a492fe07b5f42397c9d">nifti_image_free</a>(nim); <span class="keywordflow">return</span> NULL; } <span class="comment">/* bad! */</span></div><div class="line"><a name="l06515"></a><span class="lineno"> 6515</span>&#160;</div><div class="line"><a name="l06516"></a><span class="lineno"> 6516</span>&#160;   <a class="code" href="../../d1/d14/nifti1__io_8c.html#aeeccf4be6839946794c2cc1fdef26d4f">nifti_datatype_sizes</a>( nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a51bad5202c3b9943b3c86f80ca5d1cd1">datatype</a>, &amp;(nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a79a4382f115cb6c7f8977c36d73e6749">nbyper</a>), &amp;(nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ac7e2a08cb9631d0cdf6a29da77cb19ee">swapsize</a>) );</div><div class="line"><a name="l06517"></a><span class="lineno"> 6517</span>&#160;   <span class="keywordflow">if</span>( nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a79a4382f115cb6c7f8977c36d73e6749">nbyper</a> == 0 ){ <a class="code" href="../../d1/d14/nifti1__io_8c.html#a2fe83552d8121a492fe07b5f42397c9d">nifti_image_free</a>(nim); <span class="keywordflow">return</span> NULL; } <span class="comment">/* bad! */</span></div><div class="line"><a name="l06518"></a><span class="lineno"> 6518</span>&#160;</div><div class="line"><a name="l06519"></a><span class="lineno"> 6519</span>&#160;   nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a054f5f2c357dd6833efd467ac202f0a5">dim</a>[0] = nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ad61740a0245f2af05ded39cb0648ae07">ndim</a> ;</div><div class="line"><a name="l06520"></a><span class="lineno"> 6520</span>&#160;   nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a054f5f2c357dd6833efd467ac202f0a5">dim</a>[1] = nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ab99743dd7967cff6845f1a96b2044167">nx</a> ; nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ae71e0af4ae7e67eb52a0f5e36be520a6">pixdim</a>[1] = nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a8d9ddfeecae70399a50dca551d69f774">dx</a> ;</div><div class="line"><a name="l06521"></a><span class="lineno"> 6521</span>&#160;   nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a054f5f2c357dd6833efd467ac202f0a5">dim</a>[2] = nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a5e971f24a97c592fefa28d084c02769a">ny</a> ; nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ae71e0af4ae7e67eb52a0f5e36be520a6">pixdim</a>[2] = nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#afb6cd106a28d4599326042c43d85022b">dy</a> ;</div><div class="line"><a name="l06522"></a><span class="lineno"> 6522</span>&#160;   nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a054f5f2c357dd6833efd467ac202f0a5">dim</a>[3] = nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a8731bb1d867cdd24335e4bc3dd131c44">nz</a> ; nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ae71e0af4ae7e67eb52a0f5e36be520a6">pixdim</a>[3] = nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ac462fb16a688d8dbec164456febdc9c7">dz</a> ;</div><div class="line"><a name="l06523"></a><span class="lineno"> 6523</span>&#160;   nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a054f5f2c357dd6833efd467ac202f0a5">dim</a>[4] = nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ab3d3fdfda87503e5e8d53f0342906aba">nt</a> ; nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ae71e0af4ae7e67eb52a0f5e36be520a6">pixdim</a>[4] = nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ab4e9dd136d1de9fbe03c68f081876b9e">dt</a> ;</div><div class="line"><a name="l06524"></a><span class="lineno"> 6524</span>&#160;   nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a054f5f2c357dd6833efd467ac202f0a5">dim</a>[5] = nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ab4a9c0956e858fd877ee81796adc66bc">nu</a> ; nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ae71e0af4ae7e67eb52a0f5e36be520a6">pixdim</a>[5] = nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ab1c6399d45bf77d6eff712d318a9d0ca">du</a> ;</div><div class="line"><a name="l06525"></a><span class="lineno"> 6525</span>&#160;   nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a054f5f2c357dd6833efd467ac202f0a5">dim</a>[6] = nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a7e04a5e405f9b79dae5652cdcd3832ef">nv</a> ; nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ae71e0af4ae7e67eb52a0f5e36be520a6">pixdim</a>[6] = nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a6155d97e665d879e662bf650c09d0bc1">dv</a> ;</div><div class="line"><a name="l06526"></a><span class="lineno"> 6526</span>&#160;   nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a054f5f2c357dd6833efd467ac202f0a5">dim</a>[7] = nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ae0bc5b6b2e350108e468124b682b715c">nw</a> ; nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ae71e0af4ae7e67eb52a0f5e36be520a6">pixdim</a>[7] = nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ab7d8391bc07972e0b051f157dde00a04">dw</a> ;</div><div class="line"><a name="l06527"></a><span class="lineno"> 6527</span>&#160;</div><div class="line"><a name="l06528"></a><span class="lineno"> 6528</span>&#160;   nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a440a3fab2a781b43ed8216e26492597d">nvox</a> = (size_t)nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ab99743dd7967cff6845f1a96b2044167">nx</a> * nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a5e971f24a97c592fefa28d084c02769a">ny</a> * nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a8731bb1d867cdd24335e4bc3dd131c44">nz</a></div><div class="line"><a name="l06529"></a><span class="lineno"> 6529</span>&#160;                     * nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ab3d3fdfda87503e5e8d53f0342906aba">nt</a> * nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ab4a9c0956e858fd877ee81796adc66bc">nu</a> * nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a7e04a5e405f9b79dae5652cdcd3832ef">nv</a> * nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ae0bc5b6b2e350108e468124b682b715c">nw</a> ;</div><div class="line"><a name="l06530"></a><span class="lineno"> 6530</span>&#160;</div><div class="line"><a name="l06531"></a><span class="lineno"> 6531</span>&#160;   <span class="keywordflow">if</span>( nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#adfcbe7e11b44d8a964d61c3e17554686">qform_code</a> &gt; 0 )</div><div class="line"><a name="l06532"></a><span class="lineno"> 6532</span>&#160;     nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a122993357c6c712559c5e0244347c5f3">qto_xyz</a> = <a class="code" href="../../d1/d14/nifti1__io_8c.html#a4b183639b2e242ac32210fe3437f60d2">nifti_quatern_to_mat44</a>(</div><div class="line"><a name="l06533"></a><span class="lineno"> 6533</span>&#160;                      nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a26fc9296e99700da54ca3749622f83bd">quatern_b</a>, nim-&gt;quatern_c, nim-&gt;quatern_d,</div><div class="line"><a name="l06534"></a><span class="lineno"> 6534</span>&#160;                      nim-&gt;qoffset_x, nim-&gt;qoffset_y, nim-&gt;qoffset_z,</div><div class="line"><a name="l06535"></a><span class="lineno"> 6535</span>&#160;                      nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a8d9ddfeecae70399a50dca551d69f774">dx</a>       , nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#afb6cd106a28d4599326042c43d85022b">dy</a>       , nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ac462fb16a688d8dbec164456febdc9c7">dz</a>       ,</div><div class="line"><a name="l06536"></a><span class="lineno"> 6536</span>&#160;                      nim-&gt;qfac                                      ) ;</div><div class="line"><a name="l06537"></a><span class="lineno"> 6537</span>&#160;   <span class="keywordflow">else</span></div><div class="line"><a name="l06538"></a><span class="lineno"> 6538</span>&#160;     nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a122993357c6c712559c5e0244347c5f3">qto_xyz</a> = <a class="code" href="../../d1/d14/nifti1__io_8c.html#a4b183639b2e242ac32210fe3437f60d2">nifti_quatern_to_mat44</a>(</div><div class="line"><a name="l06539"></a><span class="lineno"> 6539</span>&#160;                      0.0 , 0.0 , 0.0 , 0.0 , 0.0 , 0.0 ,</div><div class="line"><a name="l06540"></a><span class="lineno"> 6540</span>&#160;                      nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a8d9ddfeecae70399a50dca551d69f774">dx</a> , nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#afb6cd106a28d4599326042c43d85022b">dy</a> , nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ac462fb16a688d8dbec164456febdc9c7">dz</a> , 0.0 ) ;</div><div class="line"><a name="l06541"></a><span class="lineno"> 6541</span>&#160;</div><div class="line"><a name="l06542"></a><span class="lineno"> 6542</span>&#160;</div><div class="line"><a name="l06543"></a><span class="lineno"> 6543</span>&#160;   nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a750a76b493a4f2fc04c66ce2d4407bce">qto_ijk</a> = <a class="code" href="../../d1/d14/nifti1__io_8c.html#abf7254db0ad36f998a92ac6f42f9c5c9">nifti_mat44_inverse</a>( nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a122993357c6c712559c5e0244347c5f3">qto_xyz</a> ) ;</div><div class="line"><a name="l06544"></a><span class="lineno"> 6544</span>&#160;</div><div class="line"><a name="l06545"></a><span class="lineno"> 6545</span>&#160;   <span class="keywordflow">if</span>( nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a964e209d6110bd26df6935ebf4a2a620">sform_code</a> &gt; 0 )</div><div class="line"><a name="l06546"></a><span class="lineno"> 6546</span>&#160;     nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a1cb3cbfb8172a62e676581d3a1e950af">sto_ijk</a> = <a class="code" href="../../d1/d14/nifti1__io_8c.html#abf7254db0ad36f998a92ac6f42f9c5c9">nifti_mat44_inverse</a>( nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a69460d9b0b0b19fe740c9b30cfd44e10">sto_xyz</a> ) ;</div><div class="line"><a name="l06547"></a><span class="lineno"> 6547</span>&#160;</div><div class="line"><a name="l06548"></a><span class="lineno"> 6548</span>&#160;   <span class="keywordflow">return</span> nim ;</div><div class="line"><a name="l06549"></a><span class="lineno"> 6549</span>&#160;}</div><div class="ttc" id="nifti1__io_8c_html_aeeccf4be6839946794c2cc1fdef26d4f"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#aeeccf4be6839946794c2cc1fdef26d4f">nifti_datatype_sizes</a></div><div class="ttdeci">void nifti_datatype_sizes(int datatype, int *nbyper, int *swapsize)</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:1413</div></div>
<div class="ttc" id="structnifti__image_html_a122993357c6c712559c5e0244347c5f3"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a122993357c6c712559c5e0244347c5f3">nifti_image::qto_xyz</a></div><div class="ttdeci">mat44 qto_xyz</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:137</div></div>
<div class="ttc" id="structmat44_html_ad11c8da60dd84b24824f70b08948d6e3"><div class="ttname"><a href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">mat44::m</a></div><div class="ttdeci">float m[4][4]</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:60</div></div>
<div class="ttc" id="structnifti__image_html_aa99806d70cacff119b5b6089c3dfdeda"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#aa99806d70cacff119b5b6089c3dfdeda">nifti_image::iname</a></div><div class="ttdeci">char * iname</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:161</div></div>
<div class="ttc" id="nifti1__io_8c_html_a98f42fe4268d9fff8a5b8c984f8731f1"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#a98f42fe4268d9fff8a5b8c984f8731f1">nifti_strdup</a></div><div class="ttdeci">char * nifti_strdup(const char *str)</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:1157</div></div>
<div class="ttc" id="structnifti__image_html_afb6cd106a28d4599326042c43d85022b"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#afb6cd106a28d4599326042c43d85022b">nifti_image::dy</a></div><div class="ttdeci">float dy</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:105</div></div>
<div class="ttc" id="structnifti__image_html_a8d9ddfeecae70399a50dca551d69f774"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a8d9ddfeecae70399a50dca551d69f774">nifti_image::dx</a></div><div class="ttdeci">float dx</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:104</div></div>
<div class="ttc" id="structnifti__image_html_ae71e0af4ae7e67eb52a0f5e36be520a6"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#ae71e0af4ae7e67eb52a0f5e36be520a6">nifti_image::pixdim</a></div><div class="ttdeci">float pixdim[8]</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:111</div></div>
<div class="ttc" id="structnifti__image_html_ac7e2a08cb9631d0cdf6a29da77cb19ee"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#ac7e2a08cb9631d0cdf6a29da77cb19ee">nifti_image::swapsize</a></div><div class="ttdeci">int swapsize</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:163</div></div>
<div class="ttc" id="structnifti__image_html_ab4e9dd136d1de9fbe03c68f081876b9e"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#ab4e9dd136d1de9fbe03c68f081876b9e">nifti_image::dt</a></div><div class="ttdeci">float dt</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:107</div></div>
<div class="ttc" id="structnifti__image_html"><div class="ttname"><a href="../../d0/de7/structnifti__image.html">nifti_image</a></div><div class="ttdoc">High level data structure for open nifti datasets in the nifti1_io API. Note that this structure is n...</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:89</div></div>
<div class="ttc" id="structnifti__image_html_a440a3fab2a781b43ed8216e26492597d"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a440a3fab2a781b43ed8216e26492597d">nifti_image::nvox</a></div><div class="ttdeci">size_t nvox</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:100</div></div>
<div class="ttc" id="structnifti__image_html_a7e04a5e405f9b79dae5652cdcd3832ef"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a7e04a5e405f9b79dae5652cdcd3832ef">nifti_image::nv</a></div><div class="ttdeci">int nv</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:97</div></div>
<div class="ttc" id="structnifti__image_html_a51bad5202c3b9943b3c86f80ca5d1cd1"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a51bad5202c3b9943b3c86f80ca5d1cd1">nifti_image::datatype</a></div><div class="ttdeci">int datatype</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:102</div></div>
<div class="ttc" id="nifti1__io_8c_html_abf7254db0ad36f998a92ac6f42f9c5c9"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#abf7254db0ad36f998a92ac6f42f9c5c9">nifti_mat44_inverse</a></div><div class="ttdeci">mat44 nifti_mat44_inverse(mat44 R)</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:1668</div></div>
<div class="ttc" id="structnifti__image_html_ab1c6399d45bf77d6eff712d318a9d0ca"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#ab1c6399d45bf77d6eff712d318a9d0ca">nifti_image::du</a></div><div class="ttdeci">float du</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:108</div></div>
<div class="ttc" id="structnifti__image_html_ab4a9c0956e858fd877ee81796adc66bc"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#ab4a9c0956e858fd877ee81796adc66bc">nifti_image::nu</a></div><div class="ttdeci">int nu</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:96</div></div>
<div class="ttc" id="nifti1__io_8c_html_adf2a70eac549a80a246d380240a8d822"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#adf2a70eac549a80a246d380240a8d822">nifti_short_order</a></div><div class="ttdeci">int nifti_short_order(void)</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:6321</div></div>
<div class="ttc" id="structnifti__image_html_ae0bc5b6b2e350108e468124b682b715c"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#ae0bc5b6b2e350108e468124b682b715c">nifti_image::nw</a></div><div class="ttdeci">int nw</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:98</div></div>
<div class="ttc" id="structnifti__image_html_a6155d97e665d879e662bf650c09d0bc1"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a6155d97e665d879e662bf650c09d0bc1">nifti_image::dv</a></div><div class="ttdeci">float dv</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:109</div></div>
<div class="ttc" id="structnifti__image_html_ab7d8391bc07972e0b051f157dde00a04"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#ab7d8391bc07972e0b051f157dde00a04">nifti_image::dw</a></div><div class="ttdeci">float dw</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:110</div></div>
<div class="ttc" id="structnifti__image_html_ad61740a0245f2af05ded39cb0648ae07"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#ad61740a0245f2af05ded39cb0648ae07">nifti_image::ndim</a></div><div class="ttdeci">int ndim</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:91</div></div>
<div class="ttc" id="structnifti__image_html_adfcbe7e11b44d8a964d61c3e17554686"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#adfcbe7e11b44d8a964d61c3e17554686">nifti_image::qform_code</a></div><div class="ttdeci">int qform_code</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:119</div></div>
<div class="ttc" id="structnifti__image_html_a964e209d6110bd26df6935ebf4a2a620"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a964e209d6110bd26df6935ebf4a2a620">nifti_image::sform_code</a></div><div class="ttdeci">int sform_code</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:120</div></div>
<div class="ttc" id="structnifti__image_html_a69460d9b0b0b19fe740c9b30cfd44e10"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a69460d9b0b0b19fe740c9b30cfd44e10">nifti_image::sto_xyz</a></div><div class="ttdeci">mat44 sto_xyz</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:140</div></div>
<div class="ttc" id="structnifti__image_html_a054f5f2c357dd6833efd467ac202f0a5"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a054f5f2c357dd6833efd467ac202f0a5">nifti_image::dim</a></div><div class="ttdeci">int dim[8]</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:99</div></div>
<div class="ttc" id="structnifti__image_html_a5ce21d97da49b1dcf9415e83bbf07caf"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a5ce21d97da49b1dcf9415e83bbf07caf">nifti_image::byteorder</a></div><div class="ttdeci">int byteorder</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:164</div></div>
<div class="ttc" id="structnifti__image_html_a8731bb1d867cdd24335e4bc3dd131c44"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a8731bb1d867cdd24335e4bc3dd131c44">nifti_image::nz</a></div><div class="ttdeci">int nz</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:94</div></div>
<div class="ttc" id="nifti1__io_8c_html_a2fe83552d8121a492fe07b5f42397c9d"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#a2fe83552d8121a492fe07b5f42397c9d">nifti_image_free</a></div><div class="ttdeci">void nifti_image_free(nifti_image *nim)</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:5028</div></div>
<div class="ttc" id="structnifti__image_html_ac55996e58670948b220bebbf5d4bb0f4"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#ac55996e58670948b220bebbf5d4bb0f4">nifti_image::nifti_type</a></div><div class="ttdeci">int nifti_type</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:148</div></div>
<div class="ttc" id="structnifti__image_html_ab3d3fdfda87503e5e8d53f0342906aba"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#ab3d3fdfda87503e5e8d53f0342906aba">nifti_image::nt</a></div><div class="ttdeci">int nt</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:95</div></div>
<div class="ttc" id="structnifti__image_html_a5e971f24a97c592fefa28d084c02769a"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a5e971f24a97c592fefa28d084c02769a">nifti_image::ny</a></div><div class="ttdeci">int ny</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:93</div></div>
<div class="ttc" id="structnifti__image_html_a750a76b493a4f2fc04c66ce2d4407bce"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a750a76b493a4f2fc04c66ce2d4407bce">nifti_image::qto_ijk</a></div><div class="ttdeci">mat44 qto_ijk</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:138</div></div>
<div class="ttc" id="structnifti__image_html_ac462fb16a688d8dbec164456febdc9c7"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#ac462fb16a688d8dbec164456febdc9c7">nifti_image::dz</a></div><div class="ttdeci">float dz</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:106</div></div>
<div class="ttc" id="nifti1__io_8c_html_a4b183639b2e242ac32210fe3437f60d2"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#a4b183639b2e242ac32210fe3437f60d2">nifti_quatern_to_mat44</a></div><div class="ttdeci">mat44 nifti_quatern_to_mat44(float qb, float qc, float qd, float qx, float qy, float qz, float dx, float dy, float dz, float qfac)</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:1466</div></div>
<div class="ttc" id="structnifti__image_html_a1c7755060c9cca3612f1101684c9845f"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a1c7755060c9cca3612f1101684c9845f">nifti_image::fname</a></div><div class="ttdeci">char * fname</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:160</div></div>
<div class="ttc" id="structnifti__image_html_a79a4382f115cb6c7f8977c36d73e6749"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a79a4382f115cb6c7f8977c36d73e6749">nifti_image::nbyper</a></div><div class="ttdeci">int nbyper</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:101</div></div>
<div class="ttc" id="structnifti__image_html_a1cb3cbfb8172a62e676581d3a1e950af"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a1cb3cbfb8172a62e676581d3a1e950af">nifti_image::sto_ijk</a></div><div class="ttdeci">mat44 sto_ijk</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:141</div></div>
<div class="ttc" id="structnifti__image_html_a26fc9296e99700da54ca3749622f83bd"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a26fc9296e99700da54ca3749622f83bd">nifti_image::quatern_b</a></div><div class="ttdeci">float quatern_b</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:133</div></div>
<div class="ttc" id="structnifti__image_html_ab99743dd7967cff6845f1a96b2044167"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#ab99743dd7967cff6845f1a96b2044167">nifti_image::nx</a></div><div class="ttdeci">int nx</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:92</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa8098d5521db8f070543122d7ef2ee7e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa8098d5521db8f070543122d7ef2ee7e">&#9670;&nbsp;</a></span>nifti_image_infodump()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void nifti_image_infodump </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d0/de7/structnifti__image.html">nifti_image</a> *&#160;</td>
          <td class="paramname"><em>nim</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Print to stdout some info about a <a class="el" href="../../d0/de7/structnifti__image.html" title="High level data structure for open nifti datasets in the nifti1_io API. Note that this structure is n...">nifti_image</a> struct. </p>
<div class="fragment"><div class="line"><a name="l05078"></a><span class="lineno"> 5078</span>&#160;{</div><div class="line"><a name="l05079"></a><span class="lineno"> 5079</span>&#160;   <span class="keywordtype">char</span> *str = <a class="code" href="../../d1/d14/nifti1__io_8c.html#a1edffc55474a393f60573a1fc6ef5544">nifti_image_to_ascii</a>( nim ) ;</div><div class="line"><a name="l05080"></a><span class="lineno"> 5080</span>&#160;   <span class="comment">/* stdout -&gt; stderr   2 Dec 2004 [rickr] */</span></div><div class="line"><a name="l05081"></a><span class="lineno"> 5081</span>&#160;   <span class="keywordflow">if</span>( str != NULL ){ fputs(str,stderr) ; free(str) ; }</div><div class="line"><a name="l05082"></a><span class="lineno"> 5082</span>&#160;   return ;</div><div class="line"><a name="l05083"></a><span class="lineno"> 5083</span>&#160;}</div><div class="ttc" id="nifti1__io_8c_html_a1edffc55474a393f60573a1fc6ef5544"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#a1edffc55474a393f60573a1fc6ef5544">nifti_image_to_ascii</a></div><div class="ttdeci">char * nifti_image_to_ascii(const nifti_image *nim)</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:6082</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a2e75db3fcfbe1c2f7343611ab9cfcb8d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2e75db3fcfbe1c2f7343611ab9cfcb8d">&#9670;&nbsp;</a></span>nifti_image_load()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int nifti_image_load </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d0/de7/structnifti__image.html">nifti_image</a> *&#160;</td>
          <td class="paramname"><em>nim</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Load the image blob into a previously initialized <a class="el" href="../../d0/de7/structnifti__image.html" title="High level data structure for open nifti datasets in the nifti1_io API. Note that this structure is n...">nifti_image</a>. </p>
<ul>
<li>If not yet set, the data buffer is allocated with calloc().</li>
<li>The data buffer will be byteswapped if necessary.</li>
<li>The data buffer will not be scaled.</li>
</ul>
<p>This function is used to read the image from disk. It should be used after a function such as <a class="el" href="../../d1/d14/nifti1__io_8c.html#a9da495aabf70c7111f574dc3985e6467" title="Read a nifti header and optionally the data, creating a nifti_image. ">nifti_image_read()</a>, so that the <a class="el" href="../../d0/de7/structnifti__image.html" title="High level data structure for open nifti datasets in the nifti1_io API. Note that this structure is n...">nifti_image</a> structure is already initialized.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">nim</td><td>pointer to a <a class="el" href="../../d0/de7/structnifti__image.html" title="High level data structure for open nifti datasets in the nifti1_io API. Note that this structure is n...">nifti_image</a> (previously initialized) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, -1 on failure </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="../../d1/d14/nifti1__io_8c.html#a9da495aabf70c7111f574dc3985e6467" title="Read a nifti header and optionally the data, creating a nifti_image. ">nifti_image_read</a>, <a class="el" href="../../d1/d14/nifti1__io_8c.html#a2fe83552d8121a492fe07b5f42397c9d">nifti_image_free</a>, <a class="el" href="../../d1/d14/nifti1__io_8c.html#a963b6ef9c3532b8dc0e7a243c42d1436">nifti_image_unload</a> </dd></dl>
<ul>
<li>open the file and position the FILE pointer <br />
<br />
<br />
</li>
<li>if the data pointer is not yet set, get memory space for the image <br />
<br />
</li>
<li>now that everything is set up, do the reading <br />
</li>
<li>close the file </li>
</ul>
<div class="fragment"><div class="line"><a name="l04867"></a><span class="lineno"> 4867</span>&#160;{</div><div class="line"><a name="l04868"></a><span class="lineno"> 4868</span>&#160;   <span class="comment">/* set up data space, open data file and seek, then call nifti_read_buffer */</span></div><div class="line"><a name="l04869"></a><span class="lineno"> 4869</span>&#160;   <span class="keywordtype">size_t</span> ntot , ii ;</div><div class="line"><a name="l04870"></a><span class="lineno"> 4870</span>&#160;   znzFile fp ;</div><div class="line"><a name="l04871"></a><span class="lineno"> 4871</span>&#160;</div><div class="line"><a name="l04873"></a><span class="lineno"> 4873</span>&#160;   fp = <a class="code" href="../../d1/d14/nifti1__io_8c.html#aa101788c6fedf7aca40e9eed8f7f53b2">nifti_image_load_prep</a>( nim );</div><div class="line"><a name="l04874"></a><span class="lineno"> 4874</span>&#160;</div><div class="line"><a name="l04875"></a><span class="lineno"> 4875</span>&#160;   <span class="keywordflow">if</span>( fp == NULL ){</div><div class="line"><a name="l04876"></a><span class="lineno"> 4876</span>&#160;      <span class="keywordflow">if</span>( <a class="code" href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a>.debug &gt; 0 )</div><div class="line"><a name="l04877"></a><span class="lineno"> 4877</span>&#160;         fprintf(stderr,<span class="stringliteral">&quot;** nifti_image_load, failed load_prep\n&quot;</span>);</div><div class="line"><a name="l04878"></a><span class="lineno"> 4878</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l04879"></a><span class="lineno"> 4879</span>&#160;   }</div><div class="line"><a name="l04880"></a><span class="lineno"> 4880</span>&#160;</div><div class="line"><a name="l04881"></a><span class="lineno"> 4881</span>&#160;   ntot = <a class="code" href="../../d1/d14/nifti1__io_8c.html#a0816cfcf9fa0b51a66dd1fa434510e8d">nifti_get_volsize</a>(nim);</div><div class="line"><a name="l04882"></a><span class="lineno"> 4882</span>&#160;</div><div class="line"><a name="l04885"></a><span class="lineno"> 4885</span>&#160;   <span class="keywordflow">if</span>( nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a9c7db78ad411a6e2b8a8ab071bbbe0a8">data</a> == NULL )</div><div class="line"><a name="l04886"></a><span class="lineno"> 4886</span>&#160;   {</div><div class="line"><a name="l04887"></a><span class="lineno"> 4887</span>&#160;     nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a9c7db78ad411a6e2b8a8ab071bbbe0a8">data</a> = (<span class="keywordtype">void</span> *)calloc(1,ntot) ;  <span class="comment">/* create image memory */</span></div><div class="line"><a name="l04888"></a><span class="lineno"> 4888</span>&#160;     <span class="keywordflow">if</span>( nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a9c7db78ad411a6e2b8a8ab071bbbe0a8">data</a> == NULL ){</div><div class="line"><a name="l04889"></a><span class="lineno"> 4889</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a>.debug &gt; 0 )</div><div class="line"><a name="l04890"></a><span class="lineno"> 4890</span>&#160;           fprintf(stderr,<span class="stringliteral">&quot;** failed to alloc %d bytes for image data\n&quot;</span>,</div><div class="line"><a name="l04891"></a><span class="lineno"> 4891</span>&#160;                   (<span class="keywordtype">int</span>)ntot);</div><div class="line"><a name="l04892"></a><span class="lineno"> 4892</span>&#160;        znzclose(fp);</div><div class="line"><a name="l04893"></a><span class="lineno"> 4893</span>&#160;        <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l04894"></a><span class="lineno"> 4894</span>&#160;     }</div><div class="line"><a name="l04895"></a><span class="lineno"> 4895</span>&#160;   }</div><div class="line"><a name="l04896"></a><span class="lineno"> 4896</span>&#160;</div><div class="line"><a name="l04898"></a><span class="lineno"> 4898</span>&#160;   ii = <a class="code" href="../../d1/d14/nifti1__io_8c.html#afb6dff710966b4a8611726a9f846c683">nifti_read_buffer</a>(fp,nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a9c7db78ad411a6e2b8a8ab071bbbe0a8">data</a>,ntot,nim);</div><div class="line"><a name="l04899"></a><span class="lineno"> 4899</span>&#160;   <span class="keywordflow">if</span>( ii &lt; ntot ){</div><div class="line"><a name="l04900"></a><span class="lineno"> 4900</span>&#160;      znzclose(fp) ;</div><div class="line"><a name="l04901"></a><span class="lineno"> 4901</span>&#160;      free(nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a9c7db78ad411a6e2b8a8ab071bbbe0a8">data</a>) ;</div><div class="line"><a name="l04902"></a><span class="lineno"> 4902</span>&#160;      nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a9c7db78ad411a6e2b8a8ab071bbbe0a8">data</a> = NULL ;</div><div class="line"><a name="l04903"></a><span class="lineno"> 4903</span>&#160;      <span class="keywordflow">return</span> -1 ;  <span class="comment">/* errors were printed in nifti_read_buffer() */</span></div><div class="line"><a name="l04904"></a><span class="lineno"> 4904</span>&#160;   }</div><div class="line"><a name="l04905"></a><span class="lineno"> 4905</span>&#160;</div><div class="line"><a name="l04907"></a><span class="lineno"> 4907</span>&#160;   znzclose( fp ) ;</div><div class="line"><a name="l04908"></a><span class="lineno"> 4908</span>&#160;</div><div class="line"><a name="l04909"></a><span class="lineno"> 4909</span>&#160;   <span class="keywordflow">return</span> 0 ;</div><div class="line"><a name="l04910"></a><span class="lineno"> 4910</span>&#160;}</div><div class="ttc" id="nifti1__io_8c_html_aa101788c6fedf7aca40e9eed8f7f53b2"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#aa101788c6fedf7aca40e9eed8f7f53b2">nifti_image_load_prep</a></div><div class="ttdeci">static znzFile nifti_image_load_prep(nifti_image *nim)</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:4777</div></div>
<div class="ttc" id="nifti1__io_8c_html_afb6dff710966b4a8611726a9f846c683"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#afb6dff710966b4a8611726a9f846c683">nifti_read_buffer</a></div><div class="ttdeci">size_t nifti_read_buffer(znzFile fp, void *dataptr, size_t ntot, nifti_image *nim)</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:4928</div></div>
<div class="ttc" id="nifti1__io_8c_html_a0816cfcf9fa0b51a66dd1fa434510e8d"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#a0816cfcf9fa0b51a66dd1fa434510e8d">nifti_get_volsize</a></div><div class="ttdeci">size_t nifti_get_volsize(const nifti_image *nim)</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:2464</div></div>
<div class="ttc" id="structnifti__image_html_a9c7db78ad411a6e2b8a8ab071bbbe0a8"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a9c7db78ad411a6e2b8a8ab071bbbe0a8">nifti_image::data</a></div><div class="ttdeci">void * data</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:165</div></div>
<div class="ttc" id="nifti1__io_8c_html_a6e047e1dc2f826a4adff048bee8f5df7"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a></div><div class="ttdeci">static nifti_global_options g_opts</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:344</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a7634eeeda561a1a22064b20bca2e877a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7634eeeda561a1a22064b20bca2e877a">&#9670;&nbsp;</a></span>nifti_image_load_bricks()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int nifti_image_load_bricks </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d0/de7/structnifti__image.html">nifti_image</a> *&#160;</td>
          <td class="paramname"><em>nim</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>nbricks</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int *&#160;</td>
          <td class="paramname"><em>blist</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d1/dba/structnifti__brick__list.html">nifti_brick_list</a> *&#160;</td>
          <td class="paramname"><em>NBL</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Load the image data from disk into an already-prepared image struct.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">nim</td><td>- initialized <a class="el" href="../../d0/de7/structnifti__image.html" title="High level data structure for open nifti datasets in the nifti1_io API. Note that this structure is n...">nifti_image</a>, without data </td></tr>
    <tr><td class="paramname">nbricks</td><td>- the length of blist (must be 0 if blist is NULL) </td></tr>
    <tr><td class="paramname">blist</td><td>- an array of xyz volume indices to read (can be NULL) </td></tr>
    <tr><td class="paramname">NBL</td><td>- pointer to struct where resulting data will be stored</td></tr>
  </table>
  </dd>
</dl>
<p>If blist is NULL, read all sub-bricks.</p>
<dl class="section return"><dt>Returns</dt><dd>the number of loaded bricks (NBL-&gt;nbricks), 0 on failure, &lt; 0 on error</dd></dl>
<p>NOTE: it is likely that another function will copy the data pointers out of NBL, in which case the only pointer the calling function will want to free is NBL-&gt;bricks (not each NBL-&gt;bricks[i]). </p>
<div class="fragment"><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;{</div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;   <span class="keywordtype">int</span>     * slist = NULL, * sindex = NULL, rv;</div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;   znzFile   fp;</div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;</div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;   <span class="comment">/* we can have blist == NULL */</span></div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;   <span class="keywordflow">if</span>( !nim || !NBL ){</div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;      fprintf(stderr,<span class="stringliteral">&quot;** nifti_image_load_bricks, bad params (%p,%p)\n&quot;</span>,</div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;              (<span class="keywordtype">void</span> *)nim, (<span class="keywordtype">void</span> *)NBL);</div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;   }</div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;</div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;   <span class="keywordflow">if</span>( blist &amp;&amp; nbricks &lt;= 0 ){</div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;      <span class="keywordflow">if</span>( <a class="code" href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a>.debug &gt; 1 )</div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;         fprintf(stderr,<span class="stringliteral">&quot;-d load_bricks: received blist with nbricks = %d,&quot;</span></div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;                        <span class="stringliteral">&quot;ignoring blist\n&quot;</span>, nbricks);</div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;      blist = NULL; <span class="comment">/* pretend nothing was passed */</span></div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;   }</div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;</div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;   <span class="keywordflow">if</span>( blist &amp;&amp; ! <a class="code" href="../../d1/d14/nifti1__io_8c.html#a4062dff607da27712e1abbcdedd3c82e">valid_nifti_brick_list</a>(nim, nbricks, blist, <a class="code" href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a>.debug&gt;0) )</div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;</div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;   <span class="comment">/* for efficiency, let&#39;s read the file in order */</span></div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;   <span class="keywordflow">if</span>( blist &amp;&amp; nifti_copynsort( nbricks, blist, &amp;slist, &amp;sindex ) != 0 )</div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;</div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;   <span class="comment">/* open the file and position the FILE pointer */</span></div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;   fp = <a class="code" href="../../d1/d14/nifti1__io_8c.html#aa101788c6fedf7aca40e9eed8f7f53b2">nifti_image_load_prep</a>( nim );</div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;   <span class="keywordflow">if</span>( !fp ){</div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;      <span class="keywordflow">if</span>( <a class="code" href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a>.debug &gt; 0 )</div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;         fprintf(stderr,<span class="stringliteral">&quot;** nifti_image_load_bricks, failed load_prep\n&quot;</span>);</div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;      <span class="keywordflow">if</span>( blist ){ free(slist); free(sindex); }</div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;   }</div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;</div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;   <span class="comment">/* this will flag to allocate defaults */</span></div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;   <span class="keywordflow">if</span>( !blist ) nbricks = 0;</div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;   <span class="keywordflow">if</span>( nifti_alloc_NBL_mem( nim, nbricks, NBL ) != 0 ){</div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;      <span class="keywordflow">if</span>( blist ){ free(slist); free(sindex); }</div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;      znzclose(fp);</div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;   }</div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;</div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;   rv = nifti_load_NBL_bricks(nim, slist, sindex, NBL, fp);</div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;</div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;   <span class="keywordflow">if</span>( rv != 0 ){</div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;      <a class="code" href="../../d1/d14/nifti1__io_8c.html#ab1b499958b62d1c0f3bbc929ca2431f2">nifti_free_NBL</a>( NBL );  <span class="comment">/* failure! */</span></div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;      NBL-&gt;nbricks = 0; <span class="comment">/* repetative, but clear */</span></div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;   }</div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;</div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;   <span class="keywordflow">if</span>( slist ){ free(slist); free(sindex); }</div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;</div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;   znzclose(fp);</div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;</div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;   <span class="keywordflow">return</span> NBL-&gt;nbricks;</div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;}</div><div class="ttc" id="nifti1__io_8c_html_a4062dff607da27712e1abbcdedd3c82e"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#a4062dff607da27712e1abbcdedd3c82e">valid_nifti_brick_list</a></div><div class="ttdeci">int valid_nifti_brick_list(nifti_image *nim, int nbricks, const int *blist, int disp_error)</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:1025</div></div>
<div class="ttc" id="nifti1__io_8c_html_aa101788c6fedf7aca40e9eed8f7f53b2"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#aa101788c6fedf7aca40e9eed8f7f53b2">nifti_image_load_prep</a></div><div class="ttdeci">static znzFile nifti_image_load_prep(nifti_image *nim)</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:4777</div></div>
<div class="ttc" id="nifti1__io_8c_html_a6e047e1dc2f826a4adff048bee8f5df7"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a></div><div class="ttdeci">static nifti_global_options g_opts</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:344</div></div>
<div class="ttc" id="nifti1__io_8c_html_ab1b499958b62d1c0f3bbc929ca2431f2"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#ab1b499958b62d1c0f3bbc929ca2431f2">nifti_free_NBL</a></div><div class="ttdeci">void nifti_free_NBL(nifti_brick_list *NBL)</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:783</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa101788c6fedf7aca40e9eed8f7f53b2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa101788c6fedf7aca40e9eed8f7f53b2">&#9670;&nbsp;</a></span>nifti_image_load_prep()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static znzFile nifti_image_load_prep </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d0/de7/structnifti__image.html">nifti_image</a> *&#160;</td>
          <td class="paramname"><em>nim</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<ul>
<li>perform sanity checks <br />
<br />
<br />
<br />
</li>
<li>open image data file <br />
<br />
<br />
</li>
<li>get image offset: a negative offset means to figure from end of file <br />
<br />
</li>
<li>seek to the appropriate read position <br />
</li>
<li>and return the File pointer </li>
</ul>
<div class="fragment"><div class="line"><a name="l04778"></a><span class="lineno"> 4778</span>&#160;{</div><div class="line"><a name="l04779"></a><span class="lineno"> 4779</span>&#160;   <span class="comment">/* set up data space, open data file and seek, then call nifti_read_buffer */</span></div><div class="line"><a name="l04780"></a><span class="lineno"> 4780</span>&#160;   <span class="keywordtype">size_t</span>  ntot , ii , ioff;</div><div class="line"><a name="l04781"></a><span class="lineno"> 4781</span>&#160;   znzFile fp;</div><div class="line"><a name="l04782"></a><span class="lineno"> 4782</span>&#160;   <span class="keywordtype">char</span>   *tmpimgname;</div><div class="line"><a name="l04783"></a><span class="lineno"> 4783</span>&#160;   <span class="keywordtype">char</span>    fname[] = { <span class="stringliteral">&quot;nifti_image_load_prep&quot;</span> };</div><div class="line"><a name="l04784"></a><span class="lineno"> 4784</span>&#160;</div><div class="line"><a name="l04786"></a><span class="lineno"> 4786</span>&#160;   <span class="keywordflow">if</span>( nim == NULL      || nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#aa99806d70cacff119b5b6089c3dfdeda">iname</a> == NULL ||</div><div class="line"><a name="l04787"></a><span class="lineno"> 4787</span>&#160;       nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a79a4382f115cb6c7f8977c36d73e6749">nbyper</a> &lt;= 0 || nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a440a3fab2a781b43ed8216e26492597d">nvox</a> &lt;= 0       )</div><div class="line"><a name="l04788"></a><span class="lineno"> 4788</span>&#160;   {</div><div class="line"><a name="l04789"></a><span class="lineno"> 4789</span>&#160;      <span class="keywordflow">if</span> ( <a class="code" href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a>.debug &gt; 0 ){</div><div class="line"><a name="l04790"></a><span class="lineno"> 4790</span>&#160;         <span class="keywordflow">if</span>( !nim ) fprintf(stderr,<span class="stringliteral">&quot;** ERROR: N_image_load: no nifti image\n&quot;</span>);</div><div class="line"><a name="l04791"></a><span class="lineno"> 4791</span>&#160;         <span class="keywordflow">else</span> fprintf(stderr,<span class="stringliteral">&quot;** ERROR: N_image_load: bad params (%p,%d,%u)\n&quot;</span>,</div><div class="line"><a name="l04792"></a><span class="lineno"> 4792</span>&#160;                      nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#aa99806d70cacff119b5b6089c3dfdeda">iname</a>, nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a79a4382f115cb6c7f8977c36d73e6749">nbyper</a>, (<span class="keywordtype">unsigned</span>)nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a440a3fab2a781b43ed8216e26492597d">nvox</a>);</div><div class="line"><a name="l04793"></a><span class="lineno"> 4793</span>&#160;      }</div><div class="line"><a name="l04794"></a><span class="lineno"> 4794</span>&#160;      <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l04795"></a><span class="lineno"> 4795</span>&#160;   }</div><div class="line"><a name="l04796"></a><span class="lineno"> 4796</span>&#160;</div><div class="line"><a name="l04797"></a><span class="lineno"> 4797</span>&#160;   ntot = <a class="code" href="../../d1/d14/nifti1__io_8c.html#a0816cfcf9fa0b51a66dd1fa434510e8d">nifti_get_volsize</a>(nim) ; <span class="comment">/* total bytes to read */</span></div><div class="line"><a name="l04798"></a><span class="lineno"> 4798</span>&#160;</div><div class="line"><a name="l04801"></a><span class="lineno"> 4801</span>&#160;   tmpimgname = <a class="code" href="../../d1/d14/nifti1__io_8c.html#a166171eee037df0d1f28a824e35faea5">nifti_findimgname</a>(nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#aa99806d70cacff119b5b6089c3dfdeda">iname</a> , nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ac55996e58670948b220bebbf5d4bb0f4">nifti_type</a>);</div><div class="line"><a name="l04802"></a><span class="lineno"> 4802</span>&#160;   <span class="keywordflow">if</span>( tmpimgname == NULL ){</div><div class="line"><a name="l04803"></a><span class="lineno"> 4803</span>&#160;      <span class="keywordflow">if</span>( <a class="code" href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a>.debug &gt; 0 )</div><div class="line"><a name="l04804"></a><span class="lineno"> 4804</span>&#160;         fprintf(stderr,<span class="stringliteral">&quot;** no image file found for &#39;%s&#39;\n&quot;</span>,nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#aa99806d70cacff119b5b6089c3dfdeda">iname</a>);</div><div class="line"><a name="l04805"></a><span class="lineno"> 4805</span>&#160;      <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l04806"></a><span class="lineno"> 4806</span>&#160;   }</div><div class="line"><a name="l04807"></a><span class="lineno"> 4807</span>&#160;</div><div class="line"><a name="l04808"></a><span class="lineno"> 4808</span>&#160;   fp = znzopen(tmpimgname, <span class="stringliteral">&quot;rb&quot;</span>, <a class="code" href="../../d1/d14/nifti1__io_8c.html#a6c17ed984533a4dede09b3bb6fa1fa17">nifti_is_gzfile</a>(tmpimgname));</div><div class="line"><a name="l04809"></a><span class="lineno"> 4809</span>&#160;   <span class="keywordflow">if</span> (znz_isnull(fp)){</div><div class="line"><a name="l04810"></a><span class="lineno"> 4810</span>&#160;       <span class="keywordflow">if</span>(<a class="code" href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a>.debug &gt; 0) LNI_FERR(fname,<span class="stringliteral">&quot;cannot open data file&quot;</span>,tmpimgname);</div><div class="line"><a name="l04811"></a><span class="lineno"> 4811</span>&#160;       free(tmpimgname);</div><div class="line"><a name="l04812"></a><span class="lineno"> 4812</span>&#160;       <span class="keywordflow">return</span> NULL;  <span class="comment">/* bad open? */</span></div><div class="line"><a name="l04813"></a><span class="lineno"> 4813</span>&#160;   }</div><div class="line"><a name="l04814"></a><span class="lineno"> 4814</span>&#160;   free(tmpimgname);</div><div class="line"><a name="l04815"></a><span class="lineno"> 4815</span>&#160;</div><div class="line"><a name="l04817"></a><span class="lineno"> 4817</span>&#160;   <span class="keywordflow">if</span>( nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a856fc94a5daed16225264dc8daa96013">iname_offset</a> &lt; 0 ){</div><div class="line"><a name="l04818"></a><span class="lineno"> 4818</span>&#160;     <span class="keywordflow">if</span>( <a class="code" href="../../d1/d14/nifti1__io_8c.html#a6c17ed984533a4dede09b3bb6fa1fa17">nifti_is_gzfile</a>(nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#aa99806d70cacff119b5b6089c3dfdeda">iname</a>) ){</div><div class="line"><a name="l04819"></a><span class="lineno"> 4819</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a>.debug &gt; 0 )</div><div class="line"><a name="l04820"></a><span class="lineno"> 4820</span>&#160;           LNI_FERR(fname,<span class="stringliteral">&quot;negative offset for compressed file&quot;</span>,nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#aa99806d70cacff119b5b6089c3dfdeda">iname</a>);</div><div class="line"><a name="l04821"></a><span class="lineno"> 4821</span>&#160;        znzclose(fp);</div><div class="line"><a name="l04822"></a><span class="lineno"> 4822</span>&#160;        <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l04823"></a><span class="lineno"> 4823</span>&#160;     }</div><div class="line"><a name="l04824"></a><span class="lineno"> 4824</span>&#160;     ii = <a class="code" href="../../d1/d14/nifti1__io_8c.html#ad87cfcf2fe9635136a11811b6f345eab">nifti_get_filesize</a>( nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#aa99806d70cacff119b5b6089c3dfdeda">iname</a> ) ;</div><div class="line"><a name="l04825"></a><span class="lineno"> 4825</span>&#160;     <span class="keywordflow">if</span>( ii &lt;= 0 ){</div><div class="line"><a name="l04826"></a><span class="lineno"> 4826</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a>.debug &gt; 0 ) LNI_FERR(fname,<span class="stringliteral">&quot;empty data file&quot;</span>,nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#aa99806d70cacff119b5b6089c3dfdeda">iname</a>);</div><div class="line"><a name="l04827"></a><span class="lineno"> 4827</span>&#160;        znzclose(fp);</div><div class="line"><a name="l04828"></a><span class="lineno"> 4828</span>&#160;        <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l04829"></a><span class="lineno"> 4829</span>&#160;     }</div><div class="line"><a name="l04830"></a><span class="lineno"> 4830</span>&#160;     ioff = (ii &gt; ntot) ? ii-ntot : 0 ;</div><div class="line"><a name="l04831"></a><span class="lineno"> 4831</span>&#160;   } <span class="keywordflow">else</span> {                              <span class="comment">/* non-negative offset   */</span></div><div class="line"><a name="l04832"></a><span class="lineno"> 4832</span>&#160;     ioff = nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a856fc94a5daed16225264dc8daa96013">iname_offset</a> ;          <span class="comment">/* means use it directly */</span></div><div class="line"><a name="l04833"></a><span class="lineno"> 4833</span>&#160;   }</div><div class="line"><a name="l04834"></a><span class="lineno"> 4834</span>&#160;</div><div class="line"><a name="l04836"></a><span class="lineno"> 4836</span>&#160;   <span class="keywordflow">if</span>( znzseek(fp , (<span class="keywordtype">long</span>)ioff , SEEK_SET) &lt; 0 ){</div><div class="line"><a name="l04837"></a><span class="lineno"> 4837</span>&#160;      fprintf(stderr,<span class="stringliteral">&quot;** could not seek to offset %u in file &#39;%s&#39;\n&quot;</span>,</div><div class="line"><a name="l04838"></a><span class="lineno"> 4838</span>&#160;              (<span class="keywordtype">unsigned</span>)ioff, nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#aa99806d70cacff119b5b6089c3dfdeda">iname</a>);</div><div class="line"><a name="l04839"></a><span class="lineno"> 4839</span>&#160;      znzclose(fp);</div><div class="line"><a name="l04840"></a><span class="lineno"> 4840</span>&#160;      <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l04841"></a><span class="lineno"> 4841</span>&#160;   }</div><div class="line"><a name="l04842"></a><span class="lineno"> 4842</span>&#160;</div><div class="line"><a name="l04844"></a><span class="lineno"> 4844</span>&#160;   <span class="keywordflow">return</span> fp;</div><div class="line"><a name="l04845"></a><span class="lineno"> 4845</span>&#160;}</div><div class="ttc" id="structnifti__image_html_aa99806d70cacff119b5b6089c3dfdeda"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#aa99806d70cacff119b5b6089c3dfdeda">nifti_image::iname</a></div><div class="ttdeci">char * iname</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:161</div></div>
<div class="ttc" id="nifti1__io_8c_html_a166171eee037df0d1f28a824e35faea5"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#a166171eee037df0d1f28a824e35faea5">nifti_findimgname</a></div><div class="ttdeci">char * nifti_findimgname(const char *fname, int nifti_type)</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:2833</div></div>
<div class="ttc" id="structnifti__image_html_a440a3fab2a781b43ed8216e26492597d"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a440a3fab2a781b43ed8216e26492597d">nifti_image::nvox</a></div><div class="ttdeci">size_t nvox</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:100</div></div>
<div class="ttc" id="nifti1__io_8c_html_ad87cfcf2fe9635136a11811b6f345eab"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#ad87cfcf2fe9635136a11811b6f345eab">nifti_get_filesize</a></div><div class="ttdeci">int nifti_get_filesize(const char *pathname)</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:2435</div></div>
<div class="ttc" id="structnifti__image_html_a856fc94a5daed16225264dc8daa96013"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a856fc94a5daed16225264dc8daa96013">nifti_image::iname_offset</a></div><div class="ttdeci">int iname_offset</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:162</div></div>
<div class="ttc" id="nifti1__io_8c_html_a0816cfcf9fa0b51a66dd1fa434510e8d"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#a0816cfcf9fa0b51a66dd1fa434510e8d">nifti_get_volsize</a></div><div class="ttdeci">size_t nifti_get_volsize(const nifti_image *nim)</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:2464</div></div>
<div class="ttc" id="structnifti__image_html_ac55996e58670948b220bebbf5d4bb0f4"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#ac55996e58670948b220bebbf5d4bb0f4">nifti_image::nifti_type</a></div><div class="ttdeci">int nifti_type</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:148</div></div>
<div class="ttc" id="nifti1__io_8c_html_a6c17ed984533a4dede09b3bb6fa1fa17"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#a6c17ed984533a4dede09b3bb6fa1fa17">nifti_is_gzfile</a></div><div class="ttdeci">int nifti_is_gzfile(const char *fname)</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:2648</div></div>
<div class="ttc" id="structnifti__image_html_a79a4382f115cb6c7f8977c36d73e6749"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a79a4382f115cb6c7f8977c36d73e6749">nifti_image::nbyper</a></div><div class="ttdeci">int nbyper</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:101</div></div>
<div class="ttc" id="nifti1__io_8c_html_a6e047e1dc2f826a4adff048bee8f5df7"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a></div><div class="ttdeci">static nifti_global_options g_opts</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:344</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa3ba2c9ea10502fd5e619e55eb5ec662"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa3ba2c9ea10502fd5e619e55eb5ec662">&#9670;&nbsp;</a></span>nifti_image_open()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">znzFile nifti_image_open </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>hname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>opts</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d0/de7/structnifti__image.html">nifti_image</a> **&#160;</td>
          <td class="paramname"><em>nim</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read in NIFTI-1 or ANALYZE-7.5 file (pair) header information into a <a class="el" href="../../d0/de7/structnifti__image.html" title="High level data structure for open nifti datasets in the nifti1_io API. Note that this structure is n...">nifti_image</a> struct. </p>
<p>znzFile nifti_image_open( char *hname, char *opts , nifti_image **nim)</p><ul>
<li>The image data is not read from disk (it may be read later using <a class="el" href="../../d1/d14/nifti1__io_8c.html#a2e75db3fcfbe1c2f7343611ab9cfcb8d" title="Load the image blob into a previously initialized nifti_image. ">nifti_image_load()</a>, for example).</li>
<li>The image data will be stored in whatever data format the input data is; no scaling will be applied.</li>
<li>DT_BINARY data is not supported.</li>
<li><a class="el" href="../../d1/d14/nifti1__io_8c.html#a2fe83552d8121a492fe07b5f42397c9d">nifti_image_free()</a> can be used to delete the returned struct, when you are done with it.</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">hname</td><td>filename of dataset .hdr or .nii file </td></tr>
    <tr><td class="paramname">opts</td><td>options string for opening the header file </td></tr>
    <tr><td class="paramname">nim</td><td>pointer to pointer to <a class="el" href="../../d0/de7/structnifti__image.html" title="High level data structure for open nifti datasets in the nifti1_io API. Note that this structure is n...">nifti_image</a> struct (this routine allocates the <a class="el" href="../../d0/de7/structnifti__image.html" title="High level data structure for open nifti datasets in the nifti1_io API. Note that this structure is n...">nifti_image</a> struct) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>file pointer (gzippable) to the file with the image data, ready for reading. <br />
NULL if something fails badly. </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="../../d1/d14/nifti1__io_8c.html#a2e75db3fcfbe1c2f7343611ab9cfcb8d" title="Load the image blob into a previously initialized nifti_image. ">nifti_image_load</a>, <a class="el" href="../../d1/d14/nifti1__io_8c.html#a2fe83552d8121a492fe07b5f42397c9d">nifti_image_free</a> </dd></dl>
<div class="fragment"><div class="line"><a name="l03905"></a><span class="lineno"> 3905</span>&#160;{</div><div class="line"><a name="l03906"></a><span class="lineno"> 3906</span>&#160;  znzFile fptr=NULL;</div><div class="line"><a name="l03907"></a><span class="lineno"> 3907</span>&#160;  <span class="comment">/* open the hdr and reading it in, but do not load the data  */</span></div><div class="line"><a name="l03908"></a><span class="lineno"> 3908</span>&#160;  *nim = <a class="code" href="../../d1/d14/nifti1__io_8c.html#a9da495aabf70c7111f574dc3985e6467">nifti_image_read</a>(hname,0);</div><div class="line"><a name="l03909"></a><span class="lineno"> 3909</span>&#160;  <span class="comment">/* open the image file, ready for reading (compressed works for all reads) */</span></div><div class="line"><a name="l03910"></a><span class="lineno"> 3910</span>&#160;  <span class="keywordflow">if</span>( ((*nim) == NULL)      || ((*nim)-&gt;iname == NULL) ||</div><div class="line"><a name="l03911"></a><span class="lineno"> 3911</span>&#160;      ((*nim)-&gt;nbyper &lt;= 0) || ((*nim)-&gt;nvox &lt;= 0)       )</div><div class="line"><a name="l03912"></a><span class="lineno"> 3912</span>&#160;     ERREX(<span class="stringliteral">&quot;bad header info&quot;</span>) ;</div><div class="line"><a name="l03913"></a><span class="lineno"> 3913</span>&#160;                                                                                </div><div class="line"><a name="l03914"></a><span class="lineno"> 3914</span>&#160;  <span class="comment">/* open image data file */</span></div><div class="line"><a name="l03915"></a><span class="lineno"> 3915</span>&#160;  fptr = znzopen( (*nim)-&gt;iname, opts, <a class="code" href="../../d1/d14/nifti1__io_8c.html#a6c17ed984533a4dede09b3bb6fa1fa17">nifti_is_gzfile</a>((*nim)-&gt;iname) );</div><div class="line"><a name="l03916"></a><span class="lineno"> 3916</span>&#160;  <span class="keywordflow">if</span>( znz_isnull(fptr) ) ERREX(<span class="stringliteral">&quot;Can&#39;t open data file&quot;</span>) ;</div><div class="line"><a name="l03917"></a><span class="lineno"> 3917</span>&#160;                                                                                </div><div class="line"><a name="l03918"></a><span class="lineno"> 3918</span>&#160;  <span class="keywordflow">return</span> fptr;</div><div class="line"><a name="l03919"></a><span class="lineno"> 3919</span>&#160;}</div><div class="ttc" id="nifti1__io_8c_html_a9da495aabf70c7111f574dc3985e6467"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#a9da495aabf70c7111f574dc3985e6467">nifti_image_read</a></div><div class="ttdeci">nifti_image * nifti_image_read(const char *hname, int read_data)</div><div class="ttdoc">Read a nifti header and optionally the data, creating a nifti_image. </div><div class="ttdef"><b>Definition:</b> nifti1_io.c:4150</div></div>
<div class="ttc" id="nifti1__io_8c_html_a6c17ed984533a4dede09b3bb6fa1fa17"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#a6c17ed984533a4dede09b3bb6fa1fa17">nifti_is_gzfile</a></div><div class="ttdeci">int nifti_is_gzfile(const char *fname)</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:2648</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a9da495aabf70c7111f574dc3985e6467"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9da495aabf70c7111f574dc3985e6467">&#9670;&nbsp;</a></span>nifti_image_read()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d0/de7/structnifti__image.html">nifti_image</a>* nifti_image_read </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>hname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>read_data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read a nifti header and optionally the data, creating a <a class="el" href="../../d0/de7/structnifti__image.html" title="High level data structure for open nifti datasets in the nifti1_io API. Note that this structure is n...">nifti_image</a>. </p>
<ul>
<li>The data buffer will be byteswapped if necessary.</li>
<li>The data buffer will not be scaled.</li>
<li>The data buffer is allocated with calloc().</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">hname</td><td>filename of the nifti dataset </td></tr>
    <tr><td class="paramname">read_data</td><td>Flag, true=read data blob, false=don't read blob. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A pointer to the <a class="el" href="../../d0/de7/structnifti__image.html" title="High level data structure for open nifti datasets in the nifti1_io API. Note that this structure is n...">nifti_image</a> data structure.</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="../../d1/d14/nifti1__io_8c.html#a2fe83552d8121a492fe07b5f42397c9d">nifti_image_free</a>, <a class="el" href="../../d1/d14/nifti1__io_8c.html#afd96262c6dd96e05ceaa08b3fbdff2c9">nifti_free_extensions</a>, <a class="el" href="../../d1/d14/nifti1__io_8c.html#a6a60e69105dc0a2c7767beb376808143">nifti_image_read_bricks</a> </dd></dl>
<ul>
<li>determine filename to use for header <br />
<br />
<br />
<br />
</li>
<li>read binary header <br />
<br />
<br />
</li>
<li>convert all nhdr fields to <a class="el" href="../../d0/de7/structnifti__image.html" title="High level data structure for open nifti datasets in the nifti1_io API. Note that this structure is n...">nifti_image</a> fields <br />
<br />
</li>
<li>check for extensions (any errors here means no extensions) <br />
</li>
<li>read the data if desired, then bug out </li>
</ul>
<div class="fragment"><div class="line"><a name="l04151"></a><span class="lineno"> 4151</span>&#160;{</div><div class="line"><a name="l04152"></a><span class="lineno"> 4152</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d75/structnifti__1__header.html">nifti_1_header</a>  nhdr ;</div><div class="line"><a name="l04153"></a><span class="lineno"> 4153</span>&#160;   <a class="code" href="../../d0/de7/structnifti__image.html">nifti_image</a>           *nim ;</div><div class="line"><a name="l04154"></a><span class="lineno"> 4154</span>&#160;   znzFile                fp ;</div><div class="line"><a name="l04155"></a><span class="lineno"> 4155</span>&#160;   <span class="keywordtype">int</span>                    rv, ii , filesize, remaining;</div><div class="line"><a name="l04156"></a><span class="lineno"> 4156</span>&#160;   <span class="keywordtype">char</span>                   fname[] = { <span class="stringliteral">&quot;nifti_image_read&quot;</span> };</div><div class="line"><a name="l04157"></a><span class="lineno"> 4157</span>&#160;   <span class="keywordtype">char</span>                  *hfile=NULL;</div><div class="line"><a name="l04158"></a><span class="lineno"> 4158</span>&#160;</div><div class="line"><a name="l04159"></a><span class="lineno"> 4159</span>&#160;   <span class="keywordflow">if</span>( <a class="code" href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a>.debug &gt; 1 ){</div><div class="line"><a name="l04160"></a><span class="lineno"> 4160</span>&#160;      fprintf(stderr,<span class="stringliteral">&quot;-d image_read from &#39;%s&#39;, read_data = %d&quot;</span>,hname,read_data);</div><div class="line"><a name="l04161"></a><span class="lineno"> 4161</span>&#160;<span class="preprocessor">#ifdef HAVE_ZLIB</span></div><div class="line"><a name="l04162"></a><span class="lineno"> 4162</span>&#160;      fprintf(stderr,<span class="stringliteral">&quot;, HAVE_ZLIB = 1\n&quot;</span>);</div><div class="line"><a name="l04163"></a><span class="lineno"> 4163</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l04164"></a><span class="lineno"> 4164</span>&#160;      fprintf(stderr,<span class="stringliteral">&quot;, HAVE_ZLIB = 0\n&quot;</span>);</div><div class="line"><a name="l04165"></a><span class="lineno"> 4165</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l04166"></a><span class="lineno"> 4166</span>&#160;   }</div><div class="line"><a name="l04167"></a><span class="lineno"> 4167</span>&#160;</div><div class="line"><a name="l04169"></a><span class="lineno"> 4169</span>&#160;   hfile = <a class="code" href="../../d1/d14/nifti1__io_8c.html#acde0b000cd0b4c5edbe33454ebc0c86f">nifti_findhdrname</a>(hname);</div><div class="line"><a name="l04170"></a><span class="lineno"> 4170</span>&#160;   <span class="keywordflow">if</span>( hfile == NULL ){</div><div class="line"><a name="l04171"></a><span class="lineno"> 4171</span>&#160;      <span class="keywordflow">if</span>(<a class="code" href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a>.debug &gt; 0)</div><div class="line"><a name="l04172"></a><span class="lineno"> 4172</span>&#160;         LNI_FERR(fname,<span class="stringliteral">&quot;22failed to find header file for&quot;</span>, hname);</div><div class="line"><a name="l04173"></a><span class="lineno"> 4173</span>&#160;      <span class="keywordflow">return</span> NULL;  <span class="comment">/* check return */</span></div><div class="line"><a name="l04174"></a><span class="lineno"> 4174</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a>.debug &gt; 1 )</div><div class="line"><a name="l04175"></a><span class="lineno"> 4175</span>&#160;      fprintf(stderr,<span class="stringliteral">&quot;-d %s: found header filename &#39;%s&#39;\n&quot;</span>,fname,hfile);</div><div class="line"><a name="l04176"></a><span class="lineno"> 4176</span>&#160;</div><div class="line"><a name="l04177"></a><span class="lineno"> 4177</span>&#160;   <span class="keywordflow">if</span>( <a class="code" href="../../d1/d14/nifti1__io_8c.html#a6c17ed984533a4dede09b3bb6fa1fa17">nifti_is_gzfile</a>(hfile) ) filesize = -1;  <span class="comment">/* unknown */</span></div><div class="line"><a name="l04178"></a><span class="lineno"> 4178</span>&#160;   <span class="keywordflow">else</span>                         filesize = <a class="code" href="../../d1/d14/nifti1__io_8c.html#ad87cfcf2fe9635136a11811b6f345eab">nifti_get_filesize</a>(hfile);</div><div class="line"><a name="l04179"></a><span class="lineno"> 4179</span>&#160;</div><div class="line"><a name="l04180"></a><span class="lineno"> 4180</span>&#160;   fp = znzopen(hfile, <span class="stringliteral">&quot;rb&quot;</span>, <a class="code" href="../../d1/d14/nifti1__io_8c.html#a6c17ed984533a4dede09b3bb6fa1fa17">nifti_is_gzfile</a>(hfile));</div><div class="line"><a name="l04181"></a><span class="lineno"> 4181</span>&#160;   <span class="keywordflow">if</span>( znz_isnull(fp) ){</div><div class="line"><a name="l04182"></a><span class="lineno"> 4182</span>&#160;      <span class="keywordflow">if</span>( <a class="code" href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a>.debug &gt; 0 ) LNI_FERR(fname,<span class="stringliteral">&quot;failed to open header file&quot;</span>,hfile);</div><div class="line"><a name="l04183"></a><span class="lineno"> 4183</span>&#160;      free(hfile);</div><div class="line"><a name="l04184"></a><span class="lineno"> 4184</span>&#160;      <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l04185"></a><span class="lineno"> 4185</span>&#160;   }</div><div class="line"><a name="l04186"></a><span class="lineno"> 4186</span>&#160;</div><div class="line"><a name="l04187"></a><span class="lineno"> 4187</span>&#160;   rv = has_ascii_header( fp );</div><div class="line"><a name="l04188"></a><span class="lineno"> 4188</span>&#160;   <span class="keywordflow">if</span>( rv &lt; 0 ){</div><div class="line"><a name="l04189"></a><span class="lineno"> 4189</span>&#160;      <span class="keywordflow">if</span>( <a class="code" href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a>.debug &gt; 0 ) LNI_FERR(fname,<span class="stringliteral">&quot;short header read&quot;</span>,hfile);</div><div class="line"><a name="l04190"></a><span class="lineno"> 4190</span>&#160;      znzclose( fp );</div><div class="line"><a name="l04191"></a><span class="lineno"> 4191</span>&#160;      free(hfile);</div><div class="line"><a name="l04192"></a><span class="lineno"> 4192</span>&#160;      <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l04193"></a><span class="lineno"> 4193</span>&#160;   }</div><div class="line"><a name="l04194"></a><span class="lineno"> 4194</span>&#160;   <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( rv == 1 )  <span class="comment">/* process special file type */</span></div><div class="line"><a name="l04195"></a><span class="lineno"> 4195</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d1/d14/nifti1__io_8c.html#ab1e7cfdc675f67b4dca809bae81e6e15">nifti_read_ascii_image</a>( fp, hfile, filesize, read_data );</div><div class="line"><a name="l04196"></a><span class="lineno"> 4196</span>&#160;</div><div class="line"><a name="l04197"></a><span class="lineno"> 4197</span>&#160;   <span class="comment">/* else, just process normally */</span></div><div class="line"><a name="l04198"></a><span class="lineno"> 4198</span>&#160;</div><div class="line"><a name="l04201"></a><span class="lineno"> 4201</span>&#160;   ii = (int)znzread( &amp;nhdr , 1 , <span class="keyword">sizeof</span>(nhdr) , fp ) ;       <span class="comment">/* read the thing */</span></div><div class="line"><a name="l04202"></a><span class="lineno"> 4202</span>&#160;</div><div class="line"><a name="l04203"></a><span class="lineno"> 4203</span>&#160;   <span class="comment">/* keep file open so we can check for exts. after nifti_convert_nhdr2nim() */</span></div><div class="line"><a name="l04204"></a><span class="lineno"> 4204</span>&#160;</div><div class="line"><a name="l04205"></a><span class="lineno"> 4205</span>&#160;   <span class="keywordflow">if</span>( ii &lt; (<span class="keywordtype">int</span>) <span class="keyword">sizeof</span>(nhdr) ){</div><div class="line"><a name="l04206"></a><span class="lineno"> 4206</span>&#160;      <span class="keywordflow">if</span>( <a class="code" href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a>.debug &gt; 0 ){</div><div class="line"><a name="l04207"></a><span class="lineno"> 4207</span>&#160;         LNI_FERR(fname,<span class="stringliteral">&quot;bad binary header read for file&quot;</span>, hfile);</div><div class="line"><a name="l04208"></a><span class="lineno"> 4208</span>&#160;         fprintf(stderr,<span class="stringliteral">&quot;  - read %d of %d bytes\n&quot;</span>,ii, (<span class="keywordtype">int</span>)<span class="keyword">sizeof</span>(nhdr));</div><div class="line"><a name="l04209"></a><span class="lineno"> 4209</span>&#160;      }</div><div class="line"><a name="l04210"></a><span class="lineno"> 4210</span>&#160;      znzclose(fp) ;</div><div class="line"><a name="l04211"></a><span class="lineno"> 4211</span>&#160;      free(hfile);</div><div class="line"><a name="l04212"></a><span class="lineno"> 4212</span>&#160;      <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l04213"></a><span class="lineno"> 4213</span>&#160;   }</div><div class="line"><a name="l04214"></a><span class="lineno"> 4214</span>&#160;</div><div class="line"><a name="l04215"></a><span class="lineno"> 4215</span>&#160;   <span class="comment">/* create output image struct and set it up */</span></div><div class="line"><a name="l04216"></a><span class="lineno"> 4216</span>&#160;</div><div class="line"><a name="l04218"></a><span class="lineno"> 4218</span>&#160;   nim = <a class="code" href="../../d1/d14/nifti1__io_8c.html#aa7bd8fbb331c8d278506afb6f37fdbc2">nifti_convert_nhdr2nim</a>(nhdr,hfile);</div><div class="line"><a name="l04219"></a><span class="lineno"> 4219</span>&#160;</div><div class="line"><a name="l04220"></a><span class="lineno"> 4220</span>&#160;   <span class="keywordflow">if</span>( nim == NULL ){</div><div class="line"><a name="l04221"></a><span class="lineno"> 4221</span>&#160;      znzclose( fp ) ;                                   <span class="comment">/* close the file */</span></div><div class="line"><a name="l04222"></a><span class="lineno"> 4222</span>&#160;      <span class="keywordflow">if</span>( <a class="code" href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a>.debug &gt; 0 )</div><div class="line"><a name="l04223"></a><span class="lineno"> 4223</span>&#160;         LNI_FERR(fname,<span class="stringliteral">&quot;cannot create nifti image from header&quot;</span>,hfile);</div><div class="line"><a name="l04224"></a><span class="lineno"> 4224</span>&#160;      free(hfile); <span class="comment">/* had to save this for debug message */</span></div><div class="line"><a name="l04225"></a><span class="lineno"> 4225</span>&#160;      <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l04226"></a><span class="lineno"> 4226</span>&#160;   }</div><div class="line"><a name="l04227"></a><span class="lineno"> 4227</span>&#160;</div><div class="line"><a name="l04228"></a><span class="lineno"> 4228</span>&#160;   <span class="keywordflow">if</span>( <a class="code" href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a>.debug &gt; 3 ){</div><div class="line"><a name="l04229"></a><span class="lineno"> 4229</span>&#160;      fprintf(stderr,<span class="stringliteral">&quot;+d nifti_image_read(), have nifti image:\n&quot;</span>);</div><div class="line"><a name="l04230"></a><span class="lineno"> 4230</span>&#160;      <span class="keywordflow">if</span>( <a class="code" href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a>.debug &gt; 2 ) <a class="code" href="../../d1/d14/nifti1__io_8c.html#aa8098d5521db8f070543122d7ef2ee7e">nifti_image_infodump</a>(nim);</div><div class="line"><a name="l04231"></a><span class="lineno"> 4231</span>&#160;   }</div><div class="line"><a name="l04232"></a><span class="lineno"> 4232</span>&#160;</div><div class="line"><a name="l04234"></a><span class="lineno"> 4234</span>&#160;   <span class="keywordflow">if</span>( NIFTI_ONEFILE(nhdr) ) remaining = nim-&gt;iname_offset - <span class="keyword">sizeof</span>(nhdr);</div><div class="line"><a name="l04235"></a><span class="lineno"> 4235</span>&#160;   <span class="keywordflow">else</span>                      remaining = filesize - <span class="keyword">sizeof</span>(nhdr);</div><div class="line"><a name="l04236"></a><span class="lineno"> 4236</span>&#160;</div><div class="line"><a name="l04237"></a><span class="lineno"> 4237</span>&#160;   (void)nifti_read_extensions(nim, fp, remaining);</div><div class="line"><a name="l04238"></a><span class="lineno"> 4238</span>&#160;</div><div class="line"><a name="l04239"></a><span class="lineno"> 4239</span>&#160;   znzclose( fp ) ;                                      <span class="comment">/* close the file */</span></div><div class="line"><a name="l04240"></a><span class="lineno"> 4240</span>&#160;   free(hfile);</div><div class="line"><a name="l04241"></a><span class="lineno"> 4241</span>&#160;</div><div class="line"><a name="l04243"></a><span class="lineno"> 4243</span>&#160;   <span class="keywordflow">if</span>( read_data ){</div><div class="line"><a name="l04244"></a><span class="lineno"> 4244</span>&#160;      <span class="keywordflow">if</span>( <a class="code" href="../../d1/d14/nifti1__io_8c.html#a2e75db3fcfbe1c2f7343611ab9cfcb8d">nifti_image_load</a>( nim ) &lt; 0 ){</div><div class="line"><a name="l04245"></a><span class="lineno"> 4245</span>&#160;         <a class="code" href="../../d1/d14/nifti1__io_8c.html#a2fe83552d8121a492fe07b5f42397c9d">nifti_image_free</a>(nim);          <span class="comment">/* take ball, go home. */</span></div><div class="line"><a name="l04246"></a><span class="lineno"> 4246</span>&#160;         <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l04247"></a><span class="lineno"> 4247</span>&#160;      }</div><div class="line"><a name="l04248"></a><span class="lineno"> 4248</span>&#160;   }</div><div class="line"><a name="l04249"></a><span class="lineno"> 4249</span>&#160;   <span class="keywordflow">else</span> nim-&gt;data = NULL ;</div><div class="line"><a name="l04250"></a><span class="lineno"> 4250</span>&#160;</div><div class="line"><a name="l04251"></a><span class="lineno"> 4251</span>&#160;   <span class="keywordflow">return</span> nim ;</div><div class="line"><a name="l04252"></a><span class="lineno"> 4252</span>&#160;}</div><div class="ttc" id="structnifti__1__header_html"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html">nifti_1_header</a></div><div class="ttdoc">Data structure defining the fields in the nifti1 header. This binary header should be found at the be...</div><div class="ttdef"><b>Definition:</b> nifti1.h:144</div></div>
<div class="ttc" id="nifti1__io_8c_html_ab1e7cfdc675f67b4dca809bae81e6e15"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#ab1e7cfdc675f67b4dca809bae81e6e15">nifti_read_ascii_image</a></div><div class="ttdeci">nifti_image * nifti_read_ascii_image(znzFile fp, char *fname, int flen, int read_data)</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:4292</div></div>
<div class="ttc" id="nifti1__io_8c_html_a2e75db3fcfbe1c2f7343611ab9cfcb8d"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#a2e75db3fcfbe1c2f7343611ab9cfcb8d">nifti_image_load</a></div><div class="ttdeci">int nifti_image_load(nifti_image *nim)</div><div class="ttdoc">Load the image blob into a previously initialized nifti_image. </div><div class="ttdef"><b>Definition:</b> nifti1_io.c:4866</div></div>
<div class="ttc" id="nifti1__io_8c_html_aa8098d5521db8f070543122d7ef2ee7e"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#aa8098d5521db8f070543122d7ef2ee7e">nifti_image_infodump</a></div><div class="ttdeci">void nifti_image_infodump(const nifti_image *nim)</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:5077</div></div>
<div class="ttc" id="structnifti__image_html"><div class="ttname"><a href="../../d0/de7/structnifti__image.html">nifti_image</a></div><div class="ttdoc">High level data structure for open nifti datasets in the nifti1_io API. Note that this structure is n...</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:89</div></div>
<div class="ttc" id="nifti1__io_8c_html_aa7bd8fbb331c8d278506afb6f37fdbc2"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#aa7bd8fbb331c8d278506afb6f37fdbc2">nifti_convert_nhdr2nim</a></div><div class="ttdeci">nifti_image * nifti_convert_nhdr2nim(struct nifti_1_header nhdr, const char *fname)</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:3599</div></div>
<div class="ttc" id="nifti1__io_8c_html_ad87cfcf2fe9635136a11811b6f345eab"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#ad87cfcf2fe9635136a11811b6f345eab">nifti_get_filesize</a></div><div class="ttdeci">int nifti_get_filesize(const char *pathname)</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:2435</div></div>
<div class="ttc" id="nifti1__io_8c_html_acde0b000cd0b4c5edbe33454ebc0c86f"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#acde0b000cd0b4c5edbe33454ebc0c86f">nifti_findhdrname</a></div><div class="ttdeci">char * nifti_findhdrname(const char *fname)</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:2735</div></div>
<div class="ttc" id="nifti1__io_8c_html_a2fe83552d8121a492fe07b5f42397c9d"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#a2fe83552d8121a492fe07b5f42397c9d">nifti_image_free</a></div><div class="ttdeci">void nifti_image_free(nifti_image *nim)</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:5028</div></div>
<div class="ttc" id="nifti1__io_8c_html_a6c17ed984533a4dede09b3bb6fa1fa17"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#a6c17ed984533a4dede09b3bb6fa1fa17">nifti_is_gzfile</a></div><div class="ttdeci">int nifti_is_gzfile(const char *fname)</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:2648</div></div>
<div class="ttc" id="nifti1__io_8c_html_a6e047e1dc2f826a4adff048bee8f5df7"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a></div><div class="ttdeci">static nifti_global_options g_opts</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:344</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6a60e69105dc0a2c7767beb376808143"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6a60e69105dc0a2c7767beb376808143">&#9670;&nbsp;</a></span>nifti_image_read_bricks()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d0/de7/structnifti__image.html">nifti_image</a>* nifti_image_read_bricks </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>hname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>nbricks</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int *&#160;</td>
          <td class="paramname"><em>blist</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d1/dba/structnifti__brick__list.html">nifti_brick_list</a> *&#160;</td>
          <td class="paramname"><em>NBL</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>nifti_image_read_bricks - read nifti data as array of bricks </p><pre class="fragment">                             13 Dec 2004 [rickr]
</pre><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">hname</td><td>- filename of dataset to read (must be valid) </td></tr>
    <tr><td class="paramname">nbricks</td><td>- number of sub-bricks to read (if blist is valid, nbricks must be &gt; 0) </td></tr>
    <tr><td class="paramname">blist</td><td>- list of sub-bricks to read (can be NULL; if NULL, read complete dataset) </td></tr>
    <tr><td class="paramname">NBL</td><td>- pointer to empty <a class="el" href="../../d1/dba/structnifti__brick__list.html">nifti_brick_list</a> struct (must be a valid pointer)</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><br />
 nim - same as nifti_image_read, but nim-&gt;nt = NBL-&gt;nbricks (or nt*nu*nv*nw) nim-&gt;nu,nv,nw = 1 nim-&gt;data = NULL <br />
 NBL - filled with data volumes</dd></dl>
<p>By default, this function will read the nifti dataset and break the data into a list of nt*nu*nv*nw sub-bricks, each having size nx*ny*nz elements. That is to say, instead of reading the entire dataset as a single array, break it up into sub-bricks (volumes), each of size nx*ny*nz elements.</p>
<p>Note: in the returned <a class="el" href="../../d0/de7/structnifti__image.html" title="High level data structure for open nifti datasets in the nifti1_io API. Note that this structure is n...">nifti_image</a>, nu, nv and nw will always be 1. The intention of this function is to collapse the dataset into a single array of volumes (of length nbricks or nt*nu*nv*nw).</p>
<p>If 'blist' is valid, it is taken to be a list of sub-bricks, of length 'nbricks'. The data will still be separated into sub-bricks of size nx*ny*nz elements, but now 'nbricks' sub-bricks will be returned, of the caller's choosing via 'blist'.</p>
<p>E.g. consider a dataset with 12 sub-bricks (numbered 0..11), and the following code:</p>
<pre>
{ <a class="el" href="../../d1/dba/structnifti__brick__list.html">nifti_brick_list</a>   NB_orig, NB_select;
  <a class="el" href="../../d0/de7/structnifti__image.html" title="High level data structure for open nifti datasets in the nifti1_io API. Note that this structure is n...">nifti_image</a>      * nim_orig, * nim_select;
  int                blist[5] = { 7, 0, 5, 5, 9 };</pre><pre>  nim_orig   = nifti_image_read_bricks("myfile.nii", 0, NULL,  &amp;NB_orig);
  nim_select = nifti_image_read_bricks("myfile.nii", 5, blist, &amp;NB_select);
}
</pre><p>Here, nim_orig gets the entire dataset, where NB_orig.nbricks = 12. But nim_select has NB_select.nbricks = 5.</p>
<p>Note that the first case is not quite the same as just calling the nifti_image_read function, as here the data is separated into sub-bricks.</p>
<p>Note that valid blist elements are in [0..nt*nu*nv*nw-1], or written [ 0 .. (dim[4]*dim[5]*dim[6]*dim[7] - 1) ].</p>
<p>Note that, as is the case with all of the reading functions, the data will be allocated, read in, and properly byte-swapped, if necessary.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="../../d1/d14/nifti1__io_8c.html#a7634eeeda561a1a22064b20bca2e877a">nifti_image_load_bricks</a>, <a class="el" href="../../d1/d14/nifti1__io_8c.html#ab1b499958b62d1c0f3bbc929ca2431f2">nifti_free_NBL</a>, <a class="el" href="../../d1/d14/nifti1__io_8c.html#a4062dff607da27712e1abbcdedd3c82e">valid_nifti_brick_list</a>, <a class="el" href="../../d1/d14/nifti1__io_8c.html#a9da495aabf70c7111f574dc3985e6467" title="Read a nifti header and optionally the data, creating a nifti_image. ">nifti_image_read</a> </dd></dl>
<div class="fragment"><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;{</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;   <a class="code" href="../../d0/de7/structnifti__image.html">nifti_image</a> * nim;</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;   <span class="keywordflow">if</span>( !hname || !NBL ){</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;      fprintf(stderr,<span class="stringliteral">&quot;** nifti_image_read_bricks: bad params (%p,%p)\n&quot;</span>,</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;              hname, (<span class="keywordtype">void</span> *)NBL);</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;      <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;   }</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;   <span class="keywordflow">if</span>( blist &amp;&amp; nbricks &lt;= 0 ){</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;      fprintf(stderr,<span class="stringliteral">&quot;** nifti_image_read_bricks: bad nbricks, %d\n&quot;</span>, nbricks);</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;      <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;   }</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;   nim = <a class="code" href="../../d1/d14/nifti1__io_8c.html#a9da495aabf70c7111f574dc3985e6467">nifti_image_read</a>(hname, 0);  <span class="comment">/* read header, but not data */</span></div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;   <span class="keywordflow">if</span>( !nim ) <span class="keywordflow">return</span> NULL;   <span class="comment">/* errors were already printed */</span></div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;   <span class="comment">/* if we fail, free image and return */</span></div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;   <span class="keywordflow">if</span>( <a class="code" href="../../d1/d14/nifti1__io_8c.html#a7634eeeda561a1a22064b20bca2e877a">nifti_image_load_bricks</a>(nim, nbricks, blist, NBL) &lt;= 0 ){</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;      <a class="code" href="../../d1/d14/nifti1__io_8c.html#a2fe83552d8121a492fe07b5f42397c9d">nifti_image_free</a>(nim);</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;      <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;   }</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;   <span class="keywordflow">if</span>( blist ) update_nifti_image_for_brick_list(nim, nbricks);</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;   <span class="keywordflow">return</span> nim;</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;}</div><div class="ttc" id="structnifti__image_html"><div class="ttname"><a href="../../d0/de7/structnifti__image.html">nifti_image</a></div><div class="ttdoc">High level data structure for open nifti datasets in the nifti1_io API. Note that this structure is n...</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:89</div></div>
<div class="ttc" id="nifti1__io_8c_html_a9da495aabf70c7111f574dc3985e6467"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#a9da495aabf70c7111f574dc3985e6467">nifti_image_read</a></div><div class="ttdeci">nifti_image * nifti_image_read(const char *hname, int read_data)</div><div class="ttdoc">Read a nifti header and optionally the data, creating a nifti_image. </div><div class="ttdef"><b>Definition:</b> nifti1_io.c:4150</div></div>
<div class="ttc" id="nifti1__io_8c_html_a2fe83552d8121a492fe07b5f42397c9d"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#a2fe83552d8121a492fe07b5f42397c9d">nifti_image_free</a></div><div class="ttdeci">void nifti_image_free(nifti_image *nim)</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:5028</div></div>
<div class="ttc" id="nifti1__io_8c_html_a7634eeeda561a1a22064b20bca2e877a"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#a7634eeeda561a1a22064b20bca2e877a">nifti_image_load_bricks</a></div><div class="ttdeci">int nifti_image_load_bricks(nifti_image *nim, int nbricks, const int *blist, nifti_brick_list *NBL)</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:719</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a1edffc55474a393f60573a1fc6ef5544"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1edffc55474a393f60573a1fc6ef5544">&#9670;&nbsp;</a></span>nifti_image_to_ascii()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* nifti_image_to_ascii </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d0/de7/structnifti__image.html">nifti_image</a> *&#160;</td>
          <td class="paramname"><em>nim</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Dump the information in a NIFTI image header to an XML-ish ASCII string that can later be converted back into a NIFTI header in <a class="el" href="../../d1/d14/nifti1__io_8c.html#a645c453f65af3a1ff1be3081ed34b49e">nifti_image_from_ascii()</a>.</p>
<p>The resulting string can be free()-ed when you are done with it. </p>
<p>Strings that we don't control (filenames, etc.) that might contain "weird" characters (like quotes) are "escaped":</p><ul>
<li>A few special characters are replaced by XML-style escapes, using the function escapize_string().</li>
<li>On input, function unescape_string() reverses this process.</li>
<li>The result is that the NIFTI ASCII-format header is XML-compliant. </li>
</ul>
<div class="fragment"><div class="line"><a name="l06083"></a><span class="lineno"> 6083</span>&#160;{</div><div class="line"><a name="l06084"></a><span class="lineno"> 6084</span>&#160;   <span class="keywordtype">char</span> *buf , *ebuf ; <span class="keywordtype">int</span> nbuf ;</div><div class="line"><a name="l06085"></a><span class="lineno"> 6085</span>&#160;</div><div class="line"><a name="l06086"></a><span class="lineno"> 6086</span>&#160;   <span class="keywordflow">if</span>( nim == NULL ) <span class="keywordflow">return</span> NULL ;   <span class="comment">/* stupid caller */</span></div><div class="line"><a name="l06087"></a><span class="lineno"> 6087</span>&#160;</div><div class="line"><a name="l06088"></a><span class="lineno"> 6088</span>&#160;   buf = (<span class="keywordtype">char</span> *)calloc(1,65534); nbuf = 0; <span class="comment">/* longer than needed, to be safe */</span></div><div class="line"><a name="l06089"></a><span class="lineno"> 6089</span>&#160;   <span class="keywordflow">if</span>( !buf ){</div><div class="line"><a name="l06090"></a><span class="lineno"> 6090</span>&#160;      fprintf(stderr,<span class="stringliteral">&quot;** NITA: failed to alloc %d bytes\n&quot;</span>,65534);</div><div class="line"><a name="l06091"></a><span class="lineno"> 6091</span>&#160;      <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l06092"></a><span class="lineno"> 6092</span>&#160;   }</div><div class="line"><a name="l06093"></a><span class="lineno"> 6093</span>&#160;</div><div class="line"><a name="l06094"></a><span class="lineno"> 6094</span>&#160;   sprintf( buf , <span class="stringliteral">&quot;&lt;nifti_image\n&quot;</span> ) ;   <span class="comment">/* XML-ish opener */</span></div><div class="line"><a name="l06095"></a><span class="lineno"> 6095</span>&#160;</div><div class="line"><a name="l06096"></a><span class="lineno"> 6096</span>&#160;   sprintf( buf+strlen(buf) , <span class="stringliteral">&quot;  nifti_type = &#39;%s&#39;\n&quot;</span> ,</div><div class="line"><a name="l06097"></a><span class="lineno"> 6097</span>&#160;              (nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ac55996e58670948b220bebbf5d4bb0f4">nifti_type</a> == NIFTI_FTYPE_NIFTI1_1) ? <span class="stringliteral">&quot;NIFTI-1+&quot;</span></div><div class="line"><a name="l06098"></a><span class="lineno"> 6098</span>&#160;             :(nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ac55996e58670948b220bebbf5d4bb0f4">nifti_type</a> == NIFTI_FTYPE_NIFTI1_2) ? <span class="stringliteral">&quot;NIFTI-1&quot;</span></div><div class="line"><a name="l06099"></a><span class="lineno"> 6099</span>&#160;             :(nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ac55996e58670948b220bebbf5d4bb0f4">nifti_type</a> == NIFTI_FTYPE_ASCII   ) ? <span class="stringliteral">&quot;NIFTI-1A&quot;</span></div><div class="line"><a name="l06100"></a><span class="lineno"> 6100</span>&#160;             :                         <span class="stringliteral">&quot;ANALYZE-7.5&quot;</span> ) ;</div><div class="line"><a name="l06101"></a><span class="lineno"> 6101</span>&#160;</div><div class="line"><a name="l06109"></a><span class="lineno"> 6109</span>&#160;   ebuf = escapize_string(nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a1c7755060c9cca3612f1101684c9845f">fname</a>) ;</div><div class="line"><a name="l06110"></a><span class="lineno"> 6110</span>&#160;   sprintf( buf+strlen(buf) , <span class="stringliteral">&quot;  header_filename = %s\n&quot;</span>,ebuf); free(ebuf);</div><div class="line"><a name="l06111"></a><span class="lineno"> 6111</span>&#160;</div><div class="line"><a name="l06112"></a><span class="lineno"> 6112</span>&#160;   ebuf = escapize_string(nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#aa99806d70cacff119b5b6089c3dfdeda">iname</a>) ;</div><div class="line"><a name="l06113"></a><span class="lineno"> 6113</span>&#160;   sprintf( buf+strlen(buf) , <span class="stringliteral">&quot;  image_filename = %s\n&quot;</span>, ebuf); free(ebuf);</div><div class="line"><a name="l06114"></a><span class="lineno"> 6114</span>&#160;</div><div class="line"><a name="l06115"></a><span class="lineno"> 6115</span>&#160;   sprintf( buf+strlen(buf) , <span class="stringliteral">&quot;  image_offset = &#39;%d&#39;\n&quot;</span> , nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a856fc94a5daed16225264dc8daa96013">iname_offset</a> );</div><div class="line"><a name="l06116"></a><span class="lineno"> 6116</span>&#160;</div><div class="line"><a name="l06117"></a><span class="lineno"> 6117</span>&#160;                       sprintf( buf+strlen(buf), <span class="stringliteral">&quot;  ndim = &#39;%d&#39;\n&quot;</span>, nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ad61740a0245f2af05ded39cb0648ae07">ndim</a>);</div><div class="line"><a name="l06118"></a><span class="lineno"> 6118</span>&#160;                       sprintf( buf+strlen(buf), <span class="stringliteral">&quot;  nx = &#39;%d&#39;\n&quot;</span>,   nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ab99743dd7967cff6845f1a96b2044167">nx</a>  );</div><div class="line"><a name="l06119"></a><span class="lineno"> 6119</span>&#160;   <span class="keywordflow">if</span>( nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ad61740a0245f2af05ded39cb0648ae07">ndim</a> &gt; 1 ) sprintf( buf+strlen(buf), <span class="stringliteral">&quot;  ny = &#39;%d&#39;\n&quot;</span>,   nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a5e971f24a97c592fefa28d084c02769a">ny</a>  );</div><div class="line"><a name="l06120"></a><span class="lineno"> 6120</span>&#160;   <span class="keywordflow">if</span>( nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ad61740a0245f2af05ded39cb0648ae07">ndim</a> &gt; 2 ) sprintf( buf+strlen(buf), <span class="stringliteral">&quot;  nz = &#39;%d&#39;\n&quot;</span>,   nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a8731bb1d867cdd24335e4bc3dd131c44">nz</a>  );</div><div class="line"><a name="l06121"></a><span class="lineno"> 6121</span>&#160;   <span class="keywordflow">if</span>( nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ad61740a0245f2af05ded39cb0648ae07">ndim</a> &gt; 3 ) sprintf( buf+strlen(buf), <span class="stringliteral">&quot;  nt = &#39;%d&#39;\n&quot;</span>,   nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ab3d3fdfda87503e5e8d53f0342906aba">nt</a>  );</div><div class="line"><a name="l06122"></a><span class="lineno"> 6122</span>&#160;   <span class="keywordflow">if</span>( nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ad61740a0245f2af05ded39cb0648ae07">ndim</a> &gt; 4 ) sprintf( buf+strlen(buf), <span class="stringliteral">&quot;  nu = &#39;%d&#39;\n&quot;</span>,   nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ab4a9c0956e858fd877ee81796adc66bc">nu</a>  );</div><div class="line"><a name="l06123"></a><span class="lineno"> 6123</span>&#160;   <span class="keywordflow">if</span>( nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ad61740a0245f2af05ded39cb0648ae07">ndim</a> &gt; 5 ) sprintf( buf+strlen(buf), <span class="stringliteral">&quot;  nv = &#39;%d&#39;\n&quot;</span>,   nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a7e04a5e405f9b79dae5652cdcd3832ef">nv</a>  );</div><div class="line"><a name="l06124"></a><span class="lineno"> 6124</span>&#160;   <span class="keywordflow">if</span>( nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ad61740a0245f2af05ded39cb0648ae07">ndim</a> &gt; 6 ) sprintf( buf+strlen(buf), <span class="stringliteral">&quot;  nw = &#39;%d&#39;\n&quot;</span>,   nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ae0bc5b6b2e350108e468124b682b715c">nw</a>  );</div><div class="line"><a name="l06125"></a><span class="lineno"> 6125</span>&#160;                       sprintf( buf+strlen(buf), <span class="stringliteral">&quot;  dx = &#39;%g&#39;\n&quot;</span>,   nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a8d9ddfeecae70399a50dca551d69f774">dx</a>  );</div><div class="line"><a name="l06126"></a><span class="lineno"> 6126</span>&#160;   <span class="keywordflow">if</span>( nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ad61740a0245f2af05ded39cb0648ae07">ndim</a> &gt; 1 ) sprintf( buf+strlen(buf), <span class="stringliteral">&quot;  dy = &#39;%g&#39;\n&quot;</span>,   nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#afb6cd106a28d4599326042c43d85022b">dy</a>  );</div><div class="line"><a name="l06127"></a><span class="lineno"> 6127</span>&#160;   <span class="keywordflow">if</span>( nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ad61740a0245f2af05ded39cb0648ae07">ndim</a> &gt; 2 ) sprintf( buf+strlen(buf), <span class="stringliteral">&quot;  dz = &#39;%g&#39;\n&quot;</span>,   nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ac462fb16a688d8dbec164456febdc9c7">dz</a>  );</div><div class="line"><a name="l06128"></a><span class="lineno"> 6128</span>&#160;   <span class="keywordflow">if</span>( nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ad61740a0245f2af05ded39cb0648ae07">ndim</a> &gt; 3 ) sprintf( buf+strlen(buf), <span class="stringliteral">&quot;  dt = &#39;%g&#39;\n&quot;</span>,   nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ab4e9dd136d1de9fbe03c68f081876b9e">dt</a>  );</div><div class="line"><a name="l06129"></a><span class="lineno"> 6129</span>&#160;   <span class="keywordflow">if</span>( nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ad61740a0245f2af05ded39cb0648ae07">ndim</a> &gt; 4 ) sprintf( buf+strlen(buf), <span class="stringliteral">&quot;  du = &#39;%g&#39;\n&quot;</span>,   nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ab1c6399d45bf77d6eff712d318a9d0ca">du</a>  );</div><div class="line"><a name="l06130"></a><span class="lineno"> 6130</span>&#160;   <span class="keywordflow">if</span>( nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ad61740a0245f2af05ded39cb0648ae07">ndim</a> &gt; 5 ) sprintf( buf+strlen(buf), <span class="stringliteral">&quot;  dv = &#39;%g&#39;\n&quot;</span>,   nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a6155d97e665d879e662bf650c09d0bc1">dv</a>  );</div><div class="line"><a name="l06131"></a><span class="lineno"> 6131</span>&#160;   <span class="keywordflow">if</span>( nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ad61740a0245f2af05ded39cb0648ae07">ndim</a> &gt; 6 ) sprintf( buf+strlen(buf), <span class="stringliteral">&quot;  dw = &#39;%g&#39;\n&quot;</span>,   nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ab7d8391bc07972e0b051f157dde00a04">dw</a>  );</div><div class="line"><a name="l06132"></a><span class="lineno"> 6132</span>&#160;</div><div class="line"><a name="l06133"></a><span class="lineno"> 6133</span>&#160;   sprintf( buf+strlen(buf) , <span class="stringliteral">&quot;  datatype = &#39;%d&#39;\n&quot;</span> , nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a51bad5202c3b9943b3c86f80ca5d1cd1">datatype</a> ) ;</div><div class="line"><a name="l06134"></a><span class="lineno"> 6134</span>&#160;   sprintf( buf+strlen(buf) , <span class="stringliteral">&quot;  datatype_name = &#39;%s&#39;\n&quot;</span> ,</div><div class="line"><a name="l06135"></a><span class="lineno"> 6135</span>&#160;                              <a class="code" href="../../d1/d14/nifti1__io_8c.html#adfa192edb2b6c605c831a781b6d0dd1b">nifti_datatype_string</a>(nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a51bad5202c3b9943b3c86f80ca5d1cd1">datatype</a>) ) ;</div><div class="line"><a name="l06136"></a><span class="lineno"> 6136</span>&#160;</div><div class="line"><a name="l06137"></a><span class="lineno"> 6137</span>&#160;   sprintf( buf+strlen(buf) , <span class="stringliteral">&quot;  nvox = &#39;%u&#39;\n&quot;</span> , (<span class="keywordtype">unsigned</span>)nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a440a3fab2a781b43ed8216e26492597d">nvox</a> ) ;</div><div class="line"><a name="l06138"></a><span class="lineno"> 6138</span>&#160;   sprintf( buf+strlen(buf) , <span class="stringliteral">&quot;  nbyper = &#39;%d&#39;\n&quot;</span> , nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a79a4382f115cb6c7f8977c36d73e6749">nbyper</a> ) ;</div><div class="line"><a name="l06139"></a><span class="lineno"> 6139</span>&#160;</div><div class="line"><a name="l06140"></a><span class="lineno"> 6140</span>&#160;   sprintf( buf+strlen(buf) , <span class="stringliteral">&quot;  byteorder = &#39;%s&#39;\n&quot;</span> ,</div><div class="line"><a name="l06141"></a><span class="lineno"> 6141</span>&#160;            (nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a5ce21d97da49b1dcf9415e83bbf07caf">byteorder</a>==MSB_FIRST) ? <span class="stringliteral">&quot;MSB_FIRST&quot;</span> : <span class="stringliteral">&quot;LSB_FIRST&quot;</span> ) ;</div><div class="line"><a name="l06142"></a><span class="lineno"> 6142</span>&#160;</div><div class="line"><a name="l06143"></a><span class="lineno"> 6143</span>&#160;   <span class="keywordflow">if</span>( nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a7d7c74c824d3c8b50a27322366d243f9">cal_min</a> &lt; nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a7422e0ecfa446e37bd83fc4fe082135d">cal_max</a> ){</div><div class="line"><a name="l06144"></a><span class="lineno"> 6144</span>&#160;     sprintf( buf+strlen(buf) , <span class="stringliteral">&quot;  cal_min = &#39;%g&#39;\n&quot;</span>, nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a7d7c74c824d3c8b50a27322366d243f9">cal_min</a> ) ;</div><div class="line"><a name="l06145"></a><span class="lineno"> 6145</span>&#160;     sprintf( buf+strlen(buf) , <span class="stringliteral">&quot;  cal_max = &#39;%g&#39;\n&quot;</span>, nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a7422e0ecfa446e37bd83fc4fe082135d">cal_max</a> ) ;</div><div class="line"><a name="l06146"></a><span class="lineno"> 6146</span>&#160;   }</div><div class="line"><a name="l06147"></a><span class="lineno"> 6147</span>&#160;</div><div class="line"><a name="l06148"></a><span class="lineno"> 6148</span>&#160;   <span class="keywordflow">if</span>( nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#af4d04ce1f0102c2692d89bbd5476a931">scl_slope</a> != 0.0 ){</div><div class="line"><a name="l06149"></a><span class="lineno"> 6149</span>&#160;     sprintf( buf+strlen(buf) , <span class="stringliteral">&quot;  scl_slope = &#39;%g&#39;\n&quot;</span> , nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#af4d04ce1f0102c2692d89bbd5476a931">scl_slope</a> ) ;</div><div class="line"><a name="l06150"></a><span class="lineno"> 6150</span>&#160;     sprintf( buf+strlen(buf) , <span class="stringliteral">&quot;  scl_inter = &#39;%g&#39;\n&quot;</span> , nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a7a760c43613a8ba94aaf73e571ba195d">scl_inter</a> ) ;</div><div class="line"><a name="l06151"></a><span class="lineno"> 6151</span>&#160;   }</div><div class="line"><a name="l06152"></a><span class="lineno"> 6152</span>&#160;</div><div class="line"><a name="l06153"></a><span class="lineno"> 6153</span>&#160;   <span class="keywordflow">if</span>( nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a56a5855aaf5323044ffdfde0a23214bc">intent_code</a> &gt; 0 ){</div><div class="line"><a name="l06154"></a><span class="lineno"> 6154</span>&#160;     sprintf( buf+strlen(buf) , <span class="stringliteral">&quot;  intent_code = &#39;%d&#39;\n&quot;</span>, nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a56a5855aaf5323044ffdfde0a23214bc">intent_code</a> ) ;</div><div class="line"><a name="l06155"></a><span class="lineno"> 6155</span>&#160;     sprintf( buf+strlen(buf) , <span class="stringliteral">&quot;  intent_code_name = &#39;%s&#39;\n&quot;</span> ,</div><div class="line"><a name="l06156"></a><span class="lineno"> 6156</span>&#160;                                <a class="code" href="../../d1/d14/nifti1__io_8c.html#a3354f25465b96de45211544ff6570e74">nifti_intent_string</a>(nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a56a5855aaf5323044ffdfde0a23214bc">intent_code</a>) ) ;</div><div class="line"><a name="l06157"></a><span class="lineno"> 6157</span>&#160;     sprintf( buf+strlen(buf) , <span class="stringliteral">&quot;  intent_p1 = &#39;%g&#39;\n&quot;</span> , nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a1c3ebd9911ac46b659c268a95014b5e8">intent_p1</a> ) ;</div><div class="line"><a name="l06158"></a><span class="lineno"> 6158</span>&#160;     sprintf( buf+strlen(buf) , <span class="stringliteral">&quot;  intent_p2 = &#39;%g&#39;\n&quot;</span> , nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#aacd903b0043fd9378de6927a64bafa85">intent_p2</a> ) ;</div><div class="line"><a name="l06159"></a><span class="lineno"> 6159</span>&#160;     sprintf( buf+strlen(buf) , <span class="stringliteral">&quot;  intent_p3 = &#39;%g&#39;\n&quot;</span> , nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a45dd58da99fbf651a96f68dc83e504c5">intent_p3</a> ) ;</div><div class="line"><a name="l06160"></a><span class="lineno"> 6160</span>&#160;</div><div class="line"><a name="l06161"></a><span class="lineno"> 6161</span>&#160;     <span class="keywordflow">if</span>( nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a0764cacf8341e21232d9423410c2b4c3">intent_name</a>[0] != <span class="charliteral">&#39;\0&#39;</span> ){</div><div class="line"><a name="l06162"></a><span class="lineno"> 6162</span>&#160;       ebuf = escapize_string(nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a0764cacf8341e21232d9423410c2b4c3">intent_name</a>) ;</div><div class="line"><a name="l06163"></a><span class="lineno"> 6163</span>&#160;       sprintf( buf+strlen(buf) , <span class="stringliteral">&quot;  intent_name = %s\n&quot;</span>,ebuf) ;</div><div class="line"><a name="l06164"></a><span class="lineno"> 6164</span>&#160;       free(ebuf) ;</div><div class="line"><a name="l06165"></a><span class="lineno"> 6165</span>&#160;     }</div><div class="line"><a name="l06166"></a><span class="lineno"> 6166</span>&#160;   }</div><div class="line"><a name="l06167"></a><span class="lineno"> 6167</span>&#160;</div><div class="line"><a name="l06168"></a><span class="lineno"> 6168</span>&#160;   <span class="keywordflow">if</span>( nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ae17bdf0913f6672abdac81c453ecb598">toffset</a> != 0.0 )</div><div class="line"><a name="l06169"></a><span class="lineno"> 6169</span>&#160;     sprintf( buf+strlen(buf) , <span class="stringliteral">&quot;  toffset = &#39;%g&#39;\n&quot;</span>,nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ae17bdf0913f6672abdac81c453ecb598">toffset</a> ) ;</div><div class="line"><a name="l06170"></a><span class="lineno"> 6170</span>&#160;</div><div class="line"><a name="l06171"></a><span class="lineno"> 6171</span>&#160;   <span class="keywordflow">if</span>( nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a5fa377516ee62469a9051a5834f080af">xyz_units</a> &gt; 0 )</div><div class="line"><a name="l06172"></a><span class="lineno"> 6172</span>&#160;     sprintf( buf+strlen(buf) ,</div><div class="line"><a name="l06173"></a><span class="lineno"> 6173</span>&#160;              <span class="stringliteral">&quot;  xyz_units = &#39;%d&#39;\n&quot;</span></div><div class="line"><a name="l06174"></a><span class="lineno"> 6174</span>&#160;              <span class="stringliteral">&quot;  xyz_units_name = &#39;%s&#39;\n&quot;</span> ,</div><div class="line"><a name="l06175"></a><span class="lineno"> 6175</span>&#160;              nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a5fa377516ee62469a9051a5834f080af">xyz_units</a> , <a class="code" href="../../d1/d14/nifti1__io_8c.html#a90a17b3e9891b6f16d7b454b5442646d">nifti_units_string</a>(nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a5fa377516ee62469a9051a5834f080af">xyz_units</a>) ) ;</div><div class="line"><a name="l06176"></a><span class="lineno"> 6176</span>&#160;</div><div class="line"><a name="l06177"></a><span class="lineno"> 6177</span>&#160;   <span class="keywordflow">if</span>( nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a43e8d714fac078daffbe590253776d4c">time_units</a> &gt; 0 )</div><div class="line"><a name="l06178"></a><span class="lineno"> 6178</span>&#160;     sprintf( buf+strlen(buf) ,</div><div class="line"><a name="l06179"></a><span class="lineno"> 6179</span>&#160;              <span class="stringliteral">&quot;  time_units = &#39;%d&#39;\n&quot;</span></div><div class="line"><a name="l06180"></a><span class="lineno"> 6180</span>&#160;              <span class="stringliteral">&quot;  time_units_name = &#39;%s&#39;\n&quot;</span> ,</div><div class="line"><a name="l06181"></a><span class="lineno"> 6181</span>&#160;              nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a43e8d714fac078daffbe590253776d4c">time_units</a> , <a class="code" href="../../d1/d14/nifti1__io_8c.html#a90a17b3e9891b6f16d7b454b5442646d">nifti_units_string</a>(nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a43e8d714fac078daffbe590253776d4c">time_units</a>) ) ;</div><div class="line"><a name="l06182"></a><span class="lineno"> 6182</span>&#160;</div><div class="line"><a name="l06183"></a><span class="lineno"> 6183</span>&#160;   <span class="keywordflow">if</span>( nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a50953906569b58e6b1aaeb7759767b34">freq_dim</a> &gt; 0 )</div><div class="line"><a name="l06184"></a><span class="lineno"> 6184</span>&#160;     sprintf( buf+strlen(buf) , <span class="stringliteral">&quot;  freq_dim = &#39;%d&#39;\n&quot;</span>,nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a50953906569b58e6b1aaeb7759767b34">freq_dim</a> ) ;</div><div class="line"><a name="l06185"></a><span class="lineno"> 6185</span>&#160;   <span class="keywordflow">if</span>( nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a731f0b9d7b95bc17f9f1a0a568d8ca71">phase_dim</a> &gt; 0 )</div><div class="line"><a name="l06186"></a><span class="lineno"> 6186</span>&#160;     sprintf( buf+strlen(buf) , <span class="stringliteral">&quot;  phase_dim = &#39;%d&#39;\n&quot;</span>,nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a731f0b9d7b95bc17f9f1a0a568d8ca71">phase_dim</a> ) ;</div><div class="line"><a name="l06187"></a><span class="lineno"> 6187</span>&#160;   <span class="keywordflow">if</span>( nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ae37a59a187aa187528020cc3abeba5e3">slice_dim</a> &gt; 0 )</div><div class="line"><a name="l06188"></a><span class="lineno"> 6188</span>&#160;     sprintf( buf+strlen(buf) , <span class="stringliteral">&quot;  slice_dim = &#39;%d&#39;\n&quot;</span>,nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ae37a59a187aa187528020cc3abeba5e3">slice_dim</a> ) ;</div><div class="line"><a name="l06189"></a><span class="lineno"> 6189</span>&#160;   <span class="keywordflow">if</span>( nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a0188187b073521e823b51cb5250d3fd4">slice_code</a> &gt; 0 )</div><div class="line"><a name="l06190"></a><span class="lineno"> 6190</span>&#160;     sprintf( buf+strlen(buf) ,</div><div class="line"><a name="l06191"></a><span class="lineno"> 6191</span>&#160;              <span class="stringliteral">&quot;  slice_code = &#39;%d&#39;\n&quot;</span></div><div class="line"><a name="l06192"></a><span class="lineno"> 6192</span>&#160;              <span class="stringliteral">&quot;  slice_code_name = &#39;%s&#39;\n&quot;</span> ,</div><div class="line"><a name="l06193"></a><span class="lineno"> 6193</span>&#160;              nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a0188187b073521e823b51cb5250d3fd4">slice_code</a> , <a class="code" href="../../d1/d14/nifti1__io_8c.html#a2e4ce3c3c610064c01eeeac244101159">nifti_slice_string</a>(nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a0188187b073521e823b51cb5250d3fd4">slice_code</a>) ) ;</div><div class="line"><a name="l06194"></a><span class="lineno"> 6194</span>&#160;   <span class="keywordflow">if</span>( nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ade42791ee9c492d506e6c353a61a8c41">slice_start</a> &gt;= 0 &amp;&amp; nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ac67dffa9ebbf79fe08b511cdb9e2476f">slice_end</a> &gt; nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ade42791ee9c492d506e6c353a61a8c41">slice_start</a> )</div><div class="line"><a name="l06195"></a><span class="lineno"> 6195</span>&#160;     sprintf( buf+strlen(buf) ,</div><div class="line"><a name="l06196"></a><span class="lineno"> 6196</span>&#160;              <span class="stringliteral">&quot;  slice_start = &#39;%d&#39;\n&quot;</span></div><div class="line"><a name="l06197"></a><span class="lineno"> 6197</span>&#160;              <span class="stringliteral">&quot;  slice_end = &#39;%d&#39;\n&quot;</span>  , nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ade42791ee9c492d506e6c353a61a8c41">slice_start</a> , nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ac67dffa9ebbf79fe08b511cdb9e2476f">slice_end</a> ) ;</div><div class="line"><a name="l06198"></a><span class="lineno"> 6198</span>&#160;   <span class="keywordflow">if</span>( nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a0f2e675a17830fb17c58602e0d6ebd3b">slice_duration</a> != 0.0 )</div><div class="line"><a name="l06199"></a><span class="lineno"> 6199</span>&#160;     sprintf( buf+strlen(buf) , <span class="stringliteral">&quot;  slice_duration = &#39;%g&#39;\n&quot;</span>,</div><div class="line"><a name="l06200"></a><span class="lineno"> 6200</span>&#160;              nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a0f2e675a17830fb17c58602e0d6ebd3b">slice_duration</a> ) ;</div><div class="line"><a name="l06201"></a><span class="lineno"> 6201</span>&#160;</div><div class="line"><a name="l06202"></a><span class="lineno"> 6202</span>&#160;   <span class="keywordflow">if</span>( nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a3c79d06a583b3e3a902c5ec33eaab687">descrip</a>[0] != <span class="charliteral">&#39;\0&#39;</span> ){</div><div class="line"><a name="l06203"></a><span class="lineno"> 6203</span>&#160;     ebuf = escapize_string(nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a3c79d06a583b3e3a902c5ec33eaab687">descrip</a>) ;</div><div class="line"><a name="l06204"></a><span class="lineno"> 6204</span>&#160;     sprintf( buf+strlen(buf) , <span class="stringliteral">&quot;  descrip = %s\n&quot;</span>,ebuf) ;</div><div class="line"><a name="l06205"></a><span class="lineno"> 6205</span>&#160;     free(ebuf) ;</div><div class="line"><a name="l06206"></a><span class="lineno"> 6206</span>&#160;   }</div><div class="line"><a name="l06207"></a><span class="lineno"> 6207</span>&#160;</div><div class="line"><a name="l06208"></a><span class="lineno"> 6208</span>&#160;   <span class="keywordflow">if</span>( nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ada65c236666fdfa352b2bff24557f704">aux_file</a>[0] != <span class="charliteral">&#39;\0&#39;</span> ){</div><div class="line"><a name="l06209"></a><span class="lineno"> 6209</span>&#160;     ebuf = escapize_string(nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ada65c236666fdfa352b2bff24557f704">aux_file</a>) ;</div><div class="line"><a name="l06210"></a><span class="lineno"> 6210</span>&#160;     sprintf( buf+strlen(buf) , <span class="stringliteral">&quot;  aux_file = %s\n&quot;</span>,ebuf) ;</div><div class="line"><a name="l06211"></a><span class="lineno"> 6211</span>&#160;     free(ebuf) ;</div><div class="line"><a name="l06212"></a><span class="lineno"> 6212</span>&#160;   }</div><div class="line"><a name="l06213"></a><span class="lineno"> 6213</span>&#160;</div><div class="line"><a name="l06214"></a><span class="lineno"> 6214</span>&#160;   <span class="keywordflow">if</span>( nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#adfcbe7e11b44d8a964d61c3e17554686">qform_code</a> &gt; 0 ){</div><div class="line"><a name="l06215"></a><span class="lineno"> 6215</span>&#160;     <span class="keywordtype">int</span> i,j,k ;</div><div class="line"><a name="l06216"></a><span class="lineno"> 6216</span>&#160;</div><div class="line"><a name="l06217"></a><span class="lineno"> 6217</span>&#160;     sprintf( buf+strlen(buf) ,</div><div class="line"><a name="l06218"></a><span class="lineno"> 6218</span>&#160;              <span class="stringliteral">&quot;  qform_code = &#39;%d&#39;\n&quot;</span></div><div class="line"><a name="l06219"></a><span class="lineno"> 6219</span>&#160;              <span class="stringliteral">&quot;  qform_code_name = &#39;%s&#39;\n&quot;</span></div><div class="line"><a name="l06220"></a><span class="lineno"> 6220</span>&#160;     <span class="stringliteral">&quot;  qto_xyz_matrix = &#39;%g %g %g %g %g %g %g %g %g %g %g %g %g %g %g %g&#39;\n&quot;</span> ,</div><div class="line"><a name="l06221"></a><span class="lineno"> 6221</span>&#160;         nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#adfcbe7e11b44d8a964d61c3e17554686">qform_code</a>      , <a class="code" href="../../d1/d14/nifti1__io_8c.html#a7472700981faa470501958c621c9ee61">nifti_xform_string</a>(nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#adfcbe7e11b44d8a964d61c3e17554686">qform_code</a>) ,</div><div class="line"><a name="l06222"></a><span class="lineno"> 6222</span>&#160;         nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a122993357c6c712559c5e0244347c5f3">qto_xyz</a>.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[0][0] , nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a122993357c6c712559c5e0244347c5f3">qto_xyz</a>.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[0][1] ,</div><div class="line"><a name="l06223"></a><span class="lineno"> 6223</span>&#160;         nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a122993357c6c712559c5e0244347c5f3">qto_xyz</a>.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[0][2] , nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a122993357c6c712559c5e0244347c5f3">qto_xyz</a>.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[0][3] ,</div><div class="line"><a name="l06224"></a><span class="lineno"> 6224</span>&#160;         nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a122993357c6c712559c5e0244347c5f3">qto_xyz</a>.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[1][0] , nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a122993357c6c712559c5e0244347c5f3">qto_xyz</a>.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[1][1] ,</div><div class="line"><a name="l06225"></a><span class="lineno"> 6225</span>&#160;         nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a122993357c6c712559c5e0244347c5f3">qto_xyz</a>.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[1][2] , nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a122993357c6c712559c5e0244347c5f3">qto_xyz</a>.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[1][3] ,</div><div class="line"><a name="l06226"></a><span class="lineno"> 6226</span>&#160;         nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a122993357c6c712559c5e0244347c5f3">qto_xyz</a>.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[2][0] , nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a122993357c6c712559c5e0244347c5f3">qto_xyz</a>.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[2][1] ,</div><div class="line"><a name="l06227"></a><span class="lineno"> 6227</span>&#160;         nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a122993357c6c712559c5e0244347c5f3">qto_xyz</a>.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[2][2] , nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a122993357c6c712559c5e0244347c5f3">qto_xyz</a>.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[2][3] ,</div><div class="line"><a name="l06228"></a><span class="lineno"> 6228</span>&#160;         nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a122993357c6c712559c5e0244347c5f3">qto_xyz</a>.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[3][0] , nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a122993357c6c712559c5e0244347c5f3">qto_xyz</a>.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[3][1] ,</div><div class="line"><a name="l06229"></a><span class="lineno"> 6229</span>&#160;         nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a122993357c6c712559c5e0244347c5f3">qto_xyz</a>.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[3][2] , nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a122993357c6c712559c5e0244347c5f3">qto_xyz</a>.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[3][3]  ) ;</div><div class="line"><a name="l06230"></a><span class="lineno"> 6230</span>&#160;</div><div class="line"><a name="l06231"></a><span class="lineno"> 6231</span>&#160;     sprintf( buf+strlen(buf) ,</div><div class="line"><a name="l06232"></a><span class="lineno"> 6232</span>&#160;     <span class="stringliteral">&quot;  qto_ijk_matrix = &#39;%g %g %g %g %g %g %g %g %g %g %g %g %g %g %g %g&#39;\n&quot;</span> ,</div><div class="line"><a name="l06233"></a><span class="lineno"> 6233</span>&#160;         nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a750a76b493a4f2fc04c66ce2d4407bce">qto_ijk</a>.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[0][0] , nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a750a76b493a4f2fc04c66ce2d4407bce">qto_ijk</a>.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[0][1] ,</div><div class="line"><a name="l06234"></a><span class="lineno"> 6234</span>&#160;         nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a750a76b493a4f2fc04c66ce2d4407bce">qto_ijk</a>.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[0][2] , nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a750a76b493a4f2fc04c66ce2d4407bce">qto_ijk</a>.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[0][3] ,</div><div class="line"><a name="l06235"></a><span class="lineno"> 6235</span>&#160;         nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a750a76b493a4f2fc04c66ce2d4407bce">qto_ijk</a>.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[1][0] , nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a750a76b493a4f2fc04c66ce2d4407bce">qto_ijk</a>.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[1][1] ,</div><div class="line"><a name="l06236"></a><span class="lineno"> 6236</span>&#160;         nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a750a76b493a4f2fc04c66ce2d4407bce">qto_ijk</a>.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[1][2] , nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a750a76b493a4f2fc04c66ce2d4407bce">qto_ijk</a>.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[1][3] ,</div><div class="line"><a name="l06237"></a><span class="lineno"> 6237</span>&#160;         nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a750a76b493a4f2fc04c66ce2d4407bce">qto_ijk</a>.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[2][0] , nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a750a76b493a4f2fc04c66ce2d4407bce">qto_ijk</a>.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[2][1] ,</div><div class="line"><a name="l06238"></a><span class="lineno"> 6238</span>&#160;         nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a750a76b493a4f2fc04c66ce2d4407bce">qto_ijk</a>.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[2][2] , nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a750a76b493a4f2fc04c66ce2d4407bce">qto_ijk</a>.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[2][3] ,</div><div class="line"><a name="l06239"></a><span class="lineno"> 6239</span>&#160;         nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a750a76b493a4f2fc04c66ce2d4407bce">qto_ijk</a>.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[3][0] , nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a750a76b493a4f2fc04c66ce2d4407bce">qto_ijk</a>.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[3][1] ,</div><div class="line"><a name="l06240"></a><span class="lineno"> 6240</span>&#160;         nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a750a76b493a4f2fc04c66ce2d4407bce">qto_ijk</a>.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[3][2] , nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a750a76b493a4f2fc04c66ce2d4407bce">qto_ijk</a>.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[3][3]  ) ;</div><div class="line"><a name="l06241"></a><span class="lineno"> 6241</span>&#160;</div><div class="line"><a name="l06242"></a><span class="lineno"> 6242</span>&#160;     sprintf( buf+strlen(buf) ,</div><div class="line"><a name="l06243"></a><span class="lineno"> 6243</span>&#160;              <span class="stringliteral">&quot;  quatern_b = &#39;%g&#39;\n&quot;</span></div><div class="line"><a name="l06244"></a><span class="lineno"> 6244</span>&#160;              <span class="stringliteral">&quot;  quatern_c = &#39;%g&#39;\n&quot;</span></div><div class="line"><a name="l06245"></a><span class="lineno"> 6245</span>&#160;              <span class="stringliteral">&quot;  quatern_d = &#39;%g&#39;\n&quot;</span></div><div class="line"><a name="l06246"></a><span class="lineno"> 6246</span>&#160;              <span class="stringliteral">&quot;  qoffset_x = &#39;%g&#39;\n&quot;</span></div><div class="line"><a name="l06247"></a><span class="lineno"> 6247</span>&#160;              <span class="stringliteral">&quot;  qoffset_y = &#39;%g&#39;\n&quot;</span></div><div class="line"><a name="l06248"></a><span class="lineno"> 6248</span>&#160;              <span class="stringliteral">&quot;  qoffset_z = &#39;%g&#39;\n&quot;</span></div><div class="line"><a name="l06249"></a><span class="lineno"> 6249</span>&#160;              <span class="stringliteral">&quot;  qfac = &#39;%g&#39;\n&quot;</span> ,</div><div class="line"><a name="l06250"></a><span class="lineno"> 6250</span>&#160;         nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a26fc9296e99700da54ca3749622f83bd">quatern_b</a> , nim-&gt;quatern_c , nim-&gt;quatern_d ,</div><div class="line"><a name="l06251"></a><span class="lineno"> 6251</span>&#160;         nim-&gt;qoffset_x , nim-&gt;qoffset_y , nim-&gt;qoffset_z , nim-&gt;qfac ) ;</div><div class="line"><a name="l06252"></a><span class="lineno"> 6252</span>&#160;</div><div class="line"><a name="l06253"></a><span class="lineno"> 6253</span>&#160;     <a class="code" href="../../d1/d14/nifti1__io_8c.html#ad8ba2d4a127c3ee26af9909ce2aa59e8">nifti_mat44_to_orientation</a>( nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a122993357c6c712559c5e0244347c5f3">qto_xyz</a> , &amp;i,&amp;j,&amp;k ) ;</div><div class="line"><a name="l06254"></a><span class="lineno"> 6254</span>&#160;     <span class="keywordflow">if</span>( i &gt; 0 &amp;&amp; j &gt; 0 &amp;&amp; k &gt; 0 )</div><div class="line"><a name="l06255"></a><span class="lineno"> 6255</span>&#160;       sprintf( buf+strlen(buf) ,</div><div class="line"><a name="l06256"></a><span class="lineno"> 6256</span>&#160;                <span class="stringliteral">&quot;  qform_i_orientation = &#39;%s&#39;\n&quot;</span></div><div class="line"><a name="l06257"></a><span class="lineno"> 6257</span>&#160;                <span class="stringliteral">&quot;  qform_j_orientation = &#39;%s&#39;\n&quot;</span></div><div class="line"><a name="l06258"></a><span class="lineno"> 6258</span>&#160;                <span class="stringliteral">&quot;  qform_k_orientation = &#39;%s&#39;\n&quot;</span> ,</div><div class="line"><a name="l06259"></a><span class="lineno"> 6259</span>&#160;                <a class="code" href="../../d1/d14/nifti1__io_8c.html#a50ab65b744fa58802a77988df9eab9eb">nifti_orientation_string</a>(i) ,</div><div class="line"><a name="l06260"></a><span class="lineno"> 6260</span>&#160;                <a class="code" href="../../d1/d14/nifti1__io_8c.html#a50ab65b744fa58802a77988df9eab9eb">nifti_orientation_string</a>(j) ,</div><div class="line"><a name="l06261"></a><span class="lineno"> 6261</span>&#160;                <a class="code" href="../../d1/d14/nifti1__io_8c.html#a50ab65b744fa58802a77988df9eab9eb">nifti_orientation_string</a>(k)  ) ;</div><div class="line"><a name="l06262"></a><span class="lineno"> 6262</span>&#160;   }</div><div class="line"><a name="l06263"></a><span class="lineno"> 6263</span>&#160;</div><div class="line"><a name="l06264"></a><span class="lineno"> 6264</span>&#160;   <span class="keywordflow">if</span>( nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a964e209d6110bd26df6935ebf4a2a620">sform_code</a> &gt; 0 ){</div><div class="line"><a name="l06265"></a><span class="lineno"> 6265</span>&#160;     <span class="keywordtype">int</span> i,j,k ;</div><div class="line"><a name="l06266"></a><span class="lineno"> 6266</span>&#160;</div><div class="line"><a name="l06267"></a><span class="lineno"> 6267</span>&#160;     sprintf( buf+strlen(buf) ,</div><div class="line"><a name="l06268"></a><span class="lineno"> 6268</span>&#160;              <span class="stringliteral">&quot;  sform_code = &#39;%d&#39;\n&quot;</span></div><div class="line"><a name="l06269"></a><span class="lineno"> 6269</span>&#160;              <span class="stringliteral">&quot;  sform_code_name = &#39;%s&#39;\n&quot;</span></div><div class="line"><a name="l06270"></a><span class="lineno"> 6270</span>&#160;     <span class="stringliteral">&quot;  sto_xyz_matrix = &#39;%g %g %g %g %g %g %g %g %g %g %g %g %g %g %g %g&#39;\n&quot;</span> ,</div><div class="line"><a name="l06271"></a><span class="lineno"> 6271</span>&#160;         nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a964e209d6110bd26df6935ebf4a2a620">sform_code</a>      , <a class="code" href="../../d1/d14/nifti1__io_8c.html#a7472700981faa470501958c621c9ee61">nifti_xform_string</a>(nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a964e209d6110bd26df6935ebf4a2a620">sform_code</a>) ,</div><div class="line"><a name="l06272"></a><span class="lineno"> 6272</span>&#160;         nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a69460d9b0b0b19fe740c9b30cfd44e10">sto_xyz</a>.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[0][0] , nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a69460d9b0b0b19fe740c9b30cfd44e10">sto_xyz</a>.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[0][1] ,</div><div class="line"><a name="l06273"></a><span class="lineno"> 6273</span>&#160;         nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a69460d9b0b0b19fe740c9b30cfd44e10">sto_xyz</a>.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[0][2] , nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a69460d9b0b0b19fe740c9b30cfd44e10">sto_xyz</a>.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[0][3] ,</div><div class="line"><a name="l06274"></a><span class="lineno"> 6274</span>&#160;         nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a69460d9b0b0b19fe740c9b30cfd44e10">sto_xyz</a>.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[1][0] , nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a69460d9b0b0b19fe740c9b30cfd44e10">sto_xyz</a>.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[1][1] ,</div><div class="line"><a name="l06275"></a><span class="lineno"> 6275</span>&#160;         nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a69460d9b0b0b19fe740c9b30cfd44e10">sto_xyz</a>.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[1][2] , nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a69460d9b0b0b19fe740c9b30cfd44e10">sto_xyz</a>.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[1][3] ,</div><div class="line"><a name="l06276"></a><span class="lineno"> 6276</span>&#160;         nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a69460d9b0b0b19fe740c9b30cfd44e10">sto_xyz</a>.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[2][0] , nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a69460d9b0b0b19fe740c9b30cfd44e10">sto_xyz</a>.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[2][1] ,</div><div class="line"><a name="l06277"></a><span class="lineno"> 6277</span>&#160;         nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a69460d9b0b0b19fe740c9b30cfd44e10">sto_xyz</a>.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[2][2] , nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a69460d9b0b0b19fe740c9b30cfd44e10">sto_xyz</a>.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[2][3] ,</div><div class="line"><a name="l06278"></a><span class="lineno"> 6278</span>&#160;         nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a69460d9b0b0b19fe740c9b30cfd44e10">sto_xyz</a>.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[3][0] , nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a69460d9b0b0b19fe740c9b30cfd44e10">sto_xyz</a>.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[3][1] ,</div><div class="line"><a name="l06279"></a><span class="lineno"> 6279</span>&#160;         nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a69460d9b0b0b19fe740c9b30cfd44e10">sto_xyz</a>.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[3][2] , nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a69460d9b0b0b19fe740c9b30cfd44e10">sto_xyz</a>.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[3][3]  ) ;</div><div class="line"><a name="l06280"></a><span class="lineno"> 6280</span>&#160;</div><div class="line"><a name="l06281"></a><span class="lineno"> 6281</span>&#160;     sprintf( buf+strlen(buf) ,</div><div class="line"><a name="l06282"></a><span class="lineno"> 6282</span>&#160;     <span class="stringliteral">&quot;  sto_ijk matrix = &#39;%g %g %g %g %g %g %g %g %g %g %g %g %g %g %g %g&#39;\n&quot;</span> ,</div><div class="line"><a name="l06283"></a><span class="lineno"> 6283</span>&#160;         nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a1cb3cbfb8172a62e676581d3a1e950af">sto_ijk</a>.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[0][0] , nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a1cb3cbfb8172a62e676581d3a1e950af">sto_ijk</a>.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[0][1] ,</div><div class="line"><a name="l06284"></a><span class="lineno"> 6284</span>&#160;         nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a1cb3cbfb8172a62e676581d3a1e950af">sto_ijk</a>.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[0][2] , nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a1cb3cbfb8172a62e676581d3a1e950af">sto_ijk</a>.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[0][3] ,</div><div class="line"><a name="l06285"></a><span class="lineno"> 6285</span>&#160;         nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a1cb3cbfb8172a62e676581d3a1e950af">sto_ijk</a>.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[1][0] , nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a1cb3cbfb8172a62e676581d3a1e950af">sto_ijk</a>.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[1][1] ,</div><div class="line"><a name="l06286"></a><span class="lineno"> 6286</span>&#160;         nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a1cb3cbfb8172a62e676581d3a1e950af">sto_ijk</a>.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[1][2] , nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a1cb3cbfb8172a62e676581d3a1e950af">sto_ijk</a>.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[1][3] ,</div><div class="line"><a name="l06287"></a><span class="lineno"> 6287</span>&#160;         nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a1cb3cbfb8172a62e676581d3a1e950af">sto_ijk</a>.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[2][0] , nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a1cb3cbfb8172a62e676581d3a1e950af">sto_ijk</a>.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[2][1] ,</div><div class="line"><a name="l06288"></a><span class="lineno"> 6288</span>&#160;         nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a1cb3cbfb8172a62e676581d3a1e950af">sto_ijk</a>.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[2][2] , nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a1cb3cbfb8172a62e676581d3a1e950af">sto_ijk</a>.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[2][3] ,</div><div class="line"><a name="l06289"></a><span class="lineno"> 6289</span>&#160;         nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a1cb3cbfb8172a62e676581d3a1e950af">sto_ijk</a>.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[3][0] , nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a1cb3cbfb8172a62e676581d3a1e950af">sto_ijk</a>.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[3][1] ,</div><div class="line"><a name="l06290"></a><span class="lineno"> 6290</span>&#160;         nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a1cb3cbfb8172a62e676581d3a1e950af">sto_ijk</a>.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[3][2] , nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a1cb3cbfb8172a62e676581d3a1e950af">sto_ijk</a>.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[3][3]  ) ;</div><div class="line"><a name="l06291"></a><span class="lineno"> 6291</span>&#160;</div><div class="line"><a name="l06292"></a><span class="lineno"> 6292</span>&#160;     <a class="code" href="../../d1/d14/nifti1__io_8c.html#ad8ba2d4a127c3ee26af9909ce2aa59e8">nifti_mat44_to_orientation</a>( nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a69460d9b0b0b19fe740c9b30cfd44e10">sto_xyz</a> , &amp;i,&amp;j,&amp;k ) ;</div><div class="line"><a name="l06293"></a><span class="lineno"> 6293</span>&#160;     <span class="keywordflow">if</span>( i &gt; 0 &amp;&amp; j &gt; 0 &amp;&amp; k &gt; 0 )</div><div class="line"><a name="l06294"></a><span class="lineno"> 6294</span>&#160;       sprintf( buf+strlen(buf) ,</div><div class="line"><a name="l06295"></a><span class="lineno"> 6295</span>&#160;                <span class="stringliteral">&quot;  sform_i_orientation = &#39;%s&#39;\n&quot;</span></div><div class="line"><a name="l06296"></a><span class="lineno"> 6296</span>&#160;                <span class="stringliteral">&quot;  sform_j_orientation = &#39;%s&#39;\n&quot;</span></div><div class="line"><a name="l06297"></a><span class="lineno"> 6297</span>&#160;                <span class="stringliteral">&quot;  sform_k_orientation = &#39;%s&#39;\n&quot;</span> ,</div><div class="line"><a name="l06298"></a><span class="lineno"> 6298</span>&#160;                <a class="code" href="../../d1/d14/nifti1__io_8c.html#a50ab65b744fa58802a77988df9eab9eb">nifti_orientation_string</a>(i) ,</div><div class="line"><a name="l06299"></a><span class="lineno"> 6299</span>&#160;                <a class="code" href="../../d1/d14/nifti1__io_8c.html#a50ab65b744fa58802a77988df9eab9eb">nifti_orientation_string</a>(j) ,</div><div class="line"><a name="l06300"></a><span class="lineno"> 6300</span>&#160;                <a class="code" href="../../d1/d14/nifti1__io_8c.html#a50ab65b744fa58802a77988df9eab9eb">nifti_orientation_string</a>(k)  ) ;</div><div class="line"><a name="l06301"></a><span class="lineno"> 6301</span>&#160;   }</div><div class="line"><a name="l06302"></a><span class="lineno"> 6302</span>&#160;</div><div class="line"><a name="l06303"></a><span class="lineno"> 6303</span>&#160;   sprintf( buf+strlen(buf) , <span class="stringliteral">&quot;  num_ext = &#39;%d&#39;\n&quot;</span>, nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a2b9edee8e340d17e4d87b1c682ca091a">num_ext</a> ) ;</div><div class="line"><a name="l06304"></a><span class="lineno"> 6304</span>&#160;</div><div class="line"><a name="l06305"></a><span class="lineno"> 6305</span>&#160;   sprintf( buf+strlen(buf) , <span class="stringliteral">&quot;/&gt;\n&quot;</span> ) ;   <span class="comment">/* XML-ish closer */</span></div><div class="line"><a name="l06306"></a><span class="lineno"> 6306</span>&#160;</div><div class="line"><a name="l06307"></a><span class="lineno"> 6307</span>&#160;   nbuf = (int)strlen(buf) ;</div><div class="line"><a name="l06308"></a><span class="lineno"> 6308</span>&#160;   buf  = (<span class="keywordtype">char</span> *)realloc((<span class="keywordtype">void</span> *)buf, nbuf+1); <span class="comment">/* cut back to proper length */</span></div><div class="line"><a name="l06309"></a><span class="lineno"> 6309</span>&#160;   <span class="keywordflow">if</span>( !buf ) fprintf(stderr,<span class="stringliteral">&quot;** NITA: failed to realloc %d bytes\n&quot;</span>,nbuf+1);</div><div class="line"><a name="l06310"></a><span class="lineno"> 6310</span>&#160;   <span class="keywordflow">return</span> buf ;</div><div class="line"><a name="l06311"></a><span class="lineno"> 6311</span>&#160;}</div><div class="ttc" id="structnifti__image_html_ade42791ee9c492d506e6c353a61a8c41"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#ade42791ee9c492d506e6c353a61a8c41">nifti_image::slice_start</a></div><div class="ttdeci">int slice_start</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:127</div></div>
<div class="ttc" id="structnifti__image_html_a122993357c6c712559c5e0244347c5f3"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a122993357c6c712559c5e0244347c5f3">nifti_image::qto_xyz</a></div><div class="ttdeci">mat44 qto_xyz</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:137</div></div>
<div class="ttc" id="structmat44_html_ad11c8da60dd84b24824f70b08948d6e3"><div class="ttname"><a href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">mat44::m</a></div><div class="ttdeci">float m[4][4]</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:60</div></div>
<div class="ttc" id="structnifti__image_html_aa99806d70cacff119b5b6089c3dfdeda"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#aa99806d70cacff119b5b6089c3dfdeda">nifti_image::iname</a></div><div class="ttdeci">char * iname</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:161</div></div>
<div class="ttc" id="nifti1__io_8c_html_a7472700981faa470501958c621c9ee61"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#a7472700981faa470501958c621c9ee61">nifti_xform_string</a></div><div class="ttdeci">char * nifti_xform_string(int xx)</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:1283</div></div>
<div class="ttc" id="structnifti__image_html_a45dd58da99fbf651a96f68dc83e504c5"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a45dd58da99fbf651a96f68dc83e504c5">nifti_image::intent_p3</a></div><div class="ttdeci">float intent_p3</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:154</div></div>
<div class="ttc" id="structnifti__image_html_a7a760c43613a8ba94aaf73e571ba195d"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a7a760c43613a8ba94aaf73e571ba195d">nifti_image::scl_inter</a></div><div class="ttdeci">float scl_inter</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:114</div></div>
<div class="ttc" id="structnifti__image_html_a731f0b9d7b95bc17f9f1a0a568d8ca71"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a731f0b9d7b95bc17f9f1a0a568d8ca71">nifti_image::phase_dim</a></div><div class="ttdeci">int phase_dim</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:123</div></div>
<div class="ttc" id="structnifti__image_html_afb6cd106a28d4599326042c43d85022b"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#afb6cd106a28d4599326042c43d85022b">nifti_image::dy</a></div><div class="ttdeci">float dy</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:105</div></div>
<div class="ttc" id="structnifti__image_html_a8d9ddfeecae70399a50dca551d69f774"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a8d9ddfeecae70399a50dca551d69f774">nifti_image::dx</a></div><div class="ttdeci">float dx</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:104</div></div>
<div class="ttc" id="nifti1__io_8c_html_a90a17b3e9891b6f16d7b454b5442646d"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#a90a17b3e9891b6f16d7b454b5442646d">nifti_units_string</a></div><div class="ttdeci">char * nifti_units_string(int uu)</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:1255</div></div>
<div class="ttc" id="nifti1__io_8c_html_a2e4ce3c3c610064c01eeeac244101159"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#a2e4ce3c3c610064c01eeeac244101159">nifti_slice_string</a></div><div class="ttdeci">char * nifti_slice_string(int ss)</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:1362</div></div>
<div class="ttc" id="nifti1__io_8c_html_ad8ba2d4a127c3ee26af9909ce2aa59e8"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#ad8ba2d4a127c3ee26af9909ce2aa59e8">nifti_mat44_to_orientation</a></div><div class="ttdeci">void nifti_mat44_to_orientation(mat44 R, int *icod, int *jcod, int *kcod)</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:1966</div></div>
<div class="ttc" id="nifti1__io_8c_html_a3354f25465b96de45211544ff6570e74"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#a3354f25465b96de45211544ff6570e74">nifti_intent_string</a></div><div class="ttdeci">char * nifti_intent_string(int ii)</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:1306</div></div>
<div class="ttc" id="nifti1__io_8c_html_adfa192edb2b6c605c831a781b6d0dd1b"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#adfa192edb2b6c605c831a781b6d0dd1b">nifti_datatype_string</a></div><div class="ttdeci">char * nifti_datatype_string(int dt)</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:1186</div></div>
<div class="ttc" id="structnifti__image_html_ab4e9dd136d1de9fbe03c68f081876b9e"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#ab4e9dd136d1de9fbe03c68f081876b9e">nifti_image::dt</a></div><div class="ttdeci">float dt</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:107</div></div>
<div class="ttc" id="structnifti__image_html_a440a3fab2a781b43ed8216e26492597d"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a440a3fab2a781b43ed8216e26492597d">nifti_image::nvox</a></div><div class="ttdeci">size_t nvox</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:100</div></div>
<div class="ttc" id="structnifti__image_html_ada65c236666fdfa352b2bff24557f704"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#ada65c236666fdfa352b2bff24557f704">nifti_image::aux_file</a></div><div class="ttdeci">char aux_file[24]</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:158</div></div>
<div class="ttc" id="nifti1__io_8c_html_a50ab65b744fa58802a77988df9eab9eb"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#a50ab65b744fa58802a77988df9eab9eb">nifti_orientation_string</a></div><div class="ttdeci">char * nifti_orientation_string(int ii)</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:1387</div></div>
<div class="ttc" id="structnifti__image_html_a7e04a5e405f9b79dae5652cdcd3832ef"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a7e04a5e405f9b79dae5652cdcd3832ef">nifti_image::nv</a></div><div class="ttdeci">int nv</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:97</div></div>
<div class="ttc" id="structnifti__image_html_a51bad5202c3b9943b3c86f80ca5d1cd1"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a51bad5202c3b9943b3c86f80ca5d1cd1">nifti_image::datatype</a></div><div class="ttdeci">int datatype</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:102</div></div>
<div class="ttc" id="structnifti__image_html_ab1c6399d45bf77d6eff712d318a9d0ca"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#ab1c6399d45bf77d6eff712d318a9d0ca">nifti_image::du</a></div><div class="ttdeci">float du</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:108</div></div>
<div class="ttc" id="structnifti__image_html_ab4a9c0956e858fd877ee81796adc66bc"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#ab4a9c0956e858fd877ee81796adc66bc">nifti_image::nu</a></div><div class="ttdeci">int nu</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:96</div></div>
<div class="ttc" id="structnifti__image_html_a7422e0ecfa446e37bd83fc4fe082135d"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a7422e0ecfa446e37bd83fc4fe082135d">nifti_image::cal_max</a></div><div class="ttdeci">float cal_max</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:117</div></div>
<div class="ttc" id="structnifti__image_html_a0f2e675a17830fb17c58602e0d6ebd3b"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a0f2e675a17830fb17c58602e0d6ebd3b">nifti_image::slice_duration</a></div><div class="ttdeci">float slice_duration</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:129</div></div>
<div class="ttc" id="structnifti__image_html_ae0bc5b6b2e350108e468124b682b715c"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#ae0bc5b6b2e350108e468124b682b715c">nifti_image::nw</a></div><div class="ttdeci">int nw</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:98</div></div>
<div class="ttc" id="structnifti__image_html_a6155d97e665d879e662bf650c09d0bc1"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a6155d97e665d879e662bf650c09d0bc1">nifti_image::dv</a></div><div class="ttdeci">float dv</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:109</div></div>
<div class="ttc" id="structnifti__image_html_ab7d8391bc07972e0b051f157dde00a04"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#ab7d8391bc07972e0b051f157dde00a04">nifti_image::dw</a></div><div class="ttdeci">float dw</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:110</div></div>
<div class="ttc" id="structnifti__image_html_ad61740a0245f2af05ded39cb0648ae07"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#ad61740a0245f2af05ded39cb0648ae07">nifti_image::ndim</a></div><div class="ttdeci">int ndim</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:91</div></div>
<div class="ttc" id="structnifti__image_html_adfcbe7e11b44d8a964d61c3e17554686"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#adfcbe7e11b44d8a964d61c3e17554686">nifti_image::qform_code</a></div><div class="ttdeci">int qform_code</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:119</div></div>
<div class="ttc" id="structnifti__image_html_a50953906569b58e6b1aaeb7759767b34"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a50953906569b58e6b1aaeb7759767b34">nifti_image::freq_dim</a></div><div class="ttdeci">int freq_dim</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:122</div></div>
<div class="ttc" id="structnifti__image_html_a43e8d714fac078daffbe590253776d4c"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a43e8d714fac078daffbe590253776d4c">nifti_image::time_units</a></div><div class="ttdeci">int time_units</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:146</div></div>
<div class="ttc" id="structnifti__image_html_a856fc94a5daed16225264dc8daa96013"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a856fc94a5daed16225264dc8daa96013">nifti_image::iname_offset</a></div><div class="ttdeci">int iname_offset</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:162</div></div>
<div class="ttc" id="structnifti__image_html_a3c79d06a583b3e3a902c5ec33eaab687"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a3c79d06a583b3e3a902c5ec33eaab687">nifti_image::descrip</a></div><div class="ttdeci">char descrip[80]</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:157</div></div>
<div class="ttc" id="structnifti__image_html_a964e209d6110bd26df6935ebf4a2a620"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a964e209d6110bd26df6935ebf4a2a620">nifti_image::sform_code</a></div><div class="ttdeci">int sform_code</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:120</div></div>
<div class="ttc" id="structnifti__image_html_a69460d9b0b0b19fe740c9b30cfd44e10"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a69460d9b0b0b19fe740c9b30cfd44e10">nifti_image::sto_xyz</a></div><div class="ttdeci">mat44 sto_xyz</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:140</div></div>
<div class="ttc" id="structnifti__image_html_a5ce21d97da49b1dcf9415e83bbf07caf"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a5ce21d97da49b1dcf9415e83bbf07caf">nifti_image::byteorder</a></div><div class="ttdeci">int byteorder</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:164</div></div>
<div class="ttc" id="structnifti__image_html_a56a5855aaf5323044ffdfde0a23214bc"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a56a5855aaf5323044ffdfde0a23214bc">nifti_image::intent_code</a></div><div class="ttdeci">int intent_code</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:151</div></div>
<div class="ttc" id="structnifti__image_html_a1c3ebd9911ac46b659c268a95014b5e8"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a1c3ebd9911ac46b659c268a95014b5e8">nifti_image::intent_p1</a></div><div class="ttdeci">float intent_p1</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:152</div></div>
<div class="ttc" id="structnifti__image_html_a0188187b073521e823b51cb5250d3fd4"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a0188187b073521e823b51cb5250d3fd4">nifti_image::slice_code</a></div><div class="ttdeci">int slice_code</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:126</div></div>
<div class="ttc" id="structnifti__image_html_a8731bb1d867cdd24335e4bc3dd131c44"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a8731bb1d867cdd24335e4bc3dd131c44">nifti_image::nz</a></div><div class="ttdeci">int nz</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:94</div></div>
<div class="ttc" id="structnifti__image_html_ac55996e58670948b220bebbf5d4bb0f4"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#ac55996e58670948b220bebbf5d4bb0f4">nifti_image::nifti_type</a></div><div class="ttdeci">int nifti_type</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:148</div></div>
<div class="ttc" id="structnifti__image_html_ae17bdf0913f6672abdac81c453ecb598"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#ae17bdf0913f6672abdac81c453ecb598">nifti_image::toffset</a></div><div class="ttdeci">float toffset</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:143</div></div>
<div class="ttc" id="structnifti__image_html_ab3d3fdfda87503e5e8d53f0342906aba"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#ab3d3fdfda87503e5e8d53f0342906aba">nifti_image::nt</a></div><div class="ttdeci">int nt</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:95</div></div>
<div class="ttc" id="structnifti__image_html_af4d04ce1f0102c2692d89bbd5476a931"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#af4d04ce1f0102c2692d89bbd5476a931">nifti_image::scl_slope</a></div><div class="ttdeci">float scl_slope</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:113</div></div>
<div class="ttc" id="structnifti__image_html_a5e971f24a97c592fefa28d084c02769a"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a5e971f24a97c592fefa28d084c02769a">nifti_image::ny</a></div><div class="ttdeci">int ny</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:93</div></div>
<div class="ttc" id="structnifti__image_html_a7d7c74c824d3c8b50a27322366d243f9"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a7d7c74c824d3c8b50a27322366d243f9">nifti_image::cal_min</a></div><div class="ttdeci">float cal_min</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:116</div></div>
<div class="ttc" id="structnifti__image_html_a750a76b493a4f2fc04c66ce2d4407bce"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a750a76b493a4f2fc04c66ce2d4407bce">nifti_image::qto_ijk</a></div><div class="ttdeci">mat44 qto_ijk</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:138</div></div>
<div class="ttc" id="structnifti__image_html_ac462fb16a688d8dbec164456febdc9c7"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#ac462fb16a688d8dbec164456febdc9c7">nifti_image::dz</a></div><div class="ttdeci">float dz</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:106</div></div>
<div class="ttc" id="structnifti__image_html_a1c7755060c9cca3612f1101684c9845f"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a1c7755060c9cca3612f1101684c9845f">nifti_image::fname</a></div><div class="ttdeci">char * fname</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:160</div></div>
<div class="ttc" id="structnifti__image_html_a0764cacf8341e21232d9423410c2b4c3"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a0764cacf8341e21232d9423410c2b4c3">nifti_image::intent_name</a></div><div class="ttdeci">char intent_name[16]</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:155</div></div>
<div class="ttc" id="structnifti__image_html_a79a4382f115cb6c7f8977c36d73e6749"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a79a4382f115cb6c7f8977c36d73e6749">nifti_image::nbyper</a></div><div class="ttdeci">int nbyper</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:101</div></div>
<div class="ttc" id="structnifti__image_html_ac67dffa9ebbf79fe08b511cdb9e2476f"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#ac67dffa9ebbf79fe08b511cdb9e2476f">nifti_image::slice_end</a></div><div class="ttdeci">int slice_end</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:128</div></div>
<div class="ttc" id="structnifti__image_html_ae37a59a187aa187528020cc3abeba5e3"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#ae37a59a187aa187528020cc3abeba5e3">nifti_image::slice_dim</a></div><div class="ttdeci">int slice_dim</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:124</div></div>
<div class="ttc" id="structnifti__image_html_a1cb3cbfb8172a62e676581d3a1e950af"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a1cb3cbfb8172a62e676581d3a1e950af">nifti_image::sto_ijk</a></div><div class="ttdeci">mat44 sto_ijk</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:141</div></div>
<div class="ttc" id="structnifti__image_html_a2b9edee8e340d17e4d87b1c682ca091a"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a2b9edee8e340d17e4d87b1c682ca091a">nifti_image::num_ext</a></div><div class="ttdeci">int num_ext</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:167</div></div>
<div class="ttc" id="structnifti__image_html_aacd903b0043fd9378de6927a64bafa85"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#aacd903b0043fd9378de6927a64bafa85">nifti_image::intent_p2</a></div><div class="ttdeci">float intent_p2</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:153</div></div>
<div class="ttc" id="structnifti__image_html_a26fc9296e99700da54ca3749622f83bd"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a26fc9296e99700da54ca3749622f83bd">nifti_image::quatern_b</a></div><div class="ttdeci">float quatern_b</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:133</div></div>
<div class="ttc" id="structnifti__image_html_ab99743dd7967cff6845f1a96b2044167"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#ab99743dd7967cff6845f1a96b2044167">nifti_image::nx</a></div><div class="ttdeci">int nx</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:92</div></div>
<div class="ttc" id="structnifti__image_html_a5fa377516ee62469a9051a5834f080af"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a5fa377516ee62469a9051a5834f080af">nifti_image::xyz_units</a></div><div class="ttdeci">int xyz_units</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:145</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a963b6ef9c3532b8dc0e7a243c42d1436"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a963b6ef9c3532b8dc0e7a243c42d1436">&#9670;&nbsp;</a></span>nifti_image_unload()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void nifti_image_unload </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d0/de7/structnifti__image.html">nifti_image</a> *&#160;</td>
          <td class="paramname"><em>nim</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Unload the data in a <a class="el" href="../../d0/de7/structnifti__image.html" title="High level data structure for open nifti datasets in the nifti1_io API. Note that this structure is n...">nifti_image</a> struct, but keep the metadata. </p>
<div class="fragment"><div class="line"><a name="l05011"></a><span class="lineno"> 5011</span>&#160;{</div><div class="line"><a name="l05012"></a><span class="lineno"> 5012</span>&#160;   <span class="keywordflow">if</span>( nim != NULL &amp;&amp; nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a9c7db78ad411a6e2b8a8ab071bbbe0a8">data</a> != NULL ){</div><div class="line"><a name="l05013"></a><span class="lineno"> 5013</span>&#160;     free(nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a9c7db78ad411a6e2b8a8ab071bbbe0a8">data</a>) ; nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a9c7db78ad411a6e2b8a8ab071bbbe0a8">data</a> = NULL ;</div><div class="line"><a name="l05014"></a><span class="lineno"> 5014</span>&#160;   }</div><div class="line"><a name="l05015"></a><span class="lineno"> 5015</span>&#160;   return ;</div><div class="line"><a name="l05016"></a><span class="lineno"> 5016</span>&#160;}</div><div class="ttc" id="structnifti__image_html_a9c7db78ad411a6e2b8a8ab071bbbe0a8"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a9c7db78ad411a6e2b8a8ab071bbbe0a8">nifti_image::data</a></div><div class="ttdeci">void * data</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:165</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aae590e6d7a9f46f6f8f454c00b6698bf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aae590e6d7a9f46f6f8f454c00b6698bf">&#9670;&nbsp;</a></span>nifti_image_write()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void nifti_image_write </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d0/de7/structnifti__image.html">nifti_image</a> *&#160;</td>
          <td class="paramname"><em>nim</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Write a <a class="el" href="../../d0/de7/structnifti__image.html" title="High level data structure for open nifti datasets in the nifti1_io API. Note that this structure is n...">nifti_image</a> to disk.</p>
<p>Since data is properly byte-swapped upon reading, it is assumed to be in the byte-order of the current CPU at write time. Thus, nim-&gt;byte_order should match that of the current CPU. Note that the <a class="el" href="../../d1/d14/nifti1__io_8c.html#a296fad01763163289b0e1030d3a0ebaa">nifti_set_filenames()</a> function takes the flag, set_byte_order.</p>
<p>The following fields of nim affect how the output appears:</p><ul>
<li>nifti_type = 0 ==&gt; ANALYZE-7.5 format file pair will be written</li>
<li>nifti_type = 1 ==&gt; NIFTI-1 format single file will be written (data offset will be 352+extensions)</li>
<li>nifti_type = 2 ==&gt; NIFTI_1 format file pair will be written</li>
<li>nifti_type = 3 ==&gt; NIFTI_1 ASCII single file will be written</li>
<li>fname is the name of the output file (header or header+data)</li>
<li>if a file pair is being written, iname is the name of the data file</li>
<li>existing files WILL be overwritten with extreme prejudice</li>
<li>if qform_code &gt; 0, the quatern_*, qoffset_*, and qfac fields determine the qform output, NOT the qto_xyz matrix; if you want to compute these fields from the qto_xyz matrix, you can use the utility function <a class="el" href="../../d1/d14/nifti1__io_8c.html#a84b68d5634ec94b5132e0067733e9f28">nifti_mat44_to_quatern()</a></li>
</ul>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="../../d1/d14/nifti1__io_8c.html#a8864ea68cc4a23ce82f3bb4b545243ca">nifti_image_write_bricks</a>, <a class="el" href="../../d1/d14/nifti1__io_8c.html#a2fe83552d8121a492fe07b5f42397c9d">nifti_image_free</a>, <a class="el" href="../../d1/d14/nifti1__io_8c.html#a296fad01763163289b0e1030d3a0ebaa">nifti_set_filenames</a>, <a class="el" href="../../d1/d14/nifti1__io_8c.html#a05ad147bd1f78fe6790ef1dc93278712">nifti_image_write_hdr_img</a> </dd></dl>
<div class="fragment"><div class="line"><a name="l05850"></a><span class="lineno"> 5850</span>&#160;{</div><div class="line"><a name="l05851"></a><span class="lineno"> 5851</span>&#160;   znzFile fp = <a class="code" href="../../d1/d14/nifti1__io_8c.html#a05ad147bd1f78fe6790ef1dc93278712">nifti_image_write_hdr_img</a>(nim,1,<span class="stringliteral">&quot;wb&quot;</span>);</div><div class="line"><a name="l05852"></a><span class="lineno"> 5852</span>&#160;   <span class="keywordflow">if</span>( fp ){</div><div class="line"><a name="l05853"></a><span class="lineno"> 5853</span>&#160;      <span class="keywordflow">if</span>( <a class="code" href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a>.debug &gt; 2 ) fprintf(stderr,<span class="stringliteral">&quot;-d niw: done with znzFile\n&quot;</span>);</div><div class="line"><a name="l05854"></a><span class="lineno"> 5854</span>&#160;      free(fp);</div><div class="line"><a name="l05855"></a><span class="lineno"> 5855</span>&#160;   }</div><div class="line"><a name="l05856"></a><span class="lineno"> 5856</span>&#160;   <span class="keywordflow">if</span>( <a class="code" href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a>.debug &gt; 1 ) fprintf(stderr,<span class="stringliteral">&quot;-d nifti_image_write: done\n&quot;</span>);</div><div class="line"><a name="l05857"></a><span class="lineno"> 5857</span>&#160;}</div><div class="ttc" id="nifti1__io_8c_html_a05ad147bd1f78fe6790ef1dc93278712"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#a05ad147bd1f78fe6790ef1dc93278712">nifti_image_write_hdr_img</a></div><div class="ttdeci">znzFile nifti_image_write_hdr_img(nifti_image *nim, int write_data, const char *opts)</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:5657</div></div>
<div class="ttc" id="nifti1__io_8c_html_a6e047e1dc2f826a4adff048bee8f5df7"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a></div><div class="ttdeci">static nifti_global_options g_opts</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:344</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a8864ea68cc4a23ce82f3bb4b545243ca"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8864ea68cc4a23ce82f3bb4b545243ca">&#9670;&nbsp;</a></span>nifti_image_write_bricks()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void nifti_image_write_bricks </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d0/de7/structnifti__image.html">nifti_image</a> *&#160;</td>
          <td class="paramname"><em>nim</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d1/dba/structnifti__brick__list.html">nifti_brick_list</a> *&#160;</td>
          <td class="paramname"><em>NBL</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>similar to nifti_image_write, but data is in NBL struct, not nim-&gt;data</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="../../d1/d14/nifti1__io_8c.html#aae590e6d7a9f46f6f8f454c00b6698bf">nifti_image_write</a>, <a class="el" href="../../d1/d14/nifti1__io_8c.html#a2fe83552d8121a492fe07b5f42397c9d">nifti_image_free</a>, <a class="el" href="../../d1/d14/nifti1__io_8c.html#a296fad01763163289b0e1030d3a0ebaa">nifti_set_filenames</a>, <a class="el" href="../../d1/d14/nifti1__io_8c.html#ab1b499958b62d1c0f3bbc929ca2431f2">nifti_free_NBL</a> </dd></dl>
<div class="fragment"><div class="line"><a name="l05866"></a><span class="lineno"> 5866</span>&#160;{</div><div class="line"><a name="l05867"></a><span class="lineno"> 5867</span>&#160;   znzFile fp = <a class="code" href="../../d1/d14/nifti1__io_8c.html#a23ba2ececf435189365329d11d138a24">nifti_image_write_hdr_img2</a>(nim,1,<span class="stringliteral">&quot;wb&quot;</span>,NULL,NBL);</div><div class="line"><a name="l05868"></a><span class="lineno"> 5868</span>&#160;   <span class="keywordflow">if</span>( fp ){</div><div class="line"><a name="l05869"></a><span class="lineno"> 5869</span>&#160;      <span class="keywordflow">if</span>( <a class="code" href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a>.debug &gt; 2 ) fprintf(stderr,<span class="stringliteral">&quot;-d niwb: done with znzFile\n&quot;</span>);</div><div class="line"><a name="l05870"></a><span class="lineno"> 5870</span>&#160;      free(fp);</div><div class="line"><a name="l05871"></a><span class="lineno"> 5871</span>&#160;   }</div><div class="line"><a name="l05872"></a><span class="lineno"> 5872</span>&#160;   <span class="keywordflow">if</span>( <a class="code" href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a>.debug &gt; 1 ) fprintf(stderr,<span class="stringliteral">&quot;-d niwb: done writing bricks\n&quot;</span>);</div><div class="line"><a name="l05873"></a><span class="lineno"> 5873</span>&#160;}</div><div class="ttc" id="nifti1__io_8c_html_a23ba2ececf435189365329d11d138a24"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#a23ba2ececf435189365329d11d138a24">nifti_image_write_hdr_img2</a></div><div class="ttdeci">znzFile nifti_image_write_hdr_img2(nifti_image *nim, int write_opts, const char *opts, znzFile imgfile, const nifti_brick_list *NBL)</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:5695</div></div>
<div class="ttc" id="nifti1__io_8c_html_a6e047e1dc2f826a4adff048bee8f5df7"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a></div><div class="ttdeci">static nifti_global_options g_opts</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:344</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a05ad147bd1f78fe6790ef1dc93278712"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a05ad147bd1f78fe6790ef1dc93278712">&#9670;&nbsp;</a></span>nifti_image_write_hdr_img()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">znzFile nifti_image_write_hdr_img </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d0/de7/structnifti__image.html">nifti_image</a> *&#160;</td>
          <td class="paramname"><em>nim</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>write_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>opts</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>write the <a class="el" href="../../d0/de7/structnifti__image.html" title="High level data structure for open nifti datasets in the nifti1_io API. Note that this structure is n...">nifti_image</a> dataset to disk, optionally including data</p>
<p>This is just a front-end for nifti_image_write_hdr_img2.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">nim</td><td><a class="el" href="../../d0/de7/structnifti__image.html" title="High level data structure for open nifti datasets in the nifti1_io API. Note that this structure is n...">nifti_image</a> to write to disk </td></tr>
    <tr><td class="paramname">write_data</td><td>write options (see nifti_image_write_hdr_img2) </td></tr>
    <tr><td class="paramname">opts</td><td>file open options ("wb" from nifti_image_write)</td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="../../d1/d14/nifti1__io_8c.html#aae590e6d7a9f46f6f8f454c00b6698bf">nifti_image_write</a>, <a class="el" href="../../d1/d14/nifti1__io_8c.html#a23ba2ececf435189365329d11d138a24">nifti_image_write_hdr_img2</a>, <a class="el" href="../../d1/d14/nifti1__io_8c.html#a2fe83552d8121a492fe07b5f42397c9d">nifti_image_free</a>, <a class="el" href="../../d1/d14/nifti1__io_8c.html#a296fad01763163289b0e1030d3a0ebaa">nifti_set_filenames</a> </dd></dl>
<div class="fragment"><div class="line"><a name="l05659"></a><span class="lineno"> 5659</span>&#160;{</div><div class="line"><a name="l05660"></a><span class="lineno"> 5660</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d1/d14/nifti1__io_8c.html#a23ba2ececf435189365329d11d138a24">nifti_image_write_hdr_img2</a>(nim,write_data,opts,NULL,NULL);</div><div class="line"><a name="l05661"></a><span class="lineno"> 5661</span>&#160;}</div><div class="ttc" id="nifti1__io_8c_html_a23ba2ececf435189365329d11d138a24"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#a23ba2ececf435189365329d11d138a24">nifti_image_write_hdr_img2</a></div><div class="ttdeci">znzFile nifti_image_write_hdr_img2(nifti_image *nim, int write_opts, const char *opts, znzFile imgfile, const nifti_brick_list *NBL)</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:5695</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a23ba2ececf435189365329d11d138a24"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a23ba2ececf435189365329d11d138a24">&#9670;&nbsp;</a></span>nifti_image_write_hdr_img2()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">znzFile nifti_image_write_hdr_img2 </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d0/de7/structnifti__image.html">nifti_image</a> *&#160;</td>
          <td class="paramname"><em>nim</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>write_opts</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>opts</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">znzFile&#160;</td>
          <td class="paramname"><em>imgfile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d1/dba/structnifti__brick__list.html">nifti_brick_list</a> *&#160;</td>
          <td class="paramname"><em>NBL</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This writes the header (and optionally the image data) to file</p>
<p>If the image data file is left open it returns a valid znzFile handle. It also uses imgfile as the open image file is not null, and modifies it inside.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">nim</td><td><a class="el" href="../../d0/de7/structnifti__image.html" title="High level data structure for open nifti datasets in the nifti1_io API. Note that this structure is n...">nifti_image</a> to write to disk </td></tr>
    <tr><td class="paramname">write_opts</td><td>flags whether to write data and/or close file (see below) </td></tr>
    <tr><td class="paramname">opts</td><td>file-open options, probably "wb" from <a class="el" href="../../d1/d14/nifti1__io_8c.html#aae590e6d7a9f46f6f8f454c00b6698bf">nifti_image_write()</a> </td></tr>
    <tr><td class="paramname">imgfile</td><td>optional open znzFile struct, for writing image data (may be NULL) </td></tr>
    <tr><td class="paramname">NBL</td><td>optional <a class="el" href="../../d1/dba/structnifti__brick__list.html">nifti_brick_list</a>, containing the image data (may be NULL)</td></tr>
  </table>
  </dd>
</dl>
<p>Values for write_opts mode are based on two binary flags ( 0/1 for no-write/write data, and 0/2 for close/leave-open files ) :</p><ul>
<li>0 = do not write data and close (do not open data file)</li>
<li>1 = write data and close</li>
<li>2 = do not write data and leave data file open</li>
<li>3 = write data and leave data file open</li>
</ul>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="../../d1/d14/nifti1__io_8c.html#aae590e6d7a9f46f6f8f454c00b6698bf">nifti_image_write</a>, <a class="el" href="../../d1/d14/nifti1__io_8c.html#a05ad147bd1f78fe6790ef1dc93278712">nifti_image_write_hdr_img</a>, <a class="el" href="../../d1/d14/nifti1__io_8c.html#a2fe83552d8121a492fe07b5f42397c9d">nifti_image_free</a>, <a class="el" href="../../d1/d14/nifti1__io_8c.html#a296fad01763163289b0e1030d3a0ebaa">nifti_set_filenames</a> </dd></dl>
<div class="fragment"><div class="line"><a name="l05697"></a><span class="lineno"> 5697</span>&#160;{</div><div class="line"><a name="l05698"></a><span class="lineno"> 5698</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d75/structnifti__1__header.html">nifti_1_header</a> nhdr ;</div><div class="line"><a name="l05699"></a><span class="lineno"> 5699</span>&#160;   znzFile               fp=NULL;</div><div class="line"><a name="l05700"></a><span class="lineno"> 5700</span>&#160;   <span class="keywordtype">size_t</span>                ss ;</div><div class="line"><a name="l05701"></a><span class="lineno"> 5701</span>&#160;   <span class="keywordtype">int</span>                   write_data, leave_open;</div><div class="line"><a name="l05702"></a><span class="lineno"> 5702</span>&#160;   <span class="keywordtype">char</span>                  func[] = { <span class="stringliteral">&quot;nifti_image_write_hdr_img2&quot;</span> };</div><div class="line"><a name="l05703"></a><span class="lineno"> 5703</span>&#160;</div><div class="line"><a name="l05704"></a><span class="lineno"> 5704</span>&#160;   write_data = write_opts &amp; 1;  <span class="comment">/* just separate the bits now */</span></div><div class="line"><a name="l05705"></a><span class="lineno"> 5705</span>&#160;   leave_open = write_opts &amp; 2;</div><div class="line"><a name="l05706"></a><span class="lineno"> 5706</span>&#160;</div><div class="line"><a name="l05707"></a><span class="lineno"> 5707</span>&#160;   <span class="keywordflow">if</span>( ! nim                              ) ERREX(<span class="stringliteral">&quot;NULL input&quot;</span>) ;</div><div class="line"><a name="l05708"></a><span class="lineno"> 5708</span>&#160;   <span class="keywordflow">if</span>( ! <a class="code" href="../../d1/d14/nifti1__io_8c.html#a836b54d494e9d2718e5541978ae3fc29">nifti_validfilename</a>(nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a1c7755060c9cca3612f1101684c9845f">fname</a>)  ) ERREX(<span class="stringliteral">&quot;bad fname input&quot;</span>) ;</div><div class="line"><a name="l05709"></a><span class="lineno"> 5709</span>&#160;   <span class="keywordflow">if</span>( write_data &amp;&amp; ! nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a9c7db78ad411a6e2b8a8ab071bbbe0a8">data</a> &amp;&amp; ! NBL ) ERREX(<span class="stringliteral">&quot;no image data&quot;</span>) ;</div><div class="line"><a name="l05710"></a><span class="lineno"> 5710</span>&#160;</div><div class="line"><a name="l05711"></a><span class="lineno"> 5711</span>&#160;   <span class="keywordflow">if</span>( write_data &amp;&amp; NBL &amp;&amp; ! nifti_NBL_matches_nim(nim, NBL) )</div><div class="line"><a name="l05712"></a><span class="lineno"> 5712</span>&#160;      ERREX(<span class="stringliteral">&quot;NBL does not match nim&quot;</span>);</div><div class="line"><a name="l05713"></a><span class="lineno"> 5713</span>&#160;</div><div class="line"><a name="l05714"></a><span class="lineno"> 5714</span>&#160;   <a class="code" href="../../d1/d14/nifti1__io_8c.html#af37b47d8dcd832f0a2ea9758001ac622">nifti_set_iname_offset</a>(nim);</div><div class="line"><a name="l05715"></a><span class="lineno"> 5715</span>&#160;</div><div class="line"><a name="l05716"></a><span class="lineno"> 5716</span>&#160;   <span class="keywordflow">if</span>( <a class="code" href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a>.debug &gt; 1 ){</div><div class="line"><a name="l05717"></a><span class="lineno"> 5717</span>&#160;      fprintf(stderr,<span class="stringliteral">&quot;-d writing nifti file &#39;%s&#39;...\n&quot;</span>, nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a1c7755060c9cca3612f1101684c9845f">fname</a>);</div><div class="line"><a name="l05718"></a><span class="lineno"> 5718</span>&#160;      <span class="keywordflow">if</span>( <a class="code" href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a>.debug &gt; 2 )</div><div class="line"><a name="l05719"></a><span class="lineno"> 5719</span>&#160;         fprintf(stderr,<span class="stringliteral">&quot;-d nifti type %d, offset %d\n&quot;</span>,</div><div class="line"><a name="l05720"></a><span class="lineno"> 5720</span>&#160;                 nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ac55996e58670948b220bebbf5d4bb0f4">nifti_type</a>, nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a856fc94a5daed16225264dc8daa96013">iname_offset</a>);</div><div class="line"><a name="l05721"></a><span class="lineno"> 5721</span>&#160;   }</div><div class="line"><a name="l05722"></a><span class="lineno"> 5722</span>&#160;</div><div class="line"><a name="l05723"></a><span class="lineno"> 5723</span>&#160;   <span class="keywordflow">if</span>( nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ac55996e58670948b220bebbf5d4bb0f4">nifti_type</a> == NIFTI_FTYPE_ASCII )   <span class="comment">/* non-standard case */</span></div><div class="line"><a name="l05724"></a><span class="lineno"> 5724</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d1/d14/nifti1__io_8c.html#ad66767a91af38b906c955fb45b9e225b">nifti_write_ascii_image</a>(nim,NBL,opts,write_data,leave_open);</div><div class="line"><a name="l05725"></a><span class="lineno"> 5725</span>&#160;</div><div class="line"><a name="l05726"></a><span class="lineno"> 5726</span>&#160;   nhdr = <a class="code" href="../../d1/d14/nifti1__io_8c.html#ad1d2054b280d453c7bf680fc21b587a3">nifti_convert_nim2nhdr</a>(nim);    <span class="comment">/* create the nifti1_header struct */</span></div><div class="line"><a name="l05727"></a><span class="lineno"> 5727</span>&#160;</div><div class="line"><a name="l05728"></a><span class="lineno"> 5728</span>&#160;   <span class="comment">/* if writing to 2 files, make sure iname is set and different from fname */</span></div><div class="line"><a name="l05729"></a><span class="lineno"> 5729</span>&#160;   <span class="keywordflow">if</span>( nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ac55996e58670948b220bebbf5d4bb0f4">nifti_type</a> != NIFTI_FTYPE_NIFTI1_1 ){</div><div class="line"><a name="l05730"></a><span class="lineno"> 5730</span>&#160;       <span class="keywordflow">if</span>( nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#aa99806d70cacff119b5b6089c3dfdeda">iname</a> &amp;&amp; strcmp(nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#aa99806d70cacff119b5b6089c3dfdeda">iname</a>,nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a1c7755060c9cca3612f1101684c9845f">fname</a>) == 0 ){</div><div class="line"><a name="l05731"></a><span class="lineno"> 5731</span>&#160;         free(nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#aa99806d70cacff119b5b6089c3dfdeda">iname</a>) ; nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#aa99806d70cacff119b5b6089c3dfdeda">iname</a> = NULL ;</div><div class="line"><a name="l05732"></a><span class="lineno"> 5732</span>&#160;       }</div><div class="line"><a name="l05733"></a><span class="lineno"> 5733</span>&#160;       <span class="keywordflow">if</span>( nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#aa99806d70cacff119b5b6089c3dfdeda">iname</a> == NULL ){ <span class="comment">/* then make a new one */</span></div><div class="line"><a name="l05734"></a><span class="lineno"> 5734</span>&#160;         nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#aa99806d70cacff119b5b6089c3dfdeda">iname</a> = <a class="code" href="../../d1/d14/nifti1__io_8c.html#a80ba47331f082db092ef29d11c64fa31">nifti_makeimgname</a>(nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a1c7755060c9cca3612f1101684c9845f">fname</a>,nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ac55996e58670948b220bebbf5d4bb0f4">nifti_type</a>,0,0);</div><div class="line"><a name="l05735"></a><span class="lineno"> 5735</span>&#160;         <span class="keywordflow">if</span>( nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#aa99806d70cacff119b5b6089c3dfdeda">iname</a> == NULL ) <span class="keywordflow">return</span> NULL;  </div><div class="line"><a name="l05736"></a><span class="lineno"> 5736</span>&#160;       }</div><div class="line"><a name="l05737"></a><span class="lineno"> 5737</span>&#160;   }</div><div class="line"><a name="l05738"></a><span class="lineno"> 5738</span>&#160;</div><div class="line"><a name="l05739"></a><span class="lineno"> 5739</span>&#160;   <span class="comment">/* if we have an imgfile and will write the header there, use it */</span></div><div class="line"><a name="l05740"></a><span class="lineno"> 5740</span>&#160;   <span class="keywordflow">if</span>( ! znz_isnull(imgfile) &amp;&amp; nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ac55996e58670948b220bebbf5d4bb0f4">nifti_type</a> == NIFTI_FTYPE_NIFTI1_1 ){</div><div class="line"><a name="l05741"></a><span class="lineno"> 5741</span>&#160;      <span class="keywordflow">if</span>( <a class="code" href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a>.debug &gt; 2 ) fprintf(stderr,<span class="stringliteral">&quot;+d using passed file for hdr\n&quot;</span>);</div><div class="line"><a name="l05742"></a><span class="lineno"> 5742</span>&#160;      fp = imgfile;</div><div class="line"><a name="l05743"></a><span class="lineno"> 5743</span>&#160;   }</div><div class="line"><a name="l05744"></a><span class="lineno"> 5744</span>&#160;   <span class="keywordflow">else</span> {</div><div class="line"><a name="l05745"></a><span class="lineno"> 5745</span>&#160;      <span class="keywordflow">if</span>( <a class="code" href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a>.debug &gt; 2 )</div><div class="line"><a name="l05746"></a><span class="lineno"> 5746</span>&#160;         fprintf(stderr,<span class="stringliteral">&quot;+d opening output file %s [%s]\n&quot;</span>,nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a1c7755060c9cca3612f1101684c9845f">fname</a>,opts);</div><div class="line"><a name="l05747"></a><span class="lineno"> 5747</span>&#160;      fp = znzopen( nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a1c7755060c9cca3612f1101684c9845f">fname</a> , opts , <a class="code" href="../../d1/d14/nifti1__io_8c.html#a6c17ed984533a4dede09b3bb6fa1fa17">nifti_is_gzfile</a>(nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a1c7755060c9cca3612f1101684c9845f">fname</a>) ) ;</div><div class="line"><a name="l05748"></a><span class="lineno"> 5748</span>&#160;      <span class="keywordflow">if</span>( znz_isnull(fp) ){</div><div class="line"><a name="l05749"></a><span class="lineno"> 5749</span>&#160;         LNI_FERR(func,<span class="stringliteral">&quot;cannot open output file&quot;</span>,nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a1c7755060c9cca3612f1101684c9845f">fname</a>);</div><div class="line"><a name="l05750"></a><span class="lineno"> 5750</span>&#160;         <span class="keywordflow">return</span> fp;</div><div class="line"><a name="l05751"></a><span class="lineno"> 5751</span>&#160;      }</div><div class="line"><a name="l05752"></a><span class="lineno"> 5752</span>&#160;   }</div><div class="line"><a name="l05753"></a><span class="lineno"> 5753</span>&#160;</div><div class="line"><a name="l05754"></a><span class="lineno"> 5754</span>&#160;   <span class="comment">/* write the header and extensions */</span></div><div class="line"><a name="l05755"></a><span class="lineno"> 5755</span>&#160;</div><div class="line"><a name="l05756"></a><span class="lineno"> 5756</span>&#160;   ss = znzwrite(&amp;nhdr , 1 , <span class="keyword">sizeof</span>(nhdr) , fp); <span class="comment">/* write header */</span></div><div class="line"><a name="l05757"></a><span class="lineno"> 5757</span>&#160;   <span class="keywordflow">if</span>( ss &lt; <span class="keyword">sizeof</span>(nhdr) ){</div><div class="line"><a name="l05758"></a><span class="lineno"> 5758</span>&#160;      LNI_FERR(func,<span class="stringliteral">&quot;bad header write to output file&quot;</span>,nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a1c7755060c9cca3612f1101684c9845f">fname</a>);</div><div class="line"><a name="l05759"></a><span class="lineno"> 5759</span>&#160;      znzclose(fp); <span class="keywordflow">return</span> fp;</div><div class="line"><a name="l05760"></a><span class="lineno"> 5760</span>&#160;   }</div><div class="line"><a name="l05761"></a><span class="lineno"> 5761</span>&#160;</div><div class="line"><a name="l05762"></a><span class="lineno"> 5762</span>&#160;   <span class="comment">/* partial file exists, and errors have been printed, so ignore return */</span></div><div class="line"><a name="l05763"></a><span class="lineno"> 5763</span>&#160;   <span class="keywordflow">if</span>( nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ac55996e58670948b220bebbf5d4bb0f4">nifti_type</a> != NIFTI_FTYPE_ANALYZE )</div><div class="line"><a name="l05764"></a><span class="lineno"> 5764</span>&#160;      (void)nifti_write_extensions(fp,nim);</div><div class="line"><a name="l05765"></a><span class="lineno"> 5765</span>&#160;</div><div class="line"><a name="l05766"></a><span class="lineno"> 5766</span>&#160;   <span class="comment">/* if the header is all we want, we are done */</span></div><div class="line"><a name="l05767"></a><span class="lineno"> 5767</span>&#160;   <span class="keywordflow">if</span>( ! write_data &amp;&amp; ! leave_open ){</div><div class="line"><a name="l05768"></a><span class="lineno"> 5768</span>&#160;      <span class="keywordflow">if</span>( <a class="code" href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a>.debug &gt; 2 ) fprintf(stderr,<span class="stringliteral">&quot;-d header is all we want: done\n&quot;</span>);</div><div class="line"><a name="l05769"></a><span class="lineno"> 5769</span>&#160;      znzclose(fp); <span class="keywordflow">return</span>(fp);</div><div class="line"><a name="l05770"></a><span class="lineno"> 5770</span>&#160;   }</div><div class="line"><a name="l05771"></a><span class="lineno"> 5771</span>&#160;</div><div class="line"><a name="l05772"></a><span class="lineno"> 5772</span>&#160;   <span class="keywordflow">if</span>( nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ac55996e58670948b220bebbf5d4bb0f4">nifti_type</a> != NIFTI_FTYPE_NIFTI1_1 ){ <span class="comment">/* get a new file pointer */</span></div><div class="line"><a name="l05773"></a><span class="lineno"> 5773</span>&#160;      znzclose(fp);         <span class="comment">/* first, close header file */</span></div><div class="line"><a name="l05774"></a><span class="lineno"> 5774</span>&#160;      <span class="keywordflow">if</span>( ! znz_isnull(imgfile) ){</div><div class="line"><a name="l05775"></a><span class="lineno"> 5775</span>&#160;         <span class="keywordflow">if</span>(<a class="code" href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a>.debug &gt; 2) fprintf(stderr,<span class="stringliteral">&quot;+d using passed file for img\n&quot;</span>);</div><div class="line"><a name="l05776"></a><span class="lineno"> 5776</span>&#160;         fp = imgfile;</div><div class="line"><a name="l05777"></a><span class="lineno"> 5777</span>&#160;      }</div><div class="line"><a name="l05778"></a><span class="lineno"> 5778</span>&#160;      <span class="keywordflow">else</span> {</div><div class="line"><a name="l05779"></a><span class="lineno"> 5779</span>&#160;         <span class="keywordflow">if</span>( <a class="code" href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a>.debug &gt; 2 )</div><div class="line"><a name="l05780"></a><span class="lineno"> 5780</span>&#160;            fprintf(stderr,<span class="stringliteral">&quot;+d opening img file &#39;%s&#39;\n&quot;</span>, nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#aa99806d70cacff119b5b6089c3dfdeda">iname</a>);</div><div class="line"><a name="l05781"></a><span class="lineno"> 5781</span>&#160;         fp = znzopen( nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#aa99806d70cacff119b5b6089c3dfdeda">iname</a> , opts , <a class="code" href="../../d1/d14/nifti1__io_8c.html#a6c17ed984533a4dede09b3bb6fa1fa17">nifti_is_gzfile</a>(nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#aa99806d70cacff119b5b6089c3dfdeda">iname</a>) ) ;</div><div class="line"><a name="l05782"></a><span class="lineno"> 5782</span>&#160;         <span class="keywordflow">if</span>( znz_isnull(fp) ) ERREX(<span class="stringliteral">&quot;cannot open image file&quot;</span>) ;</div><div class="line"><a name="l05783"></a><span class="lineno"> 5783</span>&#160;      }</div><div class="line"><a name="l05784"></a><span class="lineno"> 5784</span>&#160;   }</div><div class="line"><a name="l05785"></a><span class="lineno"> 5785</span>&#160;</div><div class="line"><a name="l05786"></a><span class="lineno"> 5786</span>&#160;   znzseek(fp, nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a856fc94a5daed16225264dc8daa96013">iname_offset</a>, SEEK_SET);  <span class="comment">/* in any case, seek to offset */</span></div><div class="line"><a name="l05787"></a><span class="lineno"> 5787</span>&#160;</div><div class="line"><a name="l05788"></a><span class="lineno"> 5788</span>&#160;   <span class="keywordflow">if</span>( write_data ) <a class="code" href="../../d1/d14/nifti1__io_8c.html#ab8f4f74b33a153219e5c47e6f8046bf3">nifti_write_all_data</a>(fp,nim,NBL);</div><div class="line"><a name="l05789"></a><span class="lineno"> 5789</span>&#160;   <span class="keywordflow">if</span>( ! leave_open ) znzclose(fp);</div><div class="line"><a name="l05790"></a><span class="lineno"> 5790</span>&#160;</div><div class="line"><a name="l05791"></a><span class="lineno"> 5791</span>&#160;   <span class="keywordflow">return</span> fp;</div><div class="line"><a name="l05792"></a><span class="lineno"> 5792</span>&#160;}</div><div class="ttc" id="structnifti__image_html_aa99806d70cacff119b5b6089c3dfdeda"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#aa99806d70cacff119b5b6089c3dfdeda">nifti_image::iname</a></div><div class="ttdeci">char * iname</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:161</div></div>
<div class="ttc" id="structnifti__1__header_html"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html">nifti_1_header</a></div><div class="ttdoc">Data structure defining the fields in the nifti1 header. This binary header should be found at the be...</div><div class="ttdef"><b>Definition:</b> nifti1.h:144</div></div>
<div class="ttc" id="nifti1__io_8c_html_ad1d2054b280d453c7bf680fc21b587a3"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#ad1d2054b280d453c7bf680fc21b587a3">nifti_convert_nim2nhdr</a></div><div class="ttdeci">struct nifti_1_header nifti_convert_nim2nhdr(const nifti_image *nim)</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:5407</div></div>
<div class="ttc" id="nifti1__io_8c_html_af37b47d8dcd832f0a2ea9758001ac622"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#af37b47d8dcd832f0a2ea9758001ac622">nifti_set_iname_offset</a></div><div class="ttdeci">void nifti_set_iname_offset(nifti_image *nim)</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:5613</div></div>
<div class="ttc" id="structnifti__image_html_a856fc94a5daed16225264dc8daa96013"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a856fc94a5daed16225264dc8daa96013">nifti_image::iname_offset</a></div><div class="ttdeci">int iname_offset</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:162</div></div>
<div class="ttc" id="structnifti__image_html_ac55996e58670948b220bebbf5d4bb0f4"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#ac55996e58670948b220bebbf5d4bb0f4">nifti_image::nifti_type</a></div><div class="ttdeci">int nifti_type</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:148</div></div>
<div class="ttc" id="nifti1__io_8c_html_a80ba47331f082db092ef29d11c64fa31"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#a80ba47331f082db092ef29d11c64fa31">nifti_makeimgname</a></div><div class="ttdeci">char * nifti_makeimgname(const char *prefix, int nifti_type, int check, int comp)</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:2985</div></div>
<div class="ttc" id="nifti1__io_8c_html_a6c17ed984533a4dede09b3bb6fa1fa17"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#a6c17ed984533a4dede09b3bb6fa1fa17">nifti_is_gzfile</a></div><div class="ttdeci">int nifti_is_gzfile(const char *fname)</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:2648</div></div>
<div class="ttc" id="nifti1__io_8c_html_a836b54d494e9d2718e5541978ae3fc29"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#a836b54d494e9d2718e5541978ae3fc29">nifti_validfilename</a></div><div class="ttdeci">int nifti_validfilename(const char *fname)</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:2550</div></div>
<div class="ttc" id="structnifti__image_html_a1c7755060c9cca3612f1101684c9845f"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a1c7755060c9cca3612f1101684c9845f">nifti_image::fname</a></div><div class="ttdeci">char * fname</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:160</div></div>
<div class="ttc" id="structnifti__image_html_a9c7db78ad411a6e2b8a8ab071bbbe0a8"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a9c7db78ad411a6e2b8a8ab071bbbe0a8">nifti_image::data</a></div><div class="ttdeci">void * data</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:165</div></div>
<div class="ttc" id="nifti1__io_8c_html_ab8f4f74b33a153219e5c47e6f8046bf3"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#ab8f4f74b33a153219e5c47e6f8046bf3">nifti_write_all_data</a></div><div class="ttdeci">int nifti_write_all_data(znzFile fp, nifti_image *nim, const nifti_brick_list *NBL)</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:5129</div></div>
<div class="ttc" id="nifti1__io_8c_html_ad66767a91af38b906c955fb45b9e225b"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#ad66767a91af38b906c955fb45b9e225b">nifti_write_ascii_image</a></div><div class="ttdeci">znzFile nifti_write_ascii_image(nifti_image *nim, const nifti_brick_list *NBL, const char *opts, int write_data, int leave_open)</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:5798</div></div>
<div class="ttc" id="nifti1__io_8c_html_a6e047e1dc2f826a4adff048bee8f5df7"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a></div><div class="ttdeci">static nifti_global_options g_opts</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:344</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a3354f25465b96de45211544ff6570e74"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3354f25465b96de45211544ff6570e74">&#9670;&nbsp;</a></span>nifti_intent_string()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* nifti_intent_string </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ii</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return a pointer to a string holding the name of a NIFTI intent type.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ii</td><td>NIfTI-1 intent code</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>pointer to static string describing code</dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>Do not free() or modify this string! It points to static storage.</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="../../dc/d1f/group__NIFTI1__INTENT__CODES.html" title="nifti1 intent codes, to describe intended meaning of dataset contents ">NIFTI1_INTENT_CODES</a> group in nifti1.h </dd></dl>
<div class="fragment"><div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;{</div><div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;   <span class="keywordflow">switch</span>( ii ){</div><div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;     <span class="keywordflow">case</span> NIFTI_INTENT_CORREL:     <span class="keywordflow">return</span> <span class="stringliteral">&quot;Correlation statistic&quot;</span> ;</div><div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;     <span class="keywordflow">case</span> <a class="code" href="../../dc/d1f/group__NIFTI1__INTENT__CODES.html#ga84ab612e611c71c52848c7aea27581fd">NIFTI_INTENT_TTEST</a>:      <span class="keywordflow">return</span> <span class="stringliteral">&quot;T-statistic&quot;</span> ;</div><div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;     <span class="keywordflow">case</span> <a class="code" href="../../dc/d1f/group__NIFTI1__INTENT__CODES.html#gab744c9d5e8891ef4d73913454a80d4cd">NIFTI_INTENT_FTEST</a>:      <span class="keywordflow">return</span> <span class="stringliteral">&quot;F-statistic&quot;</span> ;</div><div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;     <span class="keywordflow">case</span> <a class="code" href="../../dc/d1f/group__NIFTI1__INTENT__CODES.html#gae7c23a0c9b8d1819054b1b3e81da70a1">NIFTI_INTENT_ZSCORE</a>:     <span class="keywordflow">return</span> <span class="stringliteral">&quot;Z-score&quot;</span>     ;</div><div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;     <span class="keywordflow">case</span> <a class="code" href="../../dc/d1f/group__NIFTI1__INTENT__CODES.html#ga982823fd732a1c5c145eb762b0b28c77">NIFTI_INTENT_CHISQ</a>:      <span class="keywordflow">return</span> <span class="stringliteral">&quot;Chi-squared distribution&quot;</span> ;</div><div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;     <span class="keywordflow">case</span> <a class="code" href="../../dc/d1f/group__NIFTI1__INTENT__CODES.html#gaf118b42c87a475affe1cb7ff39b2e4bb">NIFTI_INTENT_BETA</a>:       <span class="keywordflow">return</span> <span class="stringliteral">&quot;Beta distribution&quot;</span> ;</div><div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;     <span class="keywordflow">case</span> <a class="code" href="../../dc/d1f/group__NIFTI1__INTENT__CODES.html#ga67a03c21e9077ed568b06ee1f2ec75a3">NIFTI_INTENT_BINOM</a>:      <span class="keywordflow">return</span> <span class="stringliteral">&quot;Binomial distribution&quot;</span> ;</div><div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;     <span class="keywordflow">case</span> <a class="code" href="../../dc/d1f/group__NIFTI1__INTENT__CODES.html#ga4f6b973488f64f3e6fda7ddbcd09d83e">NIFTI_INTENT_GAMMA</a>:      <span class="keywordflow">return</span> <span class="stringliteral">&quot;Gamma distribution&quot;</span> ;</div><div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;     <span class="keywordflow">case</span> <a class="code" href="../../dc/d1f/group__NIFTI1__INTENT__CODES.html#ga1e8492dbe60e4ce358cd49d4bfd0b3c6">NIFTI_INTENT_POISSON</a>:    <span class="keywordflow">return</span> <span class="stringliteral">&quot;Poisson distribution&quot;</span> ;</div><div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;     <span class="keywordflow">case</span> <a class="code" href="../../dc/d1f/group__NIFTI1__INTENT__CODES.html#gae185e35ddb509fdae6802fc6140838fa">NIFTI_INTENT_NORMAL</a>:     <span class="keywordflow">return</span> <span class="stringliteral">&quot;Normal distribution&quot;</span> ;</div><div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;     <span class="keywordflow">case</span> <a class="code" href="../../dc/d1f/group__NIFTI1__INTENT__CODES.html#ga808f36bb918469fa2c8f5b1e86e6a322">NIFTI_INTENT_FTEST_NONC</a>: <span class="keywordflow">return</span> <span class="stringliteral">&quot;F-statistic noncentral&quot;</span> ;</div><div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;     <span class="keywordflow">case</span> <a class="code" href="../../dc/d1f/group__NIFTI1__INTENT__CODES.html#ga27bd29bf806c73caf0fe055157d93695">NIFTI_INTENT_CHISQ_NONC</a>: <span class="keywordflow">return</span> <span class="stringliteral">&quot;Chi-squared noncentral&quot;</span> ;</div><div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;     <span class="keywordflow">case</span> <a class="code" href="../../dc/d1f/group__NIFTI1__INTENT__CODES.html#ga08101b266ebd17fbb746b10ad7686e95">NIFTI_INTENT_LOGISTIC</a>:   <span class="keywordflow">return</span> <span class="stringliteral">&quot;Logistic distribution&quot;</span> ;</div><div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;     <span class="keywordflow">case</span> <a class="code" href="../../dc/d1f/group__NIFTI1__INTENT__CODES.html#ga1897f1fd2c7c083e5dbe3056c93742e9">NIFTI_INTENT_LAPLACE</a>:    <span class="keywordflow">return</span> <span class="stringliteral">&quot;Laplace distribution&quot;</span> ;</div><div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;     <span class="keywordflow">case</span> <a class="code" href="../../dc/d1f/group__NIFTI1__INTENT__CODES.html#ga876d2d65a04c636b69048cdc4acaa697">NIFTI_INTENT_UNIFORM</a>:    <span class="keywordflow">return</span> <span class="stringliteral">&quot;Uniform distribition&quot;</span> ;</div><div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;     <span class="keywordflow">case</span> <a class="code" href="../../dc/d1f/group__NIFTI1__INTENT__CODES.html#gaef337ad2c0ea0d698d0d13c92532501c">NIFTI_INTENT_TTEST_NONC</a>: <span class="keywordflow">return</span> <span class="stringliteral">&quot;T-statistic noncentral&quot;</span> ;</div><div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;     <span class="keywordflow">case</span> <a class="code" href="../../dc/d1f/group__NIFTI1__INTENT__CODES.html#ga2c5885d5e6d7a98039455f8358923991">NIFTI_INTENT_WEIBULL</a>:    <span class="keywordflow">return</span> <span class="stringliteral">&quot;Weibull distribution&quot;</span> ;</div><div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;     <span class="keywordflow">case</span> <a class="code" href="../../dc/d1f/group__NIFTI1__INTENT__CODES.html#ga927bc217e6332cc414736be447c3e8d2">NIFTI_INTENT_CHI</a>:        <span class="keywordflow">return</span> <span class="stringliteral">&quot;Chi distribution&quot;</span> ;</div><div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;     <span class="keywordflow">case</span> <a class="code" href="../../dc/d1f/group__NIFTI1__INTENT__CODES.html#gae40fc7f839a4e3f41387b1d55d6eb5a0">NIFTI_INTENT_INVGAUSS</a>:   <span class="keywordflow">return</span> <span class="stringliteral">&quot;Inverse Gaussian distribution&quot;</span> ;</div><div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;     <span class="keywordflow">case</span> <a class="code" href="../../dc/d1f/group__NIFTI1__INTENT__CODES.html#ga29705d289bf7e8847716fdf6ee0bfa7d">NIFTI_INTENT_EXTVAL</a>:     <span class="keywordflow">return</span> <span class="stringliteral">&quot;Extreme Value distribution&quot;</span> ;</div><div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;     <span class="keywordflow">case</span> <a class="code" href="../../dc/d1f/group__NIFTI1__INTENT__CODES.html#ga111364b2f83b48a64f2d49d4541d1a4b">NIFTI_INTENT_PVAL</a>:       <span class="keywordflow">return</span> <span class="stringliteral">&quot;P-value&quot;</span> ;</div><div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;</div><div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;     <span class="keywordflow">case</span> <a class="code" href="../../dc/d1f/group__NIFTI1__INTENT__CODES.html#gaab09a5d0db8d2c1a4479638c8c0661ce">NIFTI_INTENT_LOGPVAL</a>:    <span class="keywordflow">return</span> <span class="stringliteral">&quot;Log P-value&quot;</span> ;</div><div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;     <span class="keywordflow">case</span> <a class="code" href="../../dc/d1f/group__NIFTI1__INTENT__CODES.html#ga4d2f0e4f4c62772506b48fea9ec5fdec">NIFTI_INTENT_LOG10PVAL</a>:  <span class="keywordflow">return</span> <span class="stringliteral">&quot;Log10 P-value&quot;</span> ;</div><div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;</div><div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;     <span class="keywordflow">case</span> <a class="code" href="../../dc/d1f/group__NIFTI1__INTENT__CODES.html#gaef336dc28dadfce293aadda671264a93">NIFTI_INTENT_ESTIMATE</a>:   <span class="keywordflow">return</span> <span class="stringliteral">&quot;Estimate&quot;</span> ;</div><div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;     <span class="keywordflow">case</span> <a class="code" href="../../dc/d1f/group__NIFTI1__INTENT__CODES.html#gace230337cfafd74b741509d3665b5777">NIFTI_INTENT_LABEL</a>:      <span class="keywordflow">return</span> <span class="stringliteral">&quot;Label index&quot;</span> ;</div><div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;     <span class="keywordflow">case</span> <a class="code" href="../../dc/d1f/group__NIFTI1__INTENT__CODES.html#ga25ee86d92c9e62308efaa6ce9aa8cd51">NIFTI_INTENT_NEURONAME</a>:  <span class="keywordflow">return</span> <span class="stringliteral">&quot;NeuroNames index&quot;</span> ;</div><div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;     <span class="keywordflow">case</span> <a class="code" href="../../dc/d1f/group__NIFTI1__INTENT__CODES.html#ga8e3cfdd7e1be9fd0bb801fa225435db8">NIFTI_INTENT_GENMATRIX</a>:  <span class="keywordflow">return</span> <span class="stringliteral">&quot;General matrix&quot;</span> ;</div><div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;     <span class="keywordflow">case</span> <a class="code" href="../../dc/d1f/group__NIFTI1__INTENT__CODES.html#gab6cd5413095cde3e72ee216a38f60178">NIFTI_INTENT_SYMMATRIX</a>:  <span class="keywordflow">return</span> <span class="stringliteral">&quot;Symmetric matrix&quot;</span> ;</div><div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;     <span class="keywordflow">case</span> <a class="code" href="../../dc/d1f/group__NIFTI1__INTENT__CODES.html#gafbbc9936500b51461f7c8bd4ff96ed43">NIFTI_INTENT_DISPVECT</a>:   <span class="keywordflow">return</span> <span class="stringliteral">&quot;Displacement vector&quot;</span> ;</div><div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;     <span class="keywordflow">case</span> NIFTI_INTENT_VECTOR:     <span class="keywordflow">return</span> <span class="stringliteral">&quot;Vector&quot;</span> ;</div><div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;     <span class="keywordflow">case</span> <a class="code" href="../../dc/d1f/group__NIFTI1__INTENT__CODES.html#ga124259beb28b9b08b279ec9b5196f90e">NIFTI_INTENT_POINTSET</a>:   <span class="keywordflow">return</span> <span class="stringliteral">&quot;Pointset&quot;</span> ;</div><div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;     <span class="keywordflow">case</span> <a class="code" href="../../dc/d1f/group__NIFTI1__INTENT__CODES.html#gae34eb51c5984233c4d1c30ae5f5d309f">NIFTI_INTENT_TRIANGLE</a>:   <span class="keywordflow">return</span> <span class="stringliteral">&quot;Triangle&quot;</span> ;</div><div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;     <span class="keywordflow">case</span> <a class="code" href="../../dc/d1f/group__NIFTI1__INTENT__CODES.html#ga69746985b119af3ca3e576fbf98396fb">NIFTI_INTENT_QUATERNION</a>: <span class="keywordflow">return</span> <span class="stringliteral">&quot;Quaternion&quot;</span> ;</div><div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;</div><div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;     <span class="keywordflow">case</span> <a class="code" href="../../dc/d1f/group__NIFTI1__INTENT__CODES.html#ga5014b482ea33b66e7ed2c000282e2260">NIFTI_INTENT_DIMLESS</a>:    <span class="keywordflow">return</span> <span class="stringliteral">&quot;Dimensionless number&quot;</span> ;</div><div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;   }</div><div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;   <span class="keywordflow">return</span> <span class="stringliteral">&quot;Unknown&quot;</span> ;</div><div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;}</div><div class="ttc" id="group__NIFTI1__INTENT__CODES_html_ga5014b482ea33b66e7ed2c000282e2260"><div class="ttname"><a href="../../dc/d1f/group__NIFTI1__INTENT__CODES.html#ga5014b482ea33b66e7ed2c000282e2260">NIFTI_INTENT_DIMLESS</a></div><div class="ttdeci">#define NIFTI_INTENT_DIMLESS</div><div class="ttdef"><b>Definition:</b> nifti1.h:916</div></div>
<div class="ttc" id="group__NIFTI1__INTENT__CODES_html_gae185e35ddb509fdae6802fc6140838fa"><div class="ttname"><a href="../../dc/d1f/group__NIFTI1__INTENT__CODES.html#gae185e35ddb509fdae6802fc6140838fa">NIFTI_INTENT_NORMAL</a></div><div class="ttdeci">#define NIFTI_INTENT_NORMAL</div><div class="ttdef"><b>Definition:</b> nifti1.h:733</div></div>
<div class="ttc" id="group__NIFTI1__INTENT__CODES_html_gaef337ad2c0ea0d698d0d13c92532501c"><div class="ttname"><a href="../../dc/d1f/group__NIFTI1__INTENT__CODES.html#gaef337ad2c0ea0d698d0d13c92532501c">NIFTI_INTENT_TTEST_NONC</a></div><div class="ttdeci">#define NIFTI_INTENT_TTEST_NONC</div><div class="ttdef"><b>Definition:</b> nifti1.h:765</div></div>
<div class="ttc" id="group__NIFTI1__INTENT__CODES_html_ga08101b266ebd17fbb746b10ad7686e95"><div class="ttname"><a href="../../dc/d1f/group__NIFTI1__INTENT__CODES.html#ga08101b266ebd17fbb746b10ad7686e95">NIFTI_INTENT_LOGISTIC</a></div><div class="ttdeci">#define NIFTI_INTENT_LOGISTIC</div><div class="ttdef"><b>Definition:</b> nifti1.h:750</div></div>
<div class="ttc" id="group__NIFTI1__INTENT__CODES_html_gafbbc9936500b51461f7c8bd4ff96ed43"><div class="ttname"><a href="../../dc/d1f/group__NIFTI1__INTENT__CODES.html#gafbbc9936500b51461f7c8bd4ff96ed43">NIFTI_INTENT_DISPVECT</a></div><div class="ttdeci">#define NIFTI_INTENT_DISPVECT</div><div class="ttdef"><b>Definition:</b> nifti1.h:875</div></div>
<div class="ttc" id="group__NIFTI1__INTENT__CODES_html_ga25ee86d92c9e62308efaa6ce9aa8cd51"><div class="ttname"><a href="../../dc/d1f/group__NIFTI1__INTENT__CODES.html#ga25ee86d92c9e62308efaa6ce9aa8cd51">NIFTI_INTENT_NEURONAME</a></div><div class="ttdeci">#define NIFTI_INTENT_NEURONAME</div><div class="ttdef"><b>Definition:</b> nifti1.h:839</div></div>
<div class="ttc" id="group__NIFTI1__INTENT__CODES_html_ga4d2f0e4f4c62772506b48fea9ec5fdec"><div class="ttname"><a href="../../dc/d1f/group__NIFTI1__INTENT__CODES.html#ga4d2f0e4f4c62772506b48fea9ec5fdec">NIFTI_INTENT_LOG10PVAL</a></div><div class="ttdeci">#define NIFTI_INTENT_LOG10PVAL</div><div class="ttdef"><b>Definition:</b> nifti1.h:812</div></div>
<div class="ttc" id="group__NIFTI1__INTENT__CODES_html_gab6cd5413095cde3e72ee216a38f60178"><div class="ttname"><a href="../../dc/d1f/group__NIFTI1__INTENT__CODES.html#gab6cd5413095cde3e72ee216a38f60178">NIFTI_INTENT_SYMMATRIX</a></div><div class="ttdeci">#define NIFTI_INTENT_SYMMATRIX</div><div class="ttdef"><b>Definition:</b> nifti1.h:866</div></div>
<div class="ttc" id="group__NIFTI1__INTENT__CODES_html_ga111364b2f83b48a64f2d49d4541d1a4b"><div class="ttname"><a href="../../dc/d1f/group__NIFTI1__INTENT__CODES.html#ga111364b2f83b48a64f2d49d4541d1a4b">NIFTI_INTENT_PVAL</a></div><div class="ttdeci">#define NIFTI_INTENT_PVAL</div><div class="ttdef"><b>Definition:</b> nifti1.h:797</div></div>
<div class="ttc" id="group__NIFTI1__INTENT__CODES_html_gace230337cfafd74b741509d3665b5777"><div class="ttname"><a href="../../dc/d1f/group__NIFTI1__INTENT__CODES.html#gace230337cfafd74b741509d3665b5777">NIFTI_INTENT_LABEL</a></div><div class="ttdeci">#define NIFTI_INTENT_LABEL</div><div class="ttdef"><b>Definition:</b> nifti1.h:834</div></div>
<div class="ttc" id="group__NIFTI1__INTENT__CODES_html_gae7c23a0c9b8d1819054b1b3e81da70a1"><div class="ttname"><a href="../../dc/d1f/group__NIFTI1__INTENT__CODES.html#gae7c23a0c9b8d1819054b1b3e81da70a1">NIFTI_INTENT_ZSCORE</a></div><div class="ttdeci">#define NIFTI_INTENT_ZSCORE</div><div class="ttdef"><b>Definition:</b> nifti1.h:701</div></div>
<div class="ttc" id="group__NIFTI1__INTENT__CODES_html_ga1e8492dbe60e4ce358cd49d4bfd0b3c6"><div class="ttname"><a href="../../dc/d1f/group__NIFTI1__INTENT__CODES.html#ga1e8492dbe60e4ce358cd49d4bfd0b3c6">NIFTI_INTENT_POISSON</a></div><div class="ttdeci">#define NIFTI_INTENT_POISSON</div><div class="ttdef"><b>Definition:</b> nifti1.h:728</div></div>
<div class="ttc" id="group__NIFTI1__INTENT__CODES_html_ga29705d289bf7e8847716fdf6ee0bfa7d"><div class="ttname"><a href="../../dc/d1f/group__NIFTI1__INTENT__CODES.html#ga29705d289bf7e8847716fdf6ee0bfa7d">NIFTI_INTENT_EXTVAL</a></div><div class="ttdeci">#define NIFTI_INTENT_EXTVAL</div><div class="ttdef"><b>Definition:</b> nifti1.h:793</div></div>
<div class="ttc" id="group__NIFTI1__INTENT__CODES_html_ga69746985b119af3ca3e576fbf98396fb"><div class="ttname"><a href="../../dc/d1f/group__NIFTI1__INTENT__CODES.html#ga69746985b119af3ca3e576fbf98396fb">NIFTI_INTENT_QUATERNION</a></div><div class="ttdeci">#define NIFTI_INTENT_QUATERNION</div><div class="ttdef"><b>Definition:</b> nifti1.h:911</div></div>
<div class="ttc" id="group__NIFTI1__INTENT__CODES_html_ga1897f1fd2c7c083e5dbe3056c93742e9"><div class="ttname"><a href="../../dc/d1f/group__NIFTI1__INTENT__CODES.html#ga1897f1fd2c7c083e5dbe3056c93742e9">NIFTI_INTENT_LAPLACE</a></div><div class="ttdeci">#define NIFTI_INTENT_LAPLACE</div><div class="ttdef"><b>Definition:</b> nifti1.h:756</div></div>
<div class="ttc" id="group__NIFTI1__INTENT__CODES_html_ga27bd29bf806c73caf0fe055157d93695"><div class="ttname"><a href="../../dc/d1f/group__NIFTI1__INTENT__CODES.html#ga27bd29bf806c73caf0fe055157d93695">NIFTI_INTENT_CHISQ_NONC</a></div><div class="ttdeci">#define NIFTI_INTENT_CHISQ_NONC</div><div class="ttdef"><b>Definition:</b> nifti1.h:744</div></div>
<div class="ttc" id="group__NIFTI1__INTENT__CODES_html_gaf118b42c87a475affe1cb7ff39b2e4bb"><div class="ttname"><a href="../../dc/d1f/group__NIFTI1__INTENT__CODES.html#gaf118b42c87a475affe1cb7ff39b2e4bb">NIFTI_INTENT_BETA</a></div><div class="ttdeci">#define NIFTI_INTENT_BETA</div><div class="ttdef"><b>Definition:</b> nifti1.h:711</div></div>
<div class="ttc" id="group__NIFTI1__INTENT__CODES_html_ga8e3cfdd7e1be9fd0bb801fa225435db8"><div class="ttname"><a href="../../dc/d1f/group__NIFTI1__INTENT__CODES.html#ga8e3cfdd7e1be9fd0bb801fa225435db8">NIFTI_INTENT_GENMATRIX</a></div><div class="ttdeci">#define NIFTI_INTENT_GENMATRIX</div><div class="ttdef"><b>Definition:</b> nifti1.h:853</div></div>
<div class="ttc" id="group__NIFTI1__INTENT__CODES_html_ga876d2d65a04c636b69048cdc4acaa697"><div class="ttname"><a href="../../dc/d1f/group__NIFTI1__INTENT__CODES.html#ga876d2d65a04c636b69048cdc4acaa697">NIFTI_INTENT_UNIFORM</a></div><div class="ttdeci">#define NIFTI_INTENT_UNIFORM</div><div class="ttdef"><b>Definition:</b> nifti1.h:760</div></div>
<div class="ttc" id="group__NIFTI1__INTENT__CODES_html_gaab09a5d0db8d2c1a4479638c8c0661ce"><div class="ttname"><a href="../../dc/d1f/group__NIFTI1__INTENT__CODES.html#gaab09a5d0db8d2c1a4479638c8c0661ce">NIFTI_INTENT_LOGPVAL</a></div><div class="ttdeci">#define NIFTI_INTENT_LOGPVAL</div><div class="ttdef"><b>Definition:</b> nifti1.h:805</div></div>
<div class="ttc" id="group__NIFTI1__INTENT__CODES_html_ga124259beb28b9b08b279ec9b5196f90e"><div class="ttname"><a href="../../dc/d1f/group__NIFTI1__INTENT__CODES.html#ga124259beb28b9b08b279ec9b5196f90e">NIFTI_INTENT_POINTSET</a></div><div class="ttdeci">#define NIFTI_INTENT_POINTSET</div><div class="ttdef"><b>Definition:</b> nifti1.h:889</div></div>
<div class="ttc" id="group__NIFTI1__INTENT__CODES_html_gae40fc7f839a4e3f41387b1d55d6eb5a0"><div class="ttname"><a href="../../dc/d1f/group__NIFTI1__INTENT__CODES.html#gae40fc7f839a4e3f41387b1d55d6eb5a0">NIFTI_INTENT_INVGAUSS</a></div><div class="ttdeci">#define NIFTI_INTENT_INVGAUSS</div><div class="ttdef"><b>Definition:</b> nifti1.h:787</div></div>
<div class="ttc" id="group__NIFTI1__INTENT__CODES_html_ga4f6b973488f64f3e6fda7ddbcd09d83e"><div class="ttname"><a href="../../dc/d1f/group__NIFTI1__INTENT__CODES.html#ga4f6b973488f64f3e6fda7ddbcd09d83e">NIFTI_INTENT_GAMMA</a></div><div class="ttdeci">#define NIFTI_INTENT_GAMMA</div><div class="ttdef"><b>Definition:</b> nifti1.h:723</div></div>
<div class="ttc" id="group__NIFTI1__INTENT__CODES_html_ga927bc217e6332cc414736be447c3e8d2"><div class="ttname"><a href="../../dc/d1f/group__NIFTI1__INTENT__CODES.html#ga927bc217e6332cc414736be447c3e8d2">NIFTI_INTENT_CHI</a></div><div class="ttdeci">#define NIFTI_INTENT_CHI</div><div class="ttdef"><b>Definition:</b> nifti1.h:780</div></div>
<div class="ttc" id="group__NIFTI1__INTENT__CODES_html_ga808f36bb918469fa2c8f5b1e86e6a322"><div class="ttname"><a href="../../dc/d1f/group__NIFTI1__INTENT__CODES.html#ga808f36bb918469fa2c8f5b1e86e6a322">NIFTI_INTENT_FTEST_NONC</a></div><div class="ttdeci">#define NIFTI_INTENT_FTEST_NONC</div><div class="ttdef"><b>Definition:</b> nifti1.h:739</div></div>
<div class="ttc" id="group__NIFTI1__INTENT__CODES_html_gaef336dc28dadfce293aadda671264a93"><div class="ttname"><a href="../../dc/d1f/group__NIFTI1__INTENT__CODES.html#gaef336dc28dadfce293aadda671264a93">NIFTI_INTENT_ESTIMATE</a></div><div class="ttdeci">#define NIFTI_INTENT_ESTIMATE</div><div class="ttdef"><b>Definition:</b> nifti1.h:828</div></div>
<div class="ttc" id="group__NIFTI1__INTENT__CODES_html_ga2c5885d5e6d7a98039455f8358923991"><div class="ttname"><a href="../../dc/d1f/group__NIFTI1__INTENT__CODES.html#ga2c5885d5e6d7a98039455f8358923991">NIFTI_INTENT_WEIBULL</a></div><div class="ttdeci">#define NIFTI_INTENT_WEIBULL</div><div class="ttdef"><b>Definition:</b> nifti1.h:772</div></div>
<div class="ttc" id="group__NIFTI1__INTENT__CODES_html_ga84ab612e611c71c52848c7aea27581fd"><div class="ttname"><a href="../../dc/d1f/group__NIFTI1__INTENT__CODES.html#ga84ab612e611c71c52848c7aea27581fd">NIFTI_INTENT_TTEST</a></div><div class="ttdeci">#define NIFTI_INTENT_TTEST</div><div class="ttdef"><b>Definition:</b> nifti1.h:692</div></div>
<div class="ttc" id="group__NIFTI1__INTENT__CODES_html_ga67a03c21e9077ed568b06ee1f2ec75a3"><div class="ttname"><a href="../../dc/d1f/group__NIFTI1__INTENT__CODES.html#ga67a03c21e9077ed568b06ee1f2ec75a3">NIFTI_INTENT_BINOM</a></div><div class="ttdeci">#define NIFTI_INTENT_BINOM</div><div class="ttdef"><b>Definition:</b> nifti1.h:717</div></div>
<div class="ttc" id="group__NIFTI1__INTENT__CODES_html_gae34eb51c5984233c4d1c30ae5f5d309f"><div class="ttname"><a href="../../dc/d1f/group__NIFTI1__INTENT__CODES.html#gae34eb51c5984233c4d1c30ae5f5d309f">NIFTI_INTENT_TRIANGLE</a></div><div class="ttdeci">#define NIFTI_INTENT_TRIANGLE</div><div class="ttdef"><b>Definition:</b> nifti1.h:902</div></div>
<div class="ttc" id="group__NIFTI1__INTENT__CODES_html_gab744c9d5e8891ef4d73913454a80d4cd"><div class="ttname"><a href="../../dc/d1f/group__NIFTI1__INTENT__CODES.html#gab744c9d5e8891ef4d73913454a80d4cd">NIFTI_INTENT_FTEST</a></div><div class="ttdeci">#define NIFTI_INTENT_FTEST</div><div class="ttdef"><b>Definition:</b> nifti1.h:697</div></div>
<div class="ttc" id="group__NIFTI1__INTENT__CODES_html_ga982823fd732a1c5c145eb762b0b28c77"><div class="ttname"><a href="../../dc/d1f/group__NIFTI1__INTENT__CODES.html#ga982823fd732a1c5c145eb762b0b28c77">NIFTI_INTENT_CHISQ</a></div><div class="ttdeci">#define NIFTI_INTENT_CHISQ</div><div class="ttdef"><b>Definition:</b> nifti1.h:706</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad1eede55fd34a457e1738aa9d0f75036"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad1eede55fd34a457e1738aa9d0f75036">&#9670;&nbsp;</a></span>nifti_is_complete_filename()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int nifti_is_complete_filename </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>fname</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>return whether the filename is valid</p>
<p>Note: uppercase extensions are now valid. 27 Apr 2009 [rickr]</p>
<p>The name is considered valid if the file basename has length greater than zero, AND one of the valid nifti extensions is provided. </p><h1>fname input | return | </h1>
<p>"myimage" | 0 | "myimage.tif" | 0 | "myimage.tif.gz" | 0 | "myimage.nii" | 1 | ".nii" | 0 | ".myhiddenimage" | 0 | ".myhiddenimage.nii" | 1 | </p>
<div class="fragment"><div class="line"><a name="l02507"></a><span class="lineno"> 2507</span>&#160;{</div><div class="line"><a name="l02508"></a><span class="lineno"> 2508</span>&#160;   <span class="keywordtype">char</span> * ext;</div><div class="line"><a name="l02509"></a><span class="lineno"> 2509</span>&#160;</div><div class="line"><a name="l02510"></a><span class="lineno"> 2510</span>&#160;   <span class="comment">/* check input file(s) for sanity */</span></div><div class="line"><a name="l02511"></a><span class="lineno"> 2511</span>&#160;   <span class="keywordflow">if</span>( fname == NULL || *fname == <span class="charliteral">&#39;\0&#39;</span> ){</div><div class="line"><a name="l02512"></a><span class="lineno"> 2512</span>&#160;      <span class="keywordflow">if</span> ( <a class="code" href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a>.debug &gt; 1 )</div><div class="line"><a name="l02513"></a><span class="lineno"> 2513</span>&#160;         fprintf(stderr,<span class="stringliteral">&quot;-- empty filename in nifti_validfilename()\n&quot;</span>);</div><div class="line"><a name="l02514"></a><span class="lineno"> 2514</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02515"></a><span class="lineno"> 2515</span>&#160;   }</div><div class="line"><a name="l02516"></a><span class="lineno"> 2516</span>&#160;</div><div class="line"><a name="l02517"></a><span class="lineno"> 2517</span>&#160;   ext = <a class="code" href="../../d1/d14/nifti1__io_8c.html#a338a5f9b74c37ee28ca8683324434a05">nifti_find_file_extension</a>(fname);</div><div class="line"><a name="l02518"></a><span class="lineno"> 2518</span>&#160;   <span class="keywordflow">if</span> ( ext == NULL ) { <span class="comment">/*Invalid extension given */</span></div><div class="line"><a name="l02519"></a><span class="lineno"> 2519</span>&#160;      <span class="keywordflow">if</span> ( <a class="code" href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a>.debug &gt; 0 )</div><div class="line"><a name="l02520"></a><span class="lineno"> 2520</span>&#160;         fprintf(stderr,<span class="stringliteral">&quot;-- no nifti valid extension for filename &#39;%s&#39;\n&quot;</span>, fname);</div><div class="line"><a name="l02521"></a><span class="lineno"> 2521</span>&#160;       <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02522"></a><span class="lineno"> 2522</span>&#160;   }</div><div class="line"><a name="l02523"></a><span class="lineno"> 2523</span>&#160;</div><div class="line"><a name="l02524"></a><span class="lineno"> 2524</span>&#160;   <span class="keywordflow">if</span> ( ext &amp;&amp; ext == fname ) {   <span class="comment">/* then no filename prefix */</span></div><div class="line"><a name="l02525"></a><span class="lineno"> 2525</span>&#160;      <span class="keywordflow">if</span> ( <a class="code" href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a>.debug &gt; 0 )</div><div class="line"><a name="l02526"></a><span class="lineno"> 2526</span>&#160;         fprintf(stderr,<span class="stringliteral">&quot;-- no prefix for filename &#39;%s&#39;\n&quot;</span>, fname);</div><div class="line"><a name="l02527"></a><span class="lineno"> 2527</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02528"></a><span class="lineno"> 2528</span>&#160;   }</div><div class="line"><a name="l02529"></a><span class="lineno"> 2529</span>&#160;   <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l02530"></a><span class="lineno"> 2530</span>&#160;}</div><div class="ttc" id="nifti1__io_8c_html_a338a5f9b74c37ee28ca8683324434a05"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#a338a5f9b74c37ee28ca8683324434a05">nifti_find_file_extension</a></div><div class="ttdeci">char * nifti_find_file_extension(const char *name)</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:2583</div></div>
<div class="ttc" id="nifti1__io_8c_html_a6e047e1dc2f826a4adff048bee8f5df7"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a></div><div class="ttdeci">static nifti_global_options g_opts</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:344</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6c17ed984533a4dede09b3bb6fa1fa17"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6c17ed984533a4dede09b3bb6fa1fa17">&#9670;&nbsp;</a></span>nifti_is_gzfile()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int nifti_is_gzfile </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>fname</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>return whether the filename ends in ".gz" </p>
<div class="fragment"><div class="line"><a name="l02649"></a><span class="lineno"> 2649</span>&#160;{</div><div class="line"><a name="l02650"></a><span class="lineno"> 2650</span>&#160;  <span class="comment">/* return true if the filename ends with .gz */</span></div><div class="line"><a name="l02651"></a><span class="lineno"> 2651</span>&#160;  <span class="keywordflow">if</span> (fname == NULL) { <span class="keywordflow">return</span> 0; }</div><div class="line"><a name="l02652"></a><span class="lineno"> 2652</span>&#160;<span class="preprocessor">#ifdef HAVE_ZLIB</span></div><div class="line"><a name="l02653"></a><span class="lineno"> 2653</span>&#160;  { <span class="comment">/* just so len doesn&#39;t generate compile warning */</span></div><div class="line"><a name="l02654"></a><span class="lineno"> 2654</span>&#160;     <span class="keywordtype">int</span> len;</div><div class="line"><a name="l02655"></a><span class="lineno"> 2655</span>&#160;     len = (int)strlen(fname);</div><div class="line"><a name="l02656"></a><span class="lineno"> 2656</span>&#160;     <span class="keywordflow">if</span> (len &lt; 3) <span class="keywordflow">return</span> 0;  <span class="comment">/* so we don&#39;t search before the name */</span></div><div class="line"><a name="l02657"></a><span class="lineno"> 2657</span>&#160;     <span class="keywordflow">if</span> (fileext_compare(fname + strlen(fname) - 3,<span class="stringliteral">&quot;.gz&quot;</span>)==0) { <span class="keywordflow">return</span> 1; }</div><div class="line"><a name="l02658"></a><span class="lineno"> 2658</span>&#160;  }</div><div class="line"><a name="l02659"></a><span class="lineno"> 2659</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l02660"></a><span class="lineno"> 2660</span>&#160;  <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02661"></a><span class="lineno"> 2661</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a id="a2d77002f1a31d0651eaa2462d6273169"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2d77002f1a31d0651eaa2462d6273169">&#9670;&nbsp;</a></span>nifti_is_inttype()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int nifti_is_inttype </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>dt</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Determine if the datatype code dt is an integer type (1=YES, 0=NO).</p>
<dl class="section return"><dt>Returns</dt><dd>whether the given NIfTI-1 datatype code is valid</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="../../d7/de9/group__NIFTI1__DATATYPES.html" title="nifti1 datatype codes ">NIFTI1_DATATYPES</a> group in nifti1.h </dd></dl>
<div class="fragment"><div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;{</div><div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;   <span class="keywordflow">switch</span>( dt ){</div><div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;     <span class="keywordflow">case</span> DT_UNKNOWN:    <span class="keywordflow">return</span> 0 ;</div><div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;     <span class="keywordflow">case</span> DT_BINARY:     <span class="keywordflow">return</span> 0 ;</div><div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;     <span class="keywordflow">case</span> DT_INT8:       <span class="keywordflow">return</span> 1 ;</div><div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;     <span class="keywordflow">case</span> DT_UINT8:      <span class="keywordflow">return</span> 1 ;</div><div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;     <span class="keywordflow">case</span> DT_INT16:      <span class="keywordflow">return</span> 1 ;</div><div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;     <span class="keywordflow">case</span> DT_UINT16:     <span class="keywordflow">return</span> 1 ;</div><div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;     <span class="keywordflow">case</span> DT_INT32:      <span class="keywordflow">return</span> 1 ;</div><div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;     <span class="keywordflow">case</span> DT_UINT32:     <span class="keywordflow">return</span> 1 ;</div><div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;     <span class="keywordflow">case</span> DT_INT64:      <span class="keywordflow">return</span> 1 ;</div><div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;     <span class="keywordflow">case</span> DT_UINT64:     <span class="keywordflow">return</span> 1 ;</div><div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;     <span class="keywordflow">case</span> DT_FLOAT32:    <span class="keywordflow">return</span> 0 ;</div><div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;     <span class="keywordflow">case</span> DT_FLOAT64:    <span class="keywordflow">return</span> 0 ;</div><div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;     <span class="keywordflow">case</span> DT_FLOAT128:   <span class="keywordflow">return</span> 0 ;</div><div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;     <span class="keywordflow">case</span> DT_COMPLEX64:  <span class="keywordflow">return</span> 0 ;</div><div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;     <span class="keywordflow">case</span> DT_COMPLEX128: <span class="keywordflow">return</span> 0 ;</div><div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;     <span class="keywordflow">case</span> DT_COMPLEX256: <span class="keywordflow">return</span> 0 ;</div><div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;     <span class="keywordflow">case</span> DT_RGB24:      <span class="keywordflow">return</span> 1 ;</div><div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;     <span class="keywordflow">case</span> DT_RGBA32:     <span class="keywordflow">return</span> 1 ;</div><div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;   }</div><div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;   <span class="keywordflow">return</span> 0 ;</div><div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a id="ab03e74e929ca87ec226bd2e59899fc95"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab03e74e929ca87ec226bd2e59899fc95">&#9670;&nbsp;</a></span>nifti_is_valid_datatype()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int nifti_is_valid_datatype </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>dtype</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>check whether the given type is on the "approved" list</p>
<p>The type is explicitly checked against the NIFTI_TYPE_* list in nifti1.h.</p>
<dl class="section return"><dt>Returns</dt><dd>1 if dtype is valid, 0 otherwise </dd></dl>
<dl class="section see"><dt>See also</dt><dd>NIFTI_TYPE_* codes in nifti1.h </dd></dl>
<div class="fragment"><div class="line"><a name="l03348"></a><span class="lineno"> 3348</span>&#160;{</div><div class="line"><a name="l03349"></a><span class="lineno"> 3349</span>&#160;   <span class="keywordflow">if</span>( dtype == <a class="code" href="../../db/d91/group__NIFTI1__DATATYPE__ALIASES.html#ga1ef0dc17948c65b6a7311fe96ddfc441">NIFTI_TYPE_UINT8</a>        ||</div><div class="line"><a name="l03350"></a><span class="lineno"> 3350</span>&#160;       dtype == <a class="code" href="../../db/d91/group__NIFTI1__DATATYPE__ALIASES.html#ga746b4eba0eaaac6366b232b46f590f48">NIFTI_TYPE_INT16</a>        ||</div><div class="line"><a name="l03351"></a><span class="lineno"> 3351</span>&#160;       dtype == <a class="code" href="../../db/d91/group__NIFTI1__DATATYPE__ALIASES.html#ga9bf4e01d93f73a1eaf8966f387e65999">NIFTI_TYPE_INT32</a>        ||</div><div class="line"><a name="l03352"></a><span class="lineno"> 3352</span>&#160;       dtype == <a class="code" href="../../db/d91/group__NIFTI1__DATATYPE__ALIASES.html#ga8220ccec425b9387abf3d2b71ac0be7e">NIFTI_TYPE_FLOAT32</a>      ||</div><div class="line"><a name="l03353"></a><span class="lineno"> 3353</span>&#160;       dtype == <a class="code" href="../../db/d91/group__NIFTI1__DATATYPE__ALIASES.html#ga9ae010c2ff48380fcb611c06048956c5">NIFTI_TYPE_COMPLEX64</a>    ||</div><div class="line"><a name="l03354"></a><span class="lineno"> 3354</span>&#160;       dtype == <a class="code" href="../../db/d91/group__NIFTI1__DATATYPE__ALIASES.html#ga1253a2540a68b4dd7a5d78bc8c4c2a4d">NIFTI_TYPE_FLOAT64</a>      ||</div><div class="line"><a name="l03355"></a><span class="lineno"> 3355</span>&#160;       dtype == <a class="code" href="../../db/d91/group__NIFTI1__DATATYPE__ALIASES.html#gabad329a29f5f3b65c1e4de114d7bb06b">NIFTI_TYPE_RGB24</a>        ||</div><div class="line"><a name="l03356"></a><span class="lineno"> 3356</span>&#160;       dtype == <a class="code" href="../../db/d91/group__NIFTI1__DATATYPE__ALIASES.html#ga6ee4807e271d77790cdc6c0dd3220fcb">NIFTI_TYPE_RGBA32</a>       ||</div><div class="line"><a name="l03357"></a><span class="lineno"> 3357</span>&#160;       dtype == <a class="code" href="../../db/d91/group__NIFTI1__DATATYPE__ALIASES.html#ga7ed8fda7096e3ff6d4051cd73d708688">NIFTI_TYPE_INT8</a>         ||</div><div class="line"><a name="l03358"></a><span class="lineno"> 3358</span>&#160;       dtype == <a class="code" href="../../db/d91/group__NIFTI1__DATATYPE__ALIASES.html#ga253e4b750f2aa75a3efdac232663b85c">NIFTI_TYPE_UINT16</a>       ||</div><div class="line"><a name="l03359"></a><span class="lineno"> 3359</span>&#160;       dtype == <a class="code" href="../../db/d91/group__NIFTI1__DATATYPE__ALIASES.html#ga75125d71779526934b59d4d402b5fe10">NIFTI_TYPE_UINT32</a>       ||</div><div class="line"><a name="l03360"></a><span class="lineno"> 3360</span>&#160;       dtype == <a class="code" href="../../db/d91/group__NIFTI1__DATATYPE__ALIASES.html#ga68fa86838cb29705b5a8ffc9ac158419">NIFTI_TYPE_INT64</a>        ||</div><div class="line"><a name="l03361"></a><span class="lineno"> 3361</span>&#160;       dtype == <a class="code" href="../../db/d91/group__NIFTI1__DATATYPE__ALIASES.html#gab8a45494d65119cdd94df359ee18b94b">NIFTI_TYPE_UINT64</a>       ||</div><div class="line"><a name="l03362"></a><span class="lineno"> 3362</span>&#160;       dtype == <a class="code" href="../../db/d91/group__NIFTI1__DATATYPE__ALIASES.html#ga33274f22307e976a90c24917467e6c56">NIFTI_TYPE_FLOAT128</a>     ||</div><div class="line"><a name="l03363"></a><span class="lineno"> 3363</span>&#160;       dtype == <a class="code" href="../../db/d91/group__NIFTI1__DATATYPE__ALIASES.html#ga65e61452b861209be2eb1a5a96556ca9">NIFTI_TYPE_COMPLEX128</a>   ||</div><div class="line"><a name="l03364"></a><span class="lineno"> 3364</span>&#160;       dtype == <a class="code" href="../../db/d91/group__NIFTI1__DATATYPE__ALIASES.html#ga08c3af37cce4c1dd34703d1fbbdf9129">NIFTI_TYPE_COMPLEX256</a> ) <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l03365"></a><span class="lineno"> 3365</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03366"></a><span class="lineno"> 3366</span>&#160;}</div><div class="ttc" id="group__NIFTI1__DATATYPE__ALIASES_html_ga8220ccec425b9387abf3d2b71ac0be7e"><div class="ttname"><a href="../../db/d91/group__NIFTI1__DATATYPE__ALIASES.html#ga8220ccec425b9387abf3d2b71ac0be7e">NIFTI_TYPE_FLOAT32</a></div><div class="ttdeci">#define NIFTI_TYPE_FLOAT32</div><div class="ttdef"><b>Definition:</b> nifti1.h:531</div></div>
<div class="ttc" id="group__NIFTI1__DATATYPE__ALIASES_html_ga1ef0dc17948c65b6a7311fe96ddfc441"><div class="ttname"><a href="../../db/d91/group__NIFTI1__DATATYPE__ALIASES.html#ga1ef0dc17948c65b6a7311fe96ddfc441">NIFTI_TYPE_UINT8</a></div><div class="ttdeci">#define NIFTI_TYPE_UINT8</div><div class="ttdef"><b>Definition:</b> nifti1.h:525</div></div>
<div class="ttc" id="group__NIFTI1__DATATYPE__ALIASES_html_ga33274f22307e976a90c24917467e6c56"><div class="ttname"><a href="../../db/d91/group__NIFTI1__DATATYPE__ALIASES.html#ga33274f22307e976a90c24917467e6c56">NIFTI_TYPE_FLOAT128</a></div><div class="ttdeci">#define NIFTI_TYPE_FLOAT128</div><div class="ttdef"><b>Definition:</b> nifti1.h:549</div></div>
<div class="ttc" id="group__NIFTI1__DATATYPE__ALIASES_html_ga75125d71779526934b59d4d402b5fe10"><div class="ttname"><a href="../../db/d91/group__NIFTI1__DATATYPE__ALIASES.html#ga75125d71779526934b59d4d402b5fe10">NIFTI_TYPE_UINT32</a></div><div class="ttdeci">#define NIFTI_TYPE_UINT32</div><div class="ttdef"><b>Definition:</b> nifti1.h:543</div></div>
<div class="ttc" id="group__NIFTI1__DATATYPE__ALIASES_html_ga9bf4e01d93f73a1eaf8966f387e65999"><div class="ttname"><a href="../../db/d91/group__NIFTI1__DATATYPE__ALIASES.html#ga9bf4e01d93f73a1eaf8966f387e65999">NIFTI_TYPE_INT32</a></div><div class="ttdeci">#define NIFTI_TYPE_INT32</div><div class="ttdef"><b>Definition:</b> nifti1.h:529</div></div>
<div class="ttc" id="group__NIFTI1__DATATYPE__ALIASES_html_ga65e61452b861209be2eb1a5a96556ca9"><div class="ttname"><a href="../../db/d91/group__NIFTI1__DATATYPE__ALIASES.html#ga65e61452b861209be2eb1a5a96556ca9">NIFTI_TYPE_COMPLEX128</a></div><div class="ttdeci">#define NIFTI_TYPE_COMPLEX128</div><div class="ttdef"><b>Definition:</b> nifti1.h:551</div></div>
<div class="ttc" id="group__NIFTI1__DATATYPE__ALIASES_html_ga68fa86838cb29705b5a8ffc9ac158419"><div class="ttname"><a href="../../db/d91/group__NIFTI1__DATATYPE__ALIASES.html#ga68fa86838cb29705b5a8ffc9ac158419">NIFTI_TYPE_INT64</a></div><div class="ttdeci">#define NIFTI_TYPE_INT64</div><div class="ttdef"><b>Definition:</b> nifti1.h:545</div></div>
<div class="ttc" id="group__NIFTI1__DATATYPE__ALIASES_html_ga6ee4807e271d77790cdc6c0dd3220fcb"><div class="ttname"><a href="../../db/d91/group__NIFTI1__DATATYPE__ALIASES.html#ga6ee4807e271d77790cdc6c0dd3220fcb">NIFTI_TYPE_RGBA32</a></div><div class="ttdeci">#define NIFTI_TYPE_RGBA32</div><div class="ttdef"><b>Definition:</b> nifti1.h:555</div></div>
<div class="ttc" id="group__NIFTI1__DATATYPE__ALIASES_html_ga9ae010c2ff48380fcb611c06048956c5"><div class="ttname"><a href="../../db/d91/group__NIFTI1__DATATYPE__ALIASES.html#ga9ae010c2ff48380fcb611c06048956c5">NIFTI_TYPE_COMPLEX64</a></div><div class="ttdeci">#define NIFTI_TYPE_COMPLEX64</div><div class="ttdef"><b>Definition:</b> nifti1.h:533</div></div>
<div class="ttc" id="group__NIFTI1__DATATYPE__ALIASES_html_gabad329a29f5f3b65c1e4de114d7bb06b"><div class="ttname"><a href="../../db/d91/group__NIFTI1__DATATYPE__ALIASES.html#gabad329a29f5f3b65c1e4de114d7bb06b">NIFTI_TYPE_RGB24</a></div><div class="ttdeci">#define NIFTI_TYPE_RGB24</div><div class="ttdef"><b>Definition:</b> nifti1.h:537</div></div>
<div class="ttc" id="group__NIFTI1__DATATYPE__ALIASES_html_ga253e4b750f2aa75a3efdac232663b85c"><div class="ttname"><a href="../../db/d91/group__NIFTI1__DATATYPE__ALIASES.html#ga253e4b750f2aa75a3efdac232663b85c">NIFTI_TYPE_UINT16</a></div><div class="ttdeci">#define NIFTI_TYPE_UINT16</div><div class="ttdef"><b>Definition:</b> nifti1.h:541</div></div>
<div class="ttc" id="group__NIFTI1__DATATYPE__ALIASES_html_ga08c3af37cce4c1dd34703d1fbbdf9129"><div class="ttname"><a href="../../db/d91/group__NIFTI1__DATATYPE__ALIASES.html#ga08c3af37cce4c1dd34703d1fbbdf9129">NIFTI_TYPE_COMPLEX256</a></div><div class="ttdeci">#define NIFTI_TYPE_COMPLEX256</div><div class="ttdef"><b>Definition:</b> nifti1.h:553</div></div>
<div class="ttc" id="group__NIFTI1__DATATYPE__ALIASES_html_ga1253a2540a68b4dd7a5d78bc8c4c2a4d"><div class="ttname"><a href="../../db/d91/group__NIFTI1__DATATYPE__ALIASES.html#ga1253a2540a68b4dd7a5d78bc8c4c2a4d">NIFTI_TYPE_FLOAT64</a></div><div class="ttdeci">#define NIFTI_TYPE_FLOAT64</div><div class="ttdef"><b>Definition:</b> nifti1.h:535</div></div>
<div class="ttc" id="group__NIFTI1__DATATYPE__ALIASES_html_ga746b4eba0eaaac6366b232b46f590f48"><div class="ttname"><a href="../../db/d91/group__NIFTI1__DATATYPE__ALIASES.html#ga746b4eba0eaaac6366b232b46f590f48">NIFTI_TYPE_INT16</a></div><div class="ttdeci">#define NIFTI_TYPE_INT16</div><div class="ttdef"><b>Definition:</b> nifti1.h:527</div></div>
<div class="ttc" id="group__NIFTI1__DATATYPE__ALIASES_html_ga7ed8fda7096e3ff6d4051cd73d708688"><div class="ttname"><a href="../../db/d91/group__NIFTI1__DATATYPE__ALIASES.html#ga7ed8fda7096e3ff6d4051cd73d708688">NIFTI_TYPE_INT8</a></div><div class="ttdeci">#define NIFTI_TYPE_INT8</div><div class="ttdef"><b>Definition:</b> nifti1.h:539</div></div>
<div class="ttc" id="group__NIFTI1__DATATYPE__ALIASES_html_gab8a45494d65119cdd94df359ee18b94b"><div class="ttname"><a href="../../db/d91/group__NIFTI1__DATATYPE__ALIASES.html#gab8a45494d65119cdd94df359ee18b94b">NIFTI_TYPE_UINT64</a></div><div class="ttdeci">#define NIFTI_TYPE_UINT64</div><div class="ttdef"><b>Definition:</b> nifti1.h:547</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="affc673e2c2768319574e46169462f115"></a>
<h2 class="memtitle"><span class="permalink"><a href="#affc673e2c2768319574e46169462f115">&#9670;&nbsp;</a></span>nifti_is_valid_ecode()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int nifti_is_valid_ecode </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ecode</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>check whether the extension code is valid</p>
<dl class="section return"><dt>Returns</dt><dd>1 if valid, 0 otherwise </dd></dl>
<div class="fragment"><div class="line"><a name="l04719"></a><span class="lineno"> 4719</span>&#160;{</div><div class="line"><a name="l04720"></a><span class="lineno"> 4720</span>&#160;   <span class="keywordflow">if</span>( ecode &lt; NIFTI_ECODE_IGNORE  ||   <span class="comment">/* minimum code number (0) */</span></div><div class="line"><a name="l04721"></a><span class="lineno"> 4721</span>&#160;       ecode &gt; NIFTI_MAX_ECODE     ||   <span class="comment">/* maximum code number     */</span></div><div class="line"><a name="l04722"></a><span class="lineno"> 4722</span>&#160;       ecode &amp; 1 )                      <span class="comment">/* cannot be odd           */</span></div><div class="line"><a name="l04723"></a><span class="lineno"> 4723</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l04724"></a><span class="lineno"> 4724</span>&#160;</div><div class="line"><a name="l04725"></a><span class="lineno"> 4725</span>&#160;   <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l04726"></a><span class="lineno"> 4726</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a id="a2fde930d314f2fea6ce083c4db0412ee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2fde930d314f2fea6ce083c4db0412ee">&#9670;&nbsp;</a></span>nifti_make_new_header()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dd/d75/structnifti__1__header.html">nifti_1_header</a>* nifti_make_new_header </td>
          <td>(</td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>arg_dims</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>arg_dtype</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>basic initialization of a <a class="el" href="../../dd/d75/structnifti__1__header.html" title="Data structure defining the fields in the nifti1 header. This binary header should be found at the be...">nifti_1_header</a> struct (with given dimensions)</p>
<p>Return an allocated <a class="el" href="../../dd/d75/structnifti__1__header.html" title="Data structure defining the fields in the nifti1 header. This binary header should be found at the be...">nifti_1_header</a> struct, based on the given dimensions and datatype.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">arg_dims</td><td>: optional dim[8] array (default {3,1,1,1,0,0,0,0}) </td></tr>
    <tr><td class="paramname">arg_dtype</td><td>: optional datatype (default DT_FLOAT32)</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>pointer to allocated <a class="el" href="../../dd/d75/structnifti__1__header.html" title="Data structure defining the fields in the nifti1 header. This binary header should be found at the be...">nifti_1_header</a> struct </dd></dl>
<div class="fragment"><div class="line"><a name="l05285"></a><span class="lineno"> 5285</span>&#160;{</div><div class="line"><a name="l05286"></a><span class="lineno"> 5286</span>&#160;   <a class="code" href="../../dd/d75/structnifti__1__header.html">nifti_1_header</a> * nhdr;</div><div class="line"><a name="l05287"></a><span class="lineno"> 5287</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">int</span>        default_dims[8] = { 3, 1, 1, 1, 0, 0, 0, 0 };</div><div class="line"><a name="l05288"></a><span class="lineno"> 5288</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">int</span>      * <a class="code" href="../../dd/d75/structnifti__1__header.html#ace3aeebb3c10362c5c2e48cee87a7f2e">dim</a>;  <span class="comment">/* either passed or default dims  */</span></div><div class="line"><a name="l05289"></a><span class="lineno"> 5289</span>&#160;   <span class="keywordtype">int</span>              dtype; <span class="comment">/* either passed or default dtype */</span></div><div class="line"><a name="l05290"></a><span class="lineno"> 5290</span>&#160;   <span class="keywordtype">int</span>              c, nbyper, swapsize;</div><div class="line"><a name="l05291"></a><span class="lineno"> 5291</span>&#160;  </div><div class="line"><a name="l05292"></a><span class="lineno"> 5292</span>&#160;   <span class="comment">/* if arg_dims is passed, apply it */</span></div><div class="line"><a name="l05293"></a><span class="lineno"> 5293</span>&#160;   <span class="keywordflow">if</span>( arg_dims ) <a class="code" href="../../dd/d75/structnifti__1__header.html#ace3aeebb3c10362c5c2e48cee87a7f2e">dim</a> = arg_dims;</div><div class="line"><a name="l05294"></a><span class="lineno"> 5294</span>&#160;   <span class="keywordflow">else</span>           <a class="code" href="../../dd/d75/structnifti__1__header.html#ace3aeebb3c10362c5c2e48cee87a7f2e">dim</a> = default_dims;</div><div class="line"><a name="l05295"></a><span class="lineno"> 5295</span>&#160;</div><div class="line"><a name="l05296"></a><span class="lineno"> 5296</span>&#160;   <span class="comment">/* validate dim: if there is any problem, apply default_dims */</span></div><div class="line"><a name="l05297"></a><span class="lineno"> 5297</span>&#160;   <span class="keywordflow">if</span>( <a class="code" href="../../dd/d75/structnifti__1__header.html#ace3aeebb3c10362c5c2e48cee87a7f2e">dim</a>[0] &lt; 1 || <a class="code" href="../../dd/d75/structnifti__1__header.html#ace3aeebb3c10362c5c2e48cee87a7f2e">dim</a>[0] &gt; 7 ) {</div><div class="line"><a name="l05298"></a><span class="lineno"> 5298</span>&#160;      fprintf(stderr,<span class="stringliteral">&quot;** nifti_simple_hdr_with_dims: bad dim[0]=%d\n&quot;</span>,<a class="code" href="../../dd/d75/structnifti__1__header.html#ace3aeebb3c10362c5c2e48cee87a7f2e">dim</a>[0]);</div><div class="line"><a name="l05299"></a><span class="lineno"> 5299</span>&#160;      <a class="code" href="../../dd/d75/structnifti__1__header.html#ace3aeebb3c10362c5c2e48cee87a7f2e">dim</a> = default_dims;</div><div class="line"><a name="l05300"></a><span class="lineno"> 5300</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l05301"></a><span class="lineno"> 5301</span>&#160;      <span class="keywordflow">for</span>( c = 1; c &lt;= <a class="code" href="../../dd/d75/structnifti__1__header.html#ace3aeebb3c10362c5c2e48cee87a7f2e">dim</a>[0]; c++ )</div><div class="line"><a name="l05302"></a><span class="lineno"> 5302</span>&#160;         <span class="keywordflow">if</span>( <a class="code" href="../../dd/d75/structnifti__1__header.html#ace3aeebb3c10362c5c2e48cee87a7f2e">dim</a>[c] &lt; 1 )</div><div class="line"><a name="l05303"></a><span class="lineno"> 5303</span>&#160;         {</div><div class="line"><a name="l05304"></a><span class="lineno"> 5304</span>&#160;            fprintf(stderr,</div><div class="line"><a name="l05305"></a><span class="lineno"> 5305</span>&#160;                <span class="stringliteral">&quot;** nifti_simple_hdr_with_dims: bad dim[%d]=%d\n&quot;</span>,c,<a class="code" href="../../dd/d75/structnifti__1__header.html#ace3aeebb3c10362c5c2e48cee87a7f2e">dim</a>[c]);</div><div class="line"><a name="l05306"></a><span class="lineno"> 5306</span>&#160;            <a class="code" href="../../dd/d75/structnifti__1__header.html#ace3aeebb3c10362c5c2e48cee87a7f2e">dim</a> = default_dims;</div><div class="line"><a name="l05307"></a><span class="lineno"> 5307</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l05308"></a><span class="lineno"> 5308</span>&#160;         }</div><div class="line"><a name="l05309"></a><span class="lineno"> 5309</span>&#160;   }</div><div class="line"><a name="l05310"></a><span class="lineno"> 5310</span>&#160;</div><div class="line"><a name="l05311"></a><span class="lineno"> 5311</span>&#160;   <span class="comment">/* validate dtype, too */</span></div><div class="line"><a name="l05312"></a><span class="lineno"> 5312</span>&#160;   dtype = arg_dtype;</div><div class="line"><a name="l05313"></a><span class="lineno"> 5313</span>&#160;   <span class="keywordflow">if</span>( ! <a class="code" href="../../d1/d14/nifti1__io_8c.html#ab03e74e929ca87ec226bd2e59899fc95">nifti_is_valid_datatype</a>(dtype) ) {</div><div class="line"><a name="l05314"></a><span class="lineno"> 5314</span>&#160;      fprintf(stderr,<span class="stringliteral">&quot;** nifti_simple_hdr_with_dims: bad dtype %d\n&quot;</span>,dtype);</div><div class="line"><a name="l05315"></a><span class="lineno"> 5315</span>&#160;      dtype = DT_FLOAT32;</div><div class="line"><a name="l05316"></a><span class="lineno"> 5316</span>&#160;   }</div><div class="line"><a name="l05317"></a><span class="lineno"> 5317</span>&#160;</div><div class="line"><a name="l05318"></a><span class="lineno"> 5318</span>&#160;   <span class="comment">/* now populate the header struct */</span></div><div class="line"><a name="l05319"></a><span class="lineno"> 5319</span>&#160;</div><div class="line"><a name="l05320"></a><span class="lineno"> 5320</span>&#160;   <span class="keywordflow">if</span>( <a class="code" href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a>.debug &gt; 1 )</div><div class="line"><a name="l05321"></a><span class="lineno"> 5321</span>&#160;      fprintf(stderr,<span class="stringliteral">&quot;+d nifti_make_new_header, dim[0] = %d, datatype = %d\n&quot;</span>,</div><div class="line"><a name="l05322"></a><span class="lineno"> 5322</span>&#160;              <a class="code" href="../../dd/d75/structnifti__1__header.html#ace3aeebb3c10362c5c2e48cee87a7f2e">dim</a>[0], dtype);</div><div class="line"><a name="l05323"></a><span class="lineno"> 5323</span>&#160;</div><div class="line"><a name="l05324"></a><span class="lineno"> 5324</span>&#160;   nhdr = (<a class="code" href="../../dd/d75/structnifti__1__header.html">nifti_1_header</a> *)calloc(1,<span class="keyword">sizeof</span>(<a class="code" href="../../dd/d75/structnifti__1__header.html">nifti_1_header</a>));</div><div class="line"><a name="l05325"></a><span class="lineno"> 5325</span>&#160;   <span class="keywordflow">if</span>( !nhdr ){</div><div class="line"><a name="l05326"></a><span class="lineno"> 5326</span>&#160;      fprintf(stderr,<span class="stringliteral">&quot;** nifti_make_new_header: failed to alloc hdr\n&quot;</span>);</div><div class="line"><a name="l05327"></a><span class="lineno"> 5327</span>&#160;      <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l05328"></a><span class="lineno"> 5328</span>&#160;   }</div><div class="line"><a name="l05329"></a><span class="lineno"> 5329</span>&#160;  </div><div class="line"><a name="l05330"></a><span class="lineno"> 5330</span>&#160;   nhdr-&gt;<a class="code" href="../../dd/d75/structnifti__1__header.html#af1d99efbd3af0180f9335cbb1b822248">sizeof_hdr</a> = <span class="keyword">sizeof</span>(<a class="code" href="../../dd/d75/structnifti__1__header.html">nifti_1_header</a>) ;</div><div class="line"><a name="l05331"></a><span class="lineno"> 5331</span>&#160;   nhdr-&gt;<a class="code" href="../../dd/d75/structnifti__1__header.html#acd9cfc4f9d1117a803c4a619132583d7">regular</a>    = <span class="charliteral">&#39;r&#39;</span> ;           <span class="comment">/* for some stupid reason */</span></div><div class="line"><a name="l05332"></a><span class="lineno"> 5332</span>&#160;</div><div class="line"><a name="l05333"></a><span class="lineno"> 5333</span>&#160;   <span class="comment">/* init dim and pixdim */</span></div><div class="line"><a name="l05334"></a><span class="lineno"> 5334</span>&#160;   nhdr-&gt;<a class="code" href="../../dd/d75/structnifti__1__header.html#ace3aeebb3c10362c5c2e48cee87a7f2e">dim</a>[0] = <a class="code" href="../../dd/d75/structnifti__1__header.html#ace3aeebb3c10362c5c2e48cee87a7f2e">dim</a>[0] ;</div><div class="line"><a name="l05335"></a><span class="lineno"> 5335</span>&#160;   nhdr-&gt;<a class="code" href="../../dd/d75/structnifti__1__header.html#afa546a9f49e7e080f952927d6bcdfbbe">pixdim</a>[0] = 0.0;</div><div class="line"><a name="l05336"></a><span class="lineno"> 5336</span>&#160;   <span class="keywordflow">for</span>( c = 1; c &lt;= <a class="code" href="../../dd/d75/structnifti__1__header.html#ace3aeebb3c10362c5c2e48cee87a7f2e">dim</a>[0]; c++ ) {</div><div class="line"><a name="l05337"></a><span class="lineno"> 5337</span>&#160;      nhdr-&gt;<a class="code" href="../../dd/d75/structnifti__1__header.html#ace3aeebb3c10362c5c2e48cee87a7f2e">dim</a>[c] = <a class="code" href="../../dd/d75/structnifti__1__header.html#ace3aeebb3c10362c5c2e48cee87a7f2e">dim</a>[c];</div><div class="line"><a name="l05338"></a><span class="lineno"> 5338</span>&#160;      nhdr-&gt;<a class="code" href="../../dd/d75/structnifti__1__header.html#afa546a9f49e7e080f952927d6bcdfbbe">pixdim</a>[c] = 1.0;</div><div class="line"><a name="l05339"></a><span class="lineno"> 5339</span>&#160;   }</div><div class="line"><a name="l05340"></a><span class="lineno"> 5340</span>&#160;</div><div class="line"><a name="l05341"></a><span class="lineno"> 5341</span>&#160;   nhdr-&gt;<a class="code" href="../../dd/d75/structnifti__1__header.html#ad5f8888fcc5fde14d3e387653721e270">datatype</a> = dtype ;</div><div class="line"><a name="l05342"></a><span class="lineno"> 5342</span>&#160;   <a class="code" href="../../d1/d14/nifti1__io_8c.html#aeeccf4be6839946794c2cc1fdef26d4f">nifti_datatype_sizes</a>( nhdr-&gt;<a class="code" href="../../dd/d75/structnifti__1__header.html#ad5f8888fcc5fde14d3e387653721e270">datatype</a> , &amp;nbyper, &amp;swapsize );</div><div class="line"><a name="l05343"></a><span class="lineno"> 5343</span>&#160;   nhdr-&gt;<a class="code" href="../../dd/d75/structnifti__1__header.html#a60fc36ed5afd638fd7da425ad7ecae94">bitpix</a>   = 8 * nbyper ;</div><div class="line"><a name="l05344"></a><span class="lineno"> 5344</span>&#160;</div><div class="line"><a name="l05345"></a><span class="lineno"> 5345</span>&#160;   strcpy(nhdr-&gt;<a class="code" href="../../dd/d75/structnifti__1__header.html#a5937e065e772aed3e49608b27db0c466">magic</a>, <span class="stringliteral">&quot;n+1&quot;</span>);  <span class="comment">/* init to single file */</span></div><div class="line"><a name="l05346"></a><span class="lineno"> 5346</span>&#160;</div><div class="line"><a name="l05347"></a><span class="lineno"> 5347</span>&#160;   <span class="keywordflow">return</span> nhdr;</div><div class="line"><a name="l05348"></a><span class="lineno"> 5348</span>&#160;}</div><div class="ttc" id="nifti1__io_8c_html_aeeccf4be6839946794c2cc1fdef26d4f"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#aeeccf4be6839946794c2cc1fdef26d4f">nifti_datatype_sizes</a></div><div class="ttdeci">void nifti_datatype_sizes(int datatype, int *nbyper, int *swapsize)</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:1413</div></div>
<div class="ttc" id="structnifti__1__header_html_af1d99efbd3af0180f9335cbb1b822248"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#af1d99efbd3af0180f9335cbb1b822248">nifti_1_header::sizeof_hdr</a></div><div class="ttdeci">int sizeof_hdr</div><div class="ttdef"><b>Definition:</b> nifti1.h:148</div></div>
<div class="ttc" id="structnifti__1__header_html"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html">nifti_1_header</a></div><div class="ttdoc">Data structure defining the fields in the nifti1 header. This binary header should be found at the be...</div><div class="ttdef"><b>Definition:</b> nifti1.h:144</div></div>
<div class="ttc" id="structnifti__1__header_html_a60fc36ed5afd638fd7da425ad7ecae94"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#a60fc36ed5afd638fd7da425ad7ecae94">nifti_1_header::bitpix</a></div><div class="ttdeci">short bitpix</div><div class="ttdef"><b>Definition:</b> nifti1.h:166</div></div>
<div class="ttc" id="structnifti__1__header_html_acd9cfc4f9d1117a803c4a619132583d7"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#acd9cfc4f9d1117a803c4a619132583d7">nifti_1_header::regular</a></div><div class="ttdeci">char regular</div><div class="ttdef"><b>Definition:</b> nifti1.h:153</div></div>
<div class="ttc" id="structnifti__1__header_html_ad5f8888fcc5fde14d3e387653721e270"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#ad5f8888fcc5fde14d3e387653721e270">nifti_1_header::datatype</a></div><div class="ttdeci">short datatype</div><div class="ttdef"><b>Definition:</b> nifti1.h:165</div></div>
<div class="ttc" id="structnifti__1__header_html_ace3aeebb3c10362c5c2e48cee87a7f2e"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#ace3aeebb3c10362c5c2e48cee87a7f2e">nifti_1_header::dim</a></div><div class="ttdeci">short dim[8]</div><div class="ttdef"><b>Definition:</b> nifti1.h:157</div></div>
<div class="ttc" id="structnifti__1__header_html_afa546a9f49e7e080f952927d6bcdfbbe"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#afa546a9f49e7e080f952927d6bcdfbbe">nifti_1_header::pixdim</a></div><div class="ttdeci">float pixdim[8]</div><div class="ttdef"><b>Definition:</b> nifti1.h:168</div></div>
<div class="ttc" id="nifti1__io_8c_html_ab03e74e929ca87ec226bd2e59899fc95"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#ab03e74e929ca87ec226bd2e59899fc95">nifti_is_valid_datatype</a></div><div class="ttdeci">int nifti_is_valid_datatype(int dtype)</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:3347</div></div>
<div class="ttc" id="structnifti__1__header_html_a5937e065e772aed3e49608b27db0c466"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#a5937e065e772aed3e49608b27db0c466">nifti_1_header::magic</a></div><div class="ttdeci">char magic[4]</div><div class="ttdef"><b>Definition:</b> nifti1.h:202</div></div>
<div class="ttc" id="nifti1__io_8c_html_a6e047e1dc2f826a4adff048bee8f5df7"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a></div><div class="ttdeci">static nifti_global_options g_opts</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:344</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab18d6d70c046482f92fb802b74aafb11"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab18d6d70c046482f92fb802b74aafb11">&#9670;&nbsp;</a></span>nifti_make_new_nim()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d0/de7/structnifti__image.html">nifti_image</a>* nifti_make_new_nim </td>
          <td>(</td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>dims</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>datatype</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>data_fill</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>basic creation of a <a class="el" href="../../d0/de7/structnifti__image.html" title="High level data structure for open nifti datasets in the nifti1_io API. Note that this structure is n...">nifti_image</a> struct</p>
<p>Create a <a class="el" href="../../d0/de7/structnifti__image.html" title="High level data structure for open nifti datasets in the nifti1_io API. Note that this structure is n...">nifti_image</a> from the given dimensions and data type. Optinally, allocate zero-filled data.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dims</td><td>: optional dim[8] (default {3,1,1,1,0,0,0,0}) </td></tr>
    <tr><td class="paramname">datatype</td><td>: optional datatype (default DT_FLOAT32) </td></tr>
    <tr><td class="paramname">data_fill</td><td>: if flag is set, allocate zero-filled data for image</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>pointer to allocated <a class="el" href="../../d0/de7/structnifti__image.html" title="High level data structure for open nifti datasets in the nifti1_io API. Note that this structure is n...">nifti_image</a> struct </dd></dl>
<div class="fragment"><div class="line"><a name="l05364"></a><span class="lineno"> 5364</span>&#160;{</div><div class="line"><a name="l05365"></a><span class="lineno"> 5365</span>&#160;   <a class="code" href="../../d0/de7/structnifti__image.html">nifti_image</a>    * nim;</div><div class="line"><a name="l05366"></a><span class="lineno"> 5366</span>&#160;   <a class="code" href="../../dd/d75/structnifti__1__header.html">nifti_1_header</a> * nhdr;</div><div class="line"><a name="l05367"></a><span class="lineno"> 5367</span>&#160;</div><div class="line"><a name="l05368"></a><span class="lineno"> 5368</span>&#160;   nhdr = <a class="code" href="../../d1/d14/nifti1__io_8c.html#a2fde930d314f2fea6ce083c4db0412ee">nifti_make_new_header</a>(dims, <a class="code" href="../../dd/d75/structnifti__1__header.html#ad5f8888fcc5fde14d3e387653721e270">datatype</a>);</div><div class="line"><a name="l05369"></a><span class="lineno"> 5369</span>&#160;   <span class="keywordflow">if</span>( !nhdr ) <span class="keywordflow">return</span> NULL;  <span class="comment">/* error already printed */</span></div><div class="line"><a name="l05370"></a><span class="lineno"> 5370</span>&#160;</div><div class="line"><a name="l05371"></a><span class="lineno"> 5371</span>&#160;   nim = <a class="code" href="../../d1/d14/nifti1__io_8c.html#aa7bd8fbb331c8d278506afb6f37fdbc2">nifti_convert_nhdr2nim</a>(*nhdr,NULL);</div><div class="line"><a name="l05372"></a><span class="lineno"> 5372</span>&#160;   free(nhdr);               <span class="comment">/* in any case, we are done with this */</span></div><div class="line"><a name="l05373"></a><span class="lineno"> 5373</span>&#160;   <span class="keywordflow">if</span>( !nim ){</div><div class="line"><a name="l05374"></a><span class="lineno"> 5374</span>&#160;      fprintf(stderr,<span class="stringliteral">&quot;** NMNN: nifti_convert_nhdr2nim failure\n&quot;</span>);</div><div class="line"><a name="l05375"></a><span class="lineno"> 5375</span>&#160;      <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l05376"></a><span class="lineno"> 5376</span>&#160;   }</div><div class="line"><a name="l05377"></a><span class="lineno"> 5377</span>&#160;</div><div class="line"><a name="l05378"></a><span class="lineno"> 5378</span>&#160;   <span class="keywordflow">if</span>( <a class="code" href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a>.debug &gt; 1 )</div><div class="line"><a name="l05379"></a><span class="lineno"> 5379</span>&#160;      fprintf(stderr,<span class="stringliteral">&quot;+d nifti_make_new_nim, data_fill = %d\n&quot;</span>,data_fill);</div><div class="line"><a name="l05380"></a><span class="lineno"> 5380</span>&#160;</div><div class="line"><a name="l05381"></a><span class="lineno"> 5381</span>&#160;   <span class="keywordflow">if</span>( data_fill ) {</div><div class="line"><a name="l05382"></a><span class="lineno"> 5382</span>&#160;      nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a9c7db78ad411a6e2b8a8ab071bbbe0a8">data</a> = calloc(nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a440a3fab2a781b43ed8216e26492597d">nvox</a>, nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a79a4382f115cb6c7f8977c36d73e6749">nbyper</a>);</div><div class="line"><a name="l05383"></a><span class="lineno"> 5383</span>&#160;</div><div class="line"><a name="l05384"></a><span class="lineno"> 5384</span>&#160;      <span class="comment">/* if we cannot allocate data, take ball and go home */</span></div><div class="line"><a name="l05385"></a><span class="lineno"> 5385</span>&#160;      <span class="keywordflow">if</span>( !nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a9c7db78ad411a6e2b8a8ab071bbbe0a8">data</a> ) {</div><div class="line"><a name="l05386"></a><span class="lineno"> 5386</span>&#160;         fprintf(stderr,<span class="stringliteral">&quot;** NMNN: failed to alloc %u bytes for data\n&quot;</span>,</div><div class="line"><a name="l05387"></a><span class="lineno"> 5387</span>&#160;                 (<span class="keywordtype">unsigned</span>)(nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a440a3fab2a781b43ed8216e26492597d">nvox</a>*nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a79a4382f115cb6c7f8977c36d73e6749">nbyper</a>));</div><div class="line"><a name="l05388"></a><span class="lineno"> 5388</span>&#160;         <a class="code" href="../../d1/d14/nifti1__io_8c.html#a2fe83552d8121a492fe07b5f42397c9d">nifti_image_free</a>(nim);</div><div class="line"><a name="l05389"></a><span class="lineno"> 5389</span>&#160;         nim = NULL;</div><div class="line"><a name="l05390"></a><span class="lineno"> 5390</span>&#160;      }</div><div class="line"><a name="l05391"></a><span class="lineno"> 5391</span>&#160;   }</div><div class="line"><a name="l05392"></a><span class="lineno"> 5392</span>&#160;</div><div class="line"><a name="l05393"></a><span class="lineno"> 5393</span>&#160;   <span class="keywordflow">return</span> nim;</div><div class="line"><a name="l05394"></a><span class="lineno"> 5394</span>&#160;}</div><div class="ttc" id="structnifti__1__header_html"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html">nifti_1_header</a></div><div class="ttdoc">Data structure defining the fields in the nifti1 header. This binary header should be found at the be...</div><div class="ttdef"><b>Definition:</b> nifti1.h:144</div></div>
<div class="ttc" id="structnifti__image_html"><div class="ttname"><a href="../../d0/de7/structnifti__image.html">nifti_image</a></div><div class="ttdoc">High level data structure for open nifti datasets in the nifti1_io API. Note that this structure is n...</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:89</div></div>
<div class="ttc" id="structnifti__image_html_a440a3fab2a781b43ed8216e26492597d"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a440a3fab2a781b43ed8216e26492597d">nifti_image::nvox</a></div><div class="ttdeci">size_t nvox</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:100</div></div>
<div class="ttc" id="nifti1__io_8c_html_a2fde930d314f2fea6ce083c4db0412ee"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#a2fde930d314f2fea6ce083c4db0412ee">nifti_make_new_header</a></div><div class="ttdeci">nifti_1_header * nifti_make_new_header(const int arg_dims[], int arg_dtype)</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:5284</div></div>
<div class="ttc" id="structnifti__1__header_html_ad5f8888fcc5fde14d3e387653721e270"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#ad5f8888fcc5fde14d3e387653721e270">nifti_1_header::datatype</a></div><div class="ttdeci">short datatype</div><div class="ttdef"><b>Definition:</b> nifti1.h:165</div></div>
<div class="ttc" id="nifti1__io_8c_html_aa7bd8fbb331c8d278506afb6f37fdbc2"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#aa7bd8fbb331c8d278506afb6f37fdbc2">nifti_convert_nhdr2nim</a></div><div class="ttdeci">nifti_image * nifti_convert_nhdr2nim(struct nifti_1_header nhdr, const char *fname)</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:3599</div></div>
<div class="ttc" id="nifti1__io_8c_html_a2fe83552d8121a492fe07b5f42397c9d"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#a2fe83552d8121a492fe07b5f42397c9d">nifti_image_free</a></div><div class="ttdeci">void nifti_image_free(nifti_image *nim)</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:5028</div></div>
<div class="ttc" id="structnifti__image_html_a9c7db78ad411a6e2b8a8ab071bbbe0a8"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a9c7db78ad411a6e2b8a8ab071bbbe0a8">nifti_image::data</a></div><div class="ttdeci">void * data</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:165</div></div>
<div class="ttc" id="structnifti__image_html_a79a4382f115cb6c7f8977c36d73e6749"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a79a4382f115cb6c7f8977c36d73e6749">nifti_image::nbyper</a></div><div class="ttdeci">int nbyper</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:101</div></div>
<div class="ttc" id="nifti1__io_8c_html_a6e047e1dc2f826a4adff048bee8f5df7"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a></div><div class="ttdeci">static nifti_global_options g_opts</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:344</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a8c07c7b62ab67f0d0e901fdf4b755707"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8c07c7b62ab67f0d0e901fdf4b755707">&#9670;&nbsp;</a></span>nifti_make_orthog_mat44()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/d6d/structmat44.html">mat44</a> nifti_make_orthog_mat44 </td>
          <td>(</td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>r11</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>r12</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>r13</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>r21</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>r22</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>r23</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>r31</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>r32</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>r33</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Input 9 floats and make an orthgonal <a class="el" href="../../d9/d6d/structmat44.html">mat44</a> out of them.</p>
<p>Each row is normalized, then <a class="el" href="../../d1/d14/nifti1__io_8c.html#a32d3a6d10f5e97ddc243001727c129a1">nifti_mat33_polar()</a> is used to orthogonalize them. If row #3 (r31,r32,r33) is input as zero, then it will be taken to be the cross product of rows #1 and #2.</p>
<p>This function can be used to create a rotation matrix for transforming an oblique volume to anatomical coordinates. For this application:</p><ul>
<li>row #1 (r11,r12,r13) is the direction vector along the image i-axis</li>
<li>row #2 (r21,r22,r23) is the direction vector along the image j-axis</li>
<li>row #3 (r31,r32,r33) is the direction vector along the slice direction (if available; otherwise enter it as 0's)</li>
</ul>
<p>The first 2 rows can be taken from the DICOM attribute (0020,0037) "Image Orientation (Patient)".</p>
<p>After forming the rotation matrix, the complete affine transformation from (i,j,k) grid indexes to (x,y,z) spatial coordinates can be computed by multiplying each column by the appropriate grid spacing:</p><ul>
<li>column #1 (R.m[0][0],R.m[1][0],R.m[2][0]) by delta-x</li>
<li>column #2 (R.m[0][1],R.m[1][1],R.m[2][1]) by delta-y</li>
<li>column #3 (R.m[0][2],R.m[1][2],R.m[2][2]) by delta-z</li>
</ul>
<p>and by then placing the center (x,y,z) coordinates of voxel (0,0,0) into the column #4 (R.m[0][3],R.m[1][3],R.m[2][3]).</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="../../d1/d14/nifti1__io_8c.html#a4b183639b2e242ac32210fe3437f60d2">nifti_quatern_to_mat44</a>, <a class="el" href="../../d1/d14/nifti1__io_8c.html#a84b68d5634ec94b5132e0067733e9f28">nifti_mat44_to_quatern</a>, <a class="el" href="../../d1/d14/nifti1__io_8c.html#ad8ba2d4a127c3ee26af9909ce2aa59e8">nifti_mat44_to_orientation</a> </dd></dl>
<div class="fragment"><div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;{</div><div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;   <a class="code" href="../../d9/d6d/structmat44.html">mat44</a> R ;</div><div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;   <a class="code" href="../../d7/d16/structmat33.html">mat33</a> Q , P ;</div><div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;   <span class="keywordtype">double</span> val ;</div><div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;</div><div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;   R.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[3][0] = R.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[3][1] = R.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[3][2] = 0.0l ; R.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[3][3] = 1.0l ;</div><div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;</div><div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;   Q.<a class="code" href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">m</a>[0][0] = r11 ; Q.<a class="code" href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">m</a>[0][1] = r12 ; Q.<a class="code" href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">m</a>[0][2] = r13 ; <span class="comment">/* load Q */</span></div><div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;   Q.<a class="code" href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">m</a>[1][0] = r21 ; Q.<a class="code" href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">m</a>[1][1] = r22 ; Q.<a class="code" href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">m</a>[1][2] = r23 ;</div><div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;   Q.<a class="code" href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">m</a>[2][0] = r31 ; Q.<a class="code" href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">m</a>[2][1] = r32 ; Q.<a class="code" href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">m</a>[2][2] = r33 ;</div><div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;</div><div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;   <span class="comment">/* normalize row 1 */</span></div><div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;</div><div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;   val = Q.<a class="code" href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">m</a>[0][0]*Q.<a class="code" href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">m</a>[0][0] + Q.<a class="code" href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">m</a>[0][1]*Q.<a class="code" href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">m</a>[0][1] + Q.<a class="code" href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">m</a>[0][2]*Q.<a class="code" href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">m</a>[0][2] ;</div><div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;   <span class="keywordflow">if</span>( val &gt; 0.0l ){</div><div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;     val = 1.0l / sqrt(val) ;</div><div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;     Q.<a class="code" href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">m</a>[0][0] *= val ; Q.<a class="code" href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">m</a>[0][1] *= val ; Q.<a class="code" href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">m</a>[0][2] *= val ;</div><div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;     Q.<a class="code" href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">m</a>[0][0] = 1.0l ; Q.<a class="code" href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">m</a>[0][1] = 0.0l ; Q.<a class="code" href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">m</a>[0][2] = 0.0l ;</div><div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;   }</div><div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;</div><div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;   <span class="comment">/* normalize row 2 */</span></div><div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;</div><div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;   val = Q.<a class="code" href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">m</a>[1][0]*Q.<a class="code" href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">m</a>[1][0] + Q.<a class="code" href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">m</a>[1][1]*Q.<a class="code" href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">m</a>[1][1] + Q.<a class="code" href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">m</a>[1][2]*Q.<a class="code" href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">m</a>[1][2] ;</div><div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;   <span class="keywordflow">if</span>( val &gt; 0.0l ){</div><div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;     val = 1.0l / sqrt(val) ;</div><div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;     Q.<a class="code" href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">m</a>[1][0] *= val ; Q.<a class="code" href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">m</a>[1][1] *= val ; Q.<a class="code" href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">m</a>[1][2] *= val ;</div><div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;     Q.<a class="code" href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">m</a>[1][0] = 0.0l ; Q.<a class="code" href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">m</a>[1][1] = 1.0l ; Q.<a class="code" href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">m</a>[1][2] = 0.0l ;</div><div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;   }</div><div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;</div><div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;   <span class="comment">/* normalize row 3 */</span></div><div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;</div><div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;   val = Q.<a class="code" href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">m</a>[2][0]*Q.<a class="code" href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">m</a>[2][0] + Q.<a class="code" href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">m</a>[2][1]*Q.<a class="code" href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">m</a>[2][1] + Q.<a class="code" href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">m</a>[2][2]*Q.<a class="code" href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">m</a>[2][2] ;</div><div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;   <span class="keywordflow">if</span>( val &gt; 0.0l ){</div><div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;     val = 1.0l / sqrt(val) ;</div><div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;     Q.<a class="code" href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">m</a>[2][0] *= val ; Q.<a class="code" href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">m</a>[2][1] *= val ; Q.<a class="code" href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">m</a>[2][2] *= val ;</div><div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;     Q.<a class="code" href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">m</a>[2][0] = Q.<a class="code" href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">m</a>[0][1]*Q.<a class="code" href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">m</a>[1][2] - Q.<a class="code" href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">m</a>[0][2]*Q.<a class="code" href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">m</a>[1][1] ;  <span class="comment">/* cross */</span></div><div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;     Q.<a class="code" href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">m</a>[2][1] = Q.<a class="code" href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">m</a>[0][2]*Q.<a class="code" href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">m</a>[1][0] - Q.<a class="code" href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">m</a>[0][0]*Q.<a class="code" href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">m</a>[1][2] ;  <span class="comment">/* product */</span></div><div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;     Q.<a class="code" href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">m</a>[2][2] = Q.<a class="code" href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">m</a>[0][0]*Q.<a class="code" href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">m</a>[1][1] - Q.<a class="code" href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">m</a>[0][1]*Q.<a class="code" href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">m</a>[1][0] ;</div><div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;   }</div><div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;</div><div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;   P = <a class="code" href="../../d1/d14/nifti1__io_8c.html#a32d3a6d10f5e97ddc243001727c129a1">nifti_mat33_polar</a>(Q) ;  <span class="comment">/* P is orthog matrix closest to Q */</span></div><div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;</div><div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;   R.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[0][0] = P.<a class="code" href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">m</a>[0][0] ; R.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[0][1] = P.<a class="code" href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">m</a>[0][1] ; R.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[0][2] = P.<a class="code" href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">m</a>[0][2] ;</div><div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;   R.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[1][0] = P.<a class="code" href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">m</a>[1][0] ; R.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[1][1] = P.<a class="code" href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">m</a>[1][1] ; R.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[1][2] = P.<a class="code" href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">m</a>[1][2] ;</div><div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;   R.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[2][0] = P.<a class="code" href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">m</a>[2][0] ; R.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[2][1] = P.<a class="code" href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">m</a>[2][1] ; R.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[2][2] = P.<a class="code" href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">m</a>[2][2] ;</div><div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;</div><div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;   R.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[0][3] = R.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[1][3] = R.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[2][3] = 0.0 ; <span class="keywordflow">return</span> R ;</div><div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;}</div><div class="ttc" id="structmat44_html_ad11c8da60dd84b24824f70b08948d6e3"><div class="ttname"><a href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">mat44::m</a></div><div class="ttdeci">float m[4][4]</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:60</div></div>
<div class="ttc" id="structmat33_html"><div class="ttname"><a href="../../d7/d16/structmat33.html">mat33</a></div><div class="ttdef"><b>Definition:</b> nifti1_io.h:63</div></div>
<div class="ttc" id="nifti1__io_8c_html_a32d3a6d10f5e97ddc243001727c129a1"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#a32d3a6d10f5e97ddc243001727c129a1">nifti_mat33_polar</a></div><div class="ttdeci">mat33 nifti_mat33_polar(mat33 A)</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:1891</div></div>
<div class="ttc" id="structmat44_html"><div class="ttname"><a href="../../d9/d6d/structmat44.html">mat44</a></div><div class="ttdef"><b>Definition:</b> nifti1_io.h:59</div></div>
<div class="ttc" id="structmat33_html_ae68888e41e6dfff14c7ae18b5777fb92"><div class="ttname"><a href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">mat33::m</a></div><div class="ttdeci">float m[3][3]</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:64</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a19cb2bca24ab79a5f0a0ec9b770d7454"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a19cb2bca24ab79a5f0a0ec9b770d7454">&#9670;&nbsp;</a></span>nifti_makebasename()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* nifti_makebasename </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>fname</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>duplicate the filename, while clearing any extension</p>
<p>This allocates memory for basename which should eventually be freed. </p>
<div class="fragment"><div class="line"><a name="l02681"></a><span class="lineno"> 2681</span>&#160;{</div><div class="line"><a name="l02682"></a><span class="lineno"> 2682</span>&#160;   <span class="keywordtype">char</span> *basename, *ext;</div><div class="line"><a name="l02683"></a><span class="lineno"> 2683</span>&#160;</div><div class="line"><a name="l02684"></a><span class="lineno"> 2684</span>&#160;   basename=<a class="code" href="../../d1/d14/nifti1__io_8c.html#a98f42fe4268d9fff8a5b8c984f8731f1">nifti_strdup</a>(fname);</div><div class="line"><a name="l02685"></a><span class="lineno"> 2685</span>&#160;</div><div class="line"><a name="l02686"></a><span class="lineno"> 2686</span>&#160;   ext = <a class="code" href="../../d1/d14/nifti1__io_8c.html#a338a5f9b74c37ee28ca8683324434a05">nifti_find_file_extension</a>(basename);</div><div class="line"><a name="l02687"></a><span class="lineno"> 2687</span>&#160;   <span class="keywordflow">if</span> ( ext ) *ext = <span class="charliteral">&#39;\0&#39;</span>;  <span class="comment">/* clear out extension */</span></div><div class="line"><a name="l02688"></a><span class="lineno"> 2688</span>&#160;   </div><div class="line"><a name="l02689"></a><span class="lineno"> 2689</span>&#160;   <span class="keywordflow">return</span> basename;  <span class="comment">/* in either case */</span></div><div class="line"><a name="l02690"></a><span class="lineno"> 2690</span>&#160;}</div><div class="ttc" id="nifti1__io_8c_html_a98f42fe4268d9fff8a5b8c984f8731f1"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#a98f42fe4268d9fff8a5b8c984f8731f1">nifti_strdup</a></div><div class="ttdeci">char * nifti_strdup(const char *str)</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:1157</div></div>
<div class="ttc" id="nifti1__io_8c_html_a338a5f9b74c37ee28ca8683324434a05"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#a338a5f9b74c37ee28ca8683324434a05">nifti_find_file_extension</a></div><div class="ttdeci">char * nifti_find_file_extension(const char *name)</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:2583</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a03d86f65680b215db89c24723ad73a8c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a03d86f65680b215db89c24723ad73a8c">&#9670;&nbsp;</a></span>nifti_makehdrname()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* nifti_makehdrname </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>prefix</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>nifti_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>check</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>comp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>creates a filename for storing the header, based on nifti_type</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">prefix</td><td>- this will be copied before the suffix is added </td></tr>
    <tr><td class="paramname">nifti_type</td><td>- determines the extension, unless one is in prefix </td></tr>
    <tr><td class="paramname">check</td><td>- check for existence (fail condition) </td></tr>
    <tr><td class="paramname">comp</td><td>- add .gz for compressed name</td></tr>
  </table>
  </dd>
</dl>
<p>Note that if prefix provides a file suffix, nifti_type is not used.</p>
<p>NB: this allocates memory which should be freed</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="../../d1/d14/nifti1__io_8c.html#a296fad01763163289b0e1030d3a0ebaa">nifti_set_filenames</a> </dd></dl>
<div class="fragment"><div class="line"><a name="l02920"></a><span class="lineno"> 2920</span>&#160;{</div><div class="line"><a name="l02921"></a><span class="lineno"> 2921</span>&#160;   <span class="keywordtype">char</span> * iname, * ext;</div><div class="line"><a name="l02922"></a><span class="lineno"> 2922</span>&#160;   <span class="keywordtype">char</span>   extnii[5] = <span class="stringliteral">&quot;.nii&quot;</span>;   <span class="comment">/* modifiable, for possible uppercase */</span></div><div class="line"><a name="l02923"></a><span class="lineno"> 2923</span>&#160;   <span class="keywordtype">char</span>   exthdr[5] = <span class="stringliteral">&quot;.hdr&quot;</span>;</div><div class="line"><a name="l02924"></a><span class="lineno"> 2924</span>&#160;   <span class="keywordtype">char</span>   extimg[5] = <span class="stringliteral">&quot;.img&quot;</span>;</div><div class="line"><a name="l02925"></a><span class="lineno"> 2925</span>&#160;   <span class="keywordtype">char</span>   extnia[5] = <span class="stringliteral">&quot;.nia&quot;</span>;</div><div class="line"><a name="l02926"></a><span class="lineno"> 2926</span>&#160;   <span class="keywordtype">char</span>   extgz[5]  = <span class="stringliteral">&quot;.gz&quot;</span>;</div><div class="line"><a name="l02927"></a><span class="lineno"> 2927</span>&#160;</div><div class="line"><a name="l02928"></a><span class="lineno"> 2928</span>&#160;   <span class="keywordflow">if</span>( !<a class="code" href="../../d1/d14/nifti1__io_8c.html#a836b54d494e9d2718e5541978ae3fc29">nifti_validfilename</a>(prefix) ) <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l02929"></a><span class="lineno"> 2929</span>&#160;</div><div class="line"><a name="l02930"></a><span class="lineno"> 2930</span>&#160;   <span class="comment">/* add space for extension, optional &quot;.gz&quot;, and null char */</span></div><div class="line"><a name="l02931"></a><span class="lineno"> 2931</span>&#160;   iname = (<span class="keywordtype">char</span> *)calloc(<span class="keyword">sizeof</span>(<span class="keywordtype">char</span>),strlen(prefix)+8);</div><div class="line"><a name="l02932"></a><span class="lineno"> 2932</span>&#160;   <span class="keywordflow">if</span>( !iname ){ fprintf(stderr,<span class="stringliteral">&quot;** small malloc failure!\n&quot;</span>); <span class="keywordflow">return</span> NULL; }</div><div class="line"><a name="l02933"></a><span class="lineno"> 2933</span>&#160;   strcpy(iname, prefix);</div><div class="line"><a name="l02934"></a><span class="lineno"> 2934</span>&#160;</div><div class="line"><a name="l02935"></a><span class="lineno"> 2935</span>&#160;   <span class="comment">/* use any valid extension */</span></div><div class="line"><a name="l02936"></a><span class="lineno"> 2936</span>&#160;   <span class="keywordflow">if</span>( (ext = <a class="code" href="../../d1/d14/nifti1__io_8c.html#a338a5f9b74c37ee28ca8683324434a05">nifti_find_file_extension</a>(iname)) != NULL ){</div><div class="line"><a name="l02937"></a><span class="lineno"> 2937</span>&#160;      <span class="comment">/* if uppercase, convert all extensions */</span></div><div class="line"><a name="l02938"></a><span class="lineno"> 2938</span>&#160;      <span class="keywordflow">if</span>( is_uppercase(ext) ) {</div><div class="line"><a name="l02939"></a><span class="lineno"> 2939</span>&#160;         make_uppercase(extnii);</div><div class="line"><a name="l02940"></a><span class="lineno"> 2940</span>&#160;         make_uppercase(exthdr);</div><div class="line"><a name="l02941"></a><span class="lineno"> 2941</span>&#160;         make_uppercase(extimg);</div><div class="line"><a name="l02942"></a><span class="lineno"> 2942</span>&#160;         make_uppercase(extnia);</div><div class="line"><a name="l02943"></a><span class="lineno"> 2943</span>&#160;         make_uppercase(extgz);</div><div class="line"><a name="l02944"></a><span class="lineno"> 2944</span>&#160;      }</div><div class="line"><a name="l02945"></a><span class="lineno"> 2945</span>&#160;</div><div class="line"><a name="l02946"></a><span class="lineno"> 2946</span>&#160;      <span class="keywordflow">if</span>( strncmp(ext,extimg,4) == 0 )</div><div class="line"><a name="l02947"></a><span class="lineno"> 2947</span>&#160;         memcpy(ext,exthdr,4);   <span class="comment">/* then convert img name to hdr */</span></div><div class="line"><a name="l02948"></a><span class="lineno"> 2948</span>&#160;   }</div><div class="line"><a name="l02949"></a><span class="lineno"> 2949</span>&#160;   <span class="comment">/* otherwise, make one up */</span></div><div class="line"><a name="l02950"></a><span class="lineno"> 2950</span>&#160;   <span class="keywordflow">else</span> <span class="keywordflow">if</span>( nifti_type == NIFTI_FTYPE_NIFTI1_1 ) strcat(iname, extnii);</div><div class="line"><a name="l02951"></a><span class="lineno"> 2951</span>&#160;   <span class="keywordflow">else</span> <span class="keywordflow">if</span>( nifti_type == NIFTI_FTYPE_ASCII )    strcat(iname, extnia);</div><div class="line"><a name="l02952"></a><span class="lineno"> 2952</span>&#160;   <span class="keywordflow">else</span>                                          strcat(iname, exthdr);</div><div class="line"><a name="l02953"></a><span class="lineno"> 2953</span>&#160;</div><div class="line"><a name="l02954"></a><span class="lineno"> 2954</span>&#160;<span class="preprocessor">#ifdef HAVE_ZLIB  </span><span class="comment">/* if compression is requested, make sure of suffix */</span><span class="preprocessor"></span></div><div class="line"><a name="l02955"></a><span class="lineno"> 2955</span>&#160;   <span class="keywordflow">if</span>( comp &amp;&amp; (!ext || !strstr(iname,extgz)) ) strcat(iname,extgz);</div><div class="line"><a name="l02956"></a><span class="lineno"> 2956</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l02957"></a><span class="lineno"> 2957</span>&#160;</div><div class="line"><a name="l02958"></a><span class="lineno"> 2958</span>&#160;   <span class="comment">/* check for existence failure */</span></div><div class="line"><a name="l02959"></a><span class="lineno"> 2959</span>&#160;   <span class="keywordflow">if</span>( check &amp;&amp; <a class="code" href="../../d1/d14/nifti1__io_8c.html#aebd0c1d644fdafa59727dd8f57ae6686">nifti_fileexists</a>(iname) ){</div><div class="line"><a name="l02960"></a><span class="lineno"> 2960</span>&#160;      fprintf(stderr,<span class="stringliteral">&quot;** failure: header file &#39;%s&#39; already exists\n&quot;</span>,iname);</div><div class="line"><a name="l02961"></a><span class="lineno"> 2961</span>&#160;      free(iname);</div><div class="line"><a name="l02962"></a><span class="lineno"> 2962</span>&#160;      <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l02963"></a><span class="lineno"> 2963</span>&#160;   }</div><div class="line"><a name="l02964"></a><span class="lineno"> 2964</span>&#160;</div><div class="line"><a name="l02965"></a><span class="lineno"> 2965</span>&#160;   <span class="keywordflow">if</span>(<a class="code" href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a>.debug &gt; 2) fprintf(stderr,<span class="stringliteral">&quot;+d made header filename &#39;%s&#39;\n&quot;</span>, iname);</div><div class="line"><a name="l02966"></a><span class="lineno"> 2966</span>&#160;</div><div class="line"><a name="l02967"></a><span class="lineno"> 2967</span>&#160;   <span class="keywordflow">return</span> iname;</div><div class="line"><a name="l02968"></a><span class="lineno"> 2968</span>&#160;}</div><div class="ttc" id="nifti1__io_8c_html_a338a5f9b74c37ee28ca8683324434a05"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#a338a5f9b74c37ee28ca8683324434a05">nifti_find_file_extension</a></div><div class="ttdeci">char * nifti_find_file_extension(const char *name)</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:2583</div></div>
<div class="ttc" id="nifti1__io_8c_html_aebd0c1d644fdafa59727dd8f57ae6686"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#aebd0c1d644fdafa59727dd8f57ae6686">nifti_fileexists</a></div><div class="ttdeci">int nifti_fileexists(const char *fname)</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:2481</div></div>
<div class="ttc" id="nifti1__io_8c_html_a836b54d494e9d2718e5541978ae3fc29"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#a836b54d494e9d2718e5541978ae3fc29">nifti_validfilename</a></div><div class="ttdeci">int nifti_validfilename(const char *fname)</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:2550</div></div>
<div class="ttc" id="nifti1__io_8c_html_a6e047e1dc2f826a4adff048bee8f5df7"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a></div><div class="ttdeci">static nifti_global_options g_opts</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:344</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a80ba47331f082db092ef29d11c64fa31"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a80ba47331f082db092ef29d11c64fa31">&#9670;&nbsp;</a></span>nifti_makeimgname()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* nifti_makeimgname </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>prefix</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>nifti_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>check</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>comp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>creates a filename for storing the image, based on nifti_type</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">prefix</td><td>- this will be copied before the suffix is added </td></tr>
    <tr><td class="paramname">nifti_type</td><td>- determines the extension, unless provided by prefix </td></tr>
    <tr><td class="paramname">check</td><td>- check for existence (fail condition) </td></tr>
    <tr><td class="paramname">comp</td><td>- add .gz for compressed name</td></tr>
  </table>
  </dd>
</dl>
<p>Note that if prefix provides a file suffix, nifti_type is not used.</p>
<p>NB: it allocates memory which should be freed</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="../../d1/d14/nifti1__io_8c.html#a296fad01763163289b0e1030d3a0ebaa">nifti_set_filenames</a> </dd></dl>
<div class="fragment"><div class="line"><a name="l02987"></a><span class="lineno"> 2987</span>&#160;{</div><div class="line"><a name="l02988"></a><span class="lineno"> 2988</span>&#160;   <span class="keywordtype">char</span> * iname, * ext;</div><div class="line"><a name="l02989"></a><span class="lineno"> 2989</span>&#160;   <span class="keywordtype">char</span>   extnii[5] = <span class="stringliteral">&quot;.nii&quot;</span>;   <span class="comment">/* modifiable, for possible uppercase */</span></div><div class="line"><a name="l02990"></a><span class="lineno"> 2990</span>&#160;   <span class="keywordtype">char</span>   exthdr[5] = <span class="stringliteral">&quot;.hdr&quot;</span>;</div><div class="line"><a name="l02991"></a><span class="lineno"> 2991</span>&#160;   <span class="keywordtype">char</span>   extimg[5] = <span class="stringliteral">&quot;.img&quot;</span>;</div><div class="line"><a name="l02992"></a><span class="lineno"> 2992</span>&#160;   <span class="keywordtype">char</span>   extnia[5] = <span class="stringliteral">&quot;.nia&quot;</span>;</div><div class="line"><a name="l02993"></a><span class="lineno"> 2993</span>&#160;   <span class="keywordtype">char</span>   extgz[5]  = <span class="stringliteral">&quot;.gz&quot;</span>;</div><div class="line"><a name="l02994"></a><span class="lineno"> 2994</span>&#160;</div><div class="line"><a name="l02995"></a><span class="lineno"> 2995</span>&#160;   <span class="keywordflow">if</span>( !<a class="code" href="../../d1/d14/nifti1__io_8c.html#a836b54d494e9d2718e5541978ae3fc29">nifti_validfilename</a>(prefix) ) <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l02996"></a><span class="lineno"> 2996</span>&#160;</div><div class="line"><a name="l02997"></a><span class="lineno"> 2997</span>&#160;   <span class="comment">/* add space for extension, optional &quot;.gz&quot;, and null char */</span></div><div class="line"><a name="l02998"></a><span class="lineno"> 2998</span>&#160;   iname = (<span class="keywordtype">char</span> *)calloc(<span class="keyword">sizeof</span>(<span class="keywordtype">char</span>),strlen(prefix)+8);</div><div class="line"><a name="l02999"></a><span class="lineno"> 2999</span>&#160;   <span class="keywordflow">if</span>( !iname ){ fprintf(stderr,<span class="stringliteral">&quot;** small malloc failure!\n&quot;</span>); <span class="keywordflow">return</span> NULL; }</div><div class="line"><a name="l03000"></a><span class="lineno"> 3000</span>&#160;   strcpy(iname, prefix);</div><div class="line"><a name="l03001"></a><span class="lineno"> 3001</span>&#160;</div><div class="line"><a name="l03002"></a><span class="lineno"> 3002</span>&#160;   <span class="comment">/* use any valid extension */</span></div><div class="line"><a name="l03003"></a><span class="lineno"> 3003</span>&#160;   <span class="keywordflow">if</span>( (ext = <a class="code" href="../../d1/d14/nifti1__io_8c.html#a338a5f9b74c37ee28ca8683324434a05">nifti_find_file_extension</a>(iname)) != NULL ){</div><div class="line"><a name="l03004"></a><span class="lineno"> 3004</span>&#160;      <span class="comment">/* if uppercase, convert all extensions */</span></div><div class="line"><a name="l03005"></a><span class="lineno"> 3005</span>&#160;      <span class="keywordflow">if</span>( is_uppercase(ext) ) {</div><div class="line"><a name="l03006"></a><span class="lineno"> 3006</span>&#160;         make_uppercase(extnii);</div><div class="line"><a name="l03007"></a><span class="lineno"> 3007</span>&#160;         make_uppercase(exthdr);</div><div class="line"><a name="l03008"></a><span class="lineno"> 3008</span>&#160;         make_uppercase(extimg);</div><div class="line"><a name="l03009"></a><span class="lineno"> 3009</span>&#160;         make_uppercase(extnia);</div><div class="line"><a name="l03010"></a><span class="lineno"> 3010</span>&#160;         make_uppercase(extgz);</div><div class="line"><a name="l03011"></a><span class="lineno"> 3011</span>&#160;      }</div><div class="line"><a name="l03012"></a><span class="lineno"> 3012</span>&#160;</div><div class="line"><a name="l03013"></a><span class="lineno"> 3013</span>&#160;      <span class="keywordflow">if</span>( strncmp(ext,exthdr,4) == 0 )</div><div class="line"><a name="l03014"></a><span class="lineno"> 3014</span>&#160;         memcpy(ext,extimg,4);   <span class="comment">/* then convert hdr name to img */</span></div><div class="line"><a name="l03015"></a><span class="lineno"> 3015</span>&#160;   }</div><div class="line"><a name="l03016"></a><span class="lineno"> 3016</span>&#160;   <span class="comment">/* otherwise, make one up */</span></div><div class="line"><a name="l03017"></a><span class="lineno"> 3017</span>&#160;   <span class="keywordflow">else</span> <span class="keywordflow">if</span>( nifti_type == NIFTI_FTYPE_NIFTI1_1 ) strcat(iname, extnii);</div><div class="line"><a name="l03018"></a><span class="lineno"> 3018</span>&#160;   <span class="keywordflow">else</span> <span class="keywordflow">if</span>( nifti_type == NIFTI_FTYPE_ASCII )    strcat(iname, extnia);</div><div class="line"><a name="l03019"></a><span class="lineno"> 3019</span>&#160;   <span class="keywordflow">else</span>                                          strcat(iname, extimg);</div><div class="line"><a name="l03020"></a><span class="lineno"> 3020</span>&#160;</div><div class="line"><a name="l03021"></a><span class="lineno"> 3021</span>&#160;<span class="preprocessor">#ifdef HAVE_ZLIB  </span><span class="comment">/* if compression is requested, make sure of suffix */</span><span class="preprocessor"></span></div><div class="line"><a name="l03022"></a><span class="lineno"> 3022</span>&#160;   <span class="keywordflow">if</span>( comp &amp;&amp; (!ext || !strstr(iname,extgz)) ) strcat(iname,extgz);</div><div class="line"><a name="l03023"></a><span class="lineno"> 3023</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l03024"></a><span class="lineno"> 3024</span>&#160;</div><div class="line"><a name="l03025"></a><span class="lineno"> 3025</span>&#160;   <span class="comment">/* check for existence failure */</span></div><div class="line"><a name="l03026"></a><span class="lineno"> 3026</span>&#160;   <span class="keywordflow">if</span>( check &amp;&amp; <a class="code" href="../../d1/d14/nifti1__io_8c.html#aebd0c1d644fdafa59727dd8f57ae6686">nifti_fileexists</a>(iname) ){</div><div class="line"><a name="l03027"></a><span class="lineno"> 3027</span>&#160;      fprintf(stderr,<span class="stringliteral">&quot;** failure: image file &#39;%s&#39; already exists\n&quot;</span>,iname);</div><div class="line"><a name="l03028"></a><span class="lineno"> 3028</span>&#160;      free(iname);</div><div class="line"><a name="l03029"></a><span class="lineno"> 3029</span>&#160;      <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l03030"></a><span class="lineno"> 3030</span>&#160;   }</div><div class="line"><a name="l03031"></a><span class="lineno"> 3031</span>&#160;</div><div class="line"><a name="l03032"></a><span class="lineno"> 3032</span>&#160;   <span class="keywordflow">if</span>( <a class="code" href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a>.debug &gt; 2 ) fprintf(stderr,<span class="stringliteral">&quot;+d made image filename &#39;%s&#39;\n&quot;</span>,iname);</div><div class="line"><a name="l03033"></a><span class="lineno"> 3033</span>&#160;</div><div class="line"><a name="l03034"></a><span class="lineno"> 3034</span>&#160;   <span class="keywordflow">return</span> iname;</div><div class="line"><a name="l03035"></a><span class="lineno"> 3035</span>&#160;}</div><div class="ttc" id="nifti1__io_8c_html_a338a5f9b74c37ee28ca8683324434a05"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#a338a5f9b74c37ee28ca8683324434a05">nifti_find_file_extension</a></div><div class="ttdeci">char * nifti_find_file_extension(const char *name)</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:2583</div></div>
<div class="ttc" id="nifti1__io_8c_html_aebd0c1d644fdafa59727dd8f57ae6686"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#aebd0c1d644fdafa59727dd8f57ae6686">nifti_fileexists</a></div><div class="ttdeci">int nifti_fileexists(const char *fname)</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:2481</div></div>
<div class="ttc" id="nifti1__io_8c_html_a836b54d494e9d2718e5541978ae3fc29"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#a836b54d494e9d2718e5541978ae3fc29">nifti_validfilename</a></div><div class="ttdeci">int nifti_validfilename(const char *fname)</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:2550</div></div>
<div class="ttc" id="nifti1__io_8c_html_a6e047e1dc2f826a4adff048bee8f5df7"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a></div><div class="ttdeci">static nifti_global_options g_opts</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:344</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4ccc9daef977faa38f1b05647f835e8d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4ccc9daef977faa38f1b05647f835e8d">&#9670;&nbsp;</a></span>nifti_mat33_colnorm()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float nifti_mat33_colnorm </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d7/d16/structmat33.html">mat33</a>&#160;</td>
          <td class="paramname"><em>A</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>compute the max column norm of a 3x3 matrix </p>
<div class="fragment"><div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;{</div><div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;   <span class="keywordtype">float</span> r1,r2,r3 ;</div><div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;</div><div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;   r1 = fabs(A.m[0][0])+fabs(A.m[1][0])+fabs(A.m[2][0]) ;</div><div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;   r2 = fabs(A.m[0][1])+fabs(A.m[1][1])+fabs(A.m[2][1]) ;</div><div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;   r3 = fabs(A.m[0][2])+fabs(A.m[1][2])+fabs(A.m[2][2]) ;</div><div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;   <span class="keywordflow">if</span>( r1 &lt; r2 ) r1 = r2 ;</div><div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160;   <span class="keywordflow">if</span>( r1 &lt; r3 ) r1 = r3 ;</div><div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;   <span class="keywordflow">return</span> r1 ;</div><div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a id="a9d50d3f27b0f6a7710d10c00d5041b63"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9d50d3f27b0f6a7710d10c00d5041b63">&#9670;&nbsp;</a></span>nifti_mat33_determ()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float nifti_mat33_determ </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d7/d16/structmat33.html">mat33</a>&#160;</td>
          <td class="paramname"><em>R</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>compute the determinant of a 3x3 matrix </p>
<div class="fragment"><div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;{</div><div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;   <span class="keywordtype">double</span> r11,r12,r13,r21,r22,r23,r31,r32,r33 ;</div><div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;                                                       <span class="comment">/*  INPUT MATRIX:  */</span></div><div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;   r11 = R.<a class="code" href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">m</a>[0][0]; r12 = R.<a class="code" href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">m</a>[0][1]; r13 = R.<a class="code" href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">m</a>[0][2];  <span class="comment">/* [ r11 r12 r13 ] */</span></div><div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;   r21 = R.<a class="code" href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">m</a>[1][0]; r22 = R.<a class="code" href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">m</a>[1][1]; r23 = R.<a class="code" href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">m</a>[1][2];  <span class="comment">/* [ r21 r22 r23 ] */</span></div><div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;   r31 = R.<a class="code" href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">m</a>[2][0]; r32 = R.<a class="code" href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">m</a>[2][1]; r33 = R.<a class="code" href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">m</a>[2][2];  <span class="comment">/* [ r31 r32 r33 ] */</span></div><div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;</div><div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;   <span class="keywordflow">return</span> r11*r22*r33-r11*r32*r23-r21*r12*r33</div><div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;         +r21*r32*r13+r31*r12*r23-r31*r22*r13 ;</div><div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;}</div><div class="ttc" id="structmat33_html_ae68888e41e6dfff14c7ae18b5777fb92"><div class="ttname"><a href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">mat33::m</a></div><div class="ttdeci">float m[3][3]</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:64</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac4d58f4a9ed98b1b4ea642c95886d346"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac4d58f4a9ed98b1b4ea642c95886d346">&#9670;&nbsp;</a></span>nifti_mat33_inverse()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d7/d16/structmat33.html">mat33</a> nifti_mat33_inverse </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d7/d16/structmat33.html">mat33</a>&#160;</td>
          <td class="paramname"><em>R</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>compute the inverse of a 3x3 matrix </p>
<div class="fragment"><div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;{</div><div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;   <span class="keywordtype">double</span> r11,r12,r13,r21,r22,r23,r31,r32,r33 , deti ;</div><div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;   <a class="code" href="../../d7/d16/structmat33.html">mat33</a> Q ;</div><div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;                                                       <span class="comment">/*  INPUT MATRIX:  */</span></div><div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;   r11 = R.<a class="code" href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">m</a>[0][0]; r12 = R.<a class="code" href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">m</a>[0][1]; r13 = R.<a class="code" href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">m</a>[0][2];  <span class="comment">/* [ r11 r12 r13 ] */</span></div><div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;   r21 = R.<a class="code" href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">m</a>[1][0]; r22 = R.<a class="code" href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">m</a>[1][1]; r23 = R.<a class="code" href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">m</a>[1][2];  <span class="comment">/* [ r21 r22 r23 ] */</span></div><div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;   r31 = R.<a class="code" href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">m</a>[2][0]; r32 = R.<a class="code" href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">m</a>[2][1]; r33 = R.<a class="code" href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">m</a>[2][2];  <span class="comment">/* [ r31 r32 r33 ] */</span></div><div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;</div><div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;   deti = r11*r22*r33-r11*r32*r23-r21*r12*r33</div><div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;         +r21*r32*r13+r31*r12*r23-r31*r22*r13 ;</div><div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;</div><div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;   <span class="keywordflow">if</span>( deti != 0.0l ) deti = 1.0l / deti ;</div><div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;</div><div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;   Q.<a class="code" href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">m</a>[0][0] = deti*( r22*r33-r32*r23) ;</div><div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;   Q.<a class="code" href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">m</a>[0][1] = deti*(-r12*r33+r32*r13) ;</div><div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;   Q.<a class="code" href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">m</a>[0][2] = deti*( r12*r23-r22*r13) ;</div><div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;</div><div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;   Q.<a class="code" href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">m</a>[1][0] = deti*(-r21*r33+r31*r23) ;</div><div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;   Q.<a class="code" href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">m</a>[1][1] = deti*( r11*r33-r31*r13) ;</div><div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;   Q.<a class="code" href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">m</a>[1][2] = deti*(-r11*r23+r21*r13) ;</div><div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;</div><div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;   Q.<a class="code" href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">m</a>[2][0] = deti*( r21*r32-r31*r22) ;</div><div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;   Q.<a class="code" href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">m</a>[2][1] = deti*(-r11*r32+r31*r12) ;</div><div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;   Q.<a class="code" href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">m</a>[2][2] = deti*( r11*r22-r21*r12) ;</div><div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;</div><div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;   <span class="keywordflow">return</span> Q ;</div><div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;}</div><div class="ttc" id="structmat33_html"><div class="ttname"><a href="../../d7/d16/structmat33.html">mat33</a></div><div class="ttdef"><b>Definition:</b> nifti1_io.h:63</div></div>
<div class="ttc" id="structmat33_html_ae68888e41e6dfff14c7ae18b5777fb92"><div class="ttname"><a href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">mat33::m</a></div><div class="ttdeci">float m[3][3]</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:64</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a44785e6bf9b19f120a9158cc1af312f6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a44785e6bf9b19f120a9158cc1af312f6">&#9670;&nbsp;</a></span>nifti_mat33_mul()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d7/d16/structmat33.html">mat33</a> nifti_mat33_mul </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d7/d16/structmat33.html">mat33</a>&#160;</td>
          <td class="paramname"><em>A</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d7/d16/structmat33.html">mat33</a>&#160;</td>
          <td class="paramname"><em>B</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>multiply 2 3x3 matrices </p>
<div class="fragment"><div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;{</div><div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;   <a class="code" href="../../d7/d16/structmat33.html">mat33</a> C ; <span class="keywordtype">int</span> i,j ;</div><div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;   <span class="keywordflow">for</span>( i=0 ; i &lt; 3 ; i++ )</div><div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;    <span class="keywordflow">for</span>( j=0 ; j &lt; 3 ; j++ )</div><div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160;      C.<a class="code" href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">m</a>[i][j] =  A.m[i][0] * B.<a class="code" href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">m</a>[0][j]</div><div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;                 + A.m[i][1] * B.<a class="code" href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">m</a>[1][j]</div><div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;                 + A.m[i][2] * B.<a class="code" href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">m</a>[2][j] ;</div><div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160;   <span class="keywordflow">return</span> C ;</div><div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;}</div><div class="ttc" id="structmat33_html"><div class="ttname"><a href="../../d7/d16/structmat33.html">mat33</a></div><div class="ttdef"><b>Definition:</b> nifti1_io.h:63</div></div>
<div class="ttc" id="structmat33_html_ae68888e41e6dfff14c7ae18b5777fb92"><div class="ttname"><a href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">mat33::m</a></div><div class="ttdeci">float m[3][3]</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:64</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a32d3a6d10f5e97ddc243001727c129a1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a32d3a6d10f5e97ddc243001727c129a1">&#9670;&nbsp;</a></span>nifti_mat33_polar()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d7/d16/structmat33.html">mat33</a> nifti_mat33_polar </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d7/d16/structmat33.html">mat33</a>&#160;</td>
          <td class="paramname"><em>A</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>polar decomposition of a 3x3 matrix</p>
<p>This finds the closest orthogonal matrix to input A (in both the Frobenius and L2 norms).</p>
<p>Algorithm is that from NJ Higham, SIAM J Sci Stat Comput, 7:1160-1174. </p>
<div class="fragment"><div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;{</div><div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;   <a class="code" href="../../d7/d16/structmat33.html">mat33</a> X , Y , Z ;</div><div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160;   <span class="keywordtype">float</span> alp,bet,gam,gmi , dif=1.0 ;</div><div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160;   <span class="keywordtype">int</span> k=0 ;</div><div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160;</div><div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;   X = A ;</div><div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160;</div><div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;   <span class="comment">/* force matrix to be nonsingular */</span></div><div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;</div><div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160;   gam = <a class="code" href="../../d1/d14/nifti1__io_8c.html#a9d50d3f27b0f6a7710d10c00d5041b63">nifti_mat33_determ</a>(X) ;</div><div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;   <span class="keywordflow">while</span>( gam == 0.0 ){        <span class="comment">/* perturb matrix */</span></div><div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160;     gam = 0.00001 * ( 0.001 + <a class="code" href="../../d1/d14/nifti1__io_8c.html#a9a52da66c78e82f5d63a388b813466a3">nifti_mat33_rownorm</a>(X) ) ;</div><div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;     X.m[0][0] += gam ; X.m[1][1] += gam ; X.m[2][2] += gam ;</div><div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;     gam = <a class="code" href="../../d1/d14/nifti1__io_8c.html#a9d50d3f27b0f6a7710d10c00d5041b63">nifti_mat33_determ</a>(X) ;</div><div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;   }</div><div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160;</div><div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;   <span class="keywordflow">while</span>(1){</div><div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160;     Y = <a class="code" href="../../d1/d14/nifti1__io_8c.html#ac4d58f4a9ed98b1b4ea642c95886d346">nifti_mat33_inverse</a>(X) ;</div><div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;     <span class="keywordflow">if</span>( dif &gt; 0.3 ){     <span class="comment">/* far from convergence */</span></div><div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160;       alp = sqrt( <a class="code" href="../../d1/d14/nifti1__io_8c.html#a9a52da66c78e82f5d63a388b813466a3">nifti_mat33_rownorm</a>(X) * <a class="code" href="../../d1/d14/nifti1__io_8c.html#a4ccc9daef977faa38f1b05647f835e8d">nifti_mat33_colnorm</a>(X) ) ;</div><div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160;       bet = sqrt( <a class="code" href="../../d1/d14/nifti1__io_8c.html#a9a52da66c78e82f5d63a388b813466a3">nifti_mat33_rownorm</a>(Y) * <a class="code" href="../../d1/d14/nifti1__io_8c.html#a4ccc9daef977faa38f1b05647f835e8d">nifti_mat33_colnorm</a>(Y) ) ;</div><div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160;       gam = sqrt( bet / alp ) ;</div><div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160;       gmi = 1.0 / gam ;</div><div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160;     } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160;       gam = gmi = 1.0 ;  <span class="comment">/* close to convergence */</span></div><div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160;     }</div><div class="line"><a name="l01918"></a><span class="lineno"> 1918</span>&#160;     Z.m[0][0] = 0.5 * ( gam*X.m[0][0] + gmi*Y.<a class="code" href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">m</a>[0][0] ) ;</div><div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160;     Z.m[0][1] = 0.5 * ( gam*X.m[0][1] + gmi*Y.<a class="code" href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">m</a>[1][0] ) ;</div><div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160;     Z.m[0][2] = 0.5 * ( gam*X.m[0][2] + gmi*Y.<a class="code" href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">m</a>[2][0] ) ;</div><div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160;     Z.m[1][0] = 0.5 * ( gam*X.m[1][0] + gmi*Y.<a class="code" href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">m</a>[0][1] ) ;</div><div class="line"><a name="l01922"></a><span class="lineno"> 1922</span>&#160;     Z.m[1][1] = 0.5 * ( gam*X.m[1][1] + gmi*Y.<a class="code" href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">m</a>[1][1] ) ;</div><div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160;     Z.m[1][2] = 0.5 * ( gam*X.m[1][2] + gmi*Y.<a class="code" href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">m</a>[2][1] ) ;</div><div class="line"><a name="l01924"></a><span class="lineno"> 1924</span>&#160;     Z.m[2][0] = 0.5 * ( gam*X.m[2][0] + gmi*Y.<a class="code" href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">m</a>[0][2] ) ;</div><div class="line"><a name="l01925"></a><span class="lineno"> 1925</span>&#160;     Z.m[2][1] = 0.5 * ( gam*X.m[2][1] + gmi*Y.<a class="code" href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">m</a>[1][2] ) ;</div><div class="line"><a name="l01926"></a><span class="lineno"> 1926</span>&#160;     Z.m[2][2] = 0.5 * ( gam*X.m[2][2] + gmi*Y.<a class="code" href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">m</a>[2][2] ) ;</div><div class="line"><a name="l01927"></a><span class="lineno"> 1927</span>&#160;</div><div class="line"><a name="l01928"></a><span class="lineno"> 1928</span>&#160;     dif = fabs(Z.m[0][0]-X.m[0][0])+fabs(Z.m[0][1]-X.m[0][1])</div><div class="line"><a name="l01929"></a><span class="lineno"> 1929</span>&#160;          +fabs(Z.m[0][2]-X.m[0][2])+fabs(Z.m[1][0]-X.m[1][0])</div><div class="line"><a name="l01930"></a><span class="lineno"> 1930</span>&#160;          +fabs(Z.m[1][1]-X.m[1][1])+fabs(Z.m[1][2]-X.m[1][2])</div><div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160;          +fabs(Z.m[2][0]-X.m[2][0])+fabs(Z.m[2][1]-X.m[2][1])</div><div class="line"><a name="l01932"></a><span class="lineno"> 1932</span>&#160;          +fabs(Z.m[2][2]-X.m[2][2])                          ;</div><div class="line"><a name="l01933"></a><span class="lineno"> 1933</span>&#160;</div><div class="line"><a name="l01934"></a><span class="lineno"> 1934</span>&#160;     k = k+1 ;</div><div class="line"><a name="l01935"></a><span class="lineno"> 1935</span>&#160;     <span class="keywordflow">if</span>( k &gt; 100 || dif &lt; 3.e-6 ) break ;  <span class="comment">/* convergence or exhaustion */</span></div><div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160;     X = Z ;</div><div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160;   }</div><div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160;</div><div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160;   <span class="keywordflow">return</span> Z ;</div><div class="line"><a name="l01940"></a><span class="lineno"> 1940</span>&#160;}</div><div class="ttc" id="nifti1__io_8c_html_a9a52da66c78e82f5d63a388b813466a3"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#a9a52da66c78e82f5d63a388b813466a3">nifti_mat33_rownorm</a></div><div class="ttdeci">float nifti_mat33_rownorm(mat33 A)</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:1842</div></div>
<div class="ttc" id="nifti1__io_8c_html_a4ccc9daef977faa38f1b05647f835e8d"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#a4ccc9daef977faa38f1b05647f835e8d">nifti_mat33_colnorm</a></div><div class="ttdeci">float nifti_mat33_colnorm(mat33 A)</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:1857</div></div>
<div class="ttc" id="nifti1__io_8c_html_a9d50d3f27b0f6a7710d10c00d5041b63"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#a9d50d3f27b0f6a7710d10c00d5041b63">nifti_mat33_determ</a></div><div class="ttdeci">float nifti_mat33_determ(mat33 R)</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:1827</div></div>
<div class="ttc" id="structmat33_html"><div class="ttname"><a href="../../d7/d16/structmat33.html">mat33</a></div><div class="ttdef"><b>Definition:</b> nifti1_io.h:63</div></div>
<div class="ttc" id="structmat33_html_ae68888e41e6dfff14c7ae18b5777fb92"><div class="ttname"><a href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">mat33::m</a></div><div class="ttdeci">float m[3][3]</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:64</div></div>
<div class="ttc" id="nifti1__io_8c_html_ac4d58f4a9ed98b1b4ea642c95886d346"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#ac4d58f4a9ed98b1b4ea642c95886d346">nifti_mat33_inverse</a></div><div class="ttdeci">mat33 nifti_mat33_inverse(mat33 R)</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:1795</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a9a52da66c78e82f5d63a388b813466a3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9a52da66c78e82f5d63a388b813466a3">&#9670;&nbsp;</a></span>nifti_mat33_rownorm()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float nifti_mat33_rownorm </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d7/d16/structmat33.html">mat33</a>&#160;</td>
          <td class="paramname"><em>A</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>compute the max row norm of a 3x3 matrix </p>
<div class="fragment"><div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;{</div><div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;   <span class="keywordtype">float</span> r1,r2,r3 ;</div><div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;</div><div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;   r1 = fabs(A.m[0][0])+fabs(A.m[0][1])+fabs(A.m[0][2]) ;</div><div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;   r2 = fabs(A.m[1][0])+fabs(A.m[1][1])+fabs(A.m[1][2]) ;</div><div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;   r3 = fabs(A.m[2][0])+fabs(A.m[2][1])+fabs(A.m[2][2]) ;</div><div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;   <span class="keywordflow">if</span>( r1 &lt; r2 ) r1 = r2 ;</div><div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;   <span class="keywordflow">if</span>( r1 &lt; r3 ) r1 = r3 ;</div><div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;   <span class="keywordflow">return</span> r1 ;</div><div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a id="abf7254db0ad36f998a92ac6f42f9c5c9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abf7254db0ad36f998a92ac6f42f9c5c9">&#9670;&nbsp;</a></span>nifti_mat44_inverse()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/d6d/structmat44.html">mat44</a> nifti_mat44_inverse </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/d6d/structmat44.html">mat44</a>&#160;</td>
          <td class="paramname"><em>R</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Compute the inverse of a bordered 4x4 matrix.</p>
<pre><ul>
<li>Some numerical code fragments were generated by Maple 8.</li>
<li>If a singular matrix is input, the output matrix will be all zero.</li>
<li><p class="startli">You can check for this by examining the [3][3] element, which will
  be 1.0 for the normal case and 0.0 for the bad case.</p>
<p class="startli">  The input matrix should have the form:
     [ r11 r12 r13 v1 ]
     [ r21 r22 r23 v2 ]
     [ r31 r32 r33 v3 ]
     [  0   0   0   1 ]
  
</p>
</li>
</ul>
</pre><div class="fragment"><div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;{</div><div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;   <span class="keywordtype">double</span> r11,r12,r13,r21,r22,r23,r31,r32,r33,v1,v2,v3 , deti ;</div><div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;   <a class="code" href="../../d9/d6d/structmat44.html">mat44</a> Q ;</div><div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;                                                       <span class="comment">/*  INPUT MATRIX IS:  */</span></div><div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;   r11 = R.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[0][0]; r12 = R.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[0][1]; r13 = R.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[0][2];  <span class="comment">/* [ r11 r12 r13 v1 ] */</span></div><div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;   r21 = R.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[1][0]; r22 = R.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[1][1]; r23 = R.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[1][2];  <span class="comment">/* [ r21 r22 r23 v2 ] */</span></div><div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;   r31 = R.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[2][0]; r32 = R.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[2][1]; r33 = R.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[2][2];  <span class="comment">/* [ r31 r32 r33 v3 ] */</span></div><div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;   v1  = R.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[0][3]; v2  = R.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[1][3]; v3  = R.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[2][3];  <span class="comment">/* [  0   0   0   1 ] */</span></div><div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;</div><div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;   deti = r11*r22*r33-r11*r32*r23-r21*r12*r33</div><div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;         +r21*r32*r13+r31*r12*r23-r31*r22*r13 ;</div><div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;</div><div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;   <span class="keywordflow">if</span>( deti != 0.0l ) deti = 1.0l / deti ;</div><div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;</div><div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;   Q.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[0][0] = deti*( r22*r33-r32*r23) ;</div><div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;   Q.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[0][1] = deti*(-r12*r33+r32*r13) ;</div><div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;   Q.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[0][2] = deti*( r12*r23-r22*r13) ;</div><div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;   Q.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[0][3] = deti*(-r12*r23*v3+r12*v2*r33+r22*r13*v3</div><div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;                     -r22*v1*r33-r32*r13*v2+r32*v1*r23) ;</div><div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;</div><div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;   Q.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[1][0] = deti*(-r21*r33+r31*r23) ;</div><div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;   Q.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[1][1] = deti*( r11*r33-r31*r13) ;</div><div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;   Q.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[1][2] = deti*(-r11*r23+r21*r13) ;</div><div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;   Q.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[1][3] = deti*( r11*r23*v3-r11*v2*r33-r21*r13*v3</div><div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;                     +r21*v1*r33+r31*r13*v2-r31*v1*r23) ;</div><div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;</div><div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;   Q.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[2][0] = deti*( r21*r32-r31*r22) ;</div><div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;   Q.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[2][1] = deti*(-r11*r32+r31*r12) ;</div><div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;   Q.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[2][2] = deti*( r11*r22-r21*r12) ;</div><div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;   Q.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[2][3] = deti*(-r11*r22*v3+r11*r32*v2+r21*r12*v3</div><div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;                     -r21*r32*v1-r31*r12*v2+r31*r22*v1) ;</div><div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;</div><div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;   Q.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[3][0] = Q.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[3][1] = Q.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[3][2] = 0.0l ;</div><div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;   Q.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[3][3] = (deti == 0.0l) ? 0.0l : 1.0l ; <span class="comment">/* failure flag if deti == 0 */</span></div><div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;</div><div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;   <span class="keywordflow">return</span> Q ;</div><div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;}</div><div class="ttc" id="structmat44_html_ad11c8da60dd84b24824f70b08948d6e3"><div class="ttname"><a href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">mat44::m</a></div><div class="ttdeci">float m[4][4]</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:60</div></div>
<div class="ttc" id="structmat44_html"><div class="ttname"><a href="../../d9/d6d/structmat44.html">mat44</a></div><div class="ttdef"><b>Definition:</b> nifti1_io.h:59</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad8ba2d4a127c3ee26af9909ce2aa59e8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad8ba2d4a127c3ee26af9909ce2aa59e8">&#9670;&nbsp;</a></span>nifti_mat44_to_orientation()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void nifti_mat44_to_orientation </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/d6d/structmat44.html">mat44</a>&#160;</td>
          <td class="paramname"><em>R</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>icod</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>jcod</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>kcod</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>compute the (closest) orientation from a 4x4 ijk-&gt;xyz tranformation matrix</p>
<pre>
Input:  4x4 matrix that transforms (i,j,k) indexes to (x,y,z) coordinates,
        where +x=Right, +y=Anterior, +z=Superior.
        (Only the upper-left 3x3 corner of R is used herein.)
Output: 3 orientation codes that correspond to the closest "standard"
        anatomical orientation of the (i,j,k) axes.
Method: Find which permutation of (x,y,z) has the smallest angle to the
        (i,j,k) axes directions, which are the columns of the R matrix.
Errors: The codes returned will be zero.</pre><pre>For example, an axial volume might get return values of
  *icod = NIFTI_R2L   (i axis is mostly Right to Left)
  *jcod = NIFTI_P2A   (j axis is mostly Posterior to Anterior)
  *kcod = NIFTI_I2S   (k axis is mostly Inferior to Superior)
</pre><dl class="section see"><dt>See also</dt><dd>"QUATERNION REPRESENTATION OF ROTATION MATRIX" in nifti1.h</dd>
<dd>
<a class="el" href="../../d1/d14/nifti1__io_8c.html#a4b183639b2e242ac32210fe3437f60d2">nifti_quatern_to_mat44</a>, <a class="el" href="../../d1/d14/nifti1__io_8c.html#a84b68d5634ec94b5132e0067733e9f28">nifti_mat44_to_quatern</a>, <a class="el" href="../../d1/d14/nifti1__io_8c.html#a8c07c7b62ab67f0d0e901fdf4b755707">nifti_make_orthog_mat44</a> </dd></dl>
<div class="fragment"><div class="line"><a name="l01967"></a><span class="lineno"> 1967</span>&#160;{</div><div class="line"><a name="l01968"></a><span class="lineno"> 1968</span>&#160;   <span class="keywordtype">float</span> xi,xj,xk , yi,yj,yk , zi,zj,zk , val,detQ,detP ;</div><div class="line"><a name="l01969"></a><span class="lineno"> 1969</span>&#160;   <a class="code" href="../../d7/d16/structmat33.html">mat33</a> P , Q , M ;</div><div class="line"><a name="l01970"></a><span class="lineno"> 1970</span>&#160;   <span class="keywordtype">int</span> i,j,k=0,p,q,r , ibest,jbest,kbest,pbest,qbest,rbest ;</div><div class="line"><a name="l01971"></a><span class="lineno"> 1971</span>&#160;   <span class="keywordtype">float</span> vbest ;</div><div class="line"><a name="l01972"></a><span class="lineno"> 1972</span>&#160;</div><div class="line"><a name="l01973"></a><span class="lineno"> 1973</span>&#160;   <span class="keywordflow">if</span>( icod == NULL || jcod == NULL || kcod == NULL ) return ; <span class="comment">/* bad */</span></div><div class="line"><a name="l01974"></a><span class="lineno"> 1974</span>&#160;</div><div class="line"><a name="l01975"></a><span class="lineno"> 1975</span>&#160;   *icod = *jcod = *kcod = 0 ; <span class="comment">/* error returns, if sh*t happens */</span></div><div class="line"><a name="l01976"></a><span class="lineno"> 1976</span>&#160;</div><div class="line"><a name="l01977"></a><span class="lineno"> 1977</span>&#160;   <span class="comment">/* load column vectors for each (i,j,k) direction from matrix */</span></div><div class="line"><a name="l01978"></a><span class="lineno"> 1978</span>&#160;</div><div class="line"><a name="l01979"></a><span class="lineno"> 1979</span>&#160;   <span class="comment">/*-- i axis --*/</span> <span class="comment">/*-- j axis --*/</span> <span class="comment">/*-- k axis --*/</span></div><div class="line"><a name="l01980"></a><span class="lineno"> 1980</span>&#160;</div><div class="line"><a name="l01981"></a><span class="lineno"> 1981</span>&#160;   xi = R.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[0][0] ; xj = R.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[0][1] ; xk = R.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[0][2] ;</div><div class="line"><a name="l01982"></a><span class="lineno"> 1982</span>&#160;   yi = R.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[1][0] ; yj = R.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[1][1] ; yk = R.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[1][2] ;</div><div class="line"><a name="l01983"></a><span class="lineno"> 1983</span>&#160;   zi = R.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[2][0] ; zj = R.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[2][1] ; zk = R.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[2][2] ;</div><div class="line"><a name="l01984"></a><span class="lineno"> 1984</span>&#160;</div><div class="line"><a name="l01985"></a><span class="lineno"> 1985</span>&#160;   <span class="comment">/* normalize column vectors to get unit vectors along each ijk-axis */</span></div><div class="line"><a name="l01986"></a><span class="lineno"> 1986</span>&#160;</div><div class="line"><a name="l01987"></a><span class="lineno"> 1987</span>&#160;   <span class="comment">/* normalize i axis */</span></div><div class="line"><a name="l01988"></a><span class="lineno"> 1988</span>&#160;</div><div class="line"><a name="l01989"></a><span class="lineno"> 1989</span>&#160;   val = sqrt( xi*xi + yi*yi + zi*zi ) ;</div><div class="line"><a name="l01990"></a><span class="lineno"> 1990</span>&#160;   <span class="keywordflow">if</span>( val == 0.0 ) return ;                 <span class="comment">/* stupid input */</span></div><div class="line"><a name="l01991"></a><span class="lineno"> 1991</span>&#160;   xi /= val ; yi /= val ; zi /= val ;</div><div class="line"><a name="l01992"></a><span class="lineno"> 1992</span>&#160;</div><div class="line"><a name="l01993"></a><span class="lineno"> 1993</span>&#160;   <span class="comment">/* normalize j axis */</span></div><div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>&#160;</div><div class="line"><a name="l01995"></a><span class="lineno"> 1995</span>&#160;   val = sqrt( xj*xj + yj*yj + zj*zj ) ;</div><div class="line"><a name="l01996"></a><span class="lineno"> 1996</span>&#160;   <span class="keywordflow">if</span>( val == 0.0 ) return ;                 <span class="comment">/* stupid input */</span></div><div class="line"><a name="l01997"></a><span class="lineno"> 1997</span>&#160;   xj /= val ; yj /= val ; zj /= val ;</div><div class="line"><a name="l01998"></a><span class="lineno"> 1998</span>&#160;</div><div class="line"><a name="l01999"></a><span class="lineno"> 1999</span>&#160;   <span class="comment">/* orthogonalize j axis to i axis, if needed */</span></div><div class="line"><a name="l02000"></a><span class="lineno"> 2000</span>&#160;</div><div class="line"><a name="l02001"></a><span class="lineno"> 2001</span>&#160;   val = xi*xj + yi*yj + zi*zj ;    <span class="comment">/* dot product between i and j */</span></div><div class="line"><a name="l02002"></a><span class="lineno"> 2002</span>&#160;   <span class="keywordflow">if</span>( fabs(val) &gt; 1.e-4 ){</div><div class="line"><a name="l02003"></a><span class="lineno"> 2003</span>&#160;     xj -= val*xi ; yj -= val*yi ; zj -= val*zi ;</div><div class="line"><a name="l02004"></a><span class="lineno"> 2004</span>&#160;     val = sqrt( xj*xj + yj*yj + zj*zj ) ;  <span class="comment">/* must renormalize */</span></div><div class="line"><a name="l02005"></a><span class="lineno"> 2005</span>&#160;     <span class="keywordflow">if</span>( val == 0.0 ) return ;              <span class="comment">/* j was parallel to i? */</span></div><div class="line"><a name="l02006"></a><span class="lineno"> 2006</span>&#160;     xj /= val ; yj /= val ; zj /= val ;</div><div class="line"><a name="l02007"></a><span class="lineno"> 2007</span>&#160;   }</div><div class="line"><a name="l02008"></a><span class="lineno"> 2008</span>&#160;</div><div class="line"><a name="l02009"></a><span class="lineno"> 2009</span>&#160;   <span class="comment">/* normalize k axis; if it is zero, make it the cross product i x j */</span></div><div class="line"><a name="l02010"></a><span class="lineno"> 2010</span>&#160;</div><div class="line"><a name="l02011"></a><span class="lineno"> 2011</span>&#160;   val = sqrt( xk*xk + yk*yk + zk*zk ) ;</div><div class="line"><a name="l02012"></a><span class="lineno"> 2012</span>&#160;   <span class="keywordflow">if</span>( val == 0.0 ){ xk = yi*zj-zi*yj; yk = zi*xj-zj*xi ; zk=xi*yj-yi*xj ; }</div><div class="line"><a name="l02013"></a><span class="lineno"> 2013</span>&#160;   <span class="keywordflow">else</span>            { xk /= val ; yk /= val ; zk /= val ; }</div><div class="line"><a name="l02014"></a><span class="lineno"> 2014</span>&#160;</div><div class="line"><a name="l02015"></a><span class="lineno"> 2015</span>&#160;   <span class="comment">/* orthogonalize k to i */</span></div><div class="line"><a name="l02016"></a><span class="lineno"> 2016</span>&#160;</div><div class="line"><a name="l02017"></a><span class="lineno"> 2017</span>&#160;   val = xi*xk + yi*yk + zi*zk ;    <span class="comment">/* dot product between i and k */</span></div><div class="line"><a name="l02018"></a><span class="lineno"> 2018</span>&#160;   <span class="keywordflow">if</span>( fabs(val) &gt; 1.e-4 ){</div><div class="line"><a name="l02019"></a><span class="lineno"> 2019</span>&#160;     xk -= val*xi ; yk -= val*yi ; zk -= val*zi ;</div><div class="line"><a name="l02020"></a><span class="lineno"> 2020</span>&#160;     val = sqrt( xk*xk + yk*yk + zk*zk ) ;</div><div class="line"><a name="l02021"></a><span class="lineno"> 2021</span>&#160;     <span class="keywordflow">if</span>( val == 0.0 ) return ;      <span class="comment">/* bad */</span></div><div class="line"><a name="l02022"></a><span class="lineno"> 2022</span>&#160;     xk /= val ; yk /= val ; zk /= val ;</div><div class="line"><a name="l02023"></a><span class="lineno"> 2023</span>&#160;   }</div><div class="line"><a name="l02024"></a><span class="lineno"> 2024</span>&#160;</div><div class="line"><a name="l02025"></a><span class="lineno"> 2025</span>&#160;   <span class="comment">/* orthogonalize k to j */</span></div><div class="line"><a name="l02026"></a><span class="lineno"> 2026</span>&#160;</div><div class="line"><a name="l02027"></a><span class="lineno"> 2027</span>&#160;   val = xj*xk + yj*yk + zj*zk ;    <span class="comment">/* dot product between j and k */</span></div><div class="line"><a name="l02028"></a><span class="lineno"> 2028</span>&#160;   <span class="keywordflow">if</span>( fabs(val) &gt; 1.e-4 ){</div><div class="line"><a name="l02029"></a><span class="lineno"> 2029</span>&#160;     xk -= val*xj ; yk -= val*yj ; zk -= val*zj ;</div><div class="line"><a name="l02030"></a><span class="lineno"> 2030</span>&#160;     val = sqrt( xk*xk + yk*yk + zk*zk ) ;</div><div class="line"><a name="l02031"></a><span class="lineno"> 2031</span>&#160;     <span class="keywordflow">if</span>( val == 0.0 ) return ;      <span class="comment">/* bad */</span></div><div class="line"><a name="l02032"></a><span class="lineno"> 2032</span>&#160;     xk /= val ; yk /= val ; zk /= val ;</div><div class="line"><a name="l02033"></a><span class="lineno"> 2033</span>&#160;   }</div><div class="line"><a name="l02034"></a><span class="lineno"> 2034</span>&#160;</div><div class="line"><a name="l02035"></a><span class="lineno"> 2035</span>&#160;   Q.<a class="code" href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">m</a>[0][0] = xi ; Q.<a class="code" href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">m</a>[0][1] = xj ; Q.<a class="code" href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">m</a>[0][2] = xk ;</div><div class="line"><a name="l02036"></a><span class="lineno"> 2036</span>&#160;   Q.<a class="code" href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">m</a>[1][0] = yi ; Q.<a class="code" href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">m</a>[1][1] = yj ; Q.<a class="code" href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">m</a>[1][2] = yk ;</div><div class="line"><a name="l02037"></a><span class="lineno"> 2037</span>&#160;   Q.<a class="code" href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">m</a>[2][0] = zi ; Q.<a class="code" href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">m</a>[2][1] = zj ; Q.<a class="code" href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">m</a>[2][2] = zk ;</div><div class="line"><a name="l02038"></a><span class="lineno"> 2038</span>&#160;</div><div class="line"><a name="l02039"></a><span class="lineno"> 2039</span>&#160;   <span class="comment">/* at this point, Q is the rotation matrix from the (i,j,k) to (x,y,z) axes */</span></div><div class="line"><a name="l02040"></a><span class="lineno"> 2040</span>&#160;</div><div class="line"><a name="l02041"></a><span class="lineno"> 2041</span>&#160;   detQ = <a class="code" href="../../d1/d14/nifti1__io_8c.html#a9d50d3f27b0f6a7710d10c00d5041b63">nifti_mat33_determ</a>( Q ) ;</div><div class="line"><a name="l02042"></a><span class="lineno"> 2042</span>&#160;   <span class="keywordflow">if</span>( detQ == 0.0 ) return ; <span class="comment">/* shouldn&#39;t happen unless user is a DUFIS */</span></div><div class="line"><a name="l02043"></a><span class="lineno"> 2043</span>&#160;</div><div class="line"><a name="l02044"></a><span class="lineno"> 2044</span>&#160;   <span class="comment">/* Build and test all possible +1/-1 coordinate permutation matrices P;</span></div><div class="line"><a name="l02045"></a><span class="lineno"> 2045</span>&#160;<span class="comment">      then find the P such that the rotation matrix M=PQ is closest to the</span></div><div class="line"><a name="l02046"></a><span class="lineno"> 2046</span>&#160;<span class="comment">      identity, in the sense of M having the smallest total rotation angle. */</span></div><div class="line"><a name="l02047"></a><span class="lineno"> 2047</span>&#160;</div><div class="line"><a name="l02048"></a><span class="lineno"> 2048</span>&#160;   <span class="comment">/* Despite the formidable looking 6 nested loops, there are</span></div><div class="line"><a name="l02049"></a><span class="lineno"> 2049</span>&#160;<span class="comment">      only 3*3*3*2*2*2 = 216 passes, which will run very quickly. */</span></div><div class="line"><a name="l02050"></a><span class="lineno"> 2050</span>&#160;</div><div class="line"><a name="l02051"></a><span class="lineno"> 2051</span>&#160;   vbest = -666.0 ; ibest=pbest=qbest=rbest=1 ; jbest=2 ; kbest=3 ;</div><div class="line"><a name="l02052"></a><span class="lineno"> 2052</span>&#160;   <span class="keywordflow">for</span>( i=1 ; i &lt;= 3 ; i++ ){     <span class="comment">/* i = column number to use for row #1 */</span></div><div class="line"><a name="l02053"></a><span class="lineno"> 2053</span>&#160;    <span class="keywordflow">for</span>( j=1 ; j &lt;= 3 ; j++ ){    <span class="comment">/* j = column number to use for row #2 */</span></div><div class="line"><a name="l02054"></a><span class="lineno"> 2054</span>&#160;     <span class="keywordflow">if</span>( i == j ) continue ;</div><div class="line"><a name="l02055"></a><span class="lineno"> 2055</span>&#160;      <span class="keywordflow">for</span>( k=1 ; k &lt;= 3 ; k++ ){  <span class="comment">/* k = column number to use for row #3 */</span></div><div class="line"><a name="l02056"></a><span class="lineno"> 2056</span>&#160;       <span class="keywordflow">if</span>( i == k || j == k ) continue ;</div><div class="line"><a name="l02057"></a><span class="lineno"> 2057</span>&#160;       P.<a class="code" href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">m</a>[0][0] = P.<a class="code" href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">m</a>[0][1] = P.<a class="code" href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">m</a>[0][2] =</div><div class="line"><a name="l02058"></a><span class="lineno"> 2058</span>&#160;        P.<a class="code" href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">m</a>[1][0] = P.<a class="code" href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">m</a>[1][1] = P.<a class="code" href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">m</a>[1][2] =</div><div class="line"><a name="l02059"></a><span class="lineno"> 2059</span>&#160;         P.<a class="code" href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">m</a>[2][0] = P.<a class="code" href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">m</a>[2][1] = P.<a class="code" href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">m</a>[2][2] = 0.0 ;</div><div class="line"><a name="l02060"></a><span class="lineno"> 2060</span>&#160;       <span class="keywordflow">for</span>( p=-1 ; p &lt;= 1 ; p+=2 ){    <span class="comment">/* p,q,r are -1 or +1      */</span></div><div class="line"><a name="l02061"></a><span class="lineno"> 2061</span>&#160;        <span class="keywordflow">for</span>( q=-1 ; q &lt;= 1 ; q+=2 ){   <span class="comment">/* and go into rows #1,2,3 */</span></div><div class="line"><a name="l02062"></a><span class="lineno"> 2062</span>&#160;         <span class="keywordflow">for</span>( r=-1 ; r &lt;= 1 ; r+=2 ){</div><div class="line"><a name="l02063"></a><span class="lineno"> 2063</span>&#160;           P.<a class="code" href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">m</a>[0][i-1] = p ; P.<a class="code" href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">m</a>[1][j-1] = q ; P.<a class="code" href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">m</a>[2][k-1] = r ;</div><div class="line"><a name="l02064"></a><span class="lineno"> 2064</span>&#160;           detP = <a class="code" href="../../d1/d14/nifti1__io_8c.html#a9d50d3f27b0f6a7710d10c00d5041b63">nifti_mat33_determ</a>(P) ;           <span class="comment">/* sign of permutation */</span></div><div class="line"><a name="l02065"></a><span class="lineno"> 2065</span>&#160;           <span class="keywordflow">if</span>( detP * detQ &lt;= 0.0 ) continue ;  <span class="comment">/* doesn&#39;t match sign of Q */</span></div><div class="line"><a name="l02066"></a><span class="lineno"> 2066</span>&#160;           M = <a class="code" href="../../d1/d14/nifti1__io_8c.html#a44785e6bf9b19f120a9158cc1af312f6">nifti_mat33_mul</a>(P,Q) ;</div><div class="line"><a name="l02067"></a><span class="lineno"> 2067</span>&#160;</div><div class="line"><a name="l02068"></a><span class="lineno"> 2068</span>&#160;           <span class="comment">/* angle of M rotation = 2.0*acos(0.5*sqrt(1.0+trace(M)))       */</span></div><div class="line"><a name="l02069"></a><span class="lineno"> 2069</span>&#160;           <span class="comment">/* we want largest trace(M) == smallest angle == M nearest to I */</span></div><div class="line"><a name="l02070"></a><span class="lineno"> 2070</span>&#160;</div><div class="line"><a name="l02071"></a><span class="lineno"> 2071</span>&#160;           val = M.m[0][0] + M.m[1][1] + M.m[2][2] ; <span class="comment">/* trace */</span></div><div class="line"><a name="l02072"></a><span class="lineno"> 2072</span>&#160;           <span class="keywordflow">if</span>( val &gt; vbest ){</div><div class="line"><a name="l02073"></a><span class="lineno"> 2073</span>&#160;             vbest = val ;</div><div class="line"><a name="l02074"></a><span class="lineno"> 2074</span>&#160;             ibest = i ; jbest = j ; kbest = k ;</div><div class="line"><a name="l02075"></a><span class="lineno"> 2075</span>&#160;             pbest = p ; qbest = q ; rbest = r ;</div><div class="line"><a name="l02076"></a><span class="lineno"> 2076</span>&#160;           }</div><div class="line"><a name="l02077"></a><span class="lineno"> 2077</span>&#160;   }}}}}}</div><div class="line"><a name="l02078"></a><span class="lineno"> 2078</span>&#160;</div><div class="line"><a name="l02079"></a><span class="lineno"> 2079</span>&#160;   <span class="comment">/* At this point ibest is 1 or 2 or 3; pbest is -1 or +1; etc.</span></div><div class="line"><a name="l02080"></a><span class="lineno"> 2080</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02081"></a><span class="lineno"> 2081</span>&#160;<span class="comment">      The matrix P that corresponds is the best permutation approximation</span></div><div class="line"><a name="l02082"></a><span class="lineno"> 2082</span>&#160;<span class="comment">      to Q-inverse; that is, P (approximately) takes (x,y,z) coordinates</span></div><div class="line"><a name="l02083"></a><span class="lineno"> 2083</span>&#160;<span class="comment">      to the (i,j,k) axes.</span></div><div class="line"><a name="l02084"></a><span class="lineno"> 2084</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02085"></a><span class="lineno"> 2085</span>&#160;<span class="comment">      For example, the first row of P (which contains pbest in column ibest)</span></div><div class="line"><a name="l02086"></a><span class="lineno"> 2086</span>&#160;<span class="comment">      determines the way the i axis points relative to the anatomical</span></div><div class="line"><a name="l02087"></a><span class="lineno"> 2087</span>&#160;<span class="comment">      (x,y,z) axes.  If ibest is 2, then the i axis is along the y axis,</span></div><div class="line"><a name="l02088"></a><span class="lineno"> 2088</span>&#160;<span class="comment">      which is direction P2A (if pbest &gt; 0) or A2P (if pbest &lt; 0).</span></div><div class="line"><a name="l02089"></a><span class="lineno"> 2089</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02090"></a><span class="lineno"> 2090</span>&#160;<span class="comment">      So, using ibest and pbest, we can assign the output code for</span></div><div class="line"><a name="l02091"></a><span class="lineno"> 2091</span>&#160;<span class="comment">      the i axis.  Mutatis mutandis for the j and k axes, of course. */</span></div><div class="line"><a name="l02092"></a><span class="lineno"> 2092</span>&#160;</div><div class="line"><a name="l02093"></a><span class="lineno"> 2093</span>&#160;   <span class="keywordflow">switch</span>( ibest*pbest ){</div><div class="line"><a name="l02094"></a><span class="lineno"> 2094</span>&#160;     <span class="keywordflow">case</span>  1: i = NIFTI_L2R ; break ;</div><div class="line"><a name="l02095"></a><span class="lineno"> 2095</span>&#160;     <span class="keywordflow">case</span> -1: i = NIFTI_R2L ; break ;</div><div class="line"><a name="l02096"></a><span class="lineno"> 2096</span>&#160;     <span class="keywordflow">case</span>  2: i = NIFTI_P2A ; break ;</div><div class="line"><a name="l02097"></a><span class="lineno"> 2097</span>&#160;     <span class="keywordflow">case</span> -2: i = NIFTI_A2P ; break ;</div><div class="line"><a name="l02098"></a><span class="lineno"> 2098</span>&#160;     <span class="keywordflow">case</span>  3: i = NIFTI_I2S ; break ;</div><div class="line"><a name="l02099"></a><span class="lineno"> 2099</span>&#160;     <span class="keywordflow">case</span> -3: i = NIFTI_S2I ; break ;</div><div class="line"><a name="l02100"></a><span class="lineno"> 2100</span>&#160;   }</div><div class="line"><a name="l02101"></a><span class="lineno"> 2101</span>&#160;</div><div class="line"><a name="l02102"></a><span class="lineno"> 2102</span>&#160;   <span class="keywordflow">switch</span>( jbest*qbest ){</div><div class="line"><a name="l02103"></a><span class="lineno"> 2103</span>&#160;     <span class="keywordflow">case</span>  1: j = NIFTI_L2R ; break ;</div><div class="line"><a name="l02104"></a><span class="lineno"> 2104</span>&#160;     <span class="keywordflow">case</span> -1: j = NIFTI_R2L ; break ;</div><div class="line"><a name="l02105"></a><span class="lineno"> 2105</span>&#160;     <span class="keywordflow">case</span>  2: j = NIFTI_P2A ; break ;</div><div class="line"><a name="l02106"></a><span class="lineno"> 2106</span>&#160;     <span class="keywordflow">case</span> -2: j = NIFTI_A2P ; break ;</div><div class="line"><a name="l02107"></a><span class="lineno"> 2107</span>&#160;     <span class="keywordflow">case</span>  3: j = NIFTI_I2S ; break ;</div><div class="line"><a name="l02108"></a><span class="lineno"> 2108</span>&#160;     <span class="keywordflow">case</span> -3: j = NIFTI_S2I ; break ;</div><div class="line"><a name="l02109"></a><span class="lineno"> 2109</span>&#160;   }</div><div class="line"><a name="l02110"></a><span class="lineno"> 2110</span>&#160;</div><div class="line"><a name="l02111"></a><span class="lineno"> 2111</span>&#160;   <span class="keywordflow">switch</span>( kbest*rbest ){</div><div class="line"><a name="l02112"></a><span class="lineno"> 2112</span>&#160;     <span class="keywordflow">case</span>  1: k = NIFTI_L2R ; break ;</div><div class="line"><a name="l02113"></a><span class="lineno"> 2113</span>&#160;     <span class="keywordflow">case</span> -1: k = NIFTI_R2L ; break ;</div><div class="line"><a name="l02114"></a><span class="lineno"> 2114</span>&#160;     <span class="keywordflow">case</span>  2: k = NIFTI_P2A ; break ;</div><div class="line"><a name="l02115"></a><span class="lineno"> 2115</span>&#160;     <span class="keywordflow">case</span> -2: k = NIFTI_A2P ; break ;</div><div class="line"><a name="l02116"></a><span class="lineno"> 2116</span>&#160;     <span class="keywordflow">case</span>  3: k = NIFTI_I2S ; break ;</div><div class="line"><a name="l02117"></a><span class="lineno"> 2117</span>&#160;     <span class="keywordflow">case</span> -3: k = NIFTI_S2I ; break ;</div><div class="line"><a name="l02118"></a><span class="lineno"> 2118</span>&#160;   }</div><div class="line"><a name="l02119"></a><span class="lineno"> 2119</span>&#160;</div><div class="line"><a name="l02120"></a><span class="lineno"> 2120</span>&#160;   *icod = i ; *jcod = j ; *kcod = k ; return ;</div><div class="line"><a name="l02121"></a><span class="lineno"> 2121</span>&#160;}</div><div class="ttc" id="structmat44_html_ad11c8da60dd84b24824f70b08948d6e3"><div class="ttname"><a href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">mat44::m</a></div><div class="ttdeci">float m[4][4]</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:60</div></div>
<div class="ttc" id="nifti1__io_8c_html_a9d50d3f27b0f6a7710d10c00d5041b63"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#a9d50d3f27b0f6a7710d10c00d5041b63">nifti_mat33_determ</a></div><div class="ttdeci">float nifti_mat33_determ(mat33 R)</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:1827</div></div>
<div class="ttc" id="nifti1__io_8c_html_a44785e6bf9b19f120a9158cc1af312f6"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#a44785e6bf9b19f120a9158cc1af312f6">nifti_mat33_mul</a></div><div class="ttdeci">mat33 nifti_mat33_mul(mat33 A, mat33 B)</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:1872</div></div>
<div class="ttc" id="structmat33_html"><div class="ttname"><a href="../../d7/d16/structmat33.html">mat33</a></div><div class="ttdef"><b>Definition:</b> nifti1_io.h:63</div></div>
<div class="ttc" id="structmat33_html_ae68888e41e6dfff14c7ae18b5777fb92"><div class="ttname"><a href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">mat33::m</a></div><div class="ttdeci">float m[3][3]</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:64</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a84b68d5634ec94b5132e0067733e9f28"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a84b68d5634ec94b5132e0067733e9f28">&#9670;&nbsp;</a></span>nifti_mat44_to_quatern()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void nifti_mat44_to_quatern </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/d6d/structmat44.html">mat44</a>&#160;</td>
          <td class="paramname"><em>R</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float *&#160;</td>
          <td class="paramname"><em>qb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float *&#160;</td>
          <td class="paramname"><em>qc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float *&#160;</td>
          <td class="paramname"><em>qd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float *&#160;</td>
          <td class="paramname"><em>qx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float *&#160;</td>
          <td class="paramname"><em>qy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float *&#160;</td>
          <td class="paramname"><em>qz</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float *&#160;</td>
          <td class="paramname"><em>dx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float *&#160;</td>
          <td class="paramname"><em>dy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float *&#160;</td>
          <td class="paramname"><em>dz</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float *&#160;</td>
          <td class="paramname"><em>qfac</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Given the 3x4 upper corner of the matrix R, compute the quaternion parameters that fit it.</p>
<ul>
<li>Any NULL pointer on input won't get assigned (e.g., if you don't want dx,dy,dz, just pass NULL in for those pointers).</li>
<li>If the 3 input matrix columns are NOT orthogonal, they will be orthogonalized prior to calculating the parameters, using the polar decomposition to find the orthogonal matrix closest to the column-normalized input matrix.</li>
<li>However, if the 3 input matrix columns are NOT orthogonal, then the matrix produced by nifti_quatern_to_mat44 WILL have orthogonal columns, so it won't be the same as the matrix input here. This "feature" is because the NIFTI 'qform' transform is deliberately not fully general &ndash; it is intended to model a volume with perpendicular axes.</li>
<li>If the 3 input matrix columns are not even linearly independent, you'll just have to take your luck, won't you?</li>
</ul>
<dl class="section see"><dt>See also</dt><dd>"QUATERNION REPRESENTATION OF ROTATION MATRIX" in nifti1.h</dd>
<dd>
<a class="el" href="../../d1/d14/nifti1__io_8c.html#a4b183639b2e242ac32210fe3437f60d2">nifti_quatern_to_mat44</a>, <a class="el" href="../../d1/d14/nifti1__io_8c.html#a8c07c7b62ab67f0d0e901fdf4b755707">nifti_make_orthog_mat44</a>, <a class="el" href="../../d1/d14/nifti1__io_8c.html#ad8ba2d4a127c3ee26af9909ce2aa59e8">nifti_mat44_to_orientation</a> </dd></dl>
<div class="fragment"><div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;{</div><div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;   <span class="keywordtype">double</span> r11,r12,r13 , r21,r22,r23 , r31,r32,r33 ;</div><div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;   <span class="keywordtype">double</span> xd,yd,zd , a,b,c,d ;</div><div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;   <a class="code" href="../../d7/d16/structmat33.html">mat33</a> P,Q ;</div><div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;</div><div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;   <span class="comment">/* offset outputs are read write out of input matrix  */</span></div><div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;</div><div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;   ASSIF(qx,R.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[0][3]) ; ASSIF(qy,R.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[1][3]) ; ASSIF(qz,R.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[2][3]) ;</div><div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;</div><div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;   <span class="comment">/* load 3x3 matrix into local variables */</span></div><div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;</div><div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;   r11 = R.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[0][0] ; r12 = R.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[0][1] ; r13 = R.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[0][2] ;</div><div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;   r21 = R.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[1][0] ; r22 = R.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[1][1] ; r23 = R.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[1][2] ;</div><div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;   r31 = R.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[2][0] ; r32 = R.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[2][1] ; r33 = R.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[2][2] ;</div><div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;</div><div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;   <span class="comment">/* compute lengths of each column; these determine grid spacings  */</span></div><div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;</div><div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;   xd = sqrt( r11*r11 + r21*r21 + r31*r31 ) ;</div><div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;   yd = sqrt( r12*r12 + r22*r22 + r32*r32 ) ;</div><div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;   zd = sqrt( r13*r13 + r23*r23 + r33*r33 ) ;</div><div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;</div><div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;   <span class="comment">/* if a column length is zero, patch the trouble */</span></div><div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;</div><div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;   <span class="keywordflow">if</span>( xd == 0.0l ){ r11 = 1.0l ; r21 = r31 = 0.0l ; xd = 1.0l ; }</div><div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;   <span class="keywordflow">if</span>( yd == 0.0l ){ r22 = 1.0l ; r12 = r32 = 0.0l ; yd = 1.0l ; }</div><div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;   <span class="keywordflow">if</span>( zd == 0.0l ){ r33 = 1.0l ; r13 = r23 = 0.0l ; zd = 1.0l ; }</div><div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;</div><div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;   <span class="comment">/* assign the output lengths */</span></div><div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;</div><div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;   ASSIF(dx,xd) ; ASSIF(dy,yd) ; ASSIF(dz,zd) ;</div><div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;</div><div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;   <span class="comment">/* normalize the columns */</span></div><div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;</div><div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;   r11 /= xd ; r21 /= xd ; r31 /= xd ;</div><div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;   r12 /= yd ; r22 /= yd ; r32 /= yd ;</div><div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;   r13 /= zd ; r23 /= zd ; r33 /= zd ;</div><div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;</div><div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;   <span class="comment">/* At this point, the matrix has normal columns, but we have to allow</span></div><div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;<span class="comment">      for the fact that the hideous user may not have given us a matrix</span></div><div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;<span class="comment">      with orthogonal columns.</span></div><div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;<span class="comment">      So, now find the orthogonal matrix closest to the current matrix.</span></div><div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;<span class="comment">      One reason for using the polar decomposition to get this</span></div><div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;<span class="comment">      orthogonal matrix, rather than just directly orthogonalizing</span></div><div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;<span class="comment">      the columns, is so that inputting the inverse matrix to R</span></div><div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;<span class="comment">      will result in the inverse orthogonal matrix at this point.</span></div><div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;<span class="comment">      If we just orthogonalized the columns, this wouldn&#39;t necessarily hold. */</span></div><div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;</div><div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;   Q.<a class="code" href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">m</a>[0][0] = r11 ; Q.<a class="code" href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">m</a>[0][1] = r12 ; Q.<a class="code" href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">m</a>[0][2] = r13 ; <span class="comment">/* load Q */</span></div><div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;   Q.<a class="code" href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">m</a>[1][0] = r21 ; Q.<a class="code" href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">m</a>[1][1] = r22 ; Q.<a class="code" href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">m</a>[1][2] = r23 ;</div><div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;   Q.<a class="code" href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">m</a>[2][0] = r31 ; Q.<a class="code" href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">m</a>[2][1] = r32 ; Q.<a class="code" href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">m</a>[2][2] = r33 ;</div><div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;</div><div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;   P = <a class="code" href="../../d1/d14/nifti1__io_8c.html#a32d3a6d10f5e97ddc243001727c129a1">nifti_mat33_polar</a>(Q) ;  <span class="comment">/* P is orthog matrix closest to Q */</span></div><div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;</div><div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;   r11 = P.<a class="code" href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">m</a>[0][0] ; r12 = P.<a class="code" href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">m</a>[0][1] ; r13 = P.<a class="code" href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">m</a>[0][2] ; <span class="comment">/* unload */</span></div><div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;   r21 = P.<a class="code" href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">m</a>[1][0] ; r22 = P.<a class="code" href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">m</a>[1][1] ; r23 = P.<a class="code" href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">m</a>[1][2] ;</div><div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;   r31 = P.<a class="code" href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">m</a>[2][0] ; r32 = P.<a class="code" href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">m</a>[2][1] ; r33 = P.<a class="code" href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">m</a>[2][2] ;</div><div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;</div><div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;   <span class="comment">/*                            [ r11 r12 r13 ]               */</span></div><div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;   <span class="comment">/* at this point, the matrix  [ r21 r22 r23 ] is orthogonal */</span></div><div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;   <span class="comment">/*                            [ r31 r32 r33 ]               */</span></div><div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;</div><div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;   <span class="comment">/* compute the determinant to determine if it is proper */</span></div><div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;</div><div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;   zd = r11*r22*r33-r11*r32*r23-r21*r12*r33</div><div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;       +r21*r32*r13+r31*r12*r23-r31*r22*r13 ;  <span class="comment">/* should be -1 or 1 */</span></div><div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;</div><div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;   <span class="keywordflow">if</span>( zd &gt; 0 ){             <span class="comment">/* proper */</span></div><div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;     ASSIF(qfac,1.0) ;</div><div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;   } <span class="keywordflow">else</span> {                  <span class="comment">/* improper ==&gt; flip 3rd column */</span></div><div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;     ASSIF(qfac,-1.0) ;</div><div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;     r13 = -r13 ; r23 = -r23 ; r33 = -r33 ;</div><div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;   }</div><div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;</div><div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;   <span class="comment">/* now, compute quaternion parameters */</span></div><div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;</div><div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;   a = r11 + r22 + r33 + 1.0l ;</div><div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;</div><div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;   <span class="keywordflow">if</span>( a &gt; 0.5l ){                <span class="comment">/* simplest case */</span></div><div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;     a = 0.5l * sqrt(a) ;</div><div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;     b = 0.25l * (r32-r23) / a ;</div><div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;     c = 0.25l * (r13-r31) / a ;</div><div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;     d = 0.25l * (r21-r12) / a ;</div><div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;   } <span class="keywordflow">else</span> {                       <span class="comment">/* trickier case */</span></div><div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;     xd = 1.0 + r11 - (r22+r33) ;  <span class="comment">/* 4*b*b */</span></div><div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;     yd = 1.0 + r22 - (r11+r33) ;  <span class="comment">/* 4*c*c */</span></div><div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;     zd = 1.0 + r33 - (r11+r22) ;  <span class="comment">/* 4*d*d */</span></div><div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;     <span class="keywordflow">if</span>( xd &gt; 1.0 ){</div><div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;       b = 0.5l * sqrt(xd) ;</div><div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;       c = 0.25l* (r12+r21) / b ;</div><div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;       d = 0.25l* (r13+r31) / b ;</div><div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;       a = 0.25l* (r32-r23) / b ;</div><div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;     } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( yd &gt; 1.0 ){</div><div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;       c = 0.5l * sqrt(yd) ;</div><div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;       b = 0.25l* (r12+r21) / c ;</div><div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;       d = 0.25l* (r23+r32) / c ;</div><div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;       a = 0.25l* (r13-r31) / c ;</div><div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;     } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;       d = 0.5l * sqrt(zd) ;</div><div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;       b = 0.25l* (r13+r31) / d ;</div><div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;       c = 0.25l* (r23+r32) / d ;</div><div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;       a = 0.25l* (r21-r12) / d ;</div><div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;     }</div><div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;     <span class="keywordflow">if</span>( a &lt; 0.0l ){ b=-b ; c=-c ; d=-d; a=-a; }</div><div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;   }</div><div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;</div><div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;   ASSIF(qb,b) ; ASSIF(qc,c) ; ASSIF(qd,d) ;</div><div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;   return ;</div><div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;}</div><div class="ttc" id="structmat44_html_ad11c8da60dd84b24824f70b08948d6e3"><div class="ttname"><a href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">mat44::m</a></div><div class="ttdeci">float m[4][4]</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:60</div></div>
<div class="ttc" id="structmat33_html"><div class="ttname"><a href="../../d7/d16/structmat33.html">mat33</a></div><div class="ttdef"><b>Definition:</b> nifti1_io.h:63</div></div>
<div class="ttc" id="nifti1__io_8c_html_a32d3a6d10f5e97ddc243001727c129a1"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#a32d3a6d10f5e97ddc243001727c129a1">nifti_mat33_polar</a></div><div class="ttdeci">mat33 nifti_mat33_polar(mat33 A)</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:1891</div></div>
<div class="ttc" id="structmat33_html_ae68888e41e6dfff14c7ae18b5777fb92"><div class="ttname"><a href="../../d7/d16/structmat33.html#ae68888e41e6dfff14c7ae18b5777fb92">mat33::m</a></div><div class="ttdeci">float m[3][3]</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:64</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad9d44ba79bad0716b08d2888c5874012"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad9d44ba79bad0716b08d2888c5874012">&#9670;&nbsp;</a></span>nifti_nim_has_valid_dims()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int nifti_nim_has_valid_dims </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d0/de7/structnifti__image.html">nifti_image</a> *&#160;</td>
          <td class="paramname"><em>nim</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>complain</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>validate nifti dimensions</p>
<dl class="section return"><dt>Returns</dt><dd>1 if valid, 0 if not</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="../../d1/d14/nifti1__io_8c.html#a8cb200f44ed38709f534827ecf0aebed">nifti_nim_is_valid</a>, <a class="el" href="../../d1/d14/nifti1__io_8c.html#a963647a644c757bf79652cf79d69ae18">nifti_hdr_looks_good</a></dd></dl>
<p>rely on dim[] as the master </p>
<ul>
<li>start with dim[0]: failure here is considered terminal <br />
<br />
<br />
<br />
<br />
</li>
<li>check whether ndim equals dim[0] <br />
<br />
<br />
<br />
</li>
<li>compare each dim[i] to the proper nx, ny, ... <br />
<br />
<br />
</li>
<li>check the dimensions, and that their product matches nvox <br />
<br />
</li>
<li>if debug, warn about any remaining dim that is neither 0, nor 1 <br />
</li>
<li>return invalid or valid </li>
</ul>
<div class="fragment"><div class="line"><a name="l06593"></a><span class="lineno"> 6593</span>&#160;{</div><div class="line"><a name="l06594"></a><span class="lineno"> 6594</span>&#160;   <span class="keywordtype">size_t</span> prod;</div><div class="line"><a name="l06595"></a><span class="lineno"> 6595</span>&#160;   <span class="keywordtype">int</span>    c, errs = 0;</div><div class="line"><a name="l06596"></a><span class="lineno"> 6596</span>&#160;</div><div class="line"><a name="l06598"></a><span class="lineno"> 6598</span>&#160;   <span class="keywordflow">if</span>( nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a054f5f2c357dd6833efd467ac202f0a5">dim</a>[0] &lt;= 0 || nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a054f5f2c357dd6833efd467ac202f0a5">dim</a>[0] &gt; 7 ){</div><div class="line"><a name="l06599"></a><span class="lineno"> 6599</span>&#160;      errs++;</div><div class="line"><a name="l06600"></a><span class="lineno"> 6600</span>&#160;      <span class="keywordflow">if</span>( complain )</div><div class="line"><a name="l06601"></a><span class="lineno"> 6601</span>&#160;         fprintf(stderr,<span class="stringliteral">&quot;** NVd: dim[0] (%d) out of range [1,7]\n&quot;</span>,nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a054f5f2c357dd6833efd467ac202f0a5">dim</a>[0]);</div><div class="line"><a name="l06602"></a><span class="lineno"> 6602</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l06603"></a><span class="lineno"> 6603</span>&#160;   }</div><div class="line"><a name="l06604"></a><span class="lineno"> 6604</span>&#160;</div><div class="line"><a name="l06606"></a><span class="lineno"> 6606</span>&#160;   <span class="keywordflow">if</span>( nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ad61740a0245f2af05ded39cb0648ae07">ndim</a> != nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a054f5f2c357dd6833efd467ac202f0a5">dim</a>[0] ){</div><div class="line"><a name="l06607"></a><span class="lineno"> 6607</span>&#160;      errs++;</div><div class="line"><a name="l06608"></a><span class="lineno"> 6608</span>&#160;      <span class="keywordflow">if</span>( ! complain ) <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l06609"></a><span class="lineno"> 6609</span>&#160;      fprintf(stderr,<span class="stringliteral">&quot;** NVd: ndim != dim[0] (%d,%d)\n&quot;</span>,nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ad61740a0245f2af05ded39cb0648ae07">ndim</a>,nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a054f5f2c357dd6833efd467ac202f0a5">dim</a>[0]);</div><div class="line"><a name="l06610"></a><span class="lineno"> 6610</span>&#160;   }</div><div class="line"><a name="l06611"></a><span class="lineno"> 6611</span>&#160;</div><div class="line"><a name="l06613"></a><span class="lineno"> 6613</span>&#160;   <span class="keywordflow">if</span>( ( (nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a054f5f2c357dd6833efd467ac202f0a5">dim</a>[0] &gt;= 1) &amp;&amp; (nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a054f5f2c357dd6833efd467ac202f0a5">dim</a>[1] != nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ab99743dd7967cff6845f1a96b2044167">nx</a>) ) ||</div><div class="line"><a name="l06614"></a><span class="lineno"> 6614</span>&#160;       ( (nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a054f5f2c357dd6833efd467ac202f0a5">dim</a>[0] &gt;= 2) &amp;&amp; (nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a054f5f2c357dd6833efd467ac202f0a5">dim</a>[2] != nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a5e971f24a97c592fefa28d084c02769a">ny</a>) ) ||</div><div class="line"><a name="l06615"></a><span class="lineno"> 6615</span>&#160;       ( (nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a054f5f2c357dd6833efd467ac202f0a5">dim</a>[0] &gt;= 3) &amp;&amp; (nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a054f5f2c357dd6833efd467ac202f0a5">dim</a>[3] != nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a8731bb1d867cdd24335e4bc3dd131c44">nz</a>) ) ||</div><div class="line"><a name="l06616"></a><span class="lineno"> 6616</span>&#160;       ( (nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a054f5f2c357dd6833efd467ac202f0a5">dim</a>[0] &gt;= 4) &amp;&amp; (nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a054f5f2c357dd6833efd467ac202f0a5">dim</a>[4] != nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ab3d3fdfda87503e5e8d53f0342906aba">nt</a>) ) ||</div><div class="line"><a name="l06617"></a><span class="lineno"> 6617</span>&#160;       ( (nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a054f5f2c357dd6833efd467ac202f0a5">dim</a>[0] &gt;= 5) &amp;&amp; (nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a054f5f2c357dd6833efd467ac202f0a5">dim</a>[5] != nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ab4a9c0956e858fd877ee81796adc66bc">nu</a>) ) ||</div><div class="line"><a name="l06618"></a><span class="lineno"> 6618</span>&#160;       ( (nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a054f5f2c357dd6833efd467ac202f0a5">dim</a>[0] &gt;= 6) &amp;&amp; (nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a054f5f2c357dd6833efd467ac202f0a5">dim</a>[6] != nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a7e04a5e405f9b79dae5652cdcd3832ef">nv</a>) ) ||</div><div class="line"><a name="l06619"></a><span class="lineno"> 6619</span>&#160;       ( (nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a054f5f2c357dd6833efd467ac202f0a5">dim</a>[0] &gt;= 7) &amp;&amp; (nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a054f5f2c357dd6833efd467ac202f0a5">dim</a>[7] != nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ae0bc5b6b2e350108e468124b682b715c">nw</a>) )   ){</div><div class="line"><a name="l06620"></a><span class="lineno"> 6620</span>&#160;      errs++;</div><div class="line"><a name="l06621"></a><span class="lineno"> 6621</span>&#160;      <span class="keywordflow">if</span>( !complain ) <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l06622"></a><span class="lineno"> 6622</span>&#160;      fprintf(stderr,<span class="stringliteral">&quot;** NVd mismatch: dims    = %d,%d,%d,%d,%d,%d,%d\n&quot;</span></div><div class="line"><a name="l06623"></a><span class="lineno"> 6623</span>&#160;                     <span class="stringliteral">&quot;                 nxyz... = %d,%d,%d,%d,%d,%d,%d\n&quot;</span>,</div><div class="line"><a name="l06624"></a><span class="lineno"> 6624</span>&#160;                     nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a054f5f2c357dd6833efd467ac202f0a5">dim</a>[1], nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a054f5f2c357dd6833efd467ac202f0a5">dim</a>[2], nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a054f5f2c357dd6833efd467ac202f0a5">dim</a>[3],</div><div class="line"><a name="l06625"></a><span class="lineno"> 6625</span>&#160;                     nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a054f5f2c357dd6833efd467ac202f0a5">dim</a>[4], nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a054f5f2c357dd6833efd467ac202f0a5">dim</a>[5], nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a054f5f2c357dd6833efd467ac202f0a5">dim</a>[6], nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a054f5f2c357dd6833efd467ac202f0a5">dim</a>[7],</div><div class="line"><a name="l06626"></a><span class="lineno"> 6626</span>&#160;                     nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ab99743dd7967cff6845f1a96b2044167">nx</a>, nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a5e971f24a97c592fefa28d084c02769a">ny</a>, nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a8731bb1d867cdd24335e4bc3dd131c44">nz</a>,</div><div class="line"><a name="l06627"></a><span class="lineno"> 6627</span>&#160;                     nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ab3d3fdfda87503e5e8d53f0342906aba">nt</a>, nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ab4a9c0956e858fd877ee81796adc66bc">nu</a>, nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a7e04a5e405f9b79dae5652cdcd3832ef">nv</a>, nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ae0bc5b6b2e350108e468124b682b715c">nw</a> );</div><div class="line"><a name="l06628"></a><span class="lineno"> 6628</span>&#160;   }</div><div class="line"><a name="l06629"></a><span class="lineno"> 6629</span>&#160;</div><div class="line"><a name="l06630"></a><span class="lineno"> 6630</span>&#160;   <span class="keywordflow">if</span>( <a class="code" href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a>.debug &gt; 2 ){</div><div class="line"><a name="l06631"></a><span class="lineno"> 6631</span>&#160;      fprintf(stderr,<span class="stringliteral">&quot;-d check dim[%d] =&quot;</span>, nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a054f5f2c357dd6833efd467ac202f0a5">dim</a>[0]);</div><div class="line"><a name="l06632"></a><span class="lineno"> 6632</span>&#160;      <span class="keywordflow">for</span>( c = 0; c &lt; 7; c++ ) fprintf(stderr,<span class="stringliteral">&quot; %d&quot;</span>, nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a054f5f2c357dd6833efd467ac202f0a5">dim</a>[c]);</div><div class="line"><a name="l06633"></a><span class="lineno"> 6633</span>&#160;      fputc(<span class="charliteral">&#39;\n&#39;</span>, stderr);</div><div class="line"><a name="l06634"></a><span class="lineno"> 6634</span>&#160;   }</div><div class="line"><a name="l06635"></a><span class="lineno"> 6635</span>&#160;</div><div class="line"><a name="l06637"></a><span class="lineno"> 6637</span>&#160;   prod = 1;</div><div class="line"><a name="l06638"></a><span class="lineno"> 6638</span>&#160;   <span class="keywordflow">for</span>( c = 1; c &lt;= nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a054f5f2c357dd6833efd467ac202f0a5">dim</a>[0]; c++ ){</div><div class="line"><a name="l06639"></a><span class="lineno"> 6639</span>&#160;      <span class="keywordflow">if</span>( nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a054f5f2c357dd6833efd467ac202f0a5">dim</a>[c] &gt; 0)</div><div class="line"><a name="l06640"></a><span class="lineno"> 6640</span>&#160;         prod *= nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a054f5f2c357dd6833efd467ac202f0a5">dim</a>[c];</div><div class="line"><a name="l06641"></a><span class="lineno"> 6641</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span>( nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a054f5f2c357dd6833efd467ac202f0a5">dim</a>[c] &lt;= 0 ){</div><div class="line"><a name="l06642"></a><span class="lineno"> 6642</span>&#160;         <span class="keywordflow">if</span>( !complain ) <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l06643"></a><span class="lineno"> 6643</span>&#160;         fprintf(stderr,<span class="stringliteral">&quot;** NVd: dim[%d] (=%d) &lt;= 0\n&quot;</span>,c, nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a054f5f2c357dd6833efd467ac202f0a5">dim</a>[c]);</div><div class="line"><a name="l06644"></a><span class="lineno"> 6644</span>&#160;         errs++;</div><div class="line"><a name="l06645"></a><span class="lineno"> 6645</span>&#160;      }</div><div class="line"><a name="l06646"></a><span class="lineno"> 6646</span>&#160;   }</div><div class="line"><a name="l06647"></a><span class="lineno"> 6647</span>&#160;   <span class="keywordflow">if</span>( prod != nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a440a3fab2a781b43ed8216e26492597d">nvox</a> ){</div><div class="line"><a name="l06648"></a><span class="lineno"> 6648</span>&#160;      <span class="keywordflow">if</span>( ! complain ) <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l06649"></a><span class="lineno"> 6649</span>&#160;      fprintf(stderr,<span class="stringliteral">&quot;** NVd: nvox does not match %d-dim product (%u, %u)\n&quot;</span>,</div><div class="line"><a name="l06650"></a><span class="lineno"> 6650</span>&#160;              nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a054f5f2c357dd6833efd467ac202f0a5">dim</a>[0], (<span class="keywordtype">unsigned</span>)nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a440a3fab2a781b43ed8216e26492597d">nvox</a>, (<span class="keywordtype">unsigned</span>)prod);</div><div class="line"><a name="l06651"></a><span class="lineno"> 6651</span>&#160;      errs++;</div><div class="line"><a name="l06652"></a><span class="lineno"> 6652</span>&#160;   }</div><div class="line"><a name="l06653"></a><span class="lineno"> 6653</span>&#160;</div><div class="line"><a name="l06655"></a><span class="lineno"> 6655</span>&#160;   <span class="comment">/*   (values in dims above dim[0] are undefined, as reminded by Cinly</span></div><div class="line"><a name="l06656"></a><span class="lineno"> 6656</span>&#160;<span class="comment">         Ooi and Alle Meije Wink)                   16 Nov 2005 [rickr] */</span></div><div class="line"><a name="l06657"></a><span class="lineno"> 6657</span>&#160;   <span class="keywordflow">if</span>( <a class="code" href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a>.debug &gt; 1 )</div><div class="line"><a name="l06658"></a><span class="lineno"> 6658</span>&#160;      <span class="keywordflow">for</span>( c = nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a054f5f2c357dd6833efd467ac202f0a5">dim</a>[0]+1; c &lt;= 7; c++ )</div><div class="line"><a name="l06659"></a><span class="lineno"> 6659</span>&#160;         <span class="keywordflow">if</span>( nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a054f5f2c357dd6833efd467ac202f0a5">dim</a>[c] != 0 &amp;&amp; nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a054f5f2c357dd6833efd467ac202f0a5">dim</a>[c] != 1 )</div><div class="line"><a name="l06660"></a><span class="lineno"> 6660</span>&#160;            fprintf(stderr,<span class="stringliteral">&quot;** NVd warning: dim[%d] = %d, but ndim = %d\n&quot;</span>,</div><div class="line"><a name="l06661"></a><span class="lineno"> 6661</span>&#160;                    c, nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a054f5f2c357dd6833efd467ac202f0a5">dim</a>[c], nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a054f5f2c357dd6833efd467ac202f0a5">dim</a>[0]);</div><div class="line"><a name="l06662"></a><span class="lineno"> 6662</span>&#160;</div><div class="line"><a name="l06663"></a><span class="lineno"> 6663</span>&#160;   <span class="keywordflow">if</span>( <a class="code" href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a>.debug &gt; 2 )</div><div class="line"><a name="l06664"></a><span class="lineno"> 6664</span>&#160;      fprintf(stderr,<span class="stringliteral">&quot;-d nim_has_valid_dims check, errs = %d\n&quot;</span>, errs);</div><div class="line"><a name="l06665"></a><span class="lineno"> 6665</span>&#160;</div><div class="line"><a name="l06667"></a><span class="lineno"> 6667</span>&#160;   <span class="keywordflow">if</span>( errs &gt; 0 ) <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l06668"></a><span class="lineno"> 6668</span>&#160;   <span class="keywordflow">else</span>           <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l06669"></a><span class="lineno"> 6669</span>&#160;}</div><div class="ttc" id="structnifti__image_html_a440a3fab2a781b43ed8216e26492597d"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a440a3fab2a781b43ed8216e26492597d">nifti_image::nvox</a></div><div class="ttdeci">size_t nvox</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:100</div></div>
<div class="ttc" id="structnifti__image_html_a7e04a5e405f9b79dae5652cdcd3832ef"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a7e04a5e405f9b79dae5652cdcd3832ef">nifti_image::nv</a></div><div class="ttdeci">int nv</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:97</div></div>
<div class="ttc" id="structnifti__image_html_ab4a9c0956e858fd877ee81796adc66bc"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#ab4a9c0956e858fd877ee81796adc66bc">nifti_image::nu</a></div><div class="ttdeci">int nu</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:96</div></div>
<div class="ttc" id="structnifti__image_html_ae0bc5b6b2e350108e468124b682b715c"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#ae0bc5b6b2e350108e468124b682b715c">nifti_image::nw</a></div><div class="ttdeci">int nw</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:98</div></div>
<div class="ttc" id="structnifti__image_html_ad61740a0245f2af05ded39cb0648ae07"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#ad61740a0245f2af05ded39cb0648ae07">nifti_image::ndim</a></div><div class="ttdeci">int ndim</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:91</div></div>
<div class="ttc" id="structnifti__image_html_a054f5f2c357dd6833efd467ac202f0a5"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a054f5f2c357dd6833efd467ac202f0a5">nifti_image::dim</a></div><div class="ttdeci">int dim[8]</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:99</div></div>
<div class="ttc" id="structnifti__image_html_a8731bb1d867cdd24335e4bc3dd131c44"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a8731bb1d867cdd24335e4bc3dd131c44">nifti_image::nz</a></div><div class="ttdeci">int nz</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:94</div></div>
<div class="ttc" id="structnifti__image_html_ab3d3fdfda87503e5e8d53f0342906aba"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#ab3d3fdfda87503e5e8d53f0342906aba">nifti_image::nt</a></div><div class="ttdeci">int nt</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:95</div></div>
<div class="ttc" id="structnifti__image_html_a5e971f24a97c592fefa28d084c02769a"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a5e971f24a97c592fefa28d084c02769a">nifti_image::ny</a></div><div class="ttdeci">int ny</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:93</div></div>
<div class="ttc" id="nifti1__io_8c_html_a6e047e1dc2f826a4adff048bee8f5df7"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a></div><div class="ttdeci">static nifti_global_options g_opts</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:344</div></div>
<div class="ttc" id="structnifti__image_html_ab99743dd7967cff6845f1a96b2044167"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#ab99743dd7967cff6845f1a96b2044167">nifti_image::nx</a></div><div class="ttdeci">int nx</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:92</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a8cb200f44ed38709f534827ecf0aebed"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8cb200f44ed38709f534827ecf0aebed">&#9670;&nbsp;</a></span>nifti_nim_is_valid()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int nifti_nim_is_valid </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d0/de7/structnifti__image.html">nifti_image</a> *&#160;</td>
          <td class="paramname"><em>nim</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>complain</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>validate the <a class="el" href="../../d0/de7/structnifti__image.html" title="High level data structure for open nifti datasets in the nifti1_io API. Note that this structure is n...">nifti_image</a></p>
<dl class="section return"><dt>Returns</dt><dd>1 if the structure seems valid, otherwise 0</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="../../d1/d14/nifti1__io_8c.html#ad9d44ba79bad0716b08d2888c5874012">nifti_nim_has_valid_dims</a>, <a class="el" href="../../d1/d14/nifti1__io_8c.html#a963647a644c757bf79652cf79d69ae18">nifti_hdr_looks_good</a> </dd></dl>
<ul>
<li>check that dim[] matches the individual values ndim, nx, ny, ... <br />
</li>
<li>be explicit in return of 0 or 1 </li>
</ul>
<div class="fragment"><div class="line"><a name="l06560"></a><span class="lineno"> 6560</span>&#160;{</div><div class="line"><a name="l06561"></a><span class="lineno"> 6561</span>&#160;   <span class="keywordtype">int</span> errs = 0;</div><div class="line"><a name="l06562"></a><span class="lineno"> 6562</span>&#160;</div><div class="line"><a name="l06563"></a><span class="lineno"> 6563</span>&#160;   <span class="keywordflow">if</span>( !nim ){</div><div class="line"><a name="l06564"></a><span class="lineno"> 6564</span>&#160;      fprintf(stderr,<span class="stringliteral">&quot;** is_valid_nim: nim is NULL\n&quot;</span>);</div><div class="line"><a name="l06565"></a><span class="lineno"> 6565</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l06566"></a><span class="lineno"> 6566</span>&#160;   }</div><div class="line"><a name="l06567"></a><span class="lineno"> 6567</span>&#160;</div><div class="line"><a name="l06568"></a><span class="lineno"> 6568</span>&#160;   <span class="keywordflow">if</span>( <a class="code" href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a>.debug &gt; 2 ) fprintf(stderr,<span class="stringliteral">&quot;-d nim_is_valid check...\n&quot;</span>);</div><div class="line"><a name="l06569"></a><span class="lineno"> 6569</span>&#160;</div><div class="line"><a name="l06571"></a><span class="lineno"> 6571</span>&#160;   <span class="keywordflow">if</span>( ! <a class="code" href="../../d1/d14/nifti1__io_8c.html#ad9d44ba79bad0716b08d2888c5874012">nifti_nim_has_valid_dims</a>(nim,complain) ){</div><div class="line"><a name="l06572"></a><span class="lineno"> 6572</span>&#160;      <span class="keywordflow">if</span>( !complain ) <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l06573"></a><span class="lineno"> 6573</span>&#160;      errs++;</div><div class="line"><a name="l06574"></a><span class="lineno"> 6574</span>&#160;   }</div><div class="line"><a name="l06575"></a><span class="lineno"> 6575</span>&#160;</div><div class="line"><a name="l06576"></a><span class="lineno"> 6576</span>&#160;   <span class="comment">/* might check nbyper, pixdim, q/sforms, swapsize, nifti_type, ... */</span></div><div class="line"><a name="l06577"></a><span class="lineno"> 6577</span>&#160;</div><div class="line"><a name="l06579"></a><span class="lineno"> 6579</span>&#160;   <span class="keywordflow">if</span>( errs &gt; 0 ) <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l06580"></a><span class="lineno"> 6580</span>&#160;   <span class="keywordflow">else</span>           <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l06581"></a><span class="lineno"> 6581</span>&#160;}</div><div class="ttc" id="nifti1__io_8c_html_ad9d44ba79bad0716b08d2888c5874012"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#ad9d44ba79bad0716b08d2888c5874012">nifti_nim_has_valid_dims</a></div><div class="ttdeci">int nifti_nim_has_valid_dims(nifti_image *nim, int complain)</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:6592</div></div>
<div class="ttc" id="nifti1__io_8c_html_a6e047e1dc2f826a4adff048bee8f5df7"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a></div><div class="ttdeci">static nifti_global_options g_opts</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:344</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a50ab65b744fa58802a77988df9eab9eb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a50ab65b744fa58802a77988df9eab9eb">&#9670;&nbsp;</a></span>nifti_orientation_string()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* nifti_orientation_string </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ii</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return a pointer to a string holding the name of a NIFTI orientation.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ii</td><td>orientation code</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>pointer to static string holding the orientation information</dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>Do not free() or modify the return string! It points to static storage.</dd></dl>
<dl class="section see"><dt>See also</dt><dd>NIFTI_L2R in nifti1_io.h </dd></dl>
<div class="fragment"><div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;{</div><div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;   <span class="keywordflow">switch</span>( ii ){</div><div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;     <span class="keywordflow">case</span> NIFTI_L2R: <span class="keywordflow">return</span> <span class="stringliteral">&quot;Left-to-Right&quot;</span> ;</div><div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;     <span class="keywordflow">case</span> NIFTI_R2L: <span class="keywordflow">return</span> <span class="stringliteral">&quot;Right-to-Left&quot;</span> ;</div><div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;     <span class="keywordflow">case</span> NIFTI_P2A: <span class="keywordflow">return</span> <span class="stringliteral">&quot;Posterior-to-Anterior&quot;</span> ;</div><div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;     <span class="keywordflow">case</span> NIFTI_A2P: <span class="keywordflow">return</span> <span class="stringliteral">&quot;Anterior-to-Posterior&quot;</span> ;</div><div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;     <span class="keywordflow">case</span> NIFTI_I2S: <span class="keywordflow">return</span> <span class="stringliteral">&quot;Inferior-to-Superior&quot;</span> ;</div><div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;     <span class="keywordflow">case</span> NIFTI_S2I: <span class="keywordflow">return</span> <span class="stringliteral">&quot;Superior-to-Inferior&quot;</span> ;</div><div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;   }</div><div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;   <span class="keywordflow">return</span> <span class="stringliteral">&quot;Unknown&quot;</span> ;</div><div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a id="a4b183639b2e242ac32210fe3437f60d2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4b183639b2e242ac32210fe3437f60d2">&#9670;&nbsp;</a></span>nifti_quatern_to_mat44()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/d6d/structmat44.html">mat44</a> nifti_quatern_to_mat44 </td>
          <td>(</td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>qb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>qc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>qd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>qx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>qy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>qz</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>dx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>dy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>dz</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>qfac</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Given the quaternion parameters (etc.), compute a transformation matrix.</p>
<p>See comments in nifti1.h for details.</p><ul>
<li>qb,qc,qd = quaternion parameters</li>
<li>qx,qy,qz = offset parameters</li>
<li>dx,dy,dz = grid stepsizes (non-negative inputs are set to 1.0)</li>
<li>qfac = sign of dz step (&lt; 0 is negative; &gt;= 0 is positive)</li>
</ul>
<pre>
If qx=qy=qz=0, dx=dy=dz=1, then the output is a rotation matrix.
For qfac &gt;= 0, the rotation is proper.
For qfac &lt;  0, the rotation is improper.
</pre><dl class="section see"><dt>See also</dt><dd>"QUATERNION REPRESENTATION OF ROTATION MATRIX" in nifti1.h </dd>
<dd>
<a class="el" href="../../d1/d14/nifti1__io_8c.html#a84b68d5634ec94b5132e0067733e9f28">nifti_mat44_to_quatern</a>, <a class="el" href="../../d1/d14/nifti1__io_8c.html#a8c07c7b62ab67f0d0e901fdf4b755707">nifti_make_orthog_mat44</a>, <a class="el" href="../../d1/d14/nifti1__io_8c.html#ad8ba2d4a127c3ee26af9909ce2aa59e8">nifti_mat44_to_orientation</a> </dd></dl>
<div class="fragment"><div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;{</div><div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;   <a class="code" href="../../d9/d6d/structmat44.html">mat44</a> R ;</div><div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;   <span class="keywordtype">double</span> a,b=qb,c=qc,d=qd , xd,yd,zd ;</div><div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;</div><div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;   <span class="comment">/* last row is always [ 0 0 0 1 ] */</span></div><div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;</div><div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;   R.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[3][0]=R.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[3][1]=R.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[3][2] = 0.0 ; R.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[3][3]= 1.0 ;</div><div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;</div><div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;   <span class="comment">/* compute a parameter from b,c,d */</span></div><div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;</div><div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;   a = 1.0l - (b*b + c*c + d*d) ;</div><div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;   <span class="keywordflow">if</span>( a &lt; 1.e-7l ){                   <span class="comment">/* special case */</span></div><div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;     a = 1.0l / sqrt(b*b+c*c+d*d) ;</div><div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;     b *= a ; c *= a ; d *= a ;        <span class="comment">/* normalize (b,c,d) vector */</span></div><div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;     a = 0.0l ;                        <span class="comment">/* a = 0 ==&gt; 180 degree rotation */</span></div><div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;   } <span class="keywordflow">else</span>{</div><div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;     a = sqrt(a) ;                     <span class="comment">/* angle = 2*arccos(a) */</span></div><div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;   }</div><div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;</div><div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;   <span class="comment">/* load rotation matrix, including scaling factors for voxel sizes */</span></div><div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;</div><div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;   xd = (dx &gt; 0.0) ? dx : 1.0l ;       <span class="comment">/* make sure are positive */</span></div><div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;   yd = (dy &gt; 0.0) ? dy : 1.0l ;</div><div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;   zd = (dz &gt; 0.0) ? dz : 1.0l ;</div><div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;</div><div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;   <span class="keywordflow">if</span>( qfac &lt; 0.0 ) zd = -zd ;         <span class="comment">/* left handedness? */</span></div><div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;</div><div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;   R.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[0][0] =        (a*a+b*b-c*c-d*d) * xd ;</div><div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;   R.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[0][1] = 2.0l * (b*c-a*d        ) * yd ;</div><div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;   R.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[0][2] = 2.0l * (b*d+a*c        ) * zd ;</div><div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;   R.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[1][0] = 2.0l * (b*c+a*d        ) * xd ;</div><div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;   R.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[1][1] =        (a*a+c*c-b*b-d*d) * yd ;</div><div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;   R.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[1][2] = 2.0l * (c*d-a*b        ) * zd ;</div><div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;   R.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[2][0] = 2.0l * (b*d-a*c        ) * xd ;</div><div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;   R.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[2][1] = 2.0l * (c*d+a*b        ) * yd ;</div><div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;   R.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[2][2] =        (a*a+d*d-c*c-b*b) * zd ;</div><div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;</div><div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;   <span class="comment">/* load offsets */</span></div><div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;</div><div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;   R.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[0][3] = qx ; R.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[1][3] = qy ; R.<a class="code" href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">m</a>[2][3] = qz ;</div><div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;</div><div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;   <span class="keywordflow">return</span> R ;</div><div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;}</div><div class="ttc" id="structmat44_html_ad11c8da60dd84b24824f70b08948d6e3"><div class="ttname"><a href="../../d9/d6d/structmat44.html#ad11c8da60dd84b24824f70b08948d6e3">mat44::m</a></div><div class="ttdeci">float m[4][4]</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:60</div></div>
<div class="ttc" id="structmat44_html"><div class="ttname"><a href="../../d9/d6d/structmat44.html">mat44</a></div><div class="ttdef"><b>Definition:</b> nifti1_io.h:59</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab1e7cfdc675f67b4dca809bae81e6e15"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab1e7cfdc675f67b4dca809bae81e6e15">&#9670;&nbsp;</a></span>nifti_read_ascii_image()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d0/de7/structnifti__image.html">nifti_image</a>* nifti_read_ascii_image </td>
          <td>(</td>
          <td class="paramtype">znzFile&#160;</td>
          <td class="paramname"><em>fp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>fname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>flen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>read_data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>nifti_read_ascii_image - process as a type-3 .nia image file</p>
<p>return NULL on failure</p>
<p>NOTE: this is NOT part of the NIFTI-1 standard </p>
<div class="fragment"><div class="line"><a name="l04294"></a><span class="lineno"> 4294</span>&#160;{</div><div class="line"><a name="l04295"></a><span class="lineno"> 4295</span>&#160;   <a class="code" href="../../d0/de7/structnifti__image.html">nifti_image</a> * nim;</div><div class="line"><a name="l04296"></a><span class="lineno"> 4296</span>&#160;   <span class="keywordtype">int</span>           slen, txt_size, remain, rv = 0;</div><div class="line"><a name="l04297"></a><span class="lineno"> 4297</span>&#160;   <span class="keywordtype">char</span>        * sbuf, lfunc[25] = { <span class="stringliteral">&quot;nifti_read_ascii_image&quot;</span> };</div><div class="line"><a name="l04298"></a><span class="lineno"> 4298</span>&#160;</div><div class="line"><a name="l04299"></a><span class="lineno"> 4299</span>&#160;   <span class="keywordflow">if</span>( <a class="code" href="../../d1/d14/nifti1__io_8c.html#a6c17ed984533a4dede09b3bb6fa1fa17">nifti_is_gzfile</a>(fname) ){</div><div class="line"><a name="l04300"></a><span class="lineno"> 4300</span>&#160;     LNI_FERR(lfunc,<span class="stringliteral">&quot;compression not supported for file type NIFTI_FTYPE_ASCII&quot;</span>,</div><div class="line"><a name="l04301"></a><span class="lineno"> 4301</span>&#160;              fname);</div><div class="line"><a name="l04302"></a><span class="lineno"> 4302</span>&#160;     free(fname);  znzclose(fp);  <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l04303"></a><span class="lineno"> 4303</span>&#160;   }</div><div class="line"><a name="l04304"></a><span class="lineno"> 4304</span>&#160;   slen = flen;  <span class="comment">/* slen will be our buffer length */</span></div><div class="line"><a name="l04305"></a><span class="lineno"> 4305</span>&#160;</div><div class="line"><a name="l04306"></a><span class="lineno"> 4306</span>&#160;   <span class="keywordflow">if</span>( <a class="code" href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a>.debug &gt; 1 )</div><div class="line"><a name="l04307"></a><span class="lineno"> 4307</span>&#160;      fprintf(stderr,<span class="stringliteral">&quot;-d %s: have ASCII NIFTI file of size %d\n&quot;</span>,fname,slen);</div><div class="line"><a name="l04308"></a><span class="lineno"> 4308</span>&#160;</div><div class="line"><a name="l04309"></a><span class="lineno"> 4309</span>&#160;   <span class="keywordflow">if</span>( slen &gt; 65530 ) slen = 65530 ;</div><div class="line"><a name="l04310"></a><span class="lineno"> 4310</span>&#160;   sbuf = (<span class="keywordtype">char</span> *)calloc(<span class="keyword">sizeof</span>(<span class="keywordtype">char</span>),slen+1) ;</div><div class="line"><a name="l04311"></a><span class="lineno"> 4311</span>&#160;   <span class="keywordflow">if</span>( !sbuf ){</div><div class="line"><a name="l04312"></a><span class="lineno"> 4312</span>&#160;      fprintf(stderr,<span class="stringliteral">&quot;** %s: failed to alloc %d bytes for sbuf&quot;</span>,lfunc,65530);</div><div class="line"><a name="l04313"></a><span class="lineno"> 4313</span>&#160;      free(fname);  znzclose(fp);  <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l04314"></a><span class="lineno"> 4314</span>&#160;   }</div><div class="line"><a name="l04315"></a><span class="lineno"> 4315</span>&#160;   znzread( sbuf , 1 , slen , fp ) ;</div><div class="line"><a name="l04316"></a><span class="lineno"> 4316</span>&#160;   nim = <a class="code" href="../../d1/d14/nifti1__io_8c.html#a645c453f65af3a1ff1be3081ed34b49e">nifti_image_from_ascii</a>( sbuf, &amp;txt_size ) ; free( sbuf ) ;</div><div class="line"><a name="l04317"></a><span class="lineno"> 4317</span>&#160;   <span class="keywordflow">if</span>( nim == NULL ){</div><div class="line"><a name="l04318"></a><span class="lineno"> 4318</span>&#160;      LNI_FERR(lfunc,<span class="stringliteral">&quot;failed nifti_image_from_ascii()&quot;</span>,fname);</div><div class="line"><a name="l04319"></a><span class="lineno"> 4319</span>&#160;      free(fname);  znzclose(fp);  <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l04320"></a><span class="lineno"> 4320</span>&#160;   }</div><div class="line"><a name="l04321"></a><span class="lineno"> 4321</span>&#160;   nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ac55996e58670948b220bebbf5d4bb0f4">nifti_type</a> = NIFTI_FTYPE_ASCII ;</div><div class="line"><a name="l04322"></a><span class="lineno"> 4322</span>&#160;</div><div class="line"><a name="l04323"></a><span class="lineno"> 4323</span>&#160;   <span class="comment">/* compute remaining space for extensions */</span></div><div class="line"><a name="l04324"></a><span class="lineno"> 4324</span>&#160;   remain = flen - txt_size - (int)<a class="code" href="../../d1/d14/nifti1__io_8c.html#a0816cfcf9fa0b51a66dd1fa434510e8d">nifti_get_volsize</a>(nim);</div><div class="line"><a name="l04325"></a><span class="lineno"> 4325</span>&#160;   <span class="keywordflow">if</span>( remain &gt; 4 ){</div><div class="line"><a name="l04326"></a><span class="lineno"> 4326</span>&#160;      <span class="comment">/* read extensions (reposition file pointer, first) */</span></div><div class="line"><a name="l04327"></a><span class="lineno"> 4327</span>&#160;      znzseek(fp, txt_size, SEEK_SET);</div><div class="line"><a name="l04328"></a><span class="lineno"> 4328</span>&#160;      (void) nifti_read_extensions(nim, fp, remain);</div><div class="line"><a name="l04329"></a><span class="lineno"> 4329</span>&#160;   }</div><div class="line"><a name="l04330"></a><span class="lineno"> 4330</span>&#160;</div><div class="line"><a name="l04331"></a><span class="lineno"> 4331</span>&#160;   free(fname);</div><div class="line"><a name="l04332"></a><span class="lineno"> 4332</span>&#160;   znzclose( fp ) ;</div><div class="line"><a name="l04333"></a><span class="lineno"> 4333</span>&#160;</div><div class="line"><a name="l04334"></a><span class="lineno"> 4334</span>&#160;   nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a856fc94a5daed16225264dc8daa96013">iname_offset</a> = -1 ;  <span class="comment">/* check from the end of the file */</span></div><div class="line"><a name="l04335"></a><span class="lineno"> 4335</span>&#160;</div><div class="line"><a name="l04336"></a><span class="lineno"> 4336</span>&#160;   <span class="keywordflow">if</span>( read_data ) rv = <a class="code" href="../../d1/d14/nifti1__io_8c.html#a2e75db3fcfbe1c2f7343611ab9cfcb8d">nifti_image_load</a>( nim ) ;</div><div class="line"><a name="l04337"></a><span class="lineno"> 4337</span>&#160;   <span class="keywordflow">else</span>            nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a9c7db78ad411a6e2b8a8ab071bbbe0a8">data</a> = NULL ;</div><div class="line"><a name="l04338"></a><span class="lineno"> 4338</span>&#160;</div><div class="line"><a name="l04339"></a><span class="lineno"> 4339</span>&#160;   <span class="comment">/* check for nifti_image_load() failure, maybe bail out */</span></div><div class="line"><a name="l04340"></a><span class="lineno"> 4340</span>&#160;   <span class="keywordflow">if</span>( read_data &amp;&amp; rv != 0 ){</div><div class="line"><a name="l04341"></a><span class="lineno"> 4341</span>&#160;      <span class="keywordflow">if</span>( <a class="code" href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a>.debug &gt; 1 )</div><div class="line"><a name="l04342"></a><span class="lineno"> 4342</span>&#160;         fprintf(stderr,<span class="stringliteral">&quot;-d failed image_load, free nifti image struct\n&quot;</span>);</div><div class="line"><a name="l04343"></a><span class="lineno"> 4343</span>&#160;      free(nim);</div><div class="line"><a name="l04344"></a><span class="lineno"> 4344</span>&#160;      <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l04345"></a><span class="lineno"> 4345</span>&#160;   }</div><div class="line"><a name="l04346"></a><span class="lineno"> 4346</span>&#160;</div><div class="line"><a name="l04347"></a><span class="lineno"> 4347</span>&#160;   <span class="keywordflow">return</span> nim ;</div><div class="line"><a name="l04348"></a><span class="lineno"> 4348</span>&#160;}</div><div class="ttc" id="nifti1__io_8c_html_a2e75db3fcfbe1c2f7343611ab9cfcb8d"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#a2e75db3fcfbe1c2f7343611ab9cfcb8d">nifti_image_load</a></div><div class="ttdeci">int nifti_image_load(nifti_image *nim)</div><div class="ttdoc">Load the image blob into a previously initialized nifti_image. </div><div class="ttdef"><b>Definition:</b> nifti1_io.c:4866</div></div>
<div class="ttc" id="nifti1__io_8c_html_a645c453f65af3a1ff1be3081ed34b49e"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#a645c453f65af3a1ff1be3081ed34b49e">nifti_image_from_ascii</a></div><div class="ttdeci">nifti_image * nifti_image_from_ascii(const char *str, int *bytes_read)</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:6361</div></div>
<div class="ttc" id="structnifti__image_html"><div class="ttname"><a href="../../d0/de7/structnifti__image.html">nifti_image</a></div><div class="ttdoc">High level data structure for open nifti datasets in the nifti1_io API. Note that this structure is n...</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:89</div></div>
<div class="ttc" id="structnifti__image_html_a856fc94a5daed16225264dc8daa96013"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a856fc94a5daed16225264dc8daa96013">nifti_image::iname_offset</a></div><div class="ttdeci">int iname_offset</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:162</div></div>
<div class="ttc" id="nifti1__io_8c_html_a0816cfcf9fa0b51a66dd1fa434510e8d"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#a0816cfcf9fa0b51a66dd1fa434510e8d">nifti_get_volsize</a></div><div class="ttdeci">size_t nifti_get_volsize(const nifti_image *nim)</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:2464</div></div>
<div class="ttc" id="structnifti__image_html_ac55996e58670948b220bebbf5d4bb0f4"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#ac55996e58670948b220bebbf5d4bb0f4">nifti_image::nifti_type</a></div><div class="ttdeci">int nifti_type</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:148</div></div>
<div class="ttc" id="nifti1__io_8c_html_a6c17ed984533a4dede09b3bb6fa1fa17"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#a6c17ed984533a4dede09b3bb6fa1fa17">nifti_is_gzfile</a></div><div class="ttdeci">int nifti_is_gzfile(const char *fname)</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:2648</div></div>
<div class="ttc" id="structnifti__image_html_a9c7db78ad411a6e2b8a8ab071bbbe0a8"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a9c7db78ad411a6e2b8a8ab071bbbe0a8">nifti_image::data</a></div><div class="ttdeci">void * data</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:165</div></div>
<div class="ttc" id="nifti1__io_8c_html_a6e047e1dc2f826a4adff048bee8f5df7"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a></div><div class="ttdeci">static nifti_global_options g_opts</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:344</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="afb6dff710966b4a8611726a9f846c683"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afb6dff710966b4a8611726a9f846c683">&#9670;&nbsp;</a></span>nifti_read_buffer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t nifti_read_buffer </td>
          <td>(</td>
          <td class="paramtype">znzFile&#160;</td>
          <td class="paramname"><em>fp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>dataptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>ntot</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d0/de7/structnifti__image.html">nifti_image</a> *&#160;</td>
          <td class="paramname"><em>nim</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>read ntot bytes of data from an open file and byte swaps if necessary</p>
<p>note that <a class="el" href="../../d0/de7/structnifti__image.html" title="High level data structure for open nifti datasets in the nifti1_io API. Note that this structure is n...">nifti_image</a> is required for information on datatype, bsize (for any needed byte swapping), etc.</p>
<p>This function does not allocate memory, so dataptr must be valid. </p>
<div class="fragment"><div class="line"><a name="l04930"></a><span class="lineno"> 4930</span>&#160;{</div><div class="line"><a name="l04931"></a><span class="lineno"> 4931</span>&#160;  <span class="keywordtype">size_t</span> ii;</div><div class="line"><a name="l04932"></a><span class="lineno"> 4932</span>&#160;</div><div class="line"><a name="l04933"></a><span class="lineno"> 4933</span>&#160;  <span class="keywordflow">if</span>( dataptr == NULL ){</div><div class="line"><a name="l04934"></a><span class="lineno"> 4934</span>&#160;     <span class="keywordflow">if</span>( <a class="code" href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a>.debug &gt; 0 )</div><div class="line"><a name="l04935"></a><span class="lineno"> 4935</span>&#160;        fprintf(stderr,<span class="stringliteral">&quot;** ERROR: nifti_read_buffer: NULL dataptr\n&quot;</span>);</div><div class="line"><a name="l04936"></a><span class="lineno"> 4936</span>&#160;     <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l04937"></a><span class="lineno"> 4937</span>&#160;  }</div><div class="line"><a name="l04938"></a><span class="lineno"> 4938</span>&#160;</div><div class="line"><a name="l04939"></a><span class="lineno"> 4939</span>&#160;  ii = znzread( dataptr , 1 , ntot , fp ) ;             <span class="comment">/* data input */</span></div><div class="line"><a name="l04940"></a><span class="lineno"> 4940</span>&#160;</div><div class="line"><a name="l04941"></a><span class="lineno"> 4941</span>&#160;  <span class="comment">/* if read was short, fail */</span></div><div class="line"><a name="l04942"></a><span class="lineno"> 4942</span>&#160;  <span class="keywordflow">if</span>( ii &lt; ntot ){ </div><div class="line"><a name="l04943"></a><span class="lineno"> 4943</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a>.debug &gt; 0 )</div><div class="line"><a name="l04944"></a><span class="lineno"> 4944</span>&#160;       fprintf(stderr,<span class="stringliteral">&quot;++ WARNING: nifti_read_buffer(%s):\n&quot;</span></div><div class="line"><a name="l04945"></a><span class="lineno"> 4945</span>&#160;               <span class="stringliteral">&quot;   data bytes needed = %u\n&quot;</span></div><div class="line"><a name="l04946"></a><span class="lineno"> 4946</span>&#160;               <span class="stringliteral">&quot;   data bytes input  = %u\n&quot;</span></div><div class="line"><a name="l04947"></a><span class="lineno"> 4947</span>&#160;               <span class="stringliteral">&quot;   number missing    = %u (set to 0)\n&quot;</span>,</div><div class="line"><a name="l04948"></a><span class="lineno"> 4948</span>&#160;               nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#aa99806d70cacff119b5b6089c3dfdeda">iname</a> , (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>)ntot ,</div><div class="line"><a name="l04949"></a><span class="lineno"> 4949</span>&#160;               (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>)ii , (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>)(ntot-ii) ) ;</div><div class="line"><a name="l04950"></a><span class="lineno"> 4950</span>&#160;    <span class="comment">/* memset( (char *)(dataptr)+ii , 0 , ntot-ii ) ;  now failure [rickr] */</span></div><div class="line"><a name="l04951"></a><span class="lineno"> 4951</span>&#160;    <span class="keywordflow">return</span> -1 ;</div><div class="line"><a name="l04952"></a><span class="lineno"> 4952</span>&#160;  }</div><div class="line"><a name="l04953"></a><span class="lineno"> 4953</span>&#160;</div><div class="line"><a name="l04954"></a><span class="lineno"> 4954</span>&#160;  <span class="keywordflow">if</span>( <a class="code" href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a>.debug &gt; 2 )</div><div class="line"><a name="l04955"></a><span class="lineno"> 4955</span>&#160;    fprintf(stderr,<span class="stringliteral">&quot;+d nifti_read_buffer: read %u bytes\n&quot;</span>, (<span class="keywordtype">unsigned</span>)ii);</div><div class="line"><a name="l04956"></a><span class="lineno"> 4956</span>&#160;  </div><div class="line"><a name="l04957"></a><span class="lineno"> 4957</span>&#160;  <span class="comment">/* byte swap array if needed */</span></div><div class="line"><a name="l04958"></a><span class="lineno"> 4958</span>&#160;  </div><div class="line"><a name="l04959"></a><span class="lineno"> 4959</span>&#160;  <span class="comment">/* ntot/swapsize might not fit as int, use size_t    6 Jul 2010 [rickr] */</span></div><div class="line"><a name="l04960"></a><span class="lineno"> 4960</span>&#160;  <span class="keywordflow">if</span>( nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ac7e2a08cb9631d0cdf6a29da77cb19ee">swapsize</a> &gt; 1 &amp;&amp; nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a5ce21d97da49b1dcf9415e83bbf07caf">byteorder</a> != <a class="code" href="../../d1/d14/nifti1__io_8c.html#adf2a70eac549a80a246d380240a8d822">nifti_short_order</a>() ) {</div><div class="line"><a name="l04961"></a><span class="lineno"> 4961</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a>.debug &gt; 1 )</div><div class="line"><a name="l04962"></a><span class="lineno"> 4962</span>&#160;       fprintf(stderr,<span class="stringliteral">&quot;+d nifti_read_buffer: swapping data bytes...\n&quot;</span>);</div><div class="line"><a name="l04963"></a><span class="lineno"> 4963</span>&#160;    <a class="code" href="../../d1/d14/nifti1__io_8c.html#aa7d743976d0ffdf6e320a71a8a32d006">nifti_swap_Nbytes</a>( ntot / nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ac7e2a08cb9631d0cdf6a29da77cb19ee">swapsize</a>, nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ac7e2a08cb9631d0cdf6a29da77cb19ee">swapsize</a> , dataptr ) ;</div><div class="line"><a name="l04964"></a><span class="lineno"> 4964</span>&#160;  }</div><div class="line"><a name="l04965"></a><span class="lineno"> 4965</span>&#160;</div><div class="line"><a name="l04966"></a><span class="lineno"> 4966</span>&#160;<span class="preprocessor">#ifdef isfinite</span></div><div class="line"><a name="l04967"></a><span class="lineno"> 4967</span>&#160;{</div><div class="line"><a name="l04968"></a><span class="lineno"> 4968</span>&#160;  <span class="comment">/* check input float arrays for goodness, and fix bad floats */</span></div><div class="line"><a name="l04969"></a><span class="lineno"> 4969</span>&#160;  <span class="keywordtype">int</span> fix_count = 0 ;</div><div class="line"><a name="l04970"></a><span class="lineno"> 4970</span>&#160;  </div><div class="line"><a name="l04971"></a><span class="lineno"> 4971</span>&#160;  <span class="keywordflow">switch</span>( nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a51bad5202c3b9943b3c86f80ca5d1cd1">datatype</a> ){</div><div class="line"><a name="l04972"></a><span class="lineno"> 4972</span>&#160;    </div><div class="line"><a name="l04973"></a><span class="lineno"> 4973</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../db/d91/group__NIFTI1__DATATYPE__ALIASES.html#ga8220ccec425b9387abf3d2b71ac0be7e">NIFTI_TYPE_FLOAT32</a>:</div><div class="line"><a name="l04974"></a><span class="lineno"> 4974</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../db/d91/group__NIFTI1__DATATYPE__ALIASES.html#ga9ae010c2ff48380fcb611c06048956c5">NIFTI_TYPE_COMPLEX64</a>:{</div><div class="line"><a name="l04975"></a><span class="lineno"> 4975</span>&#160;        <span class="keyword">register</span> <span class="keywordtype">float</span> *far = (<span class="keywordtype">float</span> *)dataptr ; <span class="keyword">register</span> <span class="keywordtype">size_t</span> jj,nj ;</div><div class="line"><a name="l04976"></a><span class="lineno"> 4976</span>&#160;        nj = ntot / <span class="keyword">sizeof</span>(float) ;</div><div class="line"><a name="l04977"></a><span class="lineno"> 4977</span>&#160;        <span class="keywordflow">for</span>( jj=0 ; jj &lt; nj ; jj++ )   <span class="comment">/* count fixes 30 Nov 2004 [rickr] */</span></div><div class="line"><a name="l04978"></a><span class="lineno"> 4978</span>&#160;           <span class="keywordflow">if</span>( !IS_GOOD_FLOAT(far[jj]) ){</div><div class="line"><a name="l04979"></a><span class="lineno"> 4979</span>&#160;              far[jj] = 0 ;</div><div class="line"><a name="l04980"></a><span class="lineno"> 4980</span>&#160;              fix_count++ ;</div><div class="line"><a name="l04981"></a><span class="lineno"> 4981</span>&#160;           }</div><div class="line"><a name="l04982"></a><span class="lineno"> 4982</span>&#160;      }</div><div class="line"><a name="l04983"></a><span class="lineno"> 4983</span>&#160;      break ;</div><div class="line"><a name="l04984"></a><span class="lineno"> 4984</span>&#160;    </div><div class="line"><a name="l04985"></a><span class="lineno"> 4985</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../db/d91/group__NIFTI1__DATATYPE__ALIASES.html#ga1253a2540a68b4dd7a5d78bc8c4c2a4d">NIFTI_TYPE_FLOAT64</a>:</div><div class="line"><a name="l04986"></a><span class="lineno"> 4986</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../db/d91/group__NIFTI1__DATATYPE__ALIASES.html#ga65e61452b861209be2eb1a5a96556ca9">NIFTI_TYPE_COMPLEX128</a>:{</div><div class="line"><a name="l04987"></a><span class="lineno"> 4987</span>&#160;        <span class="keyword">register</span> <span class="keywordtype">double</span> *far = (<span class="keywordtype">double</span> *)dataptr ; <span class="keyword">register</span> <span class="keywordtype">size_t</span> jj,nj ;</div><div class="line"><a name="l04988"></a><span class="lineno"> 4988</span>&#160;        nj = ntot / <span class="keyword">sizeof</span>(double) ;</div><div class="line"><a name="l04989"></a><span class="lineno"> 4989</span>&#160;        <span class="keywordflow">for</span>( jj=0 ; jj &lt; nj ; jj++ )   <span class="comment">/* count fixes 30 Nov 2004 [rickr] */</span></div><div class="line"><a name="l04990"></a><span class="lineno"> 4990</span>&#160;           <span class="keywordflow">if</span>( !IS_GOOD_FLOAT(far[jj]) ){</div><div class="line"><a name="l04991"></a><span class="lineno"> 4991</span>&#160;              far[jj] = 0 ;</div><div class="line"><a name="l04992"></a><span class="lineno"> 4992</span>&#160;              fix_count++ ;</div><div class="line"><a name="l04993"></a><span class="lineno"> 4993</span>&#160;           }</div><div class="line"><a name="l04994"></a><span class="lineno"> 4994</span>&#160;      }</div><div class="line"><a name="l04995"></a><span class="lineno"> 4995</span>&#160;      break ;</div><div class="line"><a name="l04996"></a><span class="lineno"> 4996</span>&#160;    </div><div class="line"><a name="l04997"></a><span class="lineno"> 4997</span>&#160;  }</div><div class="line"><a name="l04998"></a><span class="lineno"> 4998</span>&#160;</div><div class="line"><a name="l04999"></a><span class="lineno"> 4999</span>&#160;  <span class="keywordflow">if</span>( <a class="code" href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a>.debug &gt; 1 )</div><div class="line"><a name="l05000"></a><span class="lineno"> 5000</span>&#160;     fprintf(stderr,<span class="stringliteral">&quot;+d in image, %d bad floats were set to 0\n&quot;</span>, fix_count);</div><div class="line"><a name="l05001"></a><span class="lineno"> 5001</span>&#160;}</div><div class="line"><a name="l05002"></a><span class="lineno"> 5002</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l05003"></a><span class="lineno"> 5003</span>&#160;  </div><div class="line"><a name="l05004"></a><span class="lineno"> 5004</span>&#160;  <span class="keywordflow">return</span> ii;</div><div class="line"><a name="l05005"></a><span class="lineno"> 5005</span>&#160;}</div><div class="ttc" id="group__NIFTI1__DATATYPE__ALIASES_html_ga8220ccec425b9387abf3d2b71ac0be7e"><div class="ttname"><a href="../../db/d91/group__NIFTI1__DATATYPE__ALIASES.html#ga8220ccec425b9387abf3d2b71ac0be7e">NIFTI_TYPE_FLOAT32</a></div><div class="ttdeci">#define NIFTI_TYPE_FLOAT32</div><div class="ttdef"><b>Definition:</b> nifti1.h:531</div></div>
<div class="ttc" id="structnifti__image_html_aa99806d70cacff119b5b6089c3dfdeda"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#aa99806d70cacff119b5b6089c3dfdeda">nifti_image::iname</a></div><div class="ttdeci">char * iname</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:161</div></div>
<div class="ttc" id="structnifti__image_html_ac7e2a08cb9631d0cdf6a29da77cb19ee"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#ac7e2a08cb9631d0cdf6a29da77cb19ee">nifti_image::swapsize</a></div><div class="ttdeci">int swapsize</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:163</div></div>
<div class="ttc" id="structnifti__image_html_a51bad5202c3b9943b3c86f80ca5d1cd1"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a51bad5202c3b9943b3c86f80ca5d1cd1">nifti_image::datatype</a></div><div class="ttdeci">int datatype</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:102</div></div>
<div class="ttc" id="group__NIFTI1__DATATYPE__ALIASES_html_ga65e61452b861209be2eb1a5a96556ca9"><div class="ttname"><a href="../../db/d91/group__NIFTI1__DATATYPE__ALIASES.html#ga65e61452b861209be2eb1a5a96556ca9">NIFTI_TYPE_COMPLEX128</a></div><div class="ttdeci">#define NIFTI_TYPE_COMPLEX128</div><div class="ttdef"><b>Definition:</b> nifti1.h:551</div></div>
<div class="ttc" id="nifti1__io_8c_html_adf2a70eac549a80a246d380240a8d822"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#adf2a70eac549a80a246d380240a8d822">nifti_short_order</a></div><div class="ttdeci">int nifti_short_order(void)</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:6321</div></div>
<div class="ttc" id="group__NIFTI1__DATATYPE__ALIASES_html_ga9ae010c2ff48380fcb611c06048956c5"><div class="ttname"><a href="../../db/d91/group__NIFTI1__DATATYPE__ALIASES.html#ga9ae010c2ff48380fcb611c06048956c5">NIFTI_TYPE_COMPLEX64</a></div><div class="ttdeci">#define NIFTI_TYPE_COMPLEX64</div><div class="ttdef"><b>Definition:</b> nifti1.h:533</div></div>
<div class="ttc" id="group__NIFTI1__DATATYPE__ALIASES_html_ga1253a2540a68b4dd7a5d78bc8c4c2a4d"><div class="ttname"><a href="../../db/d91/group__NIFTI1__DATATYPE__ALIASES.html#ga1253a2540a68b4dd7a5d78bc8c4c2a4d">NIFTI_TYPE_FLOAT64</a></div><div class="ttdeci">#define NIFTI_TYPE_FLOAT64</div><div class="ttdef"><b>Definition:</b> nifti1.h:535</div></div>
<div class="ttc" id="structnifti__image_html_a5ce21d97da49b1dcf9415e83bbf07caf"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a5ce21d97da49b1dcf9415e83bbf07caf">nifti_image::byteorder</a></div><div class="ttdeci">int byteorder</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:164</div></div>
<div class="ttc" id="nifti1__io_8c_html_aa7d743976d0ffdf6e320a71a8a32d006"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#aa7d743976d0ffdf6e320a71a8a32d006">nifti_swap_Nbytes</a></div><div class="ttdeci">void nifti_swap_Nbytes(size_t n, int siz, void *ar)</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:2245</div></div>
<div class="ttc" id="nifti1__io_8c_html_a6e047e1dc2f826a4adff048bee8f5df7"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a></div><div class="ttdeci">static nifti_global_options g_opts</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:344</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6932258d1d9e2ed4afd94eac5c13a5d7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6932258d1d9e2ed4afd94eac5c13a5d7">&#9670;&nbsp;</a></span>nifti_read_collapsed_image()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int nifti_read_collapsed_image </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d0/de7/structnifti__image.html">nifti_image</a> *&#160;</td>
          <td class="paramname"><em>nim</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>dims</em>[8], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void **&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>read a nifti image, collapsed across dimensions according to dims[8] </p><pre></pre><pre>This function may be used to read parts of a nifti dataset, such as
the time series for a single voxel, or perhaps a slice.  It is similar
to <a class="el" href="../../d1/d14/nifti1__io_8c.html#a2e75db3fcfbe1c2f7343611ab9cfcb8d" title="Load the image blob into a previously initialized nifti_image. ">nifti_image_load()</a>, though the passed 'data' parameter is used for
returning the image, not nim-&gt;data.</pre><pre><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">nim</td><td>given <a class="el" href="../../d0/de7/structnifti__image.html" title="High level data structure for open nifti datasets in the nifti1_io API. Note that this structure is n...">nifti_image</a> struct, corresponding to the data file
</td></tr>
    <tr><td class="paramname">dims</td><td>given list of dimensions (see below)
</td></tr>
    <tr><td class="paramname">data</td><td>pointer to data pointer (if *data is NULL, data will be
            allocated, otherwise not)</td></tr>
  </table>
  </dd>
</dl>
Here, dims is an array of 8 ints, similar to nim-&gt;dim[8].  While dims[0]
is unused at this point, the other indices specify which dimensions to
collapse (and at which index), and which not to collapse.  If dims[i] is
set to -1, then that entire dimension will be read in, from index 0 to
index (nim-&gt;dim[i] - 1).  If dims[i] &gt;= 0, then only that index will be
read in (so dims[i] must also be &lt; nim-&gt;dim[i]).</pre><pre>Example: given  nim-&gt;dim[8] = { 4, 64, 64, 21, 80, 1, 1, 1 } (4-D dataset)</pre><pre>  if dims[8] = { 0,  5,  4, 17, -1, -1, -1, -1 }
     -&gt; read time series for voxel i,j,k = 5,4,17</pre><pre>  if dims[8] = { 0, -1, -1, -1, 17, -1, -1, -1 }
     -&gt; read single volume at time point 17</pre><pre>Example: given  nim-&gt;dim[8] = { 6, 64, 64, 21, 80, 4, 3, 1 } (6-D dataset)</pre><pre>  if dims[8] = { 0, 5, 4, 17, -1, 2, 1, 0 }
     -&gt; read time series for the voxel i,j,k = 5,4,17, and dim 5,6 = 2,1</pre><pre>  if dims[8] = { 0, 5, 4, -1, -1, 0, 0, 0 }
     -&gt; read time series for slice at i,j = 5,4, and dim 5,6,7 = 0,0,0
        (note that dims[7] is not relevant, but must be 0 or -1)</pre><pre>If *data is NULL, then *data will be set as a pointer to new memory,
allocated here for the resulting collapsed image data.</pre><pre>  e.g. { int    dims[8] = { 0,  5,  4, 17, -1, -1, -1, -1 };
         void * data    = NULL;
         ret_val = nifti_read_collapsed_image(nim, dims, &amp;data);
         if( ret_val &gt; 0 ){
            process_time_series(data);
            if( data != NULL ) free(data);
         }
       }</pre><pre>NOTE: If *data is not NULL, then it will be assumed that it points to
      valid memory, sufficient to hold the results.  This is done for
      speed and possibly repeated calls to this function.</pre><pre>  e.g. { int    dims[8] = { 0,  -1, -1, -1, -1, -1, -1, -1 };
         void * data    = NULL;
         for( zslice = 0; zslice &lt; nzslices; zslice++ ){
            dims[3] = zslice;
            ret_val = nifti_read_collapsed_image(nim, dims, &amp;data);
            if( ret_val &gt; 0 ) process_slice(zslice, data);
         }
         if( data != NULL ) free(data);
       }</pre><pre><dl class="section return"><dt>Returns</dt><dd><ul>
<li>the total number of bytes read, or &lt; 0 on failure</li>
<li>the read and byte-swapped data, in 'data'            </li>
</ul>
</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="../../d1/d14/nifti1__io_8c.html#a9da495aabf70c7111f574dc3985e6467" title="Read a nifti header and optionally the data, creating a nifti_image. ">nifti_image_read</a>, <a class="el" href="../../d1/d14/nifti1__io_8c.html#a2fe83552d8121a492fe07b5f42397c9d">nifti_image_free</a>, <a class="el" href="../../d1/d14/nifti1__io_8c.html#a6a60e69105dc0a2c7767beb376808143">nifti_image_read_bricks</a>
    <a class="el" href="../../d1/d14/nifti1__io_8c.html#a2e75db3fcfbe1c2f7343611ab9cfcb8d" title="Load the image blob into a previously initialized nifti_image. ">nifti_image_load</a>
</dd></dl>
</pre><ul>
<li>check pointers for sanity <br />
<br />
<br />
<br />
<br />
</li>
<li>verify that dim[] makes sense <br />
<br />
<br />
<br />
</li>
<li>verify that dims[] makes sense for this dataset <br />
<br />
<br />
</li>
<li>prepare pivot list - pivots are fixed indices <br />
<br />
</li>
<li>open the image file for reading at the appropriate offset <br />
</li>
<li>call the recursive reading function, passing nim, the pivot info, location to store memory, and file pointer and position </li>
</ul>
<div class="fragment"><div class="line"><a name="l06744"></a><span class="lineno"> 6744</span>&#160;{</div><div class="line"><a name="l06745"></a><span class="lineno"> 6745</span>&#160;   znzFile fp;</div><div class="line"><a name="l06746"></a><span class="lineno"> 6746</span>&#160;   <span class="keywordtype">int</span>     pivots[8], prods[8], nprods; <span class="comment">/* sizes are bounded by dims[], so 8 */</span></div><div class="line"><a name="l06747"></a><span class="lineno"> 6747</span>&#160;   <span class="keywordtype">int</span>     c, bytes;</div><div class="line"><a name="l06748"></a><span class="lineno"> 6748</span>&#160;</div><div class="line"><a name="l06750"></a><span class="lineno"> 6750</span>&#160;   <span class="keywordflow">if</span>( !nim || !dims || !data ){</div><div class="line"><a name="l06751"></a><span class="lineno"> 6751</span>&#160;      fprintf(stderr,<span class="stringliteral">&quot;** nifti_RCI: bad params %p, %p, %p\n&quot;</span>,</div><div class="line"><a name="l06752"></a><span class="lineno"> 6752</span>&#160;              (<span class="keywordtype">void</span> *)nim, (<span class="keywordtype">void</span> *)dims, (<span class="keywordtype">void</span> *)data);</div><div class="line"><a name="l06753"></a><span class="lineno"> 6753</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l06754"></a><span class="lineno"> 6754</span>&#160;   }</div><div class="line"><a name="l06755"></a><span class="lineno"> 6755</span>&#160;</div><div class="line"><a name="l06756"></a><span class="lineno"> 6756</span>&#160;   <span class="keywordflow">if</span>( <a class="code" href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a>.debug &gt; 2 ){</div><div class="line"><a name="l06757"></a><span class="lineno"> 6757</span>&#160;      fprintf(stderr,<span class="stringliteral">&quot;-d read_collapsed_image:\n        dims =&quot;</span>);</div><div class="line"><a name="l06758"></a><span class="lineno"> 6758</span>&#160;      <span class="keywordflow">for</span>(c = 0; c &lt; 8; c++) fprintf(stderr,<span class="stringliteral">&quot; %3d&quot;</span>, dims[c]);</div><div class="line"><a name="l06759"></a><span class="lineno"> 6759</span>&#160;      fprintf(stderr,<span class="stringliteral">&quot;\n   nim-&gt;dims =&quot;</span>);</div><div class="line"><a name="l06760"></a><span class="lineno"> 6760</span>&#160;      <span class="keywordflow">for</span>(c = 0; c &lt; 8; c++) fprintf(stderr,<span class="stringliteral">&quot; %3d&quot;</span>, nim-&gt;dim[c]);</div><div class="line"><a name="l06761"></a><span class="lineno"> 6761</span>&#160;      fputc(<span class="charliteral">&#39;\n&#39;</span>, stderr);</div><div class="line"><a name="l06762"></a><span class="lineno"> 6762</span>&#160;   }</div><div class="line"><a name="l06763"></a><span class="lineno"> 6763</span>&#160;</div><div class="line"><a name="l06765"></a><span class="lineno"> 6765</span>&#160;   <span class="keywordflow">if</span>( ! <a class="code" href="../../d1/d14/nifti1__io_8c.html#a8cb200f44ed38709f534827ecf0aebed">nifti_nim_is_valid</a>(nim, <a class="code" href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a>.debug &gt; 0) ){</div><div class="line"><a name="l06766"></a><span class="lineno"> 6766</span>&#160;      fprintf(stderr,<span class="stringliteral">&quot;** invalid nim (file is &#39;%s&#39;)\n&quot;</span>, nim-&gt;fname );</div><div class="line"><a name="l06767"></a><span class="lineno"> 6767</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l06768"></a><span class="lineno"> 6768</span>&#160;   }</div><div class="line"><a name="l06769"></a><span class="lineno"> 6769</span>&#160;</div><div class="line"><a name="l06771"></a><span class="lineno"> 6771</span>&#160;   <span class="keywordflow">for</span>( c = 1; c &lt;= nim-&gt;dim[0]; c++ ){</div><div class="line"><a name="l06772"></a><span class="lineno"> 6772</span>&#160;      <span class="keywordflow">if</span>( dims[c] &gt;= nim-&gt;dim[c] ){</div><div class="line"><a name="l06773"></a><span class="lineno"> 6773</span>&#160;         fprintf(stderr,<span class="stringliteral">&quot;** nifti_RCI: dims[%d] &gt;= nim-&gt;dim[%d] (%d,%d)\n&quot;</span>,</div><div class="line"><a name="l06774"></a><span class="lineno"> 6774</span>&#160;                 c, c, dims[c], nim-&gt;dim[c]);</div><div class="line"><a name="l06775"></a><span class="lineno"> 6775</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l06776"></a><span class="lineno"> 6776</span>&#160;      }</div><div class="line"><a name="l06777"></a><span class="lineno"> 6777</span>&#160;   }</div><div class="line"><a name="l06778"></a><span class="lineno"> 6778</span>&#160;</div><div class="line"><a name="l06780"></a><span class="lineno"> 6780</span>&#160;   <span class="keywordflow">if</span>( make_pivot_list(nim, dims, pivots, prods, &amp;nprods) &lt; 0 ) <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l06781"></a><span class="lineno"> 6781</span>&#160;</div><div class="line"><a name="l06782"></a><span class="lineno"> 6782</span>&#160;   bytes = rci_alloc_mem(data, prods, nprods, nim-&gt;nbyper);</div><div class="line"><a name="l06783"></a><span class="lineno"> 6783</span>&#160;   <span class="keywordflow">if</span>( bytes &lt; 0 ) <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l06784"></a><span class="lineno"> 6784</span>&#160;</div><div class="line"><a name="l06786"></a><span class="lineno"> 6786</span>&#160;   fp = <a class="code" href="../../d1/d14/nifti1__io_8c.html#aa101788c6fedf7aca40e9eed8f7f53b2">nifti_image_load_prep</a>( nim );</div><div class="line"><a name="l06787"></a><span class="lineno"> 6787</span>&#160;   <span class="keywordflow">if</span>( ! fp ){ free(*data);  *data = NULL;  <span class="keywordflow">return</span> -1; }     <span class="comment">/* failure */</span></div><div class="line"><a name="l06788"></a><span class="lineno"> 6788</span>&#160;</div><div class="line"><a name="l06791"></a><span class="lineno"> 6791</span>&#160;   c = rci_read_data(nim, pivots,prods,nprods,dims,</div><div class="line"><a name="l06792"></a><span class="lineno"> 6792</span>&#160;                     (<span class="keywordtype">char</span> *)*data, fp, znztell(fp));</div><div class="line"><a name="l06793"></a><span class="lineno"> 6793</span>&#160;   znzclose(fp);   <span class="comment">/* in any case, close the file */</span></div><div class="line"><a name="l06794"></a><span class="lineno"> 6794</span>&#160;   <span class="keywordflow">if</span>( c &lt; 0 ){ free(*data);  *data = NULL;  <span class="keywordflow">return</span> -1; }    <span class="comment">/* failure */</span></div><div class="line"><a name="l06795"></a><span class="lineno"> 6795</span>&#160;</div><div class="line"><a name="l06796"></a><span class="lineno"> 6796</span>&#160;   <span class="keywordflow">if</span>( <a class="code" href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a>.debug &gt; 1 )</div><div class="line"><a name="l06797"></a><span class="lineno"> 6797</span>&#160;      fprintf(stderr,<span class="stringliteral">&quot;+d read %d bytes of collapsed image from %s\n&quot;</span>,</div><div class="line"><a name="l06798"></a><span class="lineno"> 6798</span>&#160;              bytes, nim-&gt;fname);</div><div class="line"><a name="l06799"></a><span class="lineno"> 6799</span>&#160;</div><div class="line"><a name="l06800"></a><span class="lineno"> 6800</span>&#160;   <span class="keywordflow">return</span> bytes;</div><div class="line"><a name="l06801"></a><span class="lineno"> 6801</span>&#160;}</div><div class="ttc" id="nifti1__io_8c_html_a8cb200f44ed38709f534827ecf0aebed"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#a8cb200f44ed38709f534827ecf0aebed">nifti_nim_is_valid</a></div><div class="ttdeci">int nifti_nim_is_valid(nifti_image *nim, int complain)</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:6559</div></div>
<div class="ttc" id="nifti1__io_8c_html_aa101788c6fedf7aca40e9eed8f7f53b2"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#aa101788c6fedf7aca40e9eed8f7f53b2">nifti_image_load_prep</a></div><div class="ttdeci">static znzFile nifti_image_load_prep(nifti_image *nim)</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:4777</div></div>
<div class="ttc" id="nifti1__io_8c_html_a6e047e1dc2f826a4adff048bee8f5df7"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a></div><div class="ttdeci">static nifti_global_options g_opts</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:344</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a5708391aec2c027b721fa0d40851d288"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5708391aec2c027b721fa0d40851d288">&#9670;&nbsp;</a></span>nifti_read_header()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dd/d75/structnifti__1__header.html">nifti_1_header</a>* nifti_read_header </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>hname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>swapped</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>check</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>return an allocated and filled <a class="el" href="../../dd/d75/structnifti__1__header.html" title="Data structure defining the fields in the nifti1 header. This binary header should be found at the be...">nifti_1_header</a> struct</p>
<p>Read the binary header from disk, and swap bytes if necessary.</p>
<dl class="section return"><dt>Returns</dt><dd>an allocated <a class="el" href="../../dd/d75/structnifti__1__header.html" title="Data structure defining the fields in the nifti1 header. This binary header should be found at the be...">nifti_1_header</a> struct, or NULL on failure</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">hname</td><td>name of file containing header </td></tr>
    <tr><td class="paramname">swapped</td><td>if not NULL, return whether header bytes were swapped </td></tr>
    <tr><td class="paramname">check</td><td>flag to check for invalid <a class="el" href="../../dd/d75/structnifti__1__header.html" title="Data structure defining the fields in the nifti1 header. This binary header should be found at the be...">nifti_1_header</a></td></tr>
  </table>
  </dd>
</dl>
<dl class="section warning"><dt>Warning</dt><dd>ASCII header type is not supported</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="../../d1/d14/nifti1__io_8c.html#a9da495aabf70c7111f574dc3985e6467" title="Read a nifti header and optionally the data, creating a nifti_image. ">nifti_image_read</a>, <a class="el" href="../../d1/d14/nifti1__io_8c.html#a2fe83552d8121a492fe07b5f42397c9d">nifti_image_free</a>, <a class="el" href="../../d1/d14/nifti1__io_8c.html#a6a60e69105dc0a2c7767beb376808143">nifti_image_read_bricks</a> </dd></dl>
<div class="fragment"><div class="line"><a name="l03938"></a><span class="lineno"> 3938</span>&#160;{</div><div class="line"><a name="l03939"></a><span class="lineno"> 3939</span>&#160;   <a class="code" href="../../dd/d75/structnifti__1__header.html">nifti_1_header</a>   nhdr, * hptr;</div><div class="line"><a name="l03940"></a><span class="lineno"> 3940</span>&#160;   znzFile          fp;</div><div class="line"><a name="l03941"></a><span class="lineno"> 3941</span>&#160;   <span class="keywordtype">int</span>              bytes, lswap;</div><div class="line"><a name="l03942"></a><span class="lineno"> 3942</span>&#160;   <span class="keywordtype">char</span>           * hfile;</div><div class="line"><a name="l03943"></a><span class="lineno"> 3943</span>&#160;   <span class="keywordtype">char</span>             fname[] = { <span class="stringliteral">&quot;nifti_read_header&quot;</span> };</div><div class="line"><a name="l03944"></a><span class="lineno"> 3944</span>&#160;   </div><div class="line"><a name="l03945"></a><span class="lineno"> 3945</span>&#160;   <span class="comment">/* determine file name to use for header */</span></div><div class="line"><a name="l03946"></a><span class="lineno"> 3946</span>&#160;   hfile = <a class="code" href="../../d1/d14/nifti1__io_8c.html#acde0b000cd0b4c5edbe33454ebc0c86f">nifti_findhdrname</a>(hname);</div><div class="line"><a name="l03947"></a><span class="lineno"> 3947</span>&#160;   <span class="keywordflow">if</span>( hfile == NULL ){</div><div class="line"><a name="l03948"></a><span class="lineno"> 3948</span>&#160;      <span class="keywordflow">if</span>( <a class="code" href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a>.debug &gt; 0 )</div><div class="line"><a name="l03949"></a><span class="lineno"> 3949</span>&#160;         LNI_FERR(fname,<span class="stringliteral">&quot;11failed to find header file for&quot;</span>, hname);</div><div class="line"><a name="l03950"></a><span class="lineno"> 3950</span>&#160;      <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l03951"></a><span class="lineno"> 3951</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a>.debug &gt; 1 )</div><div class="line"><a name="l03952"></a><span class="lineno"> 3952</span>&#160;      fprintf(stderr,<span class="stringliteral">&quot;-d %s: found header filename &#39;%s&#39;\n&quot;</span>,fname,hfile);</div><div class="line"><a name="l03953"></a><span class="lineno"> 3953</span>&#160;</div><div class="line"><a name="l03954"></a><span class="lineno"> 3954</span>&#160;   fp = znzopen( hfile, <span class="stringliteral">&quot;rb&quot;</span>, <a class="code" href="../../d1/d14/nifti1__io_8c.html#a6c17ed984533a4dede09b3bb6fa1fa17">nifti_is_gzfile</a>(hfile) );</div><div class="line"><a name="l03955"></a><span class="lineno"> 3955</span>&#160;   <span class="keywordflow">if</span>( znz_isnull(fp) ){</div><div class="line"><a name="l03956"></a><span class="lineno"> 3956</span>&#160;      <span class="keywordflow">if</span>( <a class="code" href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a>.debug &gt; 0 ) LNI_FERR(fname,<span class="stringliteral">&quot;failed to open header file&quot;</span>,hfile);</div><div class="line"><a name="l03957"></a><span class="lineno"> 3957</span>&#160;      free(hfile);</div><div class="line"><a name="l03958"></a><span class="lineno"> 3958</span>&#160;      <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l03959"></a><span class="lineno"> 3959</span>&#160;   }</div><div class="line"><a name="l03960"></a><span class="lineno"> 3960</span>&#160;</div><div class="line"><a name="l03961"></a><span class="lineno"> 3961</span>&#160;   free(hfile);  <span class="comment">/* done with filename */</span></div><div class="line"><a name="l03962"></a><span class="lineno"> 3962</span>&#160;</div><div class="line"><a name="l03963"></a><span class="lineno"> 3963</span>&#160;   <span class="keywordflow">if</span>( has_ascii_header(fp) == 1 ){</div><div class="line"><a name="l03964"></a><span class="lineno"> 3964</span>&#160;      znzclose( fp );</div><div class="line"><a name="l03965"></a><span class="lineno"> 3965</span>&#160;      <span class="keywordflow">if</span>( <a class="code" href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a>.debug &gt; 0 )</div><div class="line"><a name="l03966"></a><span class="lineno"> 3966</span>&#160;         LNI_FERR(fname,<span class="stringliteral">&quot;ASCII header type not supported&quot;</span>,hname);</div><div class="line"><a name="l03967"></a><span class="lineno"> 3967</span>&#160;      <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l03968"></a><span class="lineno"> 3968</span>&#160;   }</div><div class="line"><a name="l03969"></a><span class="lineno"> 3969</span>&#160;</div><div class="line"><a name="l03970"></a><span class="lineno"> 3970</span>&#160;   <span class="comment">/* read the binary header */</span> </div><div class="line"><a name="l03971"></a><span class="lineno"> 3971</span>&#160;   bytes = (int)znzread( &amp;nhdr, 1, <span class="keyword">sizeof</span>(nhdr), fp );</div><div class="line"><a name="l03972"></a><span class="lineno"> 3972</span>&#160;   znzclose( fp );                      <span class="comment">/* we are done with the file now */</span></div><div class="line"><a name="l03973"></a><span class="lineno"> 3973</span>&#160;</div><div class="line"><a name="l03974"></a><span class="lineno"> 3974</span>&#160;   <span class="keywordflow">if</span>( bytes &lt; (<span class="keywordtype">int</span>)<span class="keyword">sizeof</span>(nhdr) ){</div><div class="line"><a name="l03975"></a><span class="lineno"> 3975</span>&#160;      <span class="keywordflow">if</span>( <a class="code" href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a>.debug &gt; 0 ){</div><div class="line"><a name="l03976"></a><span class="lineno"> 3976</span>&#160;         LNI_FERR(fname,<span class="stringliteral">&quot;bad binary header read for file&quot;</span>, hname);</div><div class="line"><a name="l03977"></a><span class="lineno"> 3977</span>&#160;         fprintf(stderr,<span class="stringliteral">&quot;  - read %d of %d bytes\n&quot;</span>,bytes, (<span class="keywordtype">int</span>)<span class="keyword">sizeof</span>(nhdr));</div><div class="line"><a name="l03978"></a><span class="lineno"> 3978</span>&#160;      }</div><div class="line"><a name="l03979"></a><span class="lineno"> 3979</span>&#160;      <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l03980"></a><span class="lineno"> 3980</span>&#160;   }</div><div class="line"><a name="l03981"></a><span class="lineno"> 3981</span>&#160;</div><div class="line"><a name="l03982"></a><span class="lineno"> 3982</span>&#160;   <span class="comment">/* now just decide on byte swapping */</span></div><div class="line"><a name="l03983"></a><span class="lineno"> 3983</span>&#160;   lswap = need_nhdr_swap(nhdr.<a class="code" href="../../dd/d75/structnifti__1__header.html#ace3aeebb3c10362c5c2e48cee87a7f2e">dim</a>[0], nhdr.<a class="code" href="../../dd/d75/structnifti__1__header.html#af1d99efbd3af0180f9335cbb1b822248">sizeof_hdr</a>); <span class="comment">/* swap data flag */</span></div><div class="line"><a name="l03984"></a><span class="lineno"> 3984</span>&#160;   <span class="keywordflow">if</span>( check &amp;&amp; lswap &lt; 0 ){</div><div class="line"><a name="l03985"></a><span class="lineno"> 3985</span>&#160;      LNI_FERR(fname,<span class="stringliteral">&quot;bad nifti_1_header for file&quot;</span>, hname);</div><div class="line"><a name="l03986"></a><span class="lineno"> 3986</span>&#160;      <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l03987"></a><span class="lineno"> 3987</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( lswap &lt; 0 ) {</div><div class="line"><a name="l03988"></a><span class="lineno"> 3988</span>&#160;      lswap = 0;  <span class="comment">/* if swapping does not help, don&#39;t do it */</span></div><div class="line"><a name="l03989"></a><span class="lineno"> 3989</span>&#160;      <span class="keywordflow">if</span>(<a class="code" href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a>.debug &gt; 1) fprintf(stderr,<span class="stringliteral">&quot;-- swap failure, none applied\n&quot;</span>);</div><div class="line"><a name="l03990"></a><span class="lineno"> 3990</span>&#160;   }</div><div class="line"><a name="l03991"></a><span class="lineno"> 3991</span>&#160;</div><div class="line"><a name="l03992"></a><span class="lineno"> 3992</span>&#160;   <span class="keywordflow">if</span>( lswap ) {</div><div class="line"><a name="l03993"></a><span class="lineno"> 3993</span>&#160;      <span class="keywordflow">if</span> ( <a class="code" href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a>.debug &gt; 3 ) <a class="code" href="../../d1/d14/nifti1__io_8c.html#af9d6192cbeeb85cde0a3c41acf9c2208">disp_nifti_1_header</a>(<span class="stringliteral">&quot;-d nhdr pre-swap: &quot;</span>, &amp;nhdr);</div><div class="line"><a name="l03994"></a><span class="lineno"> 3994</span>&#160;      <a class="code" href="../../d1/d14/nifti1__io_8c.html#a50dc91b6264f53456387f95907bc86ee">swap_nifti_header</a>( &amp;nhdr , NIFTI_VERSION(nhdr) ) ;</div><div class="line"><a name="l03995"></a><span class="lineno"> 3995</span>&#160;   }</div><div class="line"><a name="l03996"></a><span class="lineno"> 3996</span>&#160;</div><div class="line"><a name="l03997"></a><span class="lineno"> 3997</span>&#160;   <span class="keywordflow">if</span> ( <a class="code" href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a>.debug &gt; 2 ) <a class="code" href="../../d1/d14/nifti1__io_8c.html#af9d6192cbeeb85cde0a3c41acf9c2208">disp_nifti_1_header</a>(<span class="stringliteral">&quot;-d nhdr post-swap: &quot;</span>, &amp;nhdr);</div><div class="line"><a name="l03998"></a><span class="lineno"> 3998</span>&#160;</div><div class="line"><a name="l03999"></a><span class="lineno"> 3999</span>&#160;   <span class="keywordflow">if</span> ( check &amp;&amp; ! <a class="code" href="../../d1/d14/nifti1__io_8c.html#a963647a644c757bf79652cf79d69ae18">nifti_hdr_looks_good</a>(&amp;nhdr) ){</div><div class="line"><a name="l04000"></a><span class="lineno"> 4000</span>&#160;      LNI_FERR(fname,<span class="stringliteral">&quot;nifti_1_header looks bad for file&quot;</span>, hname);</div><div class="line"><a name="l04001"></a><span class="lineno"> 4001</span>&#160;      <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l04002"></a><span class="lineno"> 4002</span>&#160;   }</div><div class="line"><a name="l04003"></a><span class="lineno"> 4003</span>&#160;</div><div class="line"><a name="l04004"></a><span class="lineno"> 4004</span>&#160;   <span class="comment">/* all looks good, so allocate memory for and return the header */</span></div><div class="line"><a name="l04005"></a><span class="lineno"> 4005</span>&#160;   hptr = (<a class="code" href="../../dd/d75/structnifti__1__header.html">nifti_1_header</a> *)malloc(<span class="keyword">sizeof</span>(<a class="code" href="../../dd/d75/structnifti__1__header.html">nifti_1_header</a>));</div><div class="line"><a name="l04006"></a><span class="lineno"> 4006</span>&#160;   <span class="keywordflow">if</span>( ! hptr ){</div><div class="line"><a name="l04007"></a><span class="lineno"> 4007</span>&#160;      fprintf(stderr,<span class="stringliteral">&quot;** nifti_read_hdr: failed to alloc nifti_1_header\n&quot;</span>);</div><div class="line"><a name="l04008"></a><span class="lineno"> 4008</span>&#160;      <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l04009"></a><span class="lineno"> 4009</span>&#160;   }</div><div class="line"><a name="l04010"></a><span class="lineno"> 4010</span>&#160;</div><div class="line"><a name="l04011"></a><span class="lineno"> 4011</span>&#160;   <span class="keywordflow">if</span>( swapped ) *swapped = lswap;  <span class="comment">/* only if they care &lt;sniff!&gt; */</span></div><div class="line"><a name="l04012"></a><span class="lineno"> 4012</span>&#160;</div><div class="line"><a name="l04013"></a><span class="lineno"> 4013</span>&#160;   memcpy(hptr, &amp;nhdr, <span class="keyword">sizeof</span>(<a class="code" href="../../dd/d75/structnifti__1__header.html">nifti_1_header</a>));</div><div class="line"><a name="l04014"></a><span class="lineno"> 4014</span>&#160;</div><div class="line"><a name="l04015"></a><span class="lineno"> 4015</span>&#160;   <span class="keywordflow">return</span> hptr;</div><div class="line"><a name="l04016"></a><span class="lineno"> 4016</span>&#160;}</div><div class="ttc" id="structnifti__1__header_html_af1d99efbd3af0180f9335cbb1b822248"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#af1d99efbd3af0180f9335cbb1b822248">nifti_1_header::sizeof_hdr</a></div><div class="ttdeci">int sizeof_hdr</div><div class="ttdef"><b>Definition:</b> nifti1.h:148</div></div>
<div class="ttc" id="structnifti__1__header_html"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html">nifti_1_header</a></div><div class="ttdoc">Data structure defining the fields in the nifti1 header. This binary header should be found at the be...</div><div class="ttdef"><b>Definition:</b> nifti1.h:144</div></div>
<div class="ttc" id="nifti1__io_8c_html_a963647a644c757bf79652cf79d69ae18"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#a963647a644c757bf79652cf79d69ae18">nifti_hdr_looks_good</a></div><div class="ttdeci">int nifti_hdr_looks_good(const nifti_1_header *hdr)</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:4030</div></div>
<div class="ttc" id="structnifti__1__header_html_ace3aeebb3c10362c5c2e48cee87a7f2e"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#ace3aeebb3c10362c5c2e48cee87a7f2e">nifti_1_header::dim</a></div><div class="ttdeci">short dim[8]</div><div class="ttdef"><b>Definition:</b> nifti1.h:157</div></div>
<div class="ttc" id="nifti1__io_8c_html_acde0b000cd0b4c5edbe33454ebc0c86f"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#acde0b000cd0b4c5edbe33454ebc0c86f">nifti_findhdrname</a></div><div class="ttdeci">char * nifti_findhdrname(const char *fname)</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:2735</div></div>
<div class="ttc" id="nifti1__io_8c_html_a50dc91b6264f53456387f95907bc86ee"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#a50dc91b6264f53456387f95907bc86ee">swap_nifti_header</a></div><div class="ttdeci">void swap_nifti_header(struct nifti_1_header *h, int is_nifti)</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:2266</div></div>
<div class="ttc" id="nifti1__io_8c_html_a6c17ed984533a4dede09b3bb6fa1fa17"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#a6c17ed984533a4dede09b3bb6fa1fa17">nifti_is_gzfile</a></div><div class="ttdeci">int nifti_is_gzfile(const char *fname)</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:2648</div></div>
<div class="ttc" id="nifti1__io_8c_html_af9d6192cbeeb85cde0a3c41acf9c2208"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#af9d6192cbeeb85cde0a3c41acf9c2208">disp_nifti_1_header</a></div><div class="ttdeci">int disp_nifti_1_header(const char *info, const nifti_1_header *hp)</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:3505</div></div>
<div class="ttc" id="nifti1__io_8c_html_a6e047e1dc2f826a4adff048bee8f5df7"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a></div><div class="ttdeci">static nifti_global_options g_opts</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:344</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a29be9ec9401b961191b3641055867387"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a29be9ec9401b961191b3641055867387">&#9670;&nbsp;</a></span>nifti_read_subregion_image()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int nifti_read_subregion_image </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d0/de7/structnifti__image.html">nifti_image</a> *&#160;</td>
          <td class="paramname"><em>nim</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>start_index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>region_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void **&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>read an arbitrary subregion from a nifti image</p>
<p>This function may be used to read a single arbitary subregion of any rectangular size from a nifti dataset, such as a small 5x5x5 subregion around the center of a 3D image.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">nim</td><td>given <a class="el" href="../../d0/de7/structnifti__image.html" title="High level data structure for open nifti datasets in the nifti1_io API. Note that this structure is n...">nifti_image</a> struct, corresponding to the data file </td></tr>
    <tr><td class="paramname">start_index</td><td>the index location of the first voxel that will be returned </td></tr>
    <tr><td class="paramname">region_size</td><td>the size of the subregion to be returned </td></tr>
    <tr><td class="paramname">data</td><td>pointer to data pointer (if *data is NULL, data will be allocated, otherwise not)</td></tr>
  </table>
  </dd>
</dl>
<p>Example: given nim-&gt;dim[8] = {3, 64, 64, 64, 1, 1, 1, 1 } (3-D dataset)</p>
<p>if start_index[7] = { 29, 29, 29, 0, 0, 0, 0 } and region_size[7] = { 5, 5, 5, 1, 1, 1, 1 } -&gt; read 5x5x5 region starting with the first voxel location at (29,29,29)</p>
<p>NOTE: If *data is not NULL, then it will be assumed that it points to valid memory, sufficient to hold the results. This is done for speed and possibly repeated calls to this function. </p><dl class="section return"><dt>Returns</dt><dd><ul>
<li>the total number of bytes read, or &lt; 0 on failure</li>
<li>the read and byte-swapped data, in 'data' </li>
</ul>
</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="../../d1/d14/nifti1__io_8c.html#a9da495aabf70c7111f574dc3985e6467" title="Read a nifti header and optionally the data, creating a nifti_image. ">nifti_image_read</a>, <a class="el" href="../../d1/d14/nifti1__io_8c.html#a2fe83552d8121a492fe07b5f42397c9d">nifti_image_free</a>, <a class="el" href="../../d1/d14/nifti1__io_8c.html#a6a60e69105dc0a2c7767beb376808143">nifti_image_read_bricks</a> <a class="el" href="../../d1/d14/nifti1__io_8c.html#a2e75db3fcfbe1c2f7343611ab9cfcb8d" title="Load the image blob into a previously initialized nifti_image. ">nifti_image_load</a>, <a class="el" href="../../d1/d14/nifti1__io_8c.html#a6932258d1d9e2ed4afd94eac5c13a5d7">nifti_read_collapsed_image</a> </dd></dl>
<div class="fragment"><div class="line"><a name="l06851"></a><span class="lineno"> 6851</span>&#160;{</div><div class="line"><a name="l06852"></a><span class="lineno"> 6852</span>&#160;  znzFile fp;                   <span class="comment">/* file to read */</span></div><div class="line"><a name="l06853"></a><span class="lineno"> 6853</span>&#160;  <span class="keywordtype">int</span> i,j,k,l,m,n;              <span class="comment">/* indices for dims */</span></div><div class="line"><a name="l06854"></a><span class="lineno"> 6854</span>&#160;  <span class="keywordtype">long</span> <span class="keywordtype">int</span> bytes = 0;           <span class="comment">/* total # bytes read */</span></div><div class="line"><a name="l06855"></a><span class="lineno"> 6855</span>&#160;  <span class="keywordtype">int</span> total_alloc_size;         <span class="comment">/* size of buffer allocation */</span></div><div class="line"><a name="l06856"></a><span class="lineno"> 6856</span>&#160;  <span class="keywordtype">char</span> *readptr;                <span class="comment">/* where in *data to read next */</span></div><div class="line"><a name="l06857"></a><span class="lineno"> 6857</span>&#160;  <span class="keywordtype">int</span> strides[7];               <span class="comment">/* strides between dimensions */</span></div><div class="line"><a name="l06858"></a><span class="lineno"> 6858</span>&#160;  <span class="keywordtype">int</span> collapsed_dims[8];        <span class="comment">/* for read_collapsed_image */</span></div><div class="line"><a name="l06859"></a><span class="lineno"> 6859</span>&#160;  <span class="keywordtype">int</span> *image_size;              <span class="comment">/* pointer to dimensions in header */</span></div><div class="line"><a name="l06860"></a><span class="lineno"> 6860</span>&#160;  <span class="keywordtype">long</span> <span class="keywordtype">int</span> initial_offset;</div><div class="line"><a name="l06861"></a><span class="lineno"> 6861</span>&#160;  <span class="keywordtype">long</span> <span class="keywordtype">int</span> offset;              <span class="comment">/* seek offset for reading current row */</span></div><div class="line"><a name="l06862"></a><span class="lineno"> 6862</span>&#160;</div><div class="line"><a name="l06863"></a><span class="lineno"> 6863</span>&#160;  <span class="comment">/* probably ignored, but set to ndim for consistency*/</span></div><div class="line"><a name="l06864"></a><span class="lineno"> 6864</span>&#160;  collapsed_dims[0] = nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ad61740a0245f2af05ded39cb0648ae07">ndim</a>;</div><div class="line"><a name="l06865"></a><span class="lineno"> 6865</span>&#160;</div><div class="line"><a name="l06866"></a><span class="lineno"> 6866</span>&#160;  <span class="comment">/* build a dims array for collapsed image read */</span></div><div class="line"><a name="l06867"></a><span class="lineno"> 6867</span>&#160;  <span class="keywordflow">for</span>(i = 0; i &lt; nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ad61740a0245f2af05ded39cb0648ae07">ndim</a>; i++)</div><div class="line"><a name="l06868"></a><span class="lineno"> 6868</span>&#160;    {</div><div class="line"><a name="l06869"></a><span class="lineno"> 6869</span>&#160;    <span class="comment">/* if you take the whole extent in this dimension */</span></div><div class="line"><a name="l06870"></a><span class="lineno"> 6870</span>&#160;    <span class="keywordflow">if</span>(start_index[i] == 0 &amp;&amp;</div><div class="line"><a name="l06871"></a><span class="lineno"> 6871</span>&#160;       region_size[i] == nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a054f5f2c357dd6833efd467ac202f0a5">dim</a>[i+1])</div><div class="line"><a name="l06872"></a><span class="lineno"> 6872</span>&#160;      {</div><div class="line"><a name="l06873"></a><span class="lineno"> 6873</span>&#160;      collapsed_dims[i+1] = -1;</div><div class="line"><a name="l06874"></a><span class="lineno"> 6874</span>&#160;      }</div><div class="line"><a name="l06875"></a><span class="lineno"> 6875</span>&#160;    <span class="comment">/* if you specify a single element in this dimension */</span></div><div class="line"><a name="l06876"></a><span class="lineno"> 6876</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(region_size[i] == 1)</div><div class="line"><a name="l06877"></a><span class="lineno"> 6877</span>&#160;      {</div><div class="line"><a name="l06878"></a><span class="lineno"> 6878</span>&#160;      collapsed_dims[i+1] = start_index[i];</div><div class="line"><a name="l06879"></a><span class="lineno"> 6879</span>&#160;      }</div><div class="line"><a name="l06880"></a><span class="lineno"> 6880</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l06881"></a><span class="lineno"> 6881</span>&#160;      {</div><div class="line"><a name="l06882"></a><span class="lineno"> 6882</span>&#160;      collapsed_dims[i+1] = -2; <span class="comment">/* sentinel value */</span></div><div class="line"><a name="l06883"></a><span class="lineno"> 6883</span>&#160;      }</div><div class="line"><a name="l06884"></a><span class="lineno"> 6884</span>&#160;    }</div><div class="line"><a name="l06885"></a><span class="lineno"> 6885</span>&#160;  <span class="comment">/* fill out end of collapsed_dims */</span></div><div class="line"><a name="l06886"></a><span class="lineno"> 6886</span>&#160;  <span class="keywordflow">for</span>(i = nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ad61740a0245f2af05ded39cb0648ae07">ndim</a> ; i &lt; 7; i++)</div><div class="line"><a name="l06887"></a><span class="lineno"> 6887</span>&#160;    {</div><div class="line"><a name="l06888"></a><span class="lineno"> 6888</span>&#160;    collapsed_dims[i+1] = -1;</div><div class="line"><a name="l06889"></a><span class="lineno"> 6889</span>&#160;    }</div><div class="line"><a name="l06890"></a><span class="lineno"> 6890</span>&#160;</div><div class="line"><a name="l06891"></a><span class="lineno"> 6891</span>&#160;  <span class="comment">/* check to see whether collapsed read is possible */</span></div><div class="line"><a name="l06892"></a><span class="lineno"> 6892</span>&#160;  <span class="keywordflow">for</span>(i = 1; i &lt;= nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ad61740a0245f2af05ded39cb0648ae07">ndim</a>; i++)</div><div class="line"><a name="l06893"></a><span class="lineno"> 6893</span>&#160;    {</div><div class="line"><a name="l06894"></a><span class="lineno"> 6894</span>&#160;    <span class="keywordflow">if</span>(collapsed_dims[i] == -2)</div><div class="line"><a name="l06895"></a><span class="lineno"> 6895</span>&#160;      {</div><div class="line"><a name="l06896"></a><span class="lineno"> 6896</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l06897"></a><span class="lineno"> 6897</span>&#160;      }</div><div class="line"><a name="l06898"></a><span class="lineno"> 6898</span>&#160;    }</div><div class="line"><a name="l06899"></a><span class="lineno"> 6899</span>&#160;</div><div class="line"><a name="l06900"></a><span class="lineno"> 6900</span>&#160;  <span class="comment">/* if you get through all the dimensions without hitting </span></div><div class="line"><a name="l06901"></a><span class="lineno"> 6901</span>&#160;<span class="comment">  ** a subrange of size &gt; 1, a collapsed read is possible</span></div><div class="line"><a name="l06902"></a><span class="lineno"> 6902</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l06903"></a><span class="lineno"> 6903</span>&#160;  <span class="keywordflow">if</span>(i &gt; nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ad61740a0245f2af05ded39cb0648ae07">ndim</a>)</div><div class="line"><a name="l06904"></a><span class="lineno"> 6904</span>&#160;    {</div><div class="line"><a name="l06905"></a><span class="lineno"> 6905</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d1/d14/nifti1__io_8c.html#a6932258d1d9e2ed4afd94eac5c13a5d7">nifti_read_collapsed_image</a>(nim, collapsed_dims, data);</div><div class="line"><a name="l06906"></a><span class="lineno"> 6906</span>&#160;    }</div><div class="line"><a name="l06907"></a><span class="lineno"> 6907</span>&#160;</div><div class="line"><a name="l06908"></a><span class="lineno"> 6908</span>&#160;  <span class="comment">/* point past first element of dim, which holds nim-&gt;ndim */</span></div><div class="line"><a name="l06909"></a><span class="lineno"> 6909</span>&#160;  image_size = &amp;(nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a054f5f2c357dd6833efd467ac202f0a5">dim</a>[1]);</div><div class="line"><a name="l06910"></a><span class="lineno"> 6910</span>&#160;</div><div class="line"><a name="l06911"></a><span class="lineno"> 6911</span>&#160;  <span class="comment">/* check region sizes for sanity */</span></div><div class="line"><a name="l06912"></a><span class="lineno"> 6912</span>&#160;  <span class="keywordflow">for</span>(i = 0; i &lt; nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ad61740a0245f2af05ded39cb0648ae07">ndim</a>; i++)</div><div class="line"><a name="l06913"></a><span class="lineno"> 6913</span>&#160;    {</div><div class="line"><a name="l06914"></a><span class="lineno"> 6914</span>&#160;    <span class="keywordflow">if</span>(start_index[i]  + region_size[i] &gt; image_size[i])</div><div class="line"><a name="l06915"></a><span class="lineno"> 6915</span>&#160;      {</div><div class="line"><a name="l06916"></a><span class="lineno"> 6916</span>&#160;      <span class="keywordflow">if</span>(<a class="code" href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a>.debug &gt; 1)</div><div class="line"><a name="l06917"></a><span class="lineno"> 6917</span>&#160;        {</div><div class="line"><a name="l06918"></a><span class="lineno"> 6918</span>&#160;        fprintf(stderr,<span class="stringliteral">&quot;region doesn&#39;t fit within image size\n&quot;</span>);</div><div class="line"><a name="l06919"></a><span class="lineno"> 6919</span>&#160;        }</div><div class="line"><a name="l06920"></a><span class="lineno"> 6920</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l06921"></a><span class="lineno"> 6921</span>&#160;      }</div><div class="line"><a name="l06922"></a><span class="lineno"> 6922</span>&#160;    }</div><div class="line"><a name="l06923"></a><span class="lineno"> 6923</span>&#160;</div><div class="line"><a name="l06924"></a><span class="lineno"> 6924</span>&#160;  <span class="comment">/* get the file open */</span></div><div class="line"><a name="l06925"></a><span class="lineno"> 6925</span>&#160;  fp = <a class="code" href="../../d1/d14/nifti1__io_8c.html#aa101788c6fedf7aca40e9eed8f7f53b2">nifti_image_load_prep</a>( nim );</div><div class="line"><a name="l06926"></a><span class="lineno"> 6926</span>&#160;  <span class="comment">/* the current offset is just past the nifti header, save</span></div><div class="line"><a name="l06927"></a><span class="lineno"> 6927</span>&#160;<span class="comment">   * location so that SEEK_SET can be used below</span></div><div class="line"><a name="l06928"></a><span class="lineno"> 6928</span>&#160;<span class="comment">   */</span></div><div class="line"><a name="l06929"></a><span class="lineno"> 6929</span>&#160;  initial_offset = znztell(fp);  </div><div class="line"><a name="l06930"></a><span class="lineno"> 6930</span>&#160;  <span class="comment">/* get strides*/</span></div><div class="line"><a name="l06931"></a><span class="lineno"> 6931</span>&#160;  compute_strides(strides,image_size,nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a79a4382f115cb6c7f8977c36d73e6749">nbyper</a>);</div><div class="line"><a name="l06932"></a><span class="lineno"> 6932</span>&#160;</div><div class="line"><a name="l06933"></a><span class="lineno"> 6933</span>&#160;  total_alloc_size = nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a79a4382f115cb6c7f8977c36d73e6749">nbyper</a>; <span class="comment">/* size of pixel */</span></div><div class="line"><a name="l06934"></a><span class="lineno"> 6934</span>&#160;</div><div class="line"><a name="l06935"></a><span class="lineno"> 6935</span>&#160;  <span class="comment">/* find alloc size */</span></div><div class="line"><a name="l06936"></a><span class="lineno"> 6936</span>&#160;  <span class="keywordflow">for</span>(i = 0; i &lt; nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ad61740a0245f2af05ded39cb0648ae07">ndim</a>; i++)</div><div class="line"><a name="l06937"></a><span class="lineno"> 6937</span>&#160;    {</div><div class="line"><a name="l06938"></a><span class="lineno"> 6938</span>&#160;    total_alloc_size *= region_size[i];</div><div class="line"><a name="l06939"></a><span class="lineno"> 6939</span>&#160;    }</div><div class="line"><a name="l06940"></a><span class="lineno"> 6940</span>&#160;  <span class="comment">/* allocate buffer, if necessary */</span></div><div class="line"><a name="l06941"></a><span class="lineno"> 6941</span>&#160;  <span class="keywordflow">if</span>(*data == 0)</div><div class="line"><a name="l06942"></a><span class="lineno"> 6942</span>&#160;    {</div><div class="line"><a name="l06943"></a><span class="lineno"> 6943</span>&#160;    *data = (<span class="keywordtype">void</span> *)malloc(total_alloc_size);</div><div class="line"><a name="l06944"></a><span class="lineno"> 6944</span>&#160;    }</div><div class="line"><a name="l06945"></a><span class="lineno"> 6945</span>&#160;</div><div class="line"><a name="l06946"></a><span class="lineno"> 6946</span>&#160;  <span class="keywordflow">if</span>(*data == 0)</div><div class="line"><a name="l06947"></a><span class="lineno"> 6947</span>&#160;    {</div><div class="line"><a name="l06948"></a><span class="lineno"> 6948</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a>.debug &gt; 1)</div><div class="line"><a name="l06949"></a><span class="lineno"> 6949</span>&#160;      {</div><div class="line"><a name="l06950"></a><span class="lineno"> 6950</span>&#160;      fprintf(stderr,<span class="stringliteral">&quot;allocation of %d bytes failed\n&quot;</span>,total_alloc_size);</div><div class="line"><a name="l06951"></a><span class="lineno"> 6951</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l06952"></a><span class="lineno"> 6952</span>&#160;      }</div><div class="line"><a name="l06953"></a><span class="lineno"> 6953</span>&#160;    }</div><div class="line"><a name="l06954"></a><span class="lineno"> 6954</span>&#160;</div><div class="line"><a name="l06955"></a><span class="lineno"> 6955</span>&#160;  <span class="comment">/* point to start of data buffer as char * */</span></div><div class="line"><a name="l06956"></a><span class="lineno"> 6956</span>&#160;  readptr = *((<span class="keywordtype">char</span> **)data);</div><div class="line"><a name="l06957"></a><span class="lineno"> 6957</span>&#160;  {</div><div class="line"><a name="l06958"></a><span class="lineno"> 6958</span>&#160;  <span class="comment">/* can&#39;t assume that start_index and region_size have any more than</span></div><div class="line"><a name="l06959"></a><span class="lineno"> 6959</span>&#160;<span class="comment">  ** nim-&gt;ndim elements so make local copies, filled out to seven elements</span></div><div class="line"><a name="l06960"></a><span class="lineno"> 6960</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l06961"></a><span class="lineno"> 6961</span>&#160;  <span class="keywordtype">int</span> si[7], rs[7];</div><div class="line"><a name="l06962"></a><span class="lineno"> 6962</span>&#160;  <span class="keywordflow">for</span>(i = 0; i &lt; nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ad61740a0245f2af05ded39cb0648ae07">ndim</a>; i++)</div><div class="line"><a name="l06963"></a><span class="lineno"> 6963</span>&#160;    {</div><div class="line"><a name="l06964"></a><span class="lineno"> 6964</span>&#160;    si[i] = start_index[i];</div><div class="line"><a name="l06965"></a><span class="lineno"> 6965</span>&#160;    rs[i] = region_size[i];</div><div class="line"><a name="l06966"></a><span class="lineno"> 6966</span>&#160;    }</div><div class="line"><a name="l06967"></a><span class="lineno"> 6967</span>&#160;  <span class="keywordflow">for</span>(i = nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ad61740a0245f2af05ded39cb0648ae07">ndim</a>; i &lt; 7; i++)</div><div class="line"><a name="l06968"></a><span class="lineno"> 6968</span>&#160;    {</div><div class="line"><a name="l06969"></a><span class="lineno"> 6969</span>&#160;    si[i] = 0;</div><div class="line"><a name="l06970"></a><span class="lineno"> 6970</span>&#160;    rs[i] = 1;</div><div class="line"><a name="l06971"></a><span class="lineno"> 6971</span>&#160;    }</div><div class="line"><a name="l06972"></a><span class="lineno"> 6972</span>&#160;  <span class="comment">/* loop through subregion and read a row at a time */</span></div><div class="line"><a name="l06973"></a><span class="lineno"> 6973</span>&#160;  <span class="keywordflow">for</span>(i = si[6]; i &lt; (si[6] + rs[6]); i++)</div><div class="line"><a name="l06974"></a><span class="lineno"> 6974</span>&#160;    {</div><div class="line"><a name="l06975"></a><span class="lineno"> 6975</span>&#160;    <span class="keywordflow">for</span>(j = si[5]; j &lt; (si[5] + rs[5]); j++)</div><div class="line"><a name="l06976"></a><span class="lineno"> 6976</span>&#160;      {</div><div class="line"><a name="l06977"></a><span class="lineno"> 6977</span>&#160;      <span class="keywordflow">for</span>(k = si[4]; k &lt; (si[4] + rs[4]); k++)</div><div class="line"><a name="l06978"></a><span class="lineno"> 6978</span>&#160;        {</div><div class="line"><a name="l06979"></a><span class="lineno"> 6979</span>&#160;        <span class="keywordflow">for</span>(l = si[3]; l &lt; (si[3] + rs[3]); l++)</div><div class="line"><a name="l06980"></a><span class="lineno"> 6980</span>&#160;          {</div><div class="line"><a name="l06981"></a><span class="lineno"> 6981</span>&#160;          <span class="keywordflow">for</span>(m = si[2]; m &lt; (si[2] + rs[2]); m++)</div><div class="line"><a name="l06982"></a><span class="lineno"> 6982</span>&#160;            {</div><div class="line"><a name="l06983"></a><span class="lineno"> 6983</span>&#160;            <span class="keywordflow">for</span>(n = si[1]; n &lt; (si[1] + rs[1]); n++)</div><div class="line"><a name="l06984"></a><span class="lineno"> 6984</span>&#160;              {</div><div class="line"><a name="l06985"></a><span class="lineno"> 6985</span>&#160;              <span class="keywordtype">int</span> nread,read_amount;</div><div class="line"><a name="l06986"></a><span class="lineno"> 6986</span>&#160;              offset = initial_offset +</div><div class="line"><a name="l06987"></a><span class="lineno"> 6987</span>&#160;                (i * strides[6]) +</div><div class="line"><a name="l06988"></a><span class="lineno"> 6988</span>&#160;                (j * strides[5]) +</div><div class="line"><a name="l06989"></a><span class="lineno"> 6989</span>&#160;                (k * strides[4]) +</div><div class="line"><a name="l06990"></a><span class="lineno"> 6990</span>&#160;                (l * strides[3]) +</div><div class="line"><a name="l06991"></a><span class="lineno"> 6991</span>&#160;                (m * strides[2]) +</div><div class="line"><a name="l06992"></a><span class="lineno"> 6992</span>&#160;                (n * strides[1]) +</div><div class="line"><a name="l06993"></a><span class="lineno"> 6993</span>&#160;                (si[0] * strides[0]);</div><div class="line"><a name="l06994"></a><span class="lineno"> 6994</span>&#160;              znzseek(fp, offset, SEEK_SET); <span class="comment">/* seek to current row */</span></div><div class="line"><a name="l06995"></a><span class="lineno"> 6995</span>&#160;              read_amount = rs[0] * nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a79a4382f115cb6c7f8977c36d73e6749">nbyper</a>; <span class="comment">/* read a row of the subregion*/</span></div><div class="line"><a name="l06996"></a><span class="lineno"> 6996</span>&#160;              nread = (int)<a class="code" href="../../d1/d14/nifti1__io_8c.html#afb6dff710966b4a8611726a9f846c683">nifti_read_buffer</a>(fp, readptr, read_amount, nim);</div><div class="line"><a name="l06997"></a><span class="lineno"> 6997</span>&#160;              <span class="keywordflow">if</span>(nread != read_amount)</div><div class="line"><a name="l06998"></a><span class="lineno"> 6998</span>&#160;                {</div><div class="line"><a name="l06999"></a><span class="lineno"> 6999</span>&#160;                <span class="keywordflow">if</span>(<a class="code" href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a>.debug &gt; 1)</div><div class="line"><a name="l07000"></a><span class="lineno"> 7000</span>&#160;                  {</div><div class="line"><a name="l07001"></a><span class="lineno"> 7001</span>&#160;                  fprintf(stderr,<span class="stringliteral">&quot;read of %d bytes failed\n&quot;</span>,read_amount);</div><div class="line"><a name="l07002"></a><span class="lineno"> 7002</span>&#160;                  <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l07003"></a><span class="lineno"> 7003</span>&#160;                  }</div><div class="line"><a name="l07004"></a><span class="lineno"> 7004</span>&#160;                }</div><div class="line"><a name="l07005"></a><span class="lineno"> 7005</span>&#160;              bytes += nread;</div><div class="line"><a name="l07006"></a><span class="lineno"> 7006</span>&#160;              readptr += read_amount;</div><div class="line"><a name="l07007"></a><span class="lineno"> 7007</span>&#160;              }</div><div class="line"><a name="l07008"></a><span class="lineno"> 7008</span>&#160;            }</div><div class="line"><a name="l07009"></a><span class="lineno"> 7009</span>&#160;          }</div><div class="line"><a name="l07010"></a><span class="lineno"> 7010</span>&#160;        }</div><div class="line"><a name="l07011"></a><span class="lineno"> 7011</span>&#160;      }</div><div class="line"><a name="l07012"></a><span class="lineno"> 7012</span>&#160;    }</div><div class="line"><a name="l07013"></a><span class="lineno"> 7013</span>&#160;  }</div><div class="line"><a name="l07014"></a><span class="lineno"> 7014</span>&#160;  <span class="keywordflow">return</span> bytes;</div><div class="line"><a name="l07015"></a><span class="lineno"> 7015</span>&#160;}</div><div class="ttc" id="nifti1__io_8c_html_a6932258d1d9e2ed4afd94eac5c13a5d7"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#a6932258d1d9e2ed4afd94eac5c13a5d7">nifti_read_collapsed_image</a></div><div class="ttdeci">int nifti_read_collapsed_image(nifti_image *nim, const int dims [8], void **data)</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:6742</div></div>
<div class="ttc" id="nifti1__io_8c_html_aa101788c6fedf7aca40e9eed8f7f53b2"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#aa101788c6fedf7aca40e9eed8f7f53b2">nifti_image_load_prep</a></div><div class="ttdeci">static znzFile nifti_image_load_prep(nifti_image *nim)</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:4777</div></div>
<div class="ttc" id="structnifti__image_html_ad61740a0245f2af05ded39cb0648ae07"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#ad61740a0245f2af05ded39cb0648ae07">nifti_image::ndim</a></div><div class="ttdeci">int ndim</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:91</div></div>
<div class="ttc" id="nifti1__io_8c_html_afb6dff710966b4a8611726a9f846c683"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#afb6dff710966b4a8611726a9f846c683">nifti_read_buffer</a></div><div class="ttdeci">size_t nifti_read_buffer(znzFile fp, void *dataptr, size_t ntot, nifti_image *nim)</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:4928</div></div>
<div class="ttc" id="structnifti__image_html_a054f5f2c357dd6833efd467ac202f0a5"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a054f5f2c357dd6833efd467ac202f0a5">nifti_image::dim</a></div><div class="ttdeci">int dim[8]</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:99</div></div>
<div class="ttc" id="structnifti__image_html_a79a4382f115cb6c7f8977c36d73e6749"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a79a4382f115cb6c7f8977c36d73e6749">nifti_image::nbyper</a></div><div class="ttdeci">int nbyper</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:101</div></div>
<div class="ttc" id="nifti1__io_8c_html_a6e047e1dc2f826a4adff048bee8f5df7"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a></div><div class="ttdeci">static nifti_global_options g_opts</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:344</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a85d02757a3ef2462045bb89d634b8036"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a85d02757a3ef2462045bb89d634b8036">&#9670;&nbsp;</a></span>nifti_set_allow_upper_fext()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void nifti_set_allow_upper_fext </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>allow</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>set nifti's global allow_upper_fext flag 28 Apr 2009 [rickr]</p>
<p>explicitly set to 0 or 1 </p>
<div class="fragment"><div class="line"><a name="l02720"></a><span class="lineno"> 2720</span>&#160;{</div><div class="line"><a name="l02721"></a><span class="lineno"> 2721</span>&#160;    <a class="code" href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a>.allow_upper_fext = allow ? 1 : 0;</div><div class="line"><a name="l02722"></a><span class="lineno"> 2722</span>&#160;}</div><div class="ttc" id="nifti1__io_8c_html_a6e047e1dc2f826a4adff048bee8f5df7"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a></div><div class="ttdeci">static nifti_global_options g_opts</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:344</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad76d66da1e384dc54a092e033bd8e195"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad76d66da1e384dc54a092e033bd8e195">&#9670;&nbsp;</a></span>nifti_set_debug_level()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void nifti_set_debug_level </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>level</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>set nifti's global debug level, for status reporting</p>
<ul>
<li>0 : quiet, nothing is printed to the terminal, but errors</li>
<li>1 : normal execution (the default)</li>
<li>2, 3 : more details </li>
</ul>
<div class="fragment"><div class="line"><a name="l02700"></a><span class="lineno"> 2700</span>&#160;{</div><div class="line"><a name="l02701"></a><span class="lineno"> 2701</span>&#160;    <a class="code" href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a>.debug = level;</div><div class="line"><a name="l02702"></a><span class="lineno"> 2702</span>&#160;}</div><div class="ttc" id="nifti1__io_8c_html_a6e047e1dc2f826a4adff048bee8f5df7"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a></div><div class="ttdeci">static nifti_global_options g_opts</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:344</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a296fad01763163289b0e1030d3a0ebaa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a296fad01763163289b0e1030d3a0ebaa">&#9670;&nbsp;</a></span>nifti_set_filenames()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int nifti_set_filenames </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d0/de7/structnifti__image.html">nifti_image</a> *&#160;</td>
          <td class="paramname"><em>nim</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>prefix</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>check</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>set_byte_order</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>create and set new filenames, based on prefix and image type</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">nim</td><td>pointer to <a class="el" href="../../d0/de7/structnifti__image.html" title="High level data structure for open nifti datasets in the nifti1_io API. Note that this structure is n...">nifti_image</a> in which to set filenames </td></tr>
    <tr><td class="paramname">prefix</td><td>(required) prefix for output filenames </td></tr>
    <tr><td class="paramname">check</td><td>check for previous existence of filename (existence is an error condition) </td></tr>
    <tr><td class="paramname">set_byte_order</td><td>flag to set nim-&gt;byteorder here (this is probably a logical place to do so)</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on successful update</dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>this will free() any existing names and create new ones</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="../../d1/d14/nifti1__io_8c.html#a80ba47331f082db092ef29d11c64fa31">nifti_makeimgname</a>, <a class="el" href="../../d1/d14/nifti1__io_8c.html#a03d86f65680b215db89c24723ad73a8c">nifti_makehdrname</a>, <a class="el" href="../../d1/d14/nifti1__io_8c.html#a46c9636636122200ee108fb179dc23de">nifti_type_and_names_match</a> </dd></dl>
<div class="fragment"><div class="line"><a name="l03056"></a><span class="lineno"> 3056</span>&#160;{</div><div class="line"><a name="l03057"></a><span class="lineno"> 3057</span>&#160;   <span class="keywordtype">int</span> comp = <a class="code" href="../../d1/d14/nifti1__io_8c.html#a6c17ed984533a4dede09b3bb6fa1fa17">nifti_is_gzfile</a>(prefix);</div><div class="line"><a name="l03058"></a><span class="lineno"> 3058</span>&#160;</div><div class="line"><a name="l03059"></a><span class="lineno"> 3059</span>&#160;   <span class="keywordflow">if</span>( !nim || !prefix ){</div><div class="line"><a name="l03060"></a><span class="lineno"> 3060</span>&#160;      fprintf(stderr,<span class="stringliteral">&quot;** nifti_set_filenames, bad params %p, %p\n&quot;</span>,</div><div class="line"><a name="l03061"></a><span class="lineno"> 3061</span>&#160;              (<span class="keywordtype">void</span> *)nim,prefix);</div><div class="line"><a name="l03062"></a><span class="lineno"> 3062</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l03063"></a><span class="lineno"> 3063</span>&#160;   }</div><div class="line"><a name="l03064"></a><span class="lineno"> 3064</span>&#160;</div><div class="line"><a name="l03065"></a><span class="lineno"> 3065</span>&#160;   <span class="keywordflow">if</span>( <a class="code" href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a>.debug &gt; 1 )</div><div class="line"><a name="l03066"></a><span class="lineno"> 3066</span>&#160;      fprintf(stderr,<span class="stringliteral">&quot;+d modifying output filenames using prefix %s\n&quot;</span>, prefix);</div><div class="line"><a name="l03067"></a><span class="lineno"> 3067</span>&#160;</div><div class="line"><a name="l03068"></a><span class="lineno"> 3068</span>&#160;   <span class="keywordflow">if</span>( nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a1c7755060c9cca3612f1101684c9845f">fname</a> ) free(nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a1c7755060c9cca3612f1101684c9845f">fname</a>);</div><div class="line"><a name="l03069"></a><span class="lineno"> 3069</span>&#160;   <span class="keywordflow">if</span>( nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#aa99806d70cacff119b5b6089c3dfdeda">iname</a> ) free(nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#aa99806d70cacff119b5b6089c3dfdeda">iname</a>);</div><div class="line"><a name="l03070"></a><span class="lineno"> 3070</span>&#160;   nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a1c7755060c9cca3612f1101684c9845f">fname</a> = <a class="code" href="../../d1/d14/nifti1__io_8c.html#a03d86f65680b215db89c24723ad73a8c">nifti_makehdrname</a>(prefix, nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ac55996e58670948b220bebbf5d4bb0f4">nifti_type</a>, check, comp);</div><div class="line"><a name="l03071"></a><span class="lineno"> 3071</span>&#160;   nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#aa99806d70cacff119b5b6089c3dfdeda">iname</a> = <a class="code" href="../../d1/d14/nifti1__io_8c.html#a80ba47331f082db092ef29d11c64fa31">nifti_makeimgname</a>(prefix, nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ac55996e58670948b220bebbf5d4bb0f4">nifti_type</a>, check, comp);</div><div class="line"><a name="l03072"></a><span class="lineno"> 3072</span>&#160;   <span class="keywordflow">if</span>( !nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a1c7755060c9cca3612f1101684c9845f">fname</a> || !nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#aa99806d70cacff119b5b6089c3dfdeda">iname</a> ){</div><div class="line"><a name="l03073"></a><span class="lineno"> 3073</span>&#160;      LNI_FERR(<span class="stringliteral">&quot;nifti_set_filename&quot;</span>,<span class="stringliteral">&quot;failed to set prefix for&quot;</span>,prefix);</div><div class="line"><a name="l03074"></a><span class="lineno"> 3074</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l03075"></a><span class="lineno"> 3075</span>&#160;   }</div><div class="line"><a name="l03076"></a><span class="lineno"> 3076</span>&#160;</div><div class="line"><a name="l03077"></a><span class="lineno"> 3077</span>&#160;   <span class="keywordflow">if</span>( set_byte_order ) nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a5ce21d97da49b1dcf9415e83bbf07caf">byteorder</a> = <a class="code" href="../../d1/d14/nifti1__io_8c.html#adf2a70eac549a80a246d380240a8d822">nifti_short_order</a>() ;</div><div class="line"><a name="l03078"></a><span class="lineno"> 3078</span>&#160;</div><div class="line"><a name="l03079"></a><span class="lineno"> 3079</span>&#160;   <span class="keywordflow">if</span>( <a class="code" href="../../d1/d14/nifti1__io_8c.html#a5cb621a9f499db8c3f9de3c73628cc76">nifti_set_type_from_names</a>(nim) &lt; 0 )</div><div class="line"><a name="l03080"></a><span class="lineno"> 3080</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l03081"></a><span class="lineno"> 3081</span>&#160;</div><div class="line"><a name="l03082"></a><span class="lineno"> 3082</span>&#160;   <span class="keywordflow">if</span>( <a class="code" href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a>.debug &gt; 2 )</div><div class="line"><a name="l03083"></a><span class="lineno"> 3083</span>&#160;      fprintf(stderr,<span class="stringliteral">&quot;+d have new filenames %s and %s\n&quot;</span>,nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a1c7755060c9cca3612f1101684c9845f">fname</a>,nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#aa99806d70cacff119b5b6089c3dfdeda">iname</a>);</div><div class="line"><a name="l03084"></a><span class="lineno"> 3084</span>&#160;</div><div class="line"><a name="l03085"></a><span class="lineno"> 3085</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03086"></a><span class="lineno"> 3086</span>&#160;}</div><div class="ttc" id="structnifti__image_html_aa99806d70cacff119b5b6089c3dfdeda"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#aa99806d70cacff119b5b6089c3dfdeda">nifti_image::iname</a></div><div class="ttdeci">char * iname</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:161</div></div>
<div class="ttc" id="nifti1__io_8c_html_adf2a70eac549a80a246d380240a8d822"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#adf2a70eac549a80a246d380240a8d822">nifti_short_order</a></div><div class="ttdeci">int nifti_short_order(void)</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:6321</div></div>
<div class="ttc" id="structnifti__image_html_a5ce21d97da49b1dcf9415e83bbf07caf"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a5ce21d97da49b1dcf9415e83bbf07caf">nifti_image::byteorder</a></div><div class="ttdeci">int byteorder</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:164</div></div>
<div class="ttc" id="structnifti__image_html_ac55996e58670948b220bebbf5d4bb0f4"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#ac55996e58670948b220bebbf5d4bb0f4">nifti_image::nifti_type</a></div><div class="ttdeci">int nifti_type</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:148</div></div>
<div class="ttc" id="nifti1__io_8c_html_a80ba47331f082db092ef29d11c64fa31"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#a80ba47331f082db092ef29d11c64fa31">nifti_makeimgname</a></div><div class="ttdeci">char * nifti_makeimgname(const char *prefix, int nifti_type, int check, int comp)</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:2985</div></div>
<div class="ttc" id="nifti1__io_8c_html_a03d86f65680b215db89c24723ad73a8c"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#a03d86f65680b215db89c24723ad73a8c">nifti_makehdrname</a></div><div class="ttdeci">char * nifti_makehdrname(const char *prefix, int nifti_type, int check, int comp)</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:2918</div></div>
<div class="ttc" id="nifti1__io_8c_html_a6c17ed984533a4dede09b3bb6fa1fa17"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#a6c17ed984533a4dede09b3bb6fa1fa17">nifti_is_gzfile</a></div><div class="ttdeci">int nifti_is_gzfile(const char *fname)</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:2648</div></div>
<div class="ttc" id="nifti1__io_8c_html_a5cb621a9f499db8c3f9de3c73628cc76"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#a5cb621a9f499db8c3f9de3c73628cc76">nifti_set_type_from_names</a></div><div class="ttdeci">int nifti_set_type_from_names(nifti_image *nim)</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:3379</div></div>
<div class="ttc" id="structnifti__image_html_a1c7755060c9cca3612f1101684c9845f"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a1c7755060c9cca3612f1101684c9845f">nifti_image::fname</a></div><div class="ttdeci">char * fname</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:160</div></div>
<div class="ttc" id="nifti1__io_8c_html_a6e047e1dc2f826a4adff048bee8f5df7"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a></div><div class="ttdeci">static nifti_global_options g_opts</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:344</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af37b47d8dcd832f0a2ea9758001ac622"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af37b47d8dcd832f0a2ea9758001ac622">&#9670;&nbsp;</a></span>nifti_set_iname_offset()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void nifti_set_iname_offset </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d0/de7/structnifti__image.html">nifti_image</a> *&#160;</td>
          <td class="paramname"><em>nim</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>set the <a class="el" href="../../d0/de7/structnifti__image.html" title="High level data structure for open nifti datasets in the nifti1_io API. Note that this structure is n...">nifti_image</a> iname_offset field, based on nifti_type</p>
<ul>
<li>if writing to 2 files, set offset to 0</li>
<li>if writing to a single NIFTI-1 file, set the offset to 352 + total extension size, then align to 16-byte boundary</li>
<li>if writing an ASCII header, set offset to -1 </li>
</ul>
<div class="fragment"><div class="line"><a name="l05614"></a><span class="lineno"> 5614</span>&#160;{</div><div class="line"><a name="l05615"></a><span class="lineno"> 5615</span>&#160;   <span class="keywordtype">int</span> offset;</div><div class="line"><a name="l05616"></a><span class="lineno"> 5616</span>&#160;</div><div class="line"><a name="l05617"></a><span class="lineno"> 5617</span>&#160;   <span class="keywordflow">switch</span>( nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ac55996e58670948b220bebbf5d4bb0f4">nifti_type</a> ){</div><div class="line"><a name="l05618"></a><span class="lineno"> 5618</span>&#160;</div><div class="line"><a name="l05619"></a><span class="lineno"> 5619</span>&#160;     <span class="keywordflow">default</span>:  <span class="comment">/* writing into 2 files */</span></div><div class="line"><a name="l05620"></a><span class="lineno"> 5620</span>&#160;       <span class="comment">/* we only write files with 0 offset in the 2 file format */</span></div><div class="line"><a name="l05621"></a><span class="lineno"> 5621</span>&#160;       nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a856fc94a5daed16225264dc8daa96013">iname_offset</a> = 0 ;</div><div class="line"><a name="l05622"></a><span class="lineno"> 5622</span>&#160;     break ;</div><div class="line"><a name="l05623"></a><span class="lineno"> 5623</span>&#160;</div><div class="line"><a name="l05624"></a><span class="lineno"> 5624</span>&#160;     <span class="comment">/* NIFTI-1 single binary file - always update */</span></div><div class="line"><a name="l05625"></a><span class="lineno"> 5625</span>&#160;     <span class="keywordflow">case</span> NIFTI_FTYPE_NIFTI1_1:</div><div class="line"><a name="l05626"></a><span class="lineno"> 5626</span>&#160;       offset = <a class="code" href="../../d1/d14/nifti1__io_8c.html#acd2f650ca248b801fb9b412c9cda0ae8">nifti_extension_size</a>(nim)+<span class="keyword">sizeof</span>(<span class="keyword">struct </span><a class="code" href="../../dd/d75/structnifti__1__header.html">nifti_1_header</a>)+4;</div><div class="line"><a name="l05627"></a><span class="lineno"> 5627</span>&#160;       <span class="comment">/* be sure offset is aligned to a 16 byte boundary */</span></div><div class="line"><a name="l05628"></a><span class="lineno"> 5628</span>&#160;       <span class="keywordflow">if</span> ( ( offset % 16 ) != 0 )  offset = ((offset + 0xf) &amp; ~0xf);</div><div class="line"><a name="l05629"></a><span class="lineno"> 5629</span>&#160;       <span class="keywordflow">if</span>( nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a856fc94a5daed16225264dc8daa96013">iname_offset</a> != offset ){</div><div class="line"><a name="l05630"></a><span class="lineno"> 5630</span>&#160;          <span class="keywordflow">if</span>( <a class="code" href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a>.debug &gt; 1 )</div><div class="line"><a name="l05631"></a><span class="lineno"> 5631</span>&#160;             fprintf(stderr,<span class="stringliteral">&quot;+d changing offset from %d to %d\n&quot;</span>,</div><div class="line"><a name="l05632"></a><span class="lineno"> 5632</span>&#160;                  nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a856fc94a5daed16225264dc8daa96013">iname_offset</a>, offset);</div><div class="line"><a name="l05633"></a><span class="lineno"> 5633</span>&#160;          nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a856fc94a5daed16225264dc8daa96013">iname_offset</a> = offset;</div><div class="line"><a name="l05634"></a><span class="lineno"> 5634</span>&#160;       }</div><div class="line"><a name="l05635"></a><span class="lineno"> 5635</span>&#160;     break ;</div><div class="line"><a name="l05636"></a><span class="lineno"> 5636</span>&#160;</div><div class="line"><a name="l05637"></a><span class="lineno"> 5637</span>&#160;     <span class="comment">/* non-standard case: NIFTI-1 ASCII header + binary data (single file) */</span></div><div class="line"><a name="l05638"></a><span class="lineno"> 5638</span>&#160;     <span class="keywordflow">case</span> NIFTI_FTYPE_ASCII:</div><div class="line"><a name="l05639"></a><span class="lineno"> 5639</span>&#160;       nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a856fc94a5daed16225264dc8daa96013">iname_offset</a> = -1 ;             <span class="comment">/* compute offset from filesize */</span></div><div class="line"><a name="l05640"></a><span class="lineno"> 5640</span>&#160;     break ;</div><div class="line"><a name="l05641"></a><span class="lineno"> 5641</span>&#160;   }</div><div class="line"><a name="l05642"></a><span class="lineno"> 5642</span>&#160;}</div><div class="ttc" id="structnifti__1__header_html"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html">nifti_1_header</a></div><div class="ttdoc">Data structure defining the fields in the nifti1 header. This binary header should be found at the be...</div><div class="ttdef"><b>Definition:</b> nifti1.h:144</div></div>
<div class="ttc" id="structnifti__image_html_a856fc94a5daed16225264dc8daa96013"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a856fc94a5daed16225264dc8daa96013">nifti_image::iname_offset</a></div><div class="ttdeci">int iname_offset</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:162</div></div>
<div class="ttc" id="structnifti__image_html_ac55996e58670948b220bebbf5d4bb0f4"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#ac55996e58670948b220bebbf5d4bb0f4">nifti_image::nifti_type</a></div><div class="ttdeci">int nifti_type</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:148</div></div>
<div class="ttc" id="nifti1__io_8c_html_acd2f650ca248b801fb9b412c9cda0ae8"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#acd2f650ca248b801fb9b412c9cda0ae8">nifti_extension_size</a></div><div class="ttdeci">int nifti_extension_size(nifti_image *nim)</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:5586</div></div>
<div class="ttc" id="nifti1__io_8c_html_a6e047e1dc2f826a4adff048bee8f5df7"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a></div><div class="ttdeci">static nifti_global_options g_opts</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:344</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a10072c5930f7f0c69c91821edbf44b97"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a10072c5930f7f0c69c91821edbf44b97">&#9670;&nbsp;</a></span>nifti_set_skip_blank_ext()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void nifti_set_skip_blank_ext </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>skip</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>set nifti's global skip_blank_ext flag 5 Sep 2006 [rickr]</p>
<p>explicitly set to 0 or 1 </p>
<div class="fragment"><div class="line"><a name="l02710"></a><span class="lineno"> 2710</span>&#160;{</div><div class="line"><a name="l02711"></a><span class="lineno"> 2711</span>&#160;    <a class="code" href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a>.skip_blank_ext = skip ? 1 : 0;</div><div class="line"><a name="l02712"></a><span class="lineno"> 2712</span>&#160;}</div><div class="ttc" id="nifti1__io_8c_html_a6e047e1dc2f826a4adff048bee8f5df7"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a></div><div class="ttdeci">static nifti_global_options g_opts</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:344</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a5cb621a9f499db8c3f9de3c73628cc76"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5cb621a9f499db8c3f9de3c73628cc76">&#9670;&nbsp;</a></span>nifti_set_type_from_names()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int nifti_set_type_from_names </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d0/de7/structnifti__image.html">nifti_image</a> *&#160;</td>
          <td class="paramname"><em>nim</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>set the nifti_type field based on fname and iname</p>
<p>Note that nifti_type is changed only when it does not match the filenames.</p>
<dl class="section return"><dt>Returns</dt><dd>0 on success, -1 on error</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="../../d1/d14/nifti1__io_8c.html#a5c42d2b1cf63b30950078ec5562e1f58">is_valid_nifti_type</a>, <a class="el" href="../../d1/d14/nifti1__io_8c.html#a46c9636636122200ee108fb179dc23de">nifti_type_and_names_match</a> </dd></dl>
<div class="fragment"><div class="line"><a name="l03380"></a><span class="lineno"> 3380</span>&#160;{</div><div class="line"><a name="l03381"></a><span class="lineno"> 3381</span>&#160;   <span class="comment">/* error checking first */</span></div><div class="line"><a name="l03382"></a><span class="lineno"> 3382</span>&#160;   <span class="keywordflow">if</span>( !nim ){ fprintf(stderr,<span class="stringliteral">&quot;** NSTFN: no nifti_image\n&quot;</span>);  <span class="keywordflow">return</span> -1; }</div><div class="line"><a name="l03383"></a><span class="lineno"> 3383</span>&#160;</div><div class="line"><a name="l03384"></a><span class="lineno"> 3384</span>&#160;   <span class="keywordflow">if</span>( !nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a1c7755060c9cca3612f1101684c9845f">fname</a> || !nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#aa99806d70cacff119b5b6089c3dfdeda">iname</a> ){</div><div class="line"><a name="l03385"></a><span class="lineno"> 3385</span>&#160;      fprintf(stderr,<span class="stringliteral">&quot;** NSTFN: missing filename(s) fname @ %p, iname @ %p\n&quot;</span>,</div><div class="line"><a name="l03386"></a><span class="lineno"> 3386</span>&#160;              nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a1c7755060c9cca3612f1101684c9845f">fname</a>, nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#aa99806d70cacff119b5b6089c3dfdeda">iname</a>);</div><div class="line"><a name="l03387"></a><span class="lineno"> 3387</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l03388"></a><span class="lineno"> 3388</span>&#160;   }</div><div class="line"><a name="l03389"></a><span class="lineno"> 3389</span>&#160;</div><div class="line"><a name="l03390"></a><span class="lineno"> 3390</span>&#160;   <span class="keywordflow">if</span>( ! <a class="code" href="../../d1/d14/nifti1__io_8c.html#a836b54d494e9d2718e5541978ae3fc29">nifti_validfilename</a>      ( nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a1c7755060c9cca3612f1101684c9845f">fname</a> ) ||</div><div class="line"><a name="l03391"></a><span class="lineno"> 3391</span>&#160;       ! <a class="code" href="../../d1/d14/nifti1__io_8c.html#a836b54d494e9d2718e5541978ae3fc29">nifti_validfilename</a>      ( nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#aa99806d70cacff119b5b6089c3dfdeda">iname</a> ) ||</div><div class="line"><a name="l03392"></a><span class="lineno"> 3392</span>&#160;       ! <a class="code" href="../../d1/d14/nifti1__io_8c.html#a338a5f9b74c37ee28ca8683324434a05">nifti_find_file_extension</a>( nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a1c7755060c9cca3612f1101684c9845f">fname</a> ) ||</div><div class="line"><a name="l03393"></a><span class="lineno"> 3393</span>&#160;       ! <a class="code" href="../../d1/d14/nifti1__io_8c.html#a338a5f9b74c37ee28ca8683324434a05">nifti_find_file_extension</a>( nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#aa99806d70cacff119b5b6089c3dfdeda">iname</a> )</div><div class="line"><a name="l03394"></a><span class="lineno"> 3394</span>&#160;     ) {</div><div class="line"><a name="l03395"></a><span class="lineno"> 3395</span>&#160;      fprintf(stderr,<span class="stringliteral">&quot;** NSTFN: invalid filename(s) fname=&#39;%s&#39;, iname=&#39;%s&#39;\n&quot;</span>,</div><div class="line"><a name="l03396"></a><span class="lineno"> 3396</span>&#160;              nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a1c7755060c9cca3612f1101684c9845f">fname</a>, nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#aa99806d70cacff119b5b6089c3dfdeda">iname</a>);</div><div class="line"><a name="l03397"></a><span class="lineno"> 3397</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l03398"></a><span class="lineno"> 3398</span>&#160;   }</div><div class="line"><a name="l03399"></a><span class="lineno"> 3399</span>&#160;</div><div class="line"><a name="l03400"></a><span class="lineno"> 3400</span>&#160;   <span class="keywordflow">if</span>( <a class="code" href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a>.debug &gt; 2 )</div><div class="line"><a name="l03401"></a><span class="lineno"> 3401</span>&#160;      fprintf(stderr,<span class="stringliteral">&quot;-d verify nifti_type from filenames: %d&quot;</span>,nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ac55996e58670948b220bebbf5d4bb0f4">nifti_type</a>);</div><div class="line"><a name="l03402"></a><span class="lineno"> 3402</span>&#160;</div><div class="line"><a name="l03403"></a><span class="lineno"> 3403</span>&#160;   <span class="comment">/* type should be NIFTI_FTYPE_ASCII if extension is .nia */</span></div><div class="line"><a name="l03404"></a><span class="lineno"> 3404</span>&#160;   <span class="keywordflow">if</span>( (fileext_compare(<a class="code" href="../../d1/d14/nifti1__io_8c.html#a338a5f9b74c37ee28ca8683324434a05">nifti_find_file_extension</a>(nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a1c7755060c9cca3612f1101684c9845f">fname</a>),<span class="stringliteral">&quot;.nia&quot;</span>)==0)){</div><div class="line"><a name="l03405"></a><span class="lineno"> 3405</span>&#160;      nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ac55996e58670948b220bebbf5d4bb0f4">nifti_type</a> = NIFTI_FTYPE_ASCII;</div><div class="line"><a name="l03406"></a><span class="lineno"> 3406</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03407"></a><span class="lineno"> 3407</span>&#160;      <span class="comment">/* not too picky here, do what must be done, and then verify */</span></div><div class="line"><a name="l03408"></a><span class="lineno"> 3408</span>&#160;      <span class="keywordflow">if</span>( strcmp(nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a1c7755060c9cca3612f1101684c9845f">fname</a>, nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#aa99806d70cacff119b5b6089c3dfdeda">iname</a>) == 0 )          <span class="comment">/* one file, type 1 */</span></div><div class="line"><a name="l03409"></a><span class="lineno"> 3409</span>&#160;         nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ac55996e58670948b220bebbf5d4bb0f4">nifti_type</a> = NIFTI_FTYPE_NIFTI1_1;</div><div class="line"><a name="l03410"></a><span class="lineno"> 3410</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span>( nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ac55996e58670948b220bebbf5d4bb0f4">nifti_type</a> == NIFTI_FTYPE_NIFTI1_1 ) <span class="comment">/* cannot be type 1 */</span></div><div class="line"><a name="l03411"></a><span class="lineno"> 3411</span>&#160;         nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ac55996e58670948b220bebbf5d4bb0f4">nifti_type</a> = NIFTI_FTYPE_NIFTI1_2;</div><div class="line"><a name="l03412"></a><span class="lineno"> 3412</span>&#160;   }</div><div class="line"><a name="l03413"></a><span class="lineno"> 3413</span>&#160;</div><div class="line"><a name="l03414"></a><span class="lineno"> 3414</span>&#160;   <span class="keywordflow">if</span>( <a class="code" href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a>.debug &gt; 2 ) fprintf(stderr,<span class="stringliteral">&quot; -&gt; %d\n&quot;</span>,nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ac55996e58670948b220bebbf5d4bb0f4">nifti_type</a>);</div><div class="line"><a name="l03415"></a><span class="lineno"> 3415</span>&#160;</div><div class="line"><a name="l03416"></a><span class="lineno"> 3416</span>&#160;   <span class="keywordflow">if</span>( <a class="code" href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a>.debug &gt; 1 )  <span class="comment">/* warn user about anything strange */</span></div><div class="line"><a name="l03417"></a><span class="lineno"> 3417</span>&#160;      <a class="code" href="../../d1/d14/nifti1__io_8c.html#a46c9636636122200ee108fb179dc23de">nifti_type_and_names_match</a>(nim, 1);</div><div class="line"><a name="l03418"></a><span class="lineno"> 3418</span>&#160;</div><div class="line"><a name="l03419"></a><span class="lineno"> 3419</span>&#160;   <span class="keywordflow">if</span>( <a class="code" href="../../d1/d14/nifti1__io_8c.html#a5c42d2b1cf63b30950078ec5562e1f58">is_valid_nifti_type</a>(nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ac55996e58670948b220bebbf5d4bb0f4">nifti_type</a>) ) <span class="keywordflow">return</span> 0;  <span class="comment">/* success! */</span></div><div class="line"><a name="l03420"></a><span class="lineno"> 3420</span>&#160;</div><div class="line"><a name="l03421"></a><span class="lineno"> 3421</span>&#160;   fprintf(stderr,<span class="stringliteral">&quot;** NSTFN: bad nifti_type %d, for &#39;%s&#39; and &#39;%s&#39;\n&quot;</span>,</div><div class="line"><a name="l03422"></a><span class="lineno"> 3422</span>&#160;           nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ac55996e58670948b220bebbf5d4bb0f4">nifti_type</a>, nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a1c7755060c9cca3612f1101684c9845f">fname</a>, nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#aa99806d70cacff119b5b6089c3dfdeda">iname</a>);</div><div class="line"><a name="l03423"></a><span class="lineno"> 3423</span>&#160;</div><div class="line"><a name="l03424"></a><span class="lineno"> 3424</span>&#160;   <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l03425"></a><span class="lineno"> 3425</span>&#160;}</div><div class="ttc" id="structnifti__image_html_aa99806d70cacff119b5b6089c3dfdeda"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#aa99806d70cacff119b5b6089c3dfdeda">nifti_image::iname</a></div><div class="ttdeci">char * iname</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:161</div></div>
<div class="ttc" id="nifti1__io_8c_html_a338a5f9b74c37ee28ca8683324434a05"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#a338a5f9b74c37ee28ca8683324434a05">nifti_find_file_extension</a></div><div class="ttdeci">char * nifti_find_file_extension(const char *name)</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:2583</div></div>
<div class="ttc" id="nifti1__io_8c_html_a46c9636636122200ee108fb179dc23de"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#a46c9636636122200ee108fb179dc23de">nifti_type_and_names_match</a></div><div class="ttdeci">int nifti_type_and_names_match(nifti_image *nim, int show_warn)</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:3106</div></div>
<div class="ttc" id="nifti1__io_8c_html_a5c42d2b1cf63b30950078ec5562e1f58"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#a5c42d2b1cf63b30950078ec5562e1f58">is_valid_nifti_type</a></div><div class="ttdeci">int is_valid_nifti_type(int nifti_type)</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:3329</div></div>
<div class="ttc" id="structnifti__image_html_ac55996e58670948b220bebbf5d4bb0f4"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#ac55996e58670948b220bebbf5d4bb0f4">nifti_image::nifti_type</a></div><div class="ttdeci">int nifti_type</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:148</div></div>
<div class="ttc" id="nifti1__io_8c_html_a836b54d494e9d2718e5541978ae3fc29"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#a836b54d494e9d2718e5541978ae3fc29">nifti_validfilename</a></div><div class="ttdeci">int nifti_validfilename(const char *fname)</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:2550</div></div>
<div class="ttc" id="structnifti__image_html_a1c7755060c9cca3612f1101684c9845f"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a1c7755060c9cca3612f1101684c9845f">nifti_image::fname</a></div><div class="ttdeci">char * fname</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:160</div></div>
<div class="ttc" id="nifti1__io_8c_html_a6e047e1dc2f826a4adff048bee8f5df7"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a></div><div class="ttdeci">static nifti_global_options g_opts</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:344</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="adf2a70eac549a80a246d380240a8d822"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adf2a70eac549a80a246d380240a8d822">&#9670;&nbsp;</a></span>nifti_short_order()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int nifti_short_order </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>get the byte order for this CPU</p>
<ul>
<li>LSB_FIRST means least significant byte, first (little endian)</li>
<li>MSB_FIRST means most significant byte, first (big endian) </li>
</ul>
<div class="fragment"><div class="line"><a name="l06322"></a><span class="lineno"> 6322</span>&#160;{</div><div class="line"><a name="l06323"></a><span class="lineno"> 6323</span>&#160;   <span class="keyword">union </span>{ <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> bb[2] ;</div><div class="line"><a name="l06324"></a><span class="lineno"> 6324</span>&#160;           <span class="keywordtype">short</span>         ss    ; } fred ;</div><div class="line"><a name="l06325"></a><span class="lineno"> 6325</span>&#160;</div><div class="line"><a name="l06326"></a><span class="lineno"> 6326</span>&#160;   fred.bb[0] = 1 ; fred.bb[1] = 0 ;</div><div class="line"><a name="l06327"></a><span class="lineno"> 6327</span>&#160;</div><div class="line"><a name="l06328"></a><span class="lineno"> 6328</span>&#160;   <span class="keywordflow">return</span> (fred.ss == 1) ? LSB_FIRST : MSB_FIRST ;</div><div class="line"><a name="l06329"></a><span class="lineno"> 6329</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a id="a2fa149a7af0a94b2718035809c3bf930"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2fa149a7af0a94b2718035809c3bf930">&#9670;&nbsp;</a></span>nifti_simple_init_nim()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d0/de7/structnifti__image.html">nifti_image</a>* nifti_simple_init_nim </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>basic initialization of a <a class="el" href="../../d0/de7/structnifti__image.html" title="High level data structure for open nifti datasets in the nifti1_io API. Note that this structure is n...">nifti_image</a> struct (to a 1x1x1 image) </p>
<div class="fragment"><div class="line"><a name="l05242"></a><span class="lineno"> 5242</span>&#160;{</div><div class="line"><a name="l05243"></a><span class="lineno"> 5243</span>&#160;  <a class="code" href="../../d0/de7/structnifti__image.html">nifti_image</a> *nim;</div><div class="line"><a name="l05244"></a><span class="lineno"> 5244</span>&#160;  <span class="keyword">struct </span><a class="code" href="../../dd/d75/structnifti__1__header.html">nifti_1_header</a> nhdr;</div><div class="line"><a name="l05245"></a><span class="lineno"> 5245</span>&#160;  <span class="keywordtype">int</span> nbyper, swapsize;</div><div class="line"><a name="l05246"></a><span class="lineno"> 5246</span>&#160;  </div><div class="line"><a name="l05247"></a><span class="lineno"> 5247</span>&#160;   memset(&amp;nhdr,0,<span class="keyword">sizeof</span>(nhdr)) ;  <span class="comment">/* zero out header, to be safe */</span></div><div class="line"><a name="l05248"></a><span class="lineno"> 5248</span>&#160;  </div><div class="line"><a name="l05249"></a><span class="lineno"> 5249</span>&#160;   nhdr.sizeof_hdr = <span class="keyword">sizeof</span>(nhdr) ;</div><div class="line"><a name="l05250"></a><span class="lineno"> 5250</span>&#160;   nhdr.regular    = <span class="charliteral">&#39;r&#39;</span> ;           <span class="comment">/* for some stupid reason */</span></div><div class="line"><a name="l05251"></a><span class="lineno"> 5251</span>&#160;</div><div class="line"><a name="l05252"></a><span class="lineno"> 5252</span>&#160;   nhdr.dim[0] = 3 ;</div><div class="line"><a name="l05253"></a><span class="lineno"> 5253</span>&#160;   nhdr.dim[1] = 1 ; nhdr.dim[2] = 1 ; nhdr.dim[3] = 1 ;</div><div class="line"><a name="l05254"></a><span class="lineno"> 5254</span>&#160;   nhdr.dim[4] = 0 ;</div><div class="line"><a name="l05255"></a><span class="lineno"> 5255</span>&#160;</div><div class="line"><a name="l05256"></a><span class="lineno"> 5256</span>&#160;   nhdr.pixdim[0] = 0.0 ;</div><div class="line"><a name="l05257"></a><span class="lineno"> 5257</span>&#160;   nhdr.pixdim[1] = 1.0 ; nhdr.pixdim[2] = 1.0 ;</div><div class="line"><a name="l05258"></a><span class="lineno"> 5258</span>&#160;   nhdr.pixdim[3] = 1.0 ;</div><div class="line"><a name="l05259"></a><span class="lineno"> 5259</span>&#160;</div><div class="line"><a name="l05260"></a><span class="lineno"> 5260</span>&#160;   nhdr.datatype = DT_FLOAT32 ;</div><div class="line"><a name="l05261"></a><span class="lineno"> 5261</span>&#160;   <a class="code" href="../../d1/d14/nifti1__io_8c.html#aeeccf4be6839946794c2cc1fdef26d4f">nifti_datatype_sizes</a>( nhdr.datatype , &amp;nbyper, &amp;swapsize );</div><div class="line"><a name="l05262"></a><span class="lineno"> 5262</span>&#160;   nhdr.bitpix   = 8 * nbyper ;</div><div class="line"><a name="l05263"></a><span class="lineno"> 5263</span>&#160;</div><div class="line"><a name="l05264"></a><span class="lineno"> 5264</span>&#160;   strcpy(nhdr.magic, <span class="stringliteral">&quot;n+1&quot;</span>);  <span class="comment">/* init to single file */</span></div><div class="line"><a name="l05265"></a><span class="lineno"> 5265</span>&#160;</div><div class="line"><a name="l05266"></a><span class="lineno"> 5266</span>&#160;   nim = <a class="code" href="../../d1/d14/nifti1__io_8c.html#aa7bd8fbb331c8d278506afb6f37fdbc2">nifti_convert_nhdr2nim</a>(nhdr,NULL);</div><div class="line"><a name="l05267"></a><span class="lineno"> 5267</span>&#160;   nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a1c7755060c9cca3612f1101684c9845f">fname</a> = NULL;</div><div class="line"><a name="l05268"></a><span class="lineno"> 5268</span>&#160;   nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#aa99806d70cacff119b5b6089c3dfdeda">iname</a> = NULL;</div><div class="line"><a name="l05269"></a><span class="lineno"> 5269</span>&#160;   <span class="keywordflow">return</span> nim;</div><div class="line"><a name="l05270"></a><span class="lineno"> 5270</span>&#160;}</div><div class="ttc" id="nifti1__io_8c_html_aeeccf4be6839946794c2cc1fdef26d4f"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#aeeccf4be6839946794c2cc1fdef26d4f">nifti_datatype_sizes</a></div><div class="ttdeci">void nifti_datatype_sizes(int datatype, int *nbyper, int *swapsize)</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:1413</div></div>
<div class="ttc" id="structnifti__image_html_aa99806d70cacff119b5b6089c3dfdeda"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#aa99806d70cacff119b5b6089c3dfdeda">nifti_image::iname</a></div><div class="ttdeci">char * iname</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:161</div></div>
<div class="ttc" id="structnifti__1__header_html"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html">nifti_1_header</a></div><div class="ttdoc">Data structure defining the fields in the nifti1 header. This binary header should be found at the be...</div><div class="ttdef"><b>Definition:</b> nifti1.h:144</div></div>
<div class="ttc" id="structnifti__image_html"><div class="ttname"><a href="../../d0/de7/structnifti__image.html">nifti_image</a></div><div class="ttdoc">High level data structure for open nifti datasets in the nifti1_io API. Note that this structure is n...</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:89</div></div>
<div class="ttc" id="nifti1__io_8c_html_aa7bd8fbb331c8d278506afb6f37fdbc2"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#aa7bd8fbb331c8d278506afb6f37fdbc2">nifti_convert_nhdr2nim</a></div><div class="ttdeci">nifti_image * nifti_convert_nhdr2nim(struct nifti_1_header nhdr, const char *fname)</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:3599</div></div>
<div class="ttc" id="structnifti__image_html_a1c7755060c9cca3612f1101684c9845f"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a1c7755060c9cca3612f1101684c9845f">nifti_image::fname</a></div><div class="ttdeci">char * fname</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:160</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a2e4ce3c3c610064c01eeeac244101159"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2e4ce3c3c610064c01eeeac244101159">&#9670;&nbsp;</a></span>nifti_slice_string()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* nifti_slice_string </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ss</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return a pointer to a string holding the name of a NIFTI slice_code.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ss</td><td>NIfTI-1 slice order code</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>pointer to static string describing code</dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>Do not free() or modify this string! It points to static storage.</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="../../d5/d19/group__NIFTI1__SLICE__ORDER.html" title="nifti1 slice order codes, describing the acquisition order of the slices ">NIFTI1_SLICE_ORDER</a> group in nifti1.h </dd></dl>
<div class="fragment"><div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;{</div><div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;   <span class="keywordflow">switch</span>( ss ){</div><div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;     <span class="keywordflow">case</span> NIFTI_SLICE_SEQ_INC:  <span class="keywordflow">return</span> <span class="stringliteral">&quot;sequential_increasing&quot;</span>    ;</div><div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;     <span class="keywordflow">case</span> NIFTI_SLICE_SEQ_DEC:  <span class="keywordflow">return</span> <span class="stringliteral">&quot;sequential_decreasing&quot;</span>    ;</div><div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;     <span class="keywordflow">case</span> NIFTI_SLICE_ALT_INC:  <span class="keywordflow">return</span> <span class="stringliteral">&quot;alternating_increasing&quot;</span>   ;</div><div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;     <span class="keywordflow">case</span> NIFTI_SLICE_ALT_DEC:  <span class="keywordflow">return</span> <span class="stringliteral">&quot;alternating_decreasing&quot;</span>   ;</div><div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;     <span class="keywordflow">case</span> NIFTI_SLICE_ALT_INC2: <span class="keywordflow">return</span> <span class="stringliteral">&quot;alternating_increasing_2&quot;</span> ;</div><div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;     <span class="keywordflow">case</span> NIFTI_SLICE_ALT_DEC2: <span class="keywordflow">return</span> <span class="stringliteral">&quot;alternating_decreasing_2&quot;</span> ;</div><div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;   }</div><div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;   <span class="keywordflow">return</span> <span class="stringliteral">&quot;Unknown&quot;</span> ;</div><div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a id="a98f42fe4268d9fff8a5b8c984f8731f1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a98f42fe4268d9fff8a5b8c984f8731f1">&#9670;&nbsp;</a></span>nifti_strdup()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* nifti_strdup </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>str</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>duplicate the given string (alloc length+1)</p>
<dl class="section return"><dt>Returns</dt><dd>allocated pointer (or NULL on failure) </dd></dl>
<div class="fragment"><div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;{</div><div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;  <span class="keywordtype">char</span> *dup;</div><div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;</div><div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;  <span class="keywordflow">if</span>( !str ) <span class="keywordflow">return</span> NULL;       <span class="comment">/* allow calls passing NULL */</span></div><div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;</div><div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;  dup = (<span class="keywordtype">char</span> *)malloc(strlen(str) + 1);</div><div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;</div><div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;  <span class="comment">/* check for failure */</span></div><div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;  <span class="keywordflow">if</span>( dup ) strcpy(dup, str);</div><div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;  <span class="keywordflow">else</span>      fprintf(stderr,<span class="stringliteral">&quot;** nifti_strdup: failed to alloc %u bytes\n&quot;</span>, </div><div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;                    (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>)strlen(str)+1);</div><div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;</div><div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;  <span class="keywordflow">return</span> dup;</div><div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a id="a5cf6e5dd1d6eb0b43a8df38e6c833fb5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5cf6e5dd1d6eb0b43a8df38e6c833fb5">&#9670;&nbsp;</a></span>nifti_swap_16bytes()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void nifti_swap_16bytes </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>n</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>ar</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>swap 16 bytes at a time from the given list of n sets of 16 bytes </p>
<div class="fragment"><div class="line"><a name="l02199"></a><span class="lineno"> 2199</span>&#160;{</div><div class="line"><a name="l02200"></a><span class="lineno"> 2200</span>&#160;   <span class="keyword">register</span> <span class="keywordtype">size_t</span> ii ;</div><div class="line"><a name="l02201"></a><span class="lineno"> 2201</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> * cp0 = (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)ar, * cp1, * cp2 ;</div><div class="line"><a name="l02202"></a><span class="lineno"> 2202</span>&#160;   <span class="keyword">register</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> tval ;</div><div class="line"><a name="l02203"></a><span class="lineno"> 2203</span>&#160;</div><div class="line"><a name="l02204"></a><span class="lineno"> 2204</span>&#160;   <span class="keywordflow">for</span>( ii=0 ; ii &lt; n ; ii++ ){</div><div class="line"><a name="l02205"></a><span class="lineno"> 2205</span>&#160;       cp1 = cp0;  cp2 = cp0+15;</div><div class="line"><a name="l02206"></a><span class="lineno"> 2206</span>&#160;       <span class="keywordflow">while</span> ( cp2 &gt; cp1 )</div><div class="line"><a name="l02207"></a><span class="lineno"> 2207</span>&#160;       {</div><div class="line"><a name="l02208"></a><span class="lineno"> 2208</span>&#160;           tval = *cp1 ; *cp1 = *cp2 ; *cp2 = tval ;</div><div class="line"><a name="l02209"></a><span class="lineno"> 2209</span>&#160;           cp1++; cp2--;</div><div class="line"><a name="l02210"></a><span class="lineno"> 2210</span>&#160;       }</div><div class="line"><a name="l02211"></a><span class="lineno"> 2211</span>&#160;       cp0 += 16;</div><div class="line"><a name="l02212"></a><span class="lineno"> 2212</span>&#160;   }</div><div class="line"><a name="l02213"></a><span class="lineno"> 2213</span>&#160;   return ;</div><div class="line"><a name="l02214"></a><span class="lineno"> 2214</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a id="a9c64a35264c605640a30af4eec6d99bc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9c64a35264c605640a30af4eec6d99bc">&#9670;&nbsp;</a></span>nifti_swap_2bytes()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void nifti_swap_2bytes </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>n</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>ar</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>swap each byte pair from the given list of n pairs</p>
<p>Due to alignment of structures at some architectures (e.g. on ARM), stick to char varaibles. Fixes <a href="http://bugs.debian.org/446893">http://bugs.debian.org/446893</a> Yaroslav <a href="#" onclick="location.href='mai'+'lto:'+'deb'+'ia'+'n@o'+'ne'+'rus'+'si'+'an.'+'co'+'m'; return false;">debia<span style="display: none;">.nosp@m.</span>n@on<span style="display: none;">.nosp@m.</span>eruss<span style="display: none;">.nosp@m.</span>ian.<span style="display: none;">.nosp@m.</span>com</a> </p>
<div class="fragment"><div class="line"><a name="l02140"></a><span class="lineno"> 2140</span>&#160;{</div><div class="line"><a name="l02141"></a><span class="lineno"> 2141</span>&#160;   <span class="keyword">register</span> <span class="keywordtype">size_t</span> ii ;</div><div class="line"><a name="l02142"></a><span class="lineno"> 2142</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> * cp1 = (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)ar, * cp2 ;</div><div class="line"><a name="l02143"></a><span class="lineno"> 2143</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>   tval;</div><div class="line"><a name="l02144"></a><span class="lineno"> 2144</span>&#160;</div><div class="line"><a name="l02145"></a><span class="lineno"> 2145</span>&#160;   <span class="keywordflow">for</span>( ii=0 ; ii &lt; n ; ii++ ){</div><div class="line"><a name="l02146"></a><span class="lineno"> 2146</span>&#160;       cp2 = cp1 + 1;</div><div class="line"><a name="l02147"></a><span class="lineno"> 2147</span>&#160;       tval = *cp1;  *cp1 = *cp2;  *cp2 = tval;</div><div class="line"><a name="l02148"></a><span class="lineno"> 2148</span>&#160;       cp1 += 2;</div><div class="line"><a name="l02149"></a><span class="lineno"> 2149</span>&#160;   }</div><div class="line"><a name="l02150"></a><span class="lineno"> 2150</span>&#160;   return ;</div><div class="line"><a name="l02151"></a><span class="lineno"> 2151</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a id="a53b22afe7c9c2520e831da6044823c39"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a53b22afe7c9c2520e831da6044823c39">&#9670;&nbsp;</a></span>nifti_swap_4bytes()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void nifti_swap_4bytes </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>n</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>ar</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>swap 4 bytes at a time from the given list of n sets of 4 bytes </p>
<div class="fragment"><div class="line"><a name="l02157"></a><span class="lineno"> 2157</span>&#160;{</div><div class="line"><a name="l02158"></a><span class="lineno"> 2158</span>&#160;   <span class="keyword">register</span> <span class="keywordtype">size_t</span> ii ;</div><div class="line"><a name="l02159"></a><span class="lineno"> 2159</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> * cp0 = (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)ar, * cp1, * cp2 ;</div><div class="line"><a name="l02160"></a><span class="lineno"> 2160</span>&#160;   <span class="keyword">register</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> tval ;</div><div class="line"><a name="l02161"></a><span class="lineno"> 2161</span>&#160;</div><div class="line"><a name="l02162"></a><span class="lineno"> 2162</span>&#160;   <span class="keywordflow">for</span>( ii=0 ; ii &lt; n ; ii++ ){</div><div class="line"><a name="l02163"></a><span class="lineno"> 2163</span>&#160;       cp1 = cp0; cp2 = cp0+3;</div><div class="line"><a name="l02164"></a><span class="lineno"> 2164</span>&#160;       tval = *cp1;  *cp1 = *cp2;  *cp2 = tval;</div><div class="line"><a name="l02165"></a><span class="lineno"> 2165</span>&#160;       cp1++;  cp2--;</div><div class="line"><a name="l02166"></a><span class="lineno"> 2166</span>&#160;       tval = *cp1;  *cp1 = *cp2;  *cp2 = tval;</div><div class="line"><a name="l02167"></a><span class="lineno"> 2167</span>&#160;       cp0 += 4;</div><div class="line"><a name="l02168"></a><span class="lineno"> 2168</span>&#160;   }</div><div class="line"><a name="l02169"></a><span class="lineno"> 2169</span>&#160;   return ;</div><div class="line"><a name="l02170"></a><span class="lineno"> 2170</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a id="a61af0e2662990502b18c2e6ecf1b0fee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a61af0e2662990502b18c2e6ecf1b0fee">&#9670;&nbsp;</a></span>nifti_swap_8bytes()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void nifti_swap_8bytes </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>n</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>ar</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>swap 8 bytes at a time from the given list of n sets of 8 bytes</p>
<p>perhaps use this style for the general Nbytes, as Yaroslav suggests </p>
<div class="fragment"><div class="line"><a name="l02178"></a><span class="lineno"> 2178</span>&#160;{</div><div class="line"><a name="l02179"></a><span class="lineno"> 2179</span>&#160;   <span class="keyword">register</span> <span class="keywordtype">size_t</span> ii ;</div><div class="line"><a name="l02180"></a><span class="lineno"> 2180</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> * cp0 = (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)ar, * cp1, * cp2 ;</div><div class="line"><a name="l02181"></a><span class="lineno"> 2181</span>&#160;   <span class="keyword">register</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> tval ;</div><div class="line"><a name="l02182"></a><span class="lineno"> 2182</span>&#160;</div><div class="line"><a name="l02183"></a><span class="lineno"> 2183</span>&#160;   <span class="keywordflow">for</span>( ii=0 ; ii &lt; n ; ii++ ){</div><div class="line"><a name="l02184"></a><span class="lineno"> 2184</span>&#160;       cp1 = cp0;  cp2 = cp0+7;</div><div class="line"><a name="l02185"></a><span class="lineno"> 2185</span>&#160;       <span class="keywordflow">while</span> ( cp2 &gt; cp1 )      <span class="comment">/* unroll? */</span></div><div class="line"><a name="l02186"></a><span class="lineno"> 2186</span>&#160;       {</div><div class="line"><a name="l02187"></a><span class="lineno"> 2187</span>&#160;           tval = *cp1 ; *cp1 = *cp2 ; *cp2 = tval ;</div><div class="line"><a name="l02188"></a><span class="lineno"> 2188</span>&#160;           cp1++; cp2--;</div><div class="line"><a name="l02189"></a><span class="lineno"> 2189</span>&#160;       }</div><div class="line"><a name="l02190"></a><span class="lineno"> 2190</span>&#160;       cp0 += 8;</div><div class="line"><a name="l02191"></a><span class="lineno"> 2191</span>&#160;   }</div><div class="line"><a name="l02192"></a><span class="lineno"> 2192</span>&#160;   return ;</div><div class="line"><a name="l02193"></a><span class="lineno"> 2193</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a id="a08ff63c999a17b9a7343a5918d73d414"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a08ff63c999a17b9a7343a5918d73d414">&#9670;&nbsp;</a></span>nifti_swap_as_analyze()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int nifti_swap_as_analyze </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d05/structnifti__analyze75.html">nifti_analyze75</a> *&#160;</td>
          <td class="paramname"><em>h</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Byte swap as an ANALYZE 7.5 header</p>
<p>return non-zero on failure </p>
<div class="fragment"><div class="line"><a name="l02328"></a><span class="lineno"> 2328</span>&#160;{</div><div class="line"><a name="l02329"></a><span class="lineno"> 2329</span>&#160;   <span class="keywordflow">if</span>( !h ) <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l02330"></a><span class="lineno"> 2330</span>&#160;</div><div class="line"><a name="l02331"></a><span class="lineno"> 2331</span>&#160;   <a class="code" href="../../d1/d14/nifti1__io_8c.html#a53b22afe7c9c2520e831da6044823c39">nifti_swap_4bytes</a>(1, &amp;h-&gt;sizeof_hdr);</div><div class="line"><a name="l02332"></a><span class="lineno"> 2332</span>&#160;   <a class="code" href="../../d1/d14/nifti1__io_8c.html#a53b22afe7c9c2520e831da6044823c39">nifti_swap_4bytes</a>(1, &amp;h-&gt;extents);</div><div class="line"><a name="l02333"></a><span class="lineno"> 2333</span>&#160;   <a class="code" href="../../d1/d14/nifti1__io_8c.html#a9c64a35264c605640a30af4eec6d99bc">nifti_swap_2bytes</a>(1, &amp;h-&gt;session_error);</div><div class="line"><a name="l02334"></a><span class="lineno"> 2334</span>&#160;</div><div class="line"><a name="l02335"></a><span class="lineno"> 2335</span>&#160;   <a class="code" href="../../d1/d14/nifti1__io_8c.html#a9c64a35264c605640a30af4eec6d99bc">nifti_swap_2bytes</a>(8, h-&gt;dim);</div><div class="line"><a name="l02336"></a><span class="lineno"> 2336</span>&#160;   <a class="code" href="../../d1/d14/nifti1__io_8c.html#a9c64a35264c605640a30af4eec6d99bc">nifti_swap_2bytes</a>(1, &amp;h-&gt;unused8);</div><div class="line"><a name="l02337"></a><span class="lineno"> 2337</span>&#160;   <a class="code" href="../../d1/d14/nifti1__io_8c.html#a9c64a35264c605640a30af4eec6d99bc">nifti_swap_2bytes</a>(1, &amp;h-&gt;unused9);</div><div class="line"><a name="l02338"></a><span class="lineno"> 2338</span>&#160;   <a class="code" href="../../d1/d14/nifti1__io_8c.html#a9c64a35264c605640a30af4eec6d99bc">nifti_swap_2bytes</a>(1, &amp;h-&gt;unused10);</div><div class="line"><a name="l02339"></a><span class="lineno"> 2339</span>&#160;   <a class="code" href="../../d1/d14/nifti1__io_8c.html#a9c64a35264c605640a30af4eec6d99bc">nifti_swap_2bytes</a>(1, &amp;h-&gt;unused11);</div><div class="line"><a name="l02340"></a><span class="lineno"> 2340</span>&#160;   <a class="code" href="../../d1/d14/nifti1__io_8c.html#a9c64a35264c605640a30af4eec6d99bc">nifti_swap_2bytes</a>(1, &amp;h-&gt;unused12);</div><div class="line"><a name="l02341"></a><span class="lineno"> 2341</span>&#160;   <a class="code" href="../../d1/d14/nifti1__io_8c.html#a9c64a35264c605640a30af4eec6d99bc">nifti_swap_2bytes</a>(1, &amp;h-&gt;unused13);</div><div class="line"><a name="l02342"></a><span class="lineno"> 2342</span>&#160;   <a class="code" href="../../d1/d14/nifti1__io_8c.html#a9c64a35264c605640a30af4eec6d99bc">nifti_swap_2bytes</a>(1, &amp;h-&gt;unused14);</div><div class="line"><a name="l02343"></a><span class="lineno"> 2343</span>&#160;</div><div class="line"><a name="l02344"></a><span class="lineno"> 2344</span>&#160;   <a class="code" href="../../d1/d14/nifti1__io_8c.html#a9c64a35264c605640a30af4eec6d99bc">nifti_swap_2bytes</a>(1, &amp;h-&gt;datatype);</div><div class="line"><a name="l02345"></a><span class="lineno"> 2345</span>&#160;   <a class="code" href="../../d1/d14/nifti1__io_8c.html#a9c64a35264c605640a30af4eec6d99bc">nifti_swap_2bytes</a>(1, &amp;h-&gt;bitpix);</div><div class="line"><a name="l02346"></a><span class="lineno"> 2346</span>&#160;   <a class="code" href="../../d1/d14/nifti1__io_8c.html#a9c64a35264c605640a30af4eec6d99bc">nifti_swap_2bytes</a>(1, &amp;h-&gt;dim_un0);</div><div class="line"><a name="l02347"></a><span class="lineno"> 2347</span>&#160;</div><div class="line"><a name="l02348"></a><span class="lineno"> 2348</span>&#160;   <a class="code" href="../../d1/d14/nifti1__io_8c.html#a53b22afe7c9c2520e831da6044823c39">nifti_swap_4bytes</a>(8, h-&gt;pixdim);</div><div class="line"><a name="l02349"></a><span class="lineno"> 2349</span>&#160;</div><div class="line"><a name="l02350"></a><span class="lineno"> 2350</span>&#160;   <a class="code" href="../../d1/d14/nifti1__io_8c.html#a53b22afe7c9c2520e831da6044823c39">nifti_swap_4bytes</a>(1, &amp;h-&gt;vox_offset);</div><div class="line"><a name="l02351"></a><span class="lineno"> 2351</span>&#160;   <a class="code" href="../../d1/d14/nifti1__io_8c.html#a53b22afe7c9c2520e831da6044823c39">nifti_swap_4bytes</a>(1, &amp;h-&gt;funused1);</div><div class="line"><a name="l02352"></a><span class="lineno"> 2352</span>&#160;   <a class="code" href="../../d1/d14/nifti1__io_8c.html#a53b22afe7c9c2520e831da6044823c39">nifti_swap_4bytes</a>(1, &amp;h-&gt;funused2);</div><div class="line"><a name="l02353"></a><span class="lineno"> 2353</span>&#160;   <a class="code" href="../../d1/d14/nifti1__io_8c.html#a53b22afe7c9c2520e831da6044823c39">nifti_swap_4bytes</a>(1, &amp;h-&gt;funused3);</div><div class="line"><a name="l02354"></a><span class="lineno"> 2354</span>&#160;</div><div class="line"><a name="l02355"></a><span class="lineno"> 2355</span>&#160;   <a class="code" href="../../d1/d14/nifti1__io_8c.html#a53b22afe7c9c2520e831da6044823c39">nifti_swap_4bytes</a>(1, &amp;h-&gt;cal_max);</div><div class="line"><a name="l02356"></a><span class="lineno"> 2356</span>&#160;   <a class="code" href="../../d1/d14/nifti1__io_8c.html#a53b22afe7c9c2520e831da6044823c39">nifti_swap_4bytes</a>(1, &amp;h-&gt;cal_min);</div><div class="line"><a name="l02357"></a><span class="lineno"> 2357</span>&#160;   <a class="code" href="../../d1/d14/nifti1__io_8c.html#a53b22afe7c9c2520e831da6044823c39">nifti_swap_4bytes</a>(1, &amp;h-&gt;compressed);</div><div class="line"><a name="l02358"></a><span class="lineno"> 2358</span>&#160;   <a class="code" href="../../d1/d14/nifti1__io_8c.html#a53b22afe7c9c2520e831da6044823c39">nifti_swap_4bytes</a>(1, &amp;h-&gt;verified);</div><div class="line"><a name="l02359"></a><span class="lineno"> 2359</span>&#160;</div><div class="line"><a name="l02360"></a><span class="lineno"> 2360</span>&#160;   <a class="code" href="../../d1/d14/nifti1__io_8c.html#a53b22afe7c9c2520e831da6044823c39">nifti_swap_4bytes</a>(1, &amp;h-&gt;glmax);</div><div class="line"><a name="l02361"></a><span class="lineno"> 2361</span>&#160;   <a class="code" href="../../d1/d14/nifti1__io_8c.html#a53b22afe7c9c2520e831da6044823c39">nifti_swap_4bytes</a>(1, &amp;h-&gt;glmin);</div><div class="line"><a name="l02362"></a><span class="lineno"> 2362</span>&#160;</div><div class="line"><a name="l02363"></a><span class="lineno"> 2363</span>&#160;   <a class="code" href="../../d1/d14/nifti1__io_8c.html#a53b22afe7c9c2520e831da6044823c39">nifti_swap_4bytes</a>(1, &amp;h-&gt;views);</div><div class="line"><a name="l02364"></a><span class="lineno"> 2364</span>&#160;   <a class="code" href="../../d1/d14/nifti1__io_8c.html#a53b22afe7c9c2520e831da6044823c39">nifti_swap_4bytes</a>(1, &amp;h-&gt;vols_added);</div><div class="line"><a name="l02365"></a><span class="lineno"> 2365</span>&#160;   <a class="code" href="../../d1/d14/nifti1__io_8c.html#a53b22afe7c9c2520e831da6044823c39">nifti_swap_4bytes</a>(1, &amp;h-&gt;start_field);</div><div class="line"><a name="l02366"></a><span class="lineno"> 2366</span>&#160;   <a class="code" href="../../d1/d14/nifti1__io_8c.html#a53b22afe7c9c2520e831da6044823c39">nifti_swap_4bytes</a>(1, &amp;h-&gt;field_skip);</div><div class="line"><a name="l02367"></a><span class="lineno"> 2367</span>&#160;</div><div class="line"><a name="l02368"></a><span class="lineno"> 2368</span>&#160;   <a class="code" href="../../d1/d14/nifti1__io_8c.html#a53b22afe7c9c2520e831da6044823c39">nifti_swap_4bytes</a>(1, &amp;h-&gt;omax);</div><div class="line"><a name="l02369"></a><span class="lineno"> 2369</span>&#160;   <a class="code" href="../../d1/d14/nifti1__io_8c.html#a53b22afe7c9c2520e831da6044823c39">nifti_swap_4bytes</a>(1, &amp;h-&gt;omin);</div><div class="line"><a name="l02370"></a><span class="lineno"> 2370</span>&#160;   <a class="code" href="../../d1/d14/nifti1__io_8c.html#a53b22afe7c9c2520e831da6044823c39">nifti_swap_4bytes</a>(1, &amp;h-&gt;smax);</div><div class="line"><a name="l02371"></a><span class="lineno"> 2371</span>&#160;   <a class="code" href="../../d1/d14/nifti1__io_8c.html#a53b22afe7c9c2520e831da6044823c39">nifti_swap_4bytes</a>(1, &amp;h-&gt;smin);</div><div class="line"><a name="l02372"></a><span class="lineno"> 2372</span>&#160;</div><div class="line"><a name="l02373"></a><span class="lineno"> 2373</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02374"></a><span class="lineno"> 2374</span>&#160;}</div><div class="ttc" id="nifti1__io_8c_html_a53b22afe7c9c2520e831da6044823c39"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#a53b22afe7c9c2520e831da6044823c39">nifti_swap_4bytes</a></div><div class="ttdeci">void nifti_swap_4bytes(size_t n, void *ar)</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:2156</div></div>
<div class="ttc" id="nifti1__io_8c_html_a9c64a35264c605640a30af4eec6d99bc"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#a9c64a35264c605640a30af4eec6d99bc">nifti_swap_2bytes</a></div><div class="ttdeci">void nifti_swap_2bytes(size_t n, void *ar)</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:2139</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa7d743976d0ffdf6e320a71a8a32d006"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa7d743976d0ffdf6e320a71a8a32d006">&#9670;&nbsp;</a></span>nifti_swap_Nbytes()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void nifti_swap_Nbytes </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>n</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>siz</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>ar</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>based on siz, call the appropriate <a class="el" href="../../d1/d14/nifti1__io_8c.html#aa7d743976d0ffdf6e320a71a8a32d006">nifti_swap_Nbytes()</a> function </p>
<div class="fragment"><div class="line"><a name="l02246"></a><span class="lineno"> 2246</span>&#160;{</div><div class="line"><a name="l02247"></a><span class="lineno"> 2247</span>&#160;   <span class="keywordflow">switch</span>( siz ){</div><div class="line"><a name="l02248"></a><span class="lineno"> 2248</span>&#160;     <span class="keywordflow">case</span> 2:  <a class="code" href="../../d1/d14/nifti1__io_8c.html#a9c64a35264c605640a30af4eec6d99bc">nifti_swap_2bytes</a> ( n , ar ) ; break ;</div><div class="line"><a name="l02249"></a><span class="lineno"> 2249</span>&#160;     <span class="keywordflow">case</span> 4:  <a class="code" href="../../d1/d14/nifti1__io_8c.html#a53b22afe7c9c2520e831da6044823c39">nifti_swap_4bytes</a> ( n , ar ) ; break ;</div><div class="line"><a name="l02250"></a><span class="lineno"> 2250</span>&#160;     <span class="keywordflow">case</span> 8:  <a class="code" href="../../d1/d14/nifti1__io_8c.html#a61af0e2662990502b18c2e6ecf1b0fee">nifti_swap_8bytes</a> ( n , ar ) ; break ;</div><div class="line"><a name="l02251"></a><span class="lineno"> 2251</span>&#160;     <span class="keywordflow">case</span> 16: <a class="code" href="../../d1/d14/nifti1__io_8c.html#a5cf6e5dd1d6eb0b43a8df38e6c833fb5">nifti_swap_16bytes</a>( n , ar ) ; break ;</div><div class="line"><a name="l02252"></a><span class="lineno"> 2252</span>&#160;     <span class="keywordflow">default</span>:    <span class="comment">/* nifti_swap_bytes  ( n , siz, ar ) ; */</span></div><div class="line"><a name="l02253"></a><span class="lineno"> 2253</span>&#160;        fprintf(stderr,<span class="stringliteral">&quot;** NIfTI: cannot swap in %d byte blocks\n&quot;</span>, siz);</div><div class="line"><a name="l02254"></a><span class="lineno"> 2254</span>&#160;        break ;</div><div class="line"><a name="l02255"></a><span class="lineno"> 2255</span>&#160;   }</div><div class="line"><a name="l02256"></a><span class="lineno"> 2256</span>&#160;   return ;</div><div class="line"><a name="l02257"></a><span class="lineno"> 2257</span>&#160;}</div><div class="ttc" id="nifti1__io_8c_html_a5cf6e5dd1d6eb0b43a8df38e6c833fb5"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#a5cf6e5dd1d6eb0b43a8df38e6c833fb5">nifti_swap_16bytes</a></div><div class="ttdeci">void nifti_swap_16bytes(size_t n, void *ar)</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:2198</div></div>
<div class="ttc" id="nifti1__io_8c_html_a53b22afe7c9c2520e831da6044823c39"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#a53b22afe7c9c2520e831da6044823c39">nifti_swap_4bytes</a></div><div class="ttdeci">void nifti_swap_4bytes(size_t n, void *ar)</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:2156</div></div>
<div class="ttc" id="nifti1__io_8c_html_a9c64a35264c605640a30af4eec6d99bc"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#a9c64a35264c605640a30af4eec6d99bc">nifti_swap_2bytes</a></div><div class="ttdeci">void nifti_swap_2bytes(size_t n, void *ar)</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:2139</div></div>
<div class="ttc" id="nifti1__io_8c_html_a61af0e2662990502b18c2e6ecf1b0fee"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#a61af0e2662990502b18c2e6ecf1b0fee">nifti_swap_8bytes</a></div><div class="ttdeci">void nifti_swap_8bytes(size_t n, void *ar)</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:2177</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af31bef0754f87cbc281f3db357314e0c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af31bef0754f87cbc281f3db357314e0c">&#9670;&nbsp;</a></span>nifti_test_datatype_sizes()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int nifti_test_datatype_sizes </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>verb</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Only as a test, verify that the new nifti_type_list table matches the the usage of nifti_datatype_sizes (which could be changed to use the table, if there were interest).</p>
<p>return the number of errors (so 0 is success, as usual) </p>
<div class="fragment"><div class="line"><a name="l07445"></a><span class="lineno"> 7445</span>&#160;{</div><div class="line"><a name="l07446"></a><span class="lineno"> 7446</span>&#160;    <span class="keywordtype">int</span> tablen = <span class="keyword">sizeof</span>(<a class="code" href="../../d1/d14/nifti1__io_8c.html#add56f2785b8987898a86fab47fdbe21b">nifti_type_list</a>)/<span class="keyword">sizeof</span>(nifti_type_ele);</div><div class="line"><a name="l07447"></a><span class="lineno"> 7447</span>&#160;    <span class="keywordtype">int</span> nbyper, ssize;</div><div class="line"><a name="l07448"></a><span class="lineno"> 7448</span>&#160;    <span class="keywordtype">int</span> c, errs = 0;</div><div class="line"><a name="l07449"></a><span class="lineno"> 7449</span>&#160;</div><div class="line"><a name="l07450"></a><span class="lineno"> 7450</span>&#160;    <span class="keywordflow">for</span>( c = 0; c &lt; tablen; c++ )</div><div class="line"><a name="l07451"></a><span class="lineno"> 7451</span>&#160;    {</div><div class="line"><a name="l07452"></a><span class="lineno"> 7452</span>&#160;        nbyper = ssize = -1;</div><div class="line"><a name="l07453"></a><span class="lineno"> 7453</span>&#160;        <a class="code" href="../../d1/d14/nifti1__io_8c.html#aeeccf4be6839946794c2cc1fdef26d4f">nifti_datatype_sizes</a>(<a class="code" href="../../d1/d14/nifti1__io_8c.html#add56f2785b8987898a86fab47fdbe21b">nifti_type_list</a>[c].type, &amp;nbyper, &amp;ssize);</div><div class="line"><a name="l07454"></a><span class="lineno"> 7454</span>&#160;        <span class="keywordflow">if</span>( nbyper &lt; 0 || ssize &lt; 0 ||</div><div class="line"><a name="l07455"></a><span class="lineno"> 7455</span>&#160;                nbyper != <a class="code" href="../../d1/d14/nifti1__io_8c.html#add56f2785b8987898a86fab47fdbe21b">nifti_type_list</a>[c].nbyper ||</div><div class="line"><a name="l07456"></a><span class="lineno"> 7456</span>&#160;                ssize != <a class="code" href="../../d1/d14/nifti1__io_8c.html#add56f2785b8987898a86fab47fdbe21b">nifti_type_list</a>[c].swapsize )</div><div class="line"><a name="l07457"></a><span class="lineno"> 7457</span>&#160;        {</div><div class="line"><a name="l07458"></a><span class="lineno"> 7458</span>&#160;            <span class="keywordflow">if</span>( verb || <a class="code" href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a>.debug &gt; 2 )</div><div class="line"><a name="l07459"></a><span class="lineno"> 7459</span>&#160;                fprintf(stderr, <span class="stringliteral">&quot;** type mismatch: %s, %d, %d, %d : %d, %d\n&quot;</span>,</div><div class="line"><a name="l07460"></a><span class="lineno"> 7460</span>&#160;                    <a class="code" href="../../d1/d14/nifti1__io_8c.html#add56f2785b8987898a86fab47fdbe21b">nifti_type_list</a>[c].name, <a class="code" href="../../d1/d14/nifti1__io_8c.html#add56f2785b8987898a86fab47fdbe21b">nifti_type_list</a>[c].type,</div><div class="line"><a name="l07461"></a><span class="lineno"> 7461</span>&#160;                    <a class="code" href="../../d1/d14/nifti1__io_8c.html#add56f2785b8987898a86fab47fdbe21b">nifti_type_list</a>[c].nbyper, <a class="code" href="../../d1/d14/nifti1__io_8c.html#add56f2785b8987898a86fab47fdbe21b">nifti_type_list</a>[c].swapsize,</div><div class="line"><a name="l07462"></a><span class="lineno"> 7462</span>&#160;                    nbyper, ssize);</div><div class="line"><a name="l07463"></a><span class="lineno"> 7463</span>&#160;            errs++;</div><div class="line"><a name="l07464"></a><span class="lineno"> 7464</span>&#160;        }</div><div class="line"><a name="l07465"></a><span class="lineno"> 7465</span>&#160;    }</div><div class="line"><a name="l07466"></a><span class="lineno"> 7466</span>&#160;</div><div class="line"><a name="l07467"></a><span class="lineno"> 7467</span>&#160;    <span class="keywordflow">if</span>( errs )</div><div class="line"><a name="l07468"></a><span class="lineno"> 7468</span>&#160;        fprintf(stderr,<span class="stringliteral">&quot;** nifti_test_datatype_sizes: found %d errors\n&quot;</span>,errs);</div><div class="line"><a name="l07469"></a><span class="lineno"> 7469</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span>( verb || <a class="code" href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a>.debug &gt; 1 )</div><div class="line"><a name="l07470"></a><span class="lineno"> 7470</span>&#160;        fprintf(stderr,<span class="stringliteral">&quot;-- nifti_test_datatype_sizes: all OK\n&quot;</span>);</div><div class="line"><a name="l07471"></a><span class="lineno"> 7471</span>&#160;</div><div class="line"><a name="l07472"></a><span class="lineno"> 7472</span>&#160;    <span class="keywordflow">return</span> errs;</div><div class="line"><a name="l07473"></a><span class="lineno"> 7473</span>&#160;}</div><div class="ttc" id="nifti1__io_8c_html_aeeccf4be6839946794c2cc1fdef26d4f"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#aeeccf4be6839946794c2cc1fdef26d4f">nifti_datatype_sizes</a></div><div class="ttdeci">void nifti_datatype_sizes(int datatype, int *nbyper, int *swapsize)</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:1413</div></div>
<div class="ttc" id="nifti1__io_8c_html_add56f2785b8987898a86fab47fdbe21b"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#add56f2785b8987898a86fab47fdbe21b">nifti_type_list</a></div><div class="ttdeci">static nifti_type_ele nifti_type_list[]</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:351</div></div>
<div class="ttc" id="nifti1__io_8c_html_a6e047e1dc2f826a4adff048bee8f5df7"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a></div><div class="ttdeci">static nifti_global_options g_opts</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:344</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a46c9636636122200ee108fb179dc23de"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a46c9636636122200ee108fb179dc23de">&#9670;&nbsp;</a></span>nifti_type_and_names_match()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int nifti_type_and_names_match </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d0/de7/structnifti__image.html">nifti_image</a> *&#160;</td>
          <td class="paramname"><em>nim</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>show_warn</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>check whether nifti_type matches fname and iname for the <a class="el" href="../../d0/de7/structnifti__image.html" title="High level data structure for open nifti datasets in the nifti1_io API. Note that this structure is n...">nifti_image</a></p>
<ul>
<li>if type 0 or 2, expect .hdr/.img pair</li>
<li>if type 1, expect .nii (and names must match)</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">nim</td><td>given <a class="el" href="../../d0/de7/structnifti__image.html" title="High level data structure for open nifti datasets in the nifti1_io API. Note that this structure is n...">nifti_image</a> </td></tr>
    <tr><td class="paramname">show_warn</td><td>if set, print a warning message for any mis-match</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>1 if the values seem to match</li>
<li>0 if there is a mis-match</li>
<li>-1 if there is not sufficient information to create file(s)</li>
</ul>
</dd></dl>
<dl class="section see"><dt>See also</dt><dd>NIFTI_FTYPE_* codes in nifti1_io.h </dd>
<dd>
<a class="el" href="../../d1/d14/nifti1__io_8c.html#a5cb621a9f499db8c3f9de3c73628cc76">nifti_set_type_from_names</a>, <a class="el" href="../../d1/d14/nifti1__io_8c.html#a5c42d2b1cf63b30950078ec5562e1f58">is_valid_nifti_type</a> </dd></dl>
<div class="fragment"><div class="line"><a name="l03107"></a><span class="lineno"> 3107</span>&#160;{</div><div class="line"><a name="l03108"></a><span class="lineno"> 3108</span>&#160;   <span class="keywordtype">char</span> func[] = <span class="stringliteral">&quot;nifti_type_and_names_match&quot;</span>;</div><div class="line"><a name="l03109"></a><span class="lineno"> 3109</span>&#160;   <span class="keywordtype">char</span> * ext_h, * ext_i;  <span class="comment">/* header and image filename extensions */</span></div><div class="line"><a name="l03110"></a><span class="lineno"> 3110</span>&#160;   <span class="keywordtype">int</span>  errs = 0;          <span class="comment">/* error counter */</span></div><div class="line"><a name="l03111"></a><span class="lineno"> 3111</span>&#160;</div><div class="line"><a name="l03112"></a><span class="lineno"> 3112</span>&#160;   <span class="comment">/* sanity checks */</span></div><div class="line"><a name="l03113"></a><span class="lineno"> 3113</span>&#160;   <span class="keywordflow">if</span>( !nim ){</div><div class="line"><a name="l03114"></a><span class="lineno"> 3114</span>&#160;      <span class="keywordflow">if</span>( show_warn ) fprintf(stderr,<span class="stringliteral">&quot;** %s: missing nifti_image\n&quot;</span>, func);</div><div class="line"><a name="l03115"></a><span class="lineno"> 3115</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l03116"></a><span class="lineno"> 3116</span>&#160;   }</div><div class="line"><a name="l03117"></a><span class="lineno"> 3117</span>&#160;   <span class="keywordflow">if</span>( !nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a1c7755060c9cca3612f1101684c9845f">fname</a> ){</div><div class="line"><a name="l03118"></a><span class="lineno"> 3118</span>&#160;      <span class="keywordflow">if</span>( show_warn ) fprintf(stderr,<span class="stringliteral">&quot;** %s: missing header filename\n&quot;</span>, func);</div><div class="line"><a name="l03119"></a><span class="lineno"> 3119</span>&#160;      errs++;</div><div class="line"><a name="l03120"></a><span class="lineno"> 3120</span>&#160;   }</div><div class="line"><a name="l03121"></a><span class="lineno"> 3121</span>&#160;   <span class="keywordflow">if</span>( !nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#aa99806d70cacff119b5b6089c3dfdeda">iname</a> ){</div><div class="line"><a name="l03122"></a><span class="lineno"> 3122</span>&#160;      <span class="keywordflow">if</span>( show_warn ) fprintf(stderr,<span class="stringliteral">&quot;** %s: missing image filename\n&quot;</span>, func);</div><div class="line"><a name="l03123"></a><span class="lineno"> 3123</span>&#160;      errs++;</div><div class="line"><a name="l03124"></a><span class="lineno"> 3124</span>&#160;   }</div><div class="line"><a name="l03125"></a><span class="lineno"> 3125</span>&#160;   <span class="keywordflow">if</span>( !<a class="code" href="../../d1/d14/nifti1__io_8c.html#a5c42d2b1cf63b30950078ec5562e1f58">is_valid_nifti_type</a>(nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ac55996e58670948b220bebbf5d4bb0f4">nifti_type</a>) ){</div><div class="line"><a name="l03126"></a><span class="lineno"> 3126</span>&#160;      <span class="keywordflow">if</span>( show_warn )</div><div class="line"><a name="l03127"></a><span class="lineno"> 3127</span>&#160;         fprintf(stderr,<span class="stringliteral">&quot;** %s: bad nifti_type %d\n&quot;</span>, func, nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ac55996e58670948b220bebbf5d4bb0f4">nifti_type</a>);</div><div class="line"><a name="l03128"></a><span class="lineno"> 3128</span>&#160;      errs++;</div><div class="line"><a name="l03129"></a><span class="lineno"> 3129</span>&#160;   }</div><div class="line"><a name="l03130"></a><span class="lineno"> 3130</span>&#160;</div><div class="line"><a name="l03131"></a><span class="lineno"> 3131</span>&#160;   <span class="keywordflow">if</span>( errs ) <span class="keywordflow">return</span> -1;   <span class="comment">/* then do not proceed */</span></div><div class="line"><a name="l03132"></a><span class="lineno"> 3132</span>&#160;</div><div class="line"><a name="l03133"></a><span class="lineno"> 3133</span>&#160;   <span class="comment">/* get pointers to extensions */</span></div><div class="line"><a name="l03134"></a><span class="lineno"> 3134</span>&#160;   ext_h = <a class="code" href="../../d1/d14/nifti1__io_8c.html#a338a5f9b74c37ee28ca8683324434a05">nifti_find_file_extension</a>( nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a1c7755060c9cca3612f1101684c9845f">fname</a> );</div><div class="line"><a name="l03135"></a><span class="lineno"> 3135</span>&#160;   ext_i = <a class="code" href="../../d1/d14/nifti1__io_8c.html#a338a5f9b74c37ee28ca8683324434a05">nifti_find_file_extension</a>( nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#aa99806d70cacff119b5b6089c3dfdeda">iname</a> );</div><div class="line"><a name="l03136"></a><span class="lineno"> 3136</span>&#160;</div><div class="line"><a name="l03137"></a><span class="lineno"> 3137</span>&#160;   <span class="comment">/* check for filename extensions */</span></div><div class="line"><a name="l03138"></a><span class="lineno"> 3138</span>&#160;   <span class="keywordflow">if</span>( !ext_h ){</div><div class="line"><a name="l03139"></a><span class="lineno"> 3139</span>&#160;      <span class="keywordflow">if</span>( show_warn )</div><div class="line"><a name="l03140"></a><span class="lineno"> 3140</span>&#160;         fprintf(stderr,<span class="stringliteral">&quot;-d missing NIFTI extension in header filename, %s\n&quot;</span>,</div><div class="line"><a name="l03141"></a><span class="lineno"> 3141</span>&#160;                 nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a1c7755060c9cca3612f1101684c9845f">fname</a>);</div><div class="line"><a name="l03142"></a><span class="lineno"> 3142</span>&#160;      errs++;</div><div class="line"><a name="l03143"></a><span class="lineno"> 3143</span>&#160;   }</div><div class="line"><a name="l03144"></a><span class="lineno"> 3144</span>&#160;   <span class="keywordflow">if</span>( !ext_i ){</div><div class="line"><a name="l03145"></a><span class="lineno"> 3145</span>&#160;      <span class="keywordflow">if</span>( show_warn )</div><div class="line"><a name="l03146"></a><span class="lineno"> 3146</span>&#160;         fprintf(stderr,<span class="stringliteral">&quot;-d missing NIFTI extension in image filename, %s\n&quot;</span>,</div><div class="line"><a name="l03147"></a><span class="lineno"> 3147</span>&#160;                 nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#aa99806d70cacff119b5b6089c3dfdeda">iname</a>);</div><div class="line"><a name="l03148"></a><span class="lineno"> 3148</span>&#160;      errs++;</div><div class="line"><a name="l03149"></a><span class="lineno"> 3149</span>&#160;   }</div><div class="line"><a name="l03150"></a><span class="lineno"> 3150</span>&#160;</div><div class="line"><a name="l03151"></a><span class="lineno"> 3151</span>&#160;   <span class="keywordflow">if</span>( errs ) <span class="keywordflow">return</span> 0;   <span class="comment">/* do not proceed, but this is just a mis-match */</span></div><div class="line"><a name="l03152"></a><span class="lineno"> 3152</span>&#160;</div><div class="line"><a name="l03153"></a><span class="lineno"> 3153</span>&#160;   <span class="comment">/* general tests */</span></div><div class="line"><a name="l03154"></a><span class="lineno"> 3154</span>&#160;   <span class="keywordflow">if</span>( nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ac55996e58670948b220bebbf5d4bb0f4">nifti_type</a> == NIFTI_FTYPE_NIFTI1_1 ){  <span class="comment">/* .nii */</span></div><div class="line"><a name="l03155"></a><span class="lineno"> 3155</span>&#160;      <span class="keywordflow">if</span>( fileext_n_compare(ext_h,<span class="stringliteral">&quot;.nii&quot;</span>,4) ) {</div><div class="line"><a name="l03156"></a><span class="lineno"> 3156</span>&#160;         <span class="keywordflow">if</span>( show_warn )</div><div class="line"><a name="l03157"></a><span class="lineno"> 3157</span>&#160;            fprintf(stderr,</div><div class="line"><a name="l03158"></a><span class="lineno"> 3158</span>&#160;            <span class="stringliteral">&quot;-d NIFTI_FTYPE 1, but no .nii extension in header filename, %s\n&quot;</span>,</div><div class="line"><a name="l03159"></a><span class="lineno"> 3159</span>&#160;            nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a1c7755060c9cca3612f1101684c9845f">fname</a>);</div><div class="line"><a name="l03160"></a><span class="lineno"> 3160</span>&#160;         errs++;</div><div class="line"><a name="l03161"></a><span class="lineno"> 3161</span>&#160;      }</div><div class="line"><a name="l03162"></a><span class="lineno"> 3162</span>&#160;      <span class="keywordflow">if</span>( fileext_n_compare(ext_i,<span class="stringliteral">&quot;.nii&quot;</span>,4) ) {</div><div class="line"><a name="l03163"></a><span class="lineno"> 3163</span>&#160;         <span class="keywordflow">if</span>( show_warn )</div><div class="line"><a name="l03164"></a><span class="lineno"> 3164</span>&#160;            fprintf(stderr,</div><div class="line"><a name="l03165"></a><span class="lineno"> 3165</span>&#160;            <span class="stringliteral">&quot;-d NIFTI_FTYPE 1, but no .nii extension in image filename, %s\n&quot;</span>,</div><div class="line"><a name="l03166"></a><span class="lineno"> 3166</span>&#160;            nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#aa99806d70cacff119b5b6089c3dfdeda">iname</a>);</div><div class="line"><a name="l03167"></a><span class="lineno"> 3167</span>&#160;         errs++;</div><div class="line"><a name="l03168"></a><span class="lineno"> 3168</span>&#160;      }</div><div class="line"><a name="l03169"></a><span class="lineno"> 3169</span>&#160;      <span class="keywordflow">if</span>( strcmp(nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a1c7755060c9cca3612f1101684c9845f">fname</a>, nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#aa99806d70cacff119b5b6089c3dfdeda">iname</a>) != 0 ){</div><div class="line"><a name="l03170"></a><span class="lineno"> 3170</span>&#160;         <span class="keywordflow">if</span>( show_warn )</div><div class="line"><a name="l03171"></a><span class="lineno"> 3171</span>&#160;            fprintf(stderr,</div><div class="line"><a name="l03172"></a><span class="lineno"> 3172</span>&#160;            <span class="stringliteral">&quot;-d NIFTI_FTYPE 1, but header and image filenames differ: %s, %s\n&quot;</span>,</div><div class="line"><a name="l03173"></a><span class="lineno"> 3173</span>&#160;            nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a1c7755060c9cca3612f1101684c9845f">fname</a>, nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#aa99806d70cacff119b5b6089c3dfdeda">iname</a>);</div><div class="line"><a name="l03174"></a><span class="lineno"> 3174</span>&#160;         errs++;</div><div class="line"><a name="l03175"></a><span class="lineno"> 3175</span>&#160;      }</div><div class="line"><a name="l03176"></a><span class="lineno"> 3176</span>&#160;   }</div><div class="line"><a name="l03177"></a><span class="lineno"> 3177</span>&#160;   <span class="keywordflow">else</span> <span class="keywordflow">if</span>( (nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ac55996e58670948b220bebbf5d4bb0f4">nifti_type</a> == NIFTI_FTYPE_NIFTI1_2) || <span class="comment">/* .hdr/.img */</span></div><div class="line"><a name="l03178"></a><span class="lineno"> 3178</span>&#160;            (nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ac55996e58670948b220bebbf5d4bb0f4">nifti_type</a> == NIFTI_FTYPE_ANALYZE) )</div><div class="line"><a name="l03179"></a><span class="lineno"> 3179</span>&#160;   {</div><div class="line"><a name="l03180"></a><span class="lineno"> 3180</span>&#160;      <span class="keywordflow">if</span>( fileext_n_compare(ext_h,<span class="stringliteral">&quot;.hdr&quot;</span>,4) != 0 ){</div><div class="line"><a name="l03181"></a><span class="lineno"> 3181</span>&#160;         <span class="keywordflow">if</span>( show_warn )</div><div class="line"><a name="l03182"></a><span class="lineno"> 3182</span>&#160;            fprintf(stderr,<span class="stringliteral">&quot;-d no &#39;.hdr&#39; extension, but NIFTI type is %d, %s\n&quot;</span>,</div><div class="line"><a name="l03183"></a><span class="lineno"> 3183</span>&#160;                    nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ac55996e58670948b220bebbf5d4bb0f4">nifti_type</a>, nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a1c7755060c9cca3612f1101684c9845f">fname</a>);</div><div class="line"><a name="l03184"></a><span class="lineno"> 3184</span>&#160;         errs++;</div><div class="line"><a name="l03185"></a><span class="lineno"> 3185</span>&#160;      }</div><div class="line"><a name="l03186"></a><span class="lineno"> 3186</span>&#160;      <span class="keywordflow">if</span>( fileext_n_compare(ext_i,<span class="stringliteral">&quot;.img&quot;</span>,4) != 0 ){</div><div class="line"><a name="l03187"></a><span class="lineno"> 3187</span>&#160;         <span class="keywordflow">if</span>( show_warn )</div><div class="line"><a name="l03188"></a><span class="lineno"> 3188</span>&#160;            fprintf(stderr,<span class="stringliteral">&quot;-d no &#39;.img&#39; extension, but NIFTI type is %d, %s\n&quot;</span>,</div><div class="line"><a name="l03189"></a><span class="lineno"> 3189</span>&#160;                    nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ac55996e58670948b220bebbf5d4bb0f4">nifti_type</a>, nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#aa99806d70cacff119b5b6089c3dfdeda">iname</a>);</div><div class="line"><a name="l03190"></a><span class="lineno"> 3190</span>&#160;         errs++;</div><div class="line"><a name="l03191"></a><span class="lineno"> 3191</span>&#160;      }</div><div class="line"><a name="l03192"></a><span class="lineno"> 3192</span>&#160;   }</div><div class="line"><a name="l03193"></a><span class="lineno"> 3193</span>&#160;   <span class="comment">/* ignore any other nifti_type */</span></div><div class="line"><a name="l03194"></a><span class="lineno"> 3194</span>&#160;</div><div class="line"><a name="l03195"></a><span class="lineno"> 3195</span>&#160;   <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l03196"></a><span class="lineno"> 3196</span>&#160;}</div><div class="ttc" id="structnifti__image_html_aa99806d70cacff119b5b6089c3dfdeda"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#aa99806d70cacff119b5b6089c3dfdeda">nifti_image::iname</a></div><div class="ttdeci">char * iname</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:161</div></div>
<div class="ttc" id="nifti1__io_8c_html_a338a5f9b74c37ee28ca8683324434a05"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#a338a5f9b74c37ee28ca8683324434a05">nifti_find_file_extension</a></div><div class="ttdeci">char * nifti_find_file_extension(const char *name)</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:2583</div></div>
<div class="ttc" id="nifti1__io_8c_html_a5c42d2b1cf63b30950078ec5562e1f58"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#a5c42d2b1cf63b30950078ec5562e1f58">is_valid_nifti_type</a></div><div class="ttdeci">int is_valid_nifti_type(int nifti_type)</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:3329</div></div>
<div class="ttc" id="structnifti__image_html_ac55996e58670948b220bebbf5d4bb0f4"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#ac55996e58670948b220bebbf5d4bb0f4">nifti_image::nifti_type</a></div><div class="ttdeci">int nifti_type</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:148</div></div>
<div class="ttc" id="structnifti__image_html_a1c7755060c9cca3612f1101684c9845f"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a1c7755060c9cca3612f1101684c9845f">nifti_image::fname</a></div><div class="ttdeci">char * fname</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:160</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a90a17b3e9891b6f16d7b454b5442646d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a90a17b3e9891b6f16d7b454b5442646d">&#9670;&nbsp;</a></span>nifti_units_string()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* nifti_units_string </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>uu</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return a pointer to a string holding the name of a NIFTI units type.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">uu</td><td>NIfTI-1 unit code</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>pointer to static string for the given unit type</dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>Do not free() or modify this string! It points to static storage.</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="../../d9/d34/group__NIFTI1__UNITS.html" title="nifti1 units codes to describe the unit of measurement for each dimension of the dataset ...">NIFTI1_UNITS</a> group in nifti1.h </dd></dl>
<div class="fragment"><div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;{</div><div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;   <span class="keywordflow">switch</span>( uu ){</div><div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;     <span class="keywordflow">case</span> <a class="code" href="../../d9/d34/group__NIFTI1__UNITS.html#ga58b8564584f3e2cda3bfb9daebdd28d5">NIFTI_UNITS_METER</a>:  <span class="keywordflow">return</span> <span class="stringliteral">&quot;m&quot;</span> ;</div><div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;     <span class="keywordflow">case</span> <a class="code" href="../../d9/d34/group__NIFTI1__UNITS.html#gae37d3c19fa7561f6ef662bc27a4af5d4">NIFTI_UNITS_MM</a>:     <span class="keywordflow">return</span> <span class="stringliteral">&quot;mm&quot;</span> ;</div><div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;     <span class="keywordflow">case</span> <a class="code" href="../../d9/d34/group__NIFTI1__UNITS.html#ga9ab584aac820e59dc2373581ee2c237e">NIFTI_UNITS_MICRON</a>: <span class="keywordflow">return</span> <span class="stringliteral">&quot;um&quot;</span> ;</div><div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;     <span class="keywordflow">case</span> <a class="code" href="../../d9/d34/group__NIFTI1__UNITS.html#gae1126a70acd21a99d7748c7ee9f877a8">NIFTI_UNITS_SEC</a>:    <span class="keywordflow">return</span> <span class="stringliteral">&quot;s&quot;</span> ;</div><div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;     <span class="keywordflow">case</span> <a class="code" href="../../d9/d34/group__NIFTI1__UNITS.html#ga3a890f2c798b2aa7853135e4c9b03113">NIFTI_UNITS_MSEC</a>:   <span class="keywordflow">return</span> <span class="stringliteral">&quot;ms&quot;</span> ;</div><div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;     <span class="keywordflow">case</span> <a class="code" href="../../d9/d34/group__NIFTI1__UNITS.html#ga17714a9f67cbf27371ee9dda4a046942">NIFTI_UNITS_USEC</a>:   <span class="keywordflow">return</span> <span class="stringliteral">&quot;us&quot;</span> ;</div><div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;     <span class="keywordflow">case</span> <a class="code" href="../../d9/d34/group__NIFTI1__UNITS.html#ga3f82832f715abf1f8afeebe900bd2f19">NIFTI_UNITS_HZ</a>:     <span class="keywordflow">return</span> <span class="stringliteral">&quot;Hz&quot;</span> ;</div><div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;     <span class="keywordflow">case</span> <a class="code" href="../../d9/d34/group__NIFTI1__UNITS.html#ga56bb7231fda9e33cbe20df645c6c0f13">NIFTI_UNITS_PPM</a>:    <span class="keywordflow">return</span> <span class="stringliteral">&quot;ppm&quot;</span> ;</div><div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;     <span class="keywordflow">case</span> <a class="code" href="../../d9/d34/group__NIFTI1__UNITS.html#ga23156c7a00356dd9896d509a0b9a5c93">NIFTI_UNITS_RADS</a>:   <span class="keywordflow">return</span> <span class="stringliteral">&quot;rad/s&quot;</span> ;</div><div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;   }</div><div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;   <span class="keywordflow">return</span> <span class="stringliteral">&quot;Unknown&quot;</span> ;</div><div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;}</div><div class="ttc" id="group__NIFTI1__UNITS_html_gae37d3c19fa7561f6ef662bc27a4af5d4"><div class="ttname"><a href="../../d9/d34/group__NIFTI1__UNITS.html#gae37d3c19fa7561f6ef662bc27a4af5d4">NIFTI_UNITS_MM</a></div><div class="ttdeci">#define NIFTI_UNITS_MM</div><div class="ttdef"><b>Definition:</b> nifti1.h:1285</div></div>
<div class="ttc" id="group__NIFTI1__UNITS_html_gae1126a70acd21a99d7748c7ee9f877a8"><div class="ttname"><a href="../../d9/d34/group__NIFTI1__UNITS.html#gae1126a70acd21a99d7748c7ee9f877a8">NIFTI_UNITS_SEC</a></div><div class="ttdeci">#define NIFTI_UNITS_SEC</div><div class="ttdef"><b>Definition:</b> nifti1.h:1291</div></div>
<div class="ttc" id="group__NIFTI1__UNITS_html_ga3a890f2c798b2aa7853135e4c9b03113"><div class="ttname"><a href="../../d9/d34/group__NIFTI1__UNITS.html#ga3a890f2c798b2aa7853135e4c9b03113">NIFTI_UNITS_MSEC</a></div><div class="ttdeci">#define NIFTI_UNITS_MSEC</div><div class="ttdef"><b>Definition:</b> nifti1.h:1293</div></div>
<div class="ttc" id="group__NIFTI1__UNITS_html_ga58b8564584f3e2cda3bfb9daebdd28d5"><div class="ttname"><a href="../../d9/d34/group__NIFTI1__UNITS.html#ga58b8564584f3e2cda3bfb9daebdd28d5">NIFTI_UNITS_METER</a></div><div class="ttdeci">#define NIFTI_UNITS_METER</div><div class="ttdef"><b>Definition:</b> nifti1.h:1283</div></div>
<div class="ttc" id="group__NIFTI1__UNITS_html_ga3f82832f715abf1f8afeebe900bd2f19"><div class="ttname"><a href="../../d9/d34/group__NIFTI1__UNITS.html#ga3f82832f715abf1f8afeebe900bd2f19">NIFTI_UNITS_HZ</a></div><div class="ttdeci">#define NIFTI_UNITS_HZ</div><div class="ttdef"><b>Definition:</b> nifti1.h:1299</div></div>
<div class="ttc" id="group__NIFTI1__UNITS_html_ga9ab584aac820e59dc2373581ee2c237e"><div class="ttname"><a href="../../d9/d34/group__NIFTI1__UNITS.html#ga9ab584aac820e59dc2373581ee2c237e">NIFTI_UNITS_MICRON</a></div><div class="ttdeci">#define NIFTI_UNITS_MICRON</div><div class="ttdef"><b>Definition:</b> nifti1.h:1287</div></div>
<div class="ttc" id="group__NIFTI1__UNITS_html_ga23156c7a00356dd9896d509a0b9a5c93"><div class="ttname"><a href="../../d9/d34/group__NIFTI1__UNITS.html#ga23156c7a00356dd9896d509a0b9a5c93">NIFTI_UNITS_RADS</a></div><div class="ttdeci">#define NIFTI_UNITS_RADS</div><div class="ttdef"><b>Definition:</b> nifti1.h:1303</div></div>
<div class="ttc" id="group__NIFTI1__UNITS_html_ga56bb7231fda9e33cbe20df645c6c0f13"><div class="ttname"><a href="../../d9/d34/group__NIFTI1__UNITS.html#ga56bb7231fda9e33cbe20df645c6c0f13">NIFTI_UNITS_PPM</a></div><div class="ttdeci">#define NIFTI_UNITS_PPM</div><div class="ttdef"><b>Definition:</b> nifti1.h:1301</div></div>
<div class="ttc" id="group__NIFTI1__UNITS_html_ga17714a9f67cbf27371ee9dda4a046942"><div class="ttname"><a href="../../d9/d34/group__NIFTI1__UNITS.html#ga17714a9f67cbf27371ee9dda4a046942">NIFTI_UNITS_USEC</a></div><div class="ttdeci">#define NIFTI_UNITS_USEC</div><div class="ttdef"><b>Definition:</b> nifti1.h:1295</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af6c9efd3e09141592c41803377c689a9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af6c9efd3e09141592c41803377c689a9">&#9670;&nbsp;</a></span>nifti_update_dims_from_array()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int nifti_update_dims_from_array </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d0/de7/structnifti__image.html">nifti_image</a> *&#160;</td>
          <td class="paramname"><em>nim</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>nifti_update_dims_from_array - update nx, ny, ... from nim-&gt;dim[]</p>
<p>Fix all the dimension information, based on a new nim-&gt;dim[].</p>
<p>Note: we assume that dim[0] will not increase.</p>
<p>Check for updates to pixdim[], dx,..., nx,..., nvox, ndim, dim[0]. </p>
<div class="fragment"><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;{</div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;   <span class="keywordtype">int</span> c, ndim;</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;</div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;   <span class="keywordflow">if</span>( !nim ){</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;      fprintf(stderr,<span class="stringliteral">&quot;** update_dims: missing nim\n&quot;</span>);</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;      <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;   }</div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;</div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;   <span class="keywordflow">if</span>( <a class="code" href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a>.debug &gt; 2 ){</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;      fprintf(stderr,<span class="stringliteral">&quot;+d updating image dimensions given nim-&gt;dim:&quot;</span>);</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;      <span class="keywordflow">for</span>( c = 0; c &lt; 8; c++ ) fprintf(stderr,<span class="stringliteral">&quot; %d&quot;</span>, nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a054f5f2c357dd6833efd467ac202f0a5">dim</a>[c]);</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;      fputc(<span class="charliteral">&#39;\n&#39;</span>,stderr);</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;   }</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;   <span class="comment">/* verify dim[0] first */</span></div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;   <span class="keywordflow">if</span>(nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a054f5f2c357dd6833efd467ac202f0a5">dim</a>[0] &lt; 1 || nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a054f5f2c357dd6833efd467ac202f0a5">dim</a>[0] &gt; 7){</div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;      fprintf(stderr,<span class="stringliteral">&quot;** invalid dim[0], dim[] = &quot;</span>);</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;      <span class="keywordflow">for</span>( c = 0; c &lt; 8; c++ ) fprintf(stderr,<span class="stringliteral">&quot; %d&quot;</span>, nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a054f5f2c357dd6833efd467ac202f0a5">dim</a>[c]);</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;      fputc(<span class="charliteral">&#39;\n&#39;</span>,stderr);</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;      <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;   }</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;   <span class="comment">/* set nx, ny ..., dx, dy, ..., one by one */</span></div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;</div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;   <span class="comment">/* less than 1, set to 1, else copy */</span></div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;   <span class="keywordflow">if</span>(nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a054f5f2c357dd6833efd467ac202f0a5">dim</a>[1] &lt; 1) nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ab99743dd7967cff6845f1a96b2044167">nx</a> = nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a054f5f2c357dd6833efd467ac202f0a5">dim</a>[1] = 1;</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;   <span class="keywordflow">else</span>                nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ab99743dd7967cff6845f1a96b2044167">nx</a> = nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a054f5f2c357dd6833efd467ac202f0a5">dim</a>[1];</div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;   nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a8d9ddfeecae70399a50dca551d69f774">dx</a> = nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ae71e0af4ae7e67eb52a0f5e36be520a6">pixdim</a>[1];</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;   <span class="comment">/* if undefined, or less than 1, set to 1 */</span></div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;   <span class="keywordflow">if</span>(nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a054f5f2c357dd6833efd467ac202f0a5">dim</a>[0] &lt; 2 || (nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a054f5f2c357dd6833efd467ac202f0a5">dim</a>[0] &gt;= 2 &amp;&amp; nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a054f5f2c357dd6833efd467ac202f0a5">dim</a>[2] &lt; 1))</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;      nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a5e971f24a97c592fefa28d084c02769a">ny</a> = nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a054f5f2c357dd6833efd467ac202f0a5">dim</a>[2] = 1;</div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;   <span class="keywordflow">else</span></div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;      nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a5e971f24a97c592fefa28d084c02769a">ny</a> = nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a054f5f2c357dd6833efd467ac202f0a5">dim</a>[2];</div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;   <span class="comment">/* copy delta values, in any case */</span></div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;   nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#afb6cd106a28d4599326042c43d85022b">dy</a> = nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ae71e0af4ae7e67eb52a0f5e36be520a6">pixdim</a>[2];</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;   <span class="keywordflow">if</span>(nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a054f5f2c357dd6833efd467ac202f0a5">dim</a>[0] &lt; 3 || (nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a054f5f2c357dd6833efd467ac202f0a5">dim</a>[0] &gt;= 3 &amp;&amp; nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a054f5f2c357dd6833efd467ac202f0a5">dim</a>[3] &lt; 1))</div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;      nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a8731bb1d867cdd24335e4bc3dd131c44">nz</a> = nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a054f5f2c357dd6833efd467ac202f0a5">dim</a>[3] = 1;</div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;   <span class="keywordflow">else</span> <span class="comment">/* just copy vals from arrays */</span></div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;      nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a8731bb1d867cdd24335e4bc3dd131c44">nz</a> = nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a054f5f2c357dd6833efd467ac202f0a5">dim</a>[3];</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;   nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ac462fb16a688d8dbec164456febdc9c7">dz</a> = nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ae71e0af4ae7e67eb52a0f5e36be520a6">pixdim</a>[3];</div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;</div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;   <span class="keywordflow">if</span>(nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a054f5f2c357dd6833efd467ac202f0a5">dim</a>[0] &lt; 4 || (nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a054f5f2c357dd6833efd467ac202f0a5">dim</a>[0] &gt;= 4 &amp;&amp; nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a054f5f2c357dd6833efd467ac202f0a5">dim</a>[4] &lt; 1))</div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;      nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ab3d3fdfda87503e5e8d53f0342906aba">nt</a> = nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a054f5f2c357dd6833efd467ac202f0a5">dim</a>[4] = 1;</div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;   <span class="keywordflow">else</span> <span class="comment">/* just copy vals from arrays */</span></div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;      nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ab3d3fdfda87503e5e8d53f0342906aba">nt</a> = nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a054f5f2c357dd6833efd467ac202f0a5">dim</a>[4];</div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;   nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ab4e9dd136d1de9fbe03c68f081876b9e">dt</a> = nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ae71e0af4ae7e67eb52a0f5e36be520a6">pixdim</a>[4];</div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;</div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;   <span class="keywordflow">if</span>(nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a054f5f2c357dd6833efd467ac202f0a5">dim</a>[0] &lt; 5 || (nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a054f5f2c357dd6833efd467ac202f0a5">dim</a>[0] &gt;= 5 &amp;&amp; nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a054f5f2c357dd6833efd467ac202f0a5">dim</a>[5] &lt; 1))</div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;      nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ab4a9c0956e858fd877ee81796adc66bc">nu</a> = nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a054f5f2c357dd6833efd467ac202f0a5">dim</a>[5] = 1;</div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;   <span class="keywordflow">else</span> <span class="comment">/* just copy vals from arrays */</span></div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;      nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ab4a9c0956e858fd877ee81796adc66bc">nu</a> = nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a054f5f2c357dd6833efd467ac202f0a5">dim</a>[5];</div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;   nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ab1c6399d45bf77d6eff712d318a9d0ca">du</a> = nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ae71e0af4ae7e67eb52a0f5e36be520a6">pixdim</a>[5];</div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;   <span class="keywordflow">if</span>(nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a054f5f2c357dd6833efd467ac202f0a5">dim</a>[0] &lt; 6 || (nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a054f5f2c357dd6833efd467ac202f0a5">dim</a>[0] &gt;= 6 &amp;&amp; nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a054f5f2c357dd6833efd467ac202f0a5">dim</a>[6] &lt; 1))</div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;      nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a7e04a5e405f9b79dae5652cdcd3832ef">nv</a> = nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a054f5f2c357dd6833efd467ac202f0a5">dim</a>[6] = 1;</div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;   <span class="keywordflow">else</span> <span class="comment">/* just copy vals from arrays */</span></div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;      nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a7e04a5e405f9b79dae5652cdcd3832ef">nv</a> = nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a054f5f2c357dd6833efd467ac202f0a5">dim</a>[6];</div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;   nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a6155d97e665d879e662bf650c09d0bc1">dv</a> = nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ae71e0af4ae7e67eb52a0f5e36be520a6">pixdim</a>[6];</div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;</div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;   <span class="keywordflow">if</span>(nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a054f5f2c357dd6833efd467ac202f0a5">dim</a>[0] &lt; 7 || (nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a054f5f2c357dd6833efd467ac202f0a5">dim</a>[0] &gt;= 7 &amp;&amp; nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a054f5f2c357dd6833efd467ac202f0a5">dim</a>[7] &lt; 1))</div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;      nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ae0bc5b6b2e350108e468124b682b715c">nw</a> = nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a054f5f2c357dd6833efd467ac202f0a5">dim</a>[7] = 1;</div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;   <span class="keywordflow">else</span> <span class="comment">/* just copy vals from arrays */</span></div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;      nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ae0bc5b6b2e350108e468124b682b715c">nw</a> = nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a054f5f2c357dd6833efd467ac202f0a5">dim</a>[7];</div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;   nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ab7d8391bc07972e0b051f157dde00a04">dw</a> = nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ae71e0af4ae7e67eb52a0f5e36be520a6">pixdim</a>[7];</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;</div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;   <span class="keywordflow">for</span>( c = 1, nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a440a3fab2a781b43ed8216e26492597d">nvox</a> = 1; c &lt;= nim-&gt;<a class="code" href="../../dd/d75/structnifti__1__header.html#ace3aeebb3c10362c5c2e48cee87a7f2e">dim</a>[0]; c++ )</div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;      nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a440a3fab2a781b43ed8216e26492597d">nvox</a> *= nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a054f5f2c357dd6833efd467ac202f0a5">dim</a>[c];</div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;</div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;   <span class="comment">/* compute ndim, assuming it can be no larger than the old one */</span></div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;   <span class="keywordflow">for</span>( ndim = nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a054f5f2c357dd6833efd467ac202f0a5">dim</a>[0]; (ndim &gt; 1) &amp;&amp; (nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a054f5f2c357dd6833efd467ac202f0a5">dim</a>[ndim] &lt;= 1); ndim-- )</div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;       ;</div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;</div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;   <span class="keywordflow">if</span>( <a class="code" href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a>.debug &gt; 2 ){</div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;      fprintf(stderr,<span class="stringliteral">&quot;+d ndim = %d -&gt; %d\n&quot;</span>,nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ad61740a0245f2af05ded39cb0648ae07">ndim</a>, ndim);</div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;      fprintf(stderr,<span class="stringliteral">&quot; --&gt; (%d,%d,%d,%d,%d,%d,%d)\n&quot;</span>,</div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;              nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ab99743dd7967cff6845f1a96b2044167">nx</a>, nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a5e971f24a97c592fefa28d084c02769a">ny</a>, nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a8731bb1d867cdd24335e4bc3dd131c44">nz</a>, nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ab3d3fdfda87503e5e8d53f0342906aba">nt</a>, nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ab4a9c0956e858fd877ee81796adc66bc">nu</a>, nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a7e04a5e405f9b79dae5652cdcd3832ef">nv</a>, nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ae0bc5b6b2e350108e468124b682b715c">nw</a>);</div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;   }</div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;</div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;   nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a054f5f2c357dd6833efd467ac202f0a5">dim</a>[0] = nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#ad61740a0245f2af05ded39cb0648ae07">ndim</a> = ndim;</div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;</div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;}</div><div class="ttc" id="structnifti__image_html_afb6cd106a28d4599326042c43d85022b"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#afb6cd106a28d4599326042c43d85022b">nifti_image::dy</a></div><div class="ttdeci">float dy</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:105</div></div>
<div class="ttc" id="structnifti__image_html_a8d9ddfeecae70399a50dca551d69f774"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a8d9ddfeecae70399a50dca551d69f774">nifti_image::dx</a></div><div class="ttdeci">float dx</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:104</div></div>
<div class="ttc" id="structnifti__image_html_ae71e0af4ae7e67eb52a0f5e36be520a6"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#ae71e0af4ae7e67eb52a0f5e36be520a6">nifti_image::pixdim</a></div><div class="ttdeci">float pixdim[8]</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:111</div></div>
<div class="ttc" id="structnifti__image_html_ab4e9dd136d1de9fbe03c68f081876b9e"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#ab4e9dd136d1de9fbe03c68f081876b9e">nifti_image::dt</a></div><div class="ttdeci">float dt</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:107</div></div>
<div class="ttc" id="structnifti__image_html_a440a3fab2a781b43ed8216e26492597d"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a440a3fab2a781b43ed8216e26492597d">nifti_image::nvox</a></div><div class="ttdeci">size_t nvox</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:100</div></div>
<div class="ttc" id="structnifti__image_html_a7e04a5e405f9b79dae5652cdcd3832ef"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a7e04a5e405f9b79dae5652cdcd3832ef">nifti_image::nv</a></div><div class="ttdeci">int nv</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:97</div></div>
<div class="ttc" id="structnifti__image_html_ab1c6399d45bf77d6eff712d318a9d0ca"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#ab1c6399d45bf77d6eff712d318a9d0ca">nifti_image::du</a></div><div class="ttdeci">float du</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:108</div></div>
<div class="ttc" id="structnifti__image_html_ab4a9c0956e858fd877ee81796adc66bc"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#ab4a9c0956e858fd877ee81796adc66bc">nifti_image::nu</a></div><div class="ttdeci">int nu</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:96</div></div>
<div class="ttc" id="structnifti__1__header_html_ace3aeebb3c10362c5c2e48cee87a7f2e"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#ace3aeebb3c10362c5c2e48cee87a7f2e">nifti_1_header::dim</a></div><div class="ttdeci">short dim[8]</div><div class="ttdef"><b>Definition:</b> nifti1.h:157</div></div>
<div class="ttc" id="structnifti__image_html_ae0bc5b6b2e350108e468124b682b715c"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#ae0bc5b6b2e350108e468124b682b715c">nifti_image::nw</a></div><div class="ttdeci">int nw</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:98</div></div>
<div class="ttc" id="structnifti__image_html_a6155d97e665d879e662bf650c09d0bc1"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a6155d97e665d879e662bf650c09d0bc1">nifti_image::dv</a></div><div class="ttdeci">float dv</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:109</div></div>
<div class="ttc" id="structnifti__image_html_ab7d8391bc07972e0b051f157dde00a04"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#ab7d8391bc07972e0b051f157dde00a04">nifti_image::dw</a></div><div class="ttdeci">float dw</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:110</div></div>
<div class="ttc" id="structnifti__image_html_ad61740a0245f2af05ded39cb0648ae07"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#ad61740a0245f2af05ded39cb0648ae07">nifti_image::ndim</a></div><div class="ttdeci">int ndim</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:91</div></div>
<div class="ttc" id="structnifti__image_html_a054f5f2c357dd6833efd467ac202f0a5"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a054f5f2c357dd6833efd467ac202f0a5">nifti_image::dim</a></div><div class="ttdeci">int dim[8]</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:99</div></div>
<div class="ttc" id="structnifti__image_html_a8731bb1d867cdd24335e4bc3dd131c44"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a8731bb1d867cdd24335e4bc3dd131c44">nifti_image::nz</a></div><div class="ttdeci">int nz</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:94</div></div>
<div class="ttc" id="structnifti__image_html_ab3d3fdfda87503e5e8d53f0342906aba"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#ab3d3fdfda87503e5e8d53f0342906aba">nifti_image::nt</a></div><div class="ttdeci">int nt</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:95</div></div>
<div class="ttc" id="structnifti__image_html_a5e971f24a97c592fefa28d084c02769a"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a5e971f24a97c592fefa28d084c02769a">nifti_image::ny</a></div><div class="ttdeci">int ny</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:93</div></div>
<div class="ttc" id="structnifti__image_html_ac462fb16a688d8dbec164456febdc9c7"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#ac462fb16a688d8dbec164456febdc9c7">nifti_image::dz</a></div><div class="ttdeci">float dz</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:106</div></div>
<div class="ttc" id="nifti1__io_8c_html_a6e047e1dc2f826a4adff048bee8f5df7"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a></div><div class="ttdeci">static nifti_global_options g_opts</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:344</div></div>
<div class="ttc" id="structnifti__image_html_ab99743dd7967cff6845f1a96b2044167"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#ab99743dd7967cff6845f1a96b2044167">nifti_image::nx</a></div><div class="ttdeci">int nx</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:92</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a836b54d494e9d2718e5541978ae3fc29"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a836b54d494e9d2718e5541978ae3fc29">&#9670;&nbsp;</a></span>nifti_validfilename()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int nifti_validfilename </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>fname</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>return whether the filename is valid</p>
<p>Allow uppercase extensions as valid. 27 Apr 2009 [rickr] Any .gz extension case must match the base extension case.</p>
<p>The name is considered valid if its length is positive, excluding any nifti filename extension. </p><h1>fname input | return | result of nifti_makebasename </h1>
<p>"myimage" | 1 | "myimage" "myimage.tif" | 1 | "myimage.tif" "myimage.tif.gz" | 1 | "myimage.tif" "myimage.nii" | 1 | "myimage" ".nii" | 0 | &lt;ERROR - basename has zero length&gt; ".myhiddenimage" | 1 | ".myhiddenimage" ".myhiddenimage.nii |  1      | ".myhiddenimage" </p>
<div class="fragment"><div class="line"><a name="l02551"></a><span class="lineno"> 2551</span>&#160;{</div><div class="line"><a name="l02552"></a><span class="lineno"> 2552</span>&#160;   <span class="keywordtype">char</span> * ext;</div><div class="line"><a name="l02553"></a><span class="lineno"> 2553</span>&#160;</div><div class="line"><a name="l02554"></a><span class="lineno"> 2554</span>&#160;   <span class="comment">/* check input file(s) for sanity */</span></div><div class="line"><a name="l02555"></a><span class="lineno"> 2555</span>&#160;   <span class="keywordflow">if</span>( fname == NULL || *fname == <span class="charliteral">&#39;\0&#39;</span> ){</div><div class="line"><a name="l02556"></a><span class="lineno"> 2556</span>&#160;      <span class="keywordflow">if</span> ( <a class="code" href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a>.debug &gt; 1 )</div><div class="line"><a name="l02557"></a><span class="lineno"> 2557</span>&#160;         fprintf(stderr,<span class="stringliteral">&quot;-- empty filename in nifti_validfilename()\n&quot;</span>);</div><div class="line"><a name="l02558"></a><span class="lineno"> 2558</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02559"></a><span class="lineno"> 2559</span>&#160;   }</div><div class="line"><a name="l02560"></a><span class="lineno"> 2560</span>&#160;</div><div class="line"><a name="l02561"></a><span class="lineno"> 2561</span>&#160;   ext = <a class="code" href="../../d1/d14/nifti1__io_8c.html#a338a5f9b74c37ee28ca8683324434a05">nifti_find_file_extension</a>(fname);</div><div class="line"><a name="l02562"></a><span class="lineno"> 2562</span>&#160;</div><div class="line"><a name="l02563"></a><span class="lineno"> 2563</span>&#160;   <span class="keywordflow">if</span> ( ext &amp;&amp; ext == fname ) {   <span class="comment">/* then no filename prefix */</span></div><div class="line"><a name="l02564"></a><span class="lineno"> 2564</span>&#160;      <span class="keywordflow">if</span> ( <a class="code" href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a>.debug &gt; 0 )</div><div class="line"><a name="l02565"></a><span class="lineno"> 2565</span>&#160;         fprintf(stderr,<span class="stringliteral">&quot;-- no prefix for filename &#39;%s&#39;\n&quot;</span>, fname);</div><div class="line"><a name="l02566"></a><span class="lineno"> 2566</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02567"></a><span class="lineno"> 2567</span>&#160;   }</div><div class="line"><a name="l02568"></a><span class="lineno"> 2568</span>&#160;</div><div class="line"><a name="l02569"></a><span class="lineno"> 2569</span>&#160;   <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l02570"></a><span class="lineno"> 2570</span>&#160;}</div><div class="ttc" id="nifti1__io_8c_html_a338a5f9b74c37ee28ca8683324434a05"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#a338a5f9b74c37ee28ca8683324434a05">nifti_find_file_extension</a></div><div class="ttdeci">char * nifti_find_file_extension(const char *name)</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:2583</div></div>
<div class="ttc" id="nifti1__io_8c_html_a6e047e1dc2f826a4adff048bee8f5df7"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a></div><div class="ttdeci">static nifti_global_options g_opts</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:344</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab8f4f74b33a153219e5c47e6f8046bf3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab8f4f74b33a153219e5c47e6f8046bf3">&#9670;&nbsp;</a></span>nifti_write_all_data()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int nifti_write_all_data </td>
          <td>(</td>
          <td class="paramtype">znzFile&#160;</td>
          <td class="paramname"><em>fp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d0/de7/structnifti__image.html">nifti_image</a> *&#160;</td>
          <td class="paramname"><em>nim</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d1/dba/structnifti__brick__list.html">nifti_brick_list</a> *&#160;</td>
          <td class="paramname"><em>NBL</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>write the <a class="el" href="../../d0/de7/structnifti__image.html" title="High level data structure for open nifti datasets in the nifti1_io API. Note that this structure is n...">nifti_image</a> data to file (from nim-&gt;data or from NBL)</p>
<p>If NBL is not NULL, write the data from that structure. Otherwise, write it out from nim-&gt;data. No swapping is done here.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fp</td><td>: File pointer </td></tr>
    <tr><td class="paramname">nim</td><td>: <a class="el" href="../../d0/de7/structnifti__image.html" title="High level data structure for open nifti datasets in the nifti1_io API. Note that this structure is n...">nifti_image</a> corresponding to the data </td></tr>
    <tr><td class="paramname">NBL</td><td>: optional source of write data (if NULL use nim-&gt;data)</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, -1 on failure</dd></dl>
<p>Note: the <a class="el" href="../../d0/de7/structnifti__image.html" title="High level data structure for open nifti datasets in the nifti1_io API. Note that this structure is n...">nifti_image</a> byte_order is set as that of the current CPU. This is because such a conversion was made to the data upon reading, while byte_order was not set (so the programs would know what format the data was on disk). Effectively, since byte_order should match what is on disk, it should bet set to that of the current CPU whenever new filenames are assigned. </p>
<div class="fragment"><div class="line"><a name="l05131"></a><span class="lineno"> 5131</span>&#160;{</div><div class="line"><a name="l05132"></a><span class="lineno"> 5132</span>&#160;   <span class="keywordtype">size_t</span> ss;</div><div class="line"><a name="l05133"></a><span class="lineno"> 5133</span>&#160;   <span class="keywordtype">int</span>    bnum;</div><div class="line"><a name="l05134"></a><span class="lineno"> 5134</span>&#160;</div><div class="line"><a name="l05135"></a><span class="lineno"> 5135</span>&#160;   <span class="keywordflow">if</span>( !NBL ){ <span class="comment">/* just write one buffer and get out of here */</span></div><div class="line"><a name="l05136"></a><span class="lineno"> 5136</span>&#160;      <span class="keywordflow">if</span>( nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a9c7db78ad411a6e2b8a8ab071bbbe0a8">data</a> == NULL ){</div><div class="line"><a name="l05137"></a><span class="lineno"> 5137</span>&#160;         fprintf(stderr,<span class="stringliteral">&quot;** NWAD: no image data to write\n&quot;</span>);</div><div class="line"><a name="l05138"></a><span class="lineno"> 5138</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l05139"></a><span class="lineno"> 5139</span>&#160;      }</div><div class="line"><a name="l05140"></a><span class="lineno"> 5140</span>&#160;</div><div class="line"><a name="l05141"></a><span class="lineno"> 5141</span>&#160;      ss = nifti_write_buffer(fp,nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a9c7db78ad411a6e2b8a8ab071bbbe0a8">data</a>,nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a79a4382f115cb6c7f8977c36d73e6749">nbyper</a> * nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a440a3fab2a781b43ed8216e26492597d">nvox</a>);</div><div class="line"><a name="l05142"></a><span class="lineno"> 5142</span>&#160;      <span class="keywordflow">if</span> (ss &lt; nim-&gt;nbyper * nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a440a3fab2a781b43ed8216e26492597d">nvox</a>){</div><div class="line"><a name="l05143"></a><span class="lineno"> 5143</span>&#160;         fprintf(stderr,</div><div class="line"><a name="l05144"></a><span class="lineno"> 5144</span>&#160;            <span class="stringliteral">&quot;** ERROR: NWAD: wrote only %u of %u bytes to file\n&quot;</span>,</div><div class="line"><a name="l05145"></a><span class="lineno"> 5145</span>&#160;            (<span class="keywordtype">unsigned</span>)ss, (<span class="keywordtype">unsigned</span>)(nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a79a4382f115cb6c7f8977c36d73e6749">nbyper</a> * nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a440a3fab2a781b43ed8216e26492597d">nvox</a>));</div><div class="line"><a name="l05146"></a><span class="lineno"> 5146</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l05147"></a><span class="lineno"> 5147</span>&#160;      }</div><div class="line"><a name="l05148"></a><span class="lineno"> 5148</span>&#160;</div><div class="line"><a name="l05149"></a><span class="lineno"> 5149</span>&#160;      <span class="keywordflow">if</span>( <a class="code" href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a>.debug &gt; 1 )</div><div class="line"><a name="l05150"></a><span class="lineno"> 5150</span>&#160;         fprintf(stderr,<span class="stringliteral">&quot;+d wrote single image of %u bytes\n&quot;</span>, (<span class="keywordtype">unsigned</span>)ss);</div><div class="line"><a name="l05151"></a><span class="lineno"> 5151</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l05152"></a><span class="lineno"> 5152</span>&#160;      <span class="keywordflow">if</span>( ! NBL-&gt;bricks || NBL-&gt;nbricks &lt;= 0 || NBL-&gt;bsize &lt;= 0 ){</div><div class="line"><a name="l05153"></a><span class="lineno"> 5153</span>&#160;         fprintf(stderr,<span class="stringliteral">&quot;** NWAD: no brick data to write (%p,%d,%u)\n&quot;</span>,</div><div class="line"><a name="l05154"></a><span class="lineno"> 5154</span>&#160;                 (<span class="keywordtype">void</span> *)NBL-&gt;bricks, NBL-&gt;nbricks, (<span class="keywordtype">unsigned</span>)NBL-&gt;bsize);</div><div class="line"><a name="l05155"></a><span class="lineno"> 5155</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l05156"></a><span class="lineno"> 5156</span>&#160;      }</div><div class="line"><a name="l05157"></a><span class="lineno"> 5157</span>&#160;</div><div class="line"><a name="l05158"></a><span class="lineno"> 5158</span>&#160;      <span class="keywordflow">for</span>( bnum = 0; bnum &lt; NBL-&gt;nbricks; bnum++ ){</div><div class="line"><a name="l05159"></a><span class="lineno"> 5159</span>&#160;         ss = nifti_write_buffer(fp, NBL-&gt;bricks[bnum], NBL-&gt;bsize);</div><div class="line"><a name="l05160"></a><span class="lineno"> 5160</span>&#160;         <span class="keywordflow">if</span>( ss &lt; NBL-&gt;bsize ){</div><div class="line"><a name="l05161"></a><span class="lineno"> 5161</span>&#160;            fprintf(stderr,</div><div class="line"><a name="l05162"></a><span class="lineno"> 5162</span>&#160;              <span class="stringliteral">&quot;** NWAD ERROR: wrote %u of %u bytes of brick %d of %d to file&quot;</span>,</div><div class="line"><a name="l05163"></a><span class="lineno"> 5163</span>&#160;               (<span class="keywordtype">unsigned</span>)ss, (<span class="keywordtype">unsigned</span>)NBL-&gt;bsize, bnum+1, NBL-&gt;nbricks);</div><div class="line"><a name="l05164"></a><span class="lineno"> 5164</span>&#160;            <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l05165"></a><span class="lineno"> 5165</span>&#160;         }</div><div class="line"><a name="l05166"></a><span class="lineno"> 5166</span>&#160;      }</div><div class="line"><a name="l05167"></a><span class="lineno"> 5167</span>&#160;      <span class="keywordflow">if</span>( <a class="code" href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a>.debug &gt; 1 )</div><div class="line"><a name="l05168"></a><span class="lineno"> 5168</span>&#160;         fprintf(stderr,<span class="stringliteral">&quot;+d wrote image of %d brick(s), each of %u bytes\n&quot;</span>,</div><div class="line"><a name="l05169"></a><span class="lineno"> 5169</span>&#160;                 NBL-&gt;nbricks, (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>)NBL-&gt;bsize);</div><div class="line"><a name="l05170"></a><span class="lineno"> 5170</span>&#160;   }</div><div class="line"><a name="l05171"></a><span class="lineno"> 5171</span>&#160;</div><div class="line"><a name="l05172"></a><span class="lineno"> 5172</span>&#160;   <span class="comment">/* mark as being in this CPU byte order */</span></div><div class="line"><a name="l05173"></a><span class="lineno"> 5173</span>&#160;   nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a5ce21d97da49b1dcf9415e83bbf07caf">byteorder</a> = <a class="code" href="../../d1/d14/nifti1__io_8c.html#adf2a70eac549a80a246d380240a8d822">nifti_short_order</a>() ;</div><div class="line"><a name="l05174"></a><span class="lineno"> 5174</span>&#160;</div><div class="line"><a name="l05175"></a><span class="lineno"> 5175</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l05176"></a><span class="lineno"> 5176</span>&#160;}</div><div class="ttc" id="structnifti__image_html_a440a3fab2a781b43ed8216e26492597d"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a440a3fab2a781b43ed8216e26492597d">nifti_image::nvox</a></div><div class="ttdeci">size_t nvox</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:100</div></div>
<div class="ttc" id="nifti1__io_8c_html_adf2a70eac549a80a246d380240a8d822"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#adf2a70eac549a80a246d380240a8d822">nifti_short_order</a></div><div class="ttdeci">int nifti_short_order(void)</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:6321</div></div>
<div class="ttc" id="structnifti__image_html_a5ce21d97da49b1dcf9415e83bbf07caf"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a5ce21d97da49b1dcf9415e83bbf07caf">nifti_image::byteorder</a></div><div class="ttdeci">int byteorder</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:164</div></div>
<div class="ttc" id="structnifti__image_html_a9c7db78ad411a6e2b8a8ab071bbbe0a8"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a9c7db78ad411a6e2b8a8ab071bbbe0a8">nifti_image::data</a></div><div class="ttdeci">void * data</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:165</div></div>
<div class="ttc" id="structnifti__image_html_a79a4382f115cb6c7f8977c36d73e6749"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a79a4382f115cb6c7f8977c36d73e6749">nifti_image::nbyper</a></div><div class="ttdeci">int nbyper</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:101</div></div>
<div class="ttc" id="nifti1__io_8c_html_a6e047e1dc2f826a4adff048bee8f5df7"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a></div><div class="ttdeci">static nifti_global_options g_opts</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:344</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad66767a91af38b906c955fb45b9e225b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad66767a91af38b906c955fb45b9e225b">&#9670;&nbsp;</a></span>nifti_write_ascii_image()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">znzFile nifti_write_ascii_image </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d0/de7/structnifti__image.html">nifti_image</a> *&#160;</td>
          <td class="paramname"><em>nim</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d1/dba/structnifti__brick__list.html">nifti_brick_list</a> *&#160;</td>
          <td class="paramname"><em>NBL</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>opts</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>write_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>leave_open</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>write a <a class="el" href="../../d0/de7/structnifti__image.html" title="High level data structure for open nifti datasets in the nifti1_io API. Note that this structure is n...">nifti_image</a> to disk in ASCII format </p>
<div class="fragment"><div class="line"><a name="l05800"></a><span class="lineno"> 5800</span>&#160;{</div><div class="line"><a name="l05801"></a><span class="lineno"> 5801</span>&#160;   znzFile   fp;</div><div class="line"><a name="l05802"></a><span class="lineno"> 5802</span>&#160;   <span class="keywordtype">char</span>    * hstr;</div><div class="line"><a name="l05803"></a><span class="lineno"> 5803</span>&#160;                                                                                </div><div class="line"><a name="l05804"></a><span class="lineno"> 5804</span>&#160;   hstr = <a class="code" href="../../d1/d14/nifti1__io_8c.html#a1edffc55474a393f60573a1fc6ef5544">nifti_image_to_ascii</a>( nim ) ;  <span class="comment">/* get header in ASCII form */</span></div><div class="line"><a name="l05805"></a><span class="lineno"> 5805</span>&#160;   <span class="keywordflow">if</span>( ! hstr ){ fprintf(stderr,<span class="stringliteral">&quot;** failed image_to_ascii()\n&quot;</span>); <span class="keywordflow">return</span> NULL; }</div><div class="line"><a name="l05806"></a><span class="lineno"> 5806</span>&#160;                                                                                </div><div class="line"><a name="l05807"></a><span class="lineno"> 5807</span>&#160;   fp = znzopen( nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a1c7755060c9cca3612f1101684c9845f">fname</a> , opts , <a class="code" href="../../d1/d14/nifti1__io_8c.html#a6c17ed984533a4dede09b3bb6fa1fa17">nifti_is_gzfile</a>(nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a1c7755060c9cca3612f1101684c9845f">fname</a>) ) ;</div><div class="line"><a name="l05808"></a><span class="lineno"> 5808</span>&#160;   <span class="keywordflow">if</span>( znz_isnull(fp) ){</div><div class="line"><a name="l05809"></a><span class="lineno"> 5809</span>&#160;      free(hstr);</div><div class="line"><a name="l05810"></a><span class="lineno"> 5810</span>&#160;      fprintf(stderr,<span class="stringliteral">&quot;** failed to open &#39;%s&#39; for ascii write\n&quot;</span>,nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a1c7755060c9cca3612f1101684c9845f">fname</a>);</div><div class="line"><a name="l05811"></a><span class="lineno"> 5811</span>&#160;      <span class="keywordflow">return</span> fp;</div><div class="line"><a name="l05812"></a><span class="lineno"> 5812</span>&#160;   }</div><div class="line"><a name="l05813"></a><span class="lineno"> 5813</span>&#160;                                                                                </div><div class="line"><a name="l05814"></a><span class="lineno"> 5814</span>&#160;   znzputs(hstr,fp);                                               <span class="comment">/* header */</span></div><div class="line"><a name="l05815"></a><span class="lineno"> 5815</span>&#160;   nifti_write_extensions(fp,nim);                             <span class="comment">/* extensions */</span></div><div class="line"><a name="l05816"></a><span class="lineno"> 5816</span>&#160;                                                                                </div><div class="line"><a name="l05817"></a><span class="lineno"> 5817</span>&#160;   <span class="keywordflow">if</span> ( write_data   ) { <a class="code" href="../../d1/d14/nifti1__io_8c.html#ab8f4f74b33a153219e5c47e6f8046bf3">nifti_write_all_data</a>(fp,nim,NBL); }         <span class="comment">/* data */</span></div><div class="line"><a name="l05818"></a><span class="lineno"> 5818</span>&#160;   <span class="keywordflow">if</span> ( ! leave_open ) { znzclose(fp); }</div><div class="line"><a name="l05819"></a><span class="lineno"> 5819</span>&#160;   free(hstr);</div><div class="line"><a name="l05820"></a><span class="lineno"> 5820</span>&#160;   <span class="keywordflow">return</span> fp;  <span class="comment">/* returned but may be closed */</span></div><div class="line"><a name="l05821"></a><span class="lineno"> 5821</span>&#160;}</div><div class="ttc" id="nifti1__io_8c_html_a1edffc55474a393f60573a1fc6ef5544"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#a1edffc55474a393f60573a1fc6ef5544">nifti_image_to_ascii</a></div><div class="ttdeci">char * nifti_image_to_ascii(const nifti_image *nim)</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:6082</div></div>
<div class="ttc" id="nifti1__io_8c_html_a6c17ed984533a4dede09b3bb6fa1fa17"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#a6c17ed984533a4dede09b3bb6fa1fa17">nifti_is_gzfile</a></div><div class="ttdeci">int nifti_is_gzfile(const char *fname)</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:2648</div></div>
<div class="ttc" id="structnifti__image_html_a1c7755060c9cca3612f1101684c9845f"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a1c7755060c9cca3612f1101684c9845f">nifti_image::fname</a></div><div class="ttdeci">char * fname</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:160</div></div>
<div class="ttc" id="nifti1__io_8c_html_ab8f4f74b33a153219e5c47e6f8046bf3"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#ab8f4f74b33a153219e5c47e6f8046bf3">nifti_write_all_data</a></div><div class="ttdeci">int nifti_write_all_data(znzFile fp, nifti_image *nim, const nifti_brick_list *NBL)</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:5129</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a7472700981faa470501958c621c9ee61"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7472700981faa470501958c621c9ee61">&#9670;&nbsp;</a></span>nifti_xform_string()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* nifti_xform_string </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>xx</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return a pointer to a string holding the name of a NIFTI transform type.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">xx</td><td>NIfTI-1 xform code</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>pointer to static string describing xform code</dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>Do not free() or modify this string! It points to static storage.</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="../../d3/db1/group__NIFTI1__XFORM__CODES.html" title="nifti1 xform codes to describe the &quot;standard&quot; coordinate system ">NIFTI1_XFORM_CODES</a> group in nifti1.h </dd></dl>
<div class="fragment"><div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;{</div><div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;   <span class="keywordflow">switch</span>( xx ){</div><div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;     <span class="keywordflow">case</span> <a class="code" href="../../d3/db1/group__NIFTI1__XFORM__CODES.html#gaa90a1fd4f431574e7bebc2b0261ec50f">NIFTI_XFORM_SCANNER_ANAT</a>:  <span class="keywordflow">return</span> <span class="stringliteral">&quot;Scanner Anat&quot;</span> ;</div><div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;     <span class="keywordflow">case</span> <a class="code" href="../../d3/db1/group__NIFTI1__XFORM__CODES.html#gae6c1f140dd22d735e396c2fb3b6334c6">NIFTI_XFORM_ALIGNED_ANAT</a>:  <span class="keywordflow">return</span> <span class="stringliteral">&quot;Aligned Anat&quot;</span> ;</div><div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;     <span class="keywordflow">case</span> <a class="code" href="../../d3/db1/group__NIFTI1__XFORM__CODES.html#ga4159e2d4eb86e582c1f4b6c205b53108">NIFTI_XFORM_TALAIRACH</a>:     <span class="keywordflow">return</span> <span class="stringliteral">&quot;Talairach&quot;</span> ;</div><div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;     <span class="keywordflow">case</span> <a class="code" href="../../d3/db1/group__NIFTI1__XFORM__CODES.html#ga80292343978413b03cb8ccc1e55eb121">NIFTI_XFORM_MNI_152</a>:       <span class="keywordflow">return</span> <span class="stringliteral">&quot;MNI_152&quot;</span> ;</div><div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;   }</div><div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;   <span class="keywordflow">return</span> <span class="stringliteral">&quot;Unknown&quot;</span> ;</div><div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;}</div><div class="ttc" id="group__NIFTI1__XFORM__CODES_html_ga80292343978413b03cb8ccc1e55eb121"><div class="ttname"><a href="../../d3/db1/group__NIFTI1__XFORM__CODES.html#ga80292343978413b03cb8ccc1e55eb121">NIFTI_XFORM_MNI_152</a></div><div class="ttdeci">#define NIFTI_XFORM_MNI_152</div><div class="ttdef"><b>Definition:</b> nifti1.h:1233</div></div>
<div class="ttc" id="group__NIFTI1__XFORM__CODES_html_gaa90a1fd4f431574e7bebc2b0261ec50f"><div class="ttname"><a href="../../d3/db1/group__NIFTI1__XFORM__CODES.html#gaa90a1fd4f431574e7bebc2b0261ec50f">NIFTI_XFORM_SCANNER_ANAT</a></div><div class="ttdeci">#define NIFTI_XFORM_SCANNER_ANAT</div><div class="ttdef"><b>Definition:</b> nifti1.h:1219</div></div>
<div class="ttc" id="group__NIFTI1__XFORM__CODES_html_ga4159e2d4eb86e582c1f4b6c205b53108"><div class="ttname"><a href="../../d3/db1/group__NIFTI1__XFORM__CODES.html#ga4159e2d4eb86e582c1f4b6c205b53108">NIFTI_XFORM_TALAIRACH</a></div><div class="ttdeci">#define NIFTI_XFORM_TALAIRACH</div><div class="ttdef"><b>Definition:</b> nifti1.h:1229</div></div>
<div class="ttc" id="group__NIFTI1__XFORM__CODES_html_gae6c1f140dd22d735e396c2fb3b6334c6"><div class="ttname"><a href="../../d3/db1/group__NIFTI1__XFORM__CODES.html#gae6c1f140dd22d735e396c2fb3b6334c6">NIFTI_XFORM_ALIGNED_ANAT</a></div><div class="ttdeci">#define NIFTI_XFORM_ALIGNED_ANAT</div><div class="ttdef"><b>Definition:</b> nifti1.h:1224</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6b59987a39c86d4e247c953570784917"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6b59987a39c86d4e247c953570784917">&#9670;&nbsp;</a></span>old_swap_nifti_header()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void old_swap_nifti_header </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/d75/structnifti__1__header.html">nifti_1_header</a> *&#160;</td>
          <td class="paramname"><em>h</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>is_nifti</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>OLD VERSION of swap_nifti_header (left for undo/compare operations)</p>
<p>Byte swap NIFTI-1 file header in various places and ways.</p>
<p>If is_nifti is nonzero, will also swap the NIFTI-specific components of the header; otherwise, only the components common to NIFTI and ANALYZE will be swapped. </p>
<div class="fragment"><div class="line"><a name="l02386"></a><span class="lineno"> 2386</span>&#160;{</div><div class="line"><a name="l02387"></a><span class="lineno"> 2387</span>&#160;   <span class="comment">/* this stuff is always present, for ANALYZE and NIFTI */</span></div><div class="line"><a name="l02388"></a><span class="lineno"> 2388</span>&#160;</div><div class="line"><a name="l02389"></a><span class="lineno"> 2389</span>&#160;   swap_4(h-&gt;<a class="code" href="../../dd/d75/structnifti__1__header.html#af1d99efbd3af0180f9335cbb1b822248">sizeof_hdr</a>) ;</div><div class="line"><a name="l02390"></a><span class="lineno"> 2390</span>&#160;   <a class="code" href="../../d1/d14/nifti1__io_8c.html#a9c64a35264c605640a30af4eec6d99bc">nifti_swap_2bytes</a>( 8 , h-&gt;<a class="code" href="../../dd/d75/structnifti__1__header.html#ace3aeebb3c10362c5c2e48cee87a7f2e">dim</a> ) ;</div><div class="line"><a name="l02391"></a><span class="lineno"> 2391</span>&#160;   <a class="code" href="../../d1/d14/nifti1__io_8c.html#a53b22afe7c9c2520e831da6044823c39">nifti_swap_4bytes</a>( 8 , h-&gt;<a class="code" href="../../dd/d75/structnifti__1__header.html#afa546a9f49e7e080f952927d6bcdfbbe">pixdim</a> ) ;</div><div class="line"><a name="l02392"></a><span class="lineno"> 2392</span>&#160;</div><div class="line"><a name="l02393"></a><span class="lineno"> 2393</span>&#160;   swap_2(h-&gt;<a class="code" href="../../dd/d75/structnifti__1__header.html#ad5f8888fcc5fde14d3e387653721e270">datatype</a>) ;</div><div class="line"><a name="l02394"></a><span class="lineno"> 2394</span>&#160;   swap_2(h-&gt;<a class="code" href="../../dd/d75/structnifti__1__header.html#a60fc36ed5afd638fd7da425ad7ecae94">bitpix</a>) ;</div><div class="line"><a name="l02395"></a><span class="lineno"> 2395</span>&#160;</div><div class="line"><a name="l02396"></a><span class="lineno"> 2396</span>&#160;   swap_4(h-&gt;<a class="code" href="../../dd/d75/structnifti__1__header.html#aa3a09932cda88dd765a438c9b9c46503">vox_offset</a>); swap_4(h-&gt;<a class="code" href="../../dd/d75/structnifti__1__header.html#af415db2201f47d61354766245c3f2520">cal_max</a>); swap_4(h-&gt;<a class="code" href="../../dd/d75/structnifti__1__header.html#a600fb5b0c533454bbbc61b2e0696c9a8">cal_min</a>);</div><div class="line"><a name="l02397"></a><span class="lineno"> 2397</span>&#160;</div><div class="line"><a name="l02398"></a><span class="lineno"> 2398</span>&#160;   <span class="comment">/* this stuff is NIFTI specific */</span></div><div class="line"><a name="l02399"></a><span class="lineno"> 2399</span>&#160;</div><div class="line"><a name="l02400"></a><span class="lineno"> 2400</span>&#160;   <span class="keywordflow">if</span>( is_nifti ){</div><div class="line"><a name="l02401"></a><span class="lineno"> 2401</span>&#160;     swap_4(h-&gt;<a class="code" href="../../dd/d75/structnifti__1__header.html#a5c875c40271c15601b3389450fba85b3">intent_p1</a>); swap_4(h-&gt;<a class="code" href="../../dd/d75/structnifti__1__header.html#ab39ee04eb345e95dd4e5183e0f84c02b">intent_p2</a>); swap_4(h-&gt;<a class="code" href="../../dd/d75/structnifti__1__header.html#aa1eeee8a4cd325b413c5d368ec8fc534">intent_p3</a>);</div><div class="line"><a name="l02402"></a><span class="lineno"> 2402</span>&#160;     swap_2(h-&gt;<a class="code" href="../../dd/d75/structnifti__1__header.html#a017e9d430b66386e569c6b9cd11059ed">intent_code</a>);</div><div class="line"><a name="l02403"></a><span class="lineno"> 2403</span>&#160;</div><div class="line"><a name="l02404"></a><span class="lineno"> 2404</span>&#160;     swap_2(h-&gt;<a class="code" href="../../dd/d75/structnifti__1__header.html#adc0e937b2b556da163772b20da729778">slice_start</a>);    swap_2(h-&gt;<a class="code" href="../../dd/d75/structnifti__1__header.html#a260d55840377fe1bcfb49bda5f85b76c">slice_end</a>);</div><div class="line"><a name="l02405"></a><span class="lineno"> 2405</span>&#160;     swap_4(h-&gt;<a class="code" href="../../dd/d75/structnifti__1__header.html#a45a97dd330a77ab680ef91c47a761c29">scl_slope</a>);      swap_4(h-&gt;<a class="code" href="../../dd/d75/structnifti__1__header.html#aca24a8965851296a63d13da6c7cc3456">scl_inter</a>);</div><div class="line"><a name="l02406"></a><span class="lineno"> 2406</span>&#160;     swap_4(h-&gt;<a class="code" href="../../dd/d75/structnifti__1__header.html#a70400549d1f42d7f777915273576549b">slice_duration</a>); swap_4(h-&gt;<a class="code" href="../../dd/d75/structnifti__1__header.html#a0d2b669f776a2b7fb84807ea2f7b4231">toffset</a>);</div><div class="line"><a name="l02407"></a><span class="lineno"> 2407</span>&#160;</div><div class="line"><a name="l02408"></a><span class="lineno"> 2408</span>&#160;     swap_2(h-&gt;<a class="code" href="../../dd/d75/structnifti__1__header.html#a95ae85e5e0bba57c4b3cbd8a0b32168b">qform_code</a>); swap_2(h-&gt;<a class="code" href="../../dd/d75/structnifti__1__header.html#a48d14671528f3dfe0593320006877a8a">sform_code</a>);</div><div class="line"><a name="l02409"></a><span class="lineno"> 2409</span>&#160;     swap_4(h-&gt;<a class="code" href="../../dd/d75/structnifti__1__header.html#a530588bf405af52255dc064a6f451c71">quatern_b</a>); swap_4(h-&gt;<a class="code" href="../../dd/d75/structnifti__1__header.html#a3ade0b01649a3d990ee1dfdef8c452c4">quatern_c</a>); swap_4(h-&gt;<a class="code" href="../../dd/d75/structnifti__1__header.html#af47d0d4ae23f57441edcef9594fd1495">quatern_d</a>);</div><div class="line"><a name="l02410"></a><span class="lineno"> 2410</span>&#160;     swap_4(h-&gt;<a class="code" href="../../dd/d75/structnifti__1__header.html#a6fbfa89133238e59e6220e0b778c93ef">qoffset_x</a>); swap_4(h-&gt;<a class="code" href="../../dd/d75/structnifti__1__header.html#a5cfb257cbd7a4b7dde2350877cd126c5">qoffset_y</a>); swap_4(h-&gt;<a class="code" href="../../dd/d75/structnifti__1__header.html#a962002307f10b359788cea98ebcb40b6">qoffset_z</a>);</div><div class="line"><a name="l02411"></a><span class="lineno"> 2411</span>&#160;     <a class="code" href="../../d1/d14/nifti1__io_8c.html#a53b22afe7c9c2520e831da6044823c39">nifti_swap_4bytes</a>(4,h-&gt;<a class="code" href="../../dd/d75/structnifti__1__header.html#ab672320f8968eb98b208b340c87515ba">srow_x</a>);</div><div class="line"><a name="l02412"></a><span class="lineno"> 2412</span>&#160;     <a class="code" href="../../d1/d14/nifti1__io_8c.html#a53b22afe7c9c2520e831da6044823c39">nifti_swap_4bytes</a>(4,h-&gt;<a class="code" href="../../dd/d75/structnifti__1__header.html#ae5572284c9945360d4fa5c3b4e734a99">srow_y</a>);</div><div class="line"><a name="l02413"></a><span class="lineno"> 2413</span>&#160;     <a class="code" href="../../d1/d14/nifti1__io_8c.html#a53b22afe7c9c2520e831da6044823c39">nifti_swap_4bytes</a>(4,h-&gt;<a class="code" href="../../dd/d75/structnifti__1__header.html#ac2cbc8f49e749336687f095733d0b4a3">srow_z</a>);</div><div class="line"><a name="l02414"></a><span class="lineno"> 2414</span>&#160;   }</div><div class="line"><a name="l02415"></a><span class="lineno"> 2415</span>&#160;   return ;</div><div class="line"><a name="l02416"></a><span class="lineno"> 2416</span>&#160;}</div><div class="ttc" id="structnifti__1__header_html_aca24a8965851296a63d13da6c7cc3456"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#aca24a8965851296a63d13da6c7cc3456">nifti_1_header::scl_inter</a></div><div class="ttdeci">float scl_inter</div><div class="ttdef"><b>Definition:</b> nifti1.h:171</div></div>
<div class="ttc" id="structnifti__1__header_html_af1d99efbd3af0180f9335cbb1b822248"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#af1d99efbd3af0180f9335cbb1b822248">nifti_1_header::sizeof_hdr</a></div><div class="ttdeci">int sizeof_hdr</div><div class="ttdef"><b>Definition:</b> nifti1.h:148</div></div>
<div class="ttc" id="structnifti__1__header_html_a6fbfa89133238e59e6220e0b778c93ef"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#a6fbfa89133238e59e6220e0b778c93ef">nifti_1_header::qoffset_x</a></div><div class="ttdeci">float qoffset_x</div><div class="ttdef"><b>Definition:</b> nifti1.h:192</div></div>
<div class="ttc" id="structnifti__1__header_html_a5cfb257cbd7a4b7dde2350877cd126c5"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#a5cfb257cbd7a4b7dde2350877cd126c5">nifti_1_header::qoffset_y</a></div><div class="ttdeci">float qoffset_y</div><div class="ttdef"><b>Definition:</b> nifti1.h:193</div></div>
<div class="ttc" id="structnifti__1__header_html_a60fc36ed5afd638fd7da425ad7ecae94"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#a60fc36ed5afd638fd7da425ad7ecae94">nifti_1_header::bitpix</a></div><div class="ttdeci">short bitpix</div><div class="ttdef"><b>Definition:</b> nifti1.h:166</div></div>
<div class="ttc" id="structnifti__1__header_html_a3ade0b01649a3d990ee1dfdef8c452c4"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#a3ade0b01649a3d990ee1dfdef8c452c4">nifti_1_header::quatern_c</a></div><div class="ttdeci">float quatern_c</div><div class="ttdef"><b>Definition:</b> nifti1.h:190</div></div>
<div class="ttc" id="structnifti__1__header_html_a48d14671528f3dfe0593320006877a8a"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#a48d14671528f3dfe0593320006877a8a">nifti_1_header::sform_code</a></div><div class="ttdeci">short sform_code</div><div class="ttdef"><b>Definition:</b> nifti1.h:187</div></div>
<div class="ttc" id="structnifti__1__header_html_a600fb5b0c533454bbbc61b2e0696c9a8"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#a600fb5b0c533454bbbc61b2e0696c9a8">nifti_1_header::cal_min</a></div><div class="ttdeci">float cal_min</div><div class="ttdef"><b>Definition:</b> nifti1.h:176</div></div>
<div class="ttc" id="structnifti__1__header_html_ad5f8888fcc5fde14d3e387653721e270"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#ad5f8888fcc5fde14d3e387653721e270">nifti_1_header::datatype</a></div><div class="ttdeci">short datatype</div><div class="ttdef"><b>Definition:</b> nifti1.h:165</div></div>
<div class="ttc" id="structnifti__1__header_html_aa1eeee8a4cd325b413c5d368ec8fc534"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#aa1eeee8a4cd325b413c5d368ec8fc534">nifti_1_header::intent_p3</a></div><div class="ttdeci">float intent_p3</div><div class="ttdef"><b>Definition:</b> nifti1.h:162</div></div>
<div class="ttc" id="structnifti__1__header_html_a017e9d430b66386e569c6b9cd11059ed"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#a017e9d430b66386e569c6b9cd11059ed">nifti_1_header::intent_code</a></div><div class="ttdeci">short intent_code</div><div class="ttdef"><b>Definition:</b> nifti1.h:164</div></div>
<div class="ttc" id="structnifti__1__header_html_ace3aeebb3c10362c5c2e48cee87a7f2e"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#ace3aeebb3c10362c5c2e48cee87a7f2e">nifti_1_header::dim</a></div><div class="ttdeci">short dim[8]</div><div class="ttdef"><b>Definition:</b> nifti1.h:157</div></div>
<div class="ttc" id="structnifti__1__header_html_aa3a09932cda88dd765a438c9b9c46503"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#aa3a09932cda88dd765a438c9b9c46503">nifti_1_header::vox_offset</a></div><div class="ttdeci">float vox_offset</div><div class="ttdef"><b>Definition:</b> nifti1.h:169</div></div>
<div class="ttc" id="structnifti__1__header_html_afa546a9f49e7e080f952927d6bcdfbbe"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#afa546a9f49e7e080f952927d6bcdfbbe">nifti_1_header::pixdim</a></div><div class="ttdeci">float pixdim[8]</div><div class="ttdef"><b>Definition:</b> nifti1.h:168</div></div>
<div class="ttc" id="nifti1__io_8c_html_a53b22afe7c9c2520e831da6044823c39"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#a53b22afe7c9c2520e831da6044823c39">nifti_swap_4bytes</a></div><div class="ttdeci">void nifti_swap_4bytes(size_t n, void *ar)</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:2156</div></div>
<div class="ttc" id="structnifti__1__header_html_ac2cbc8f49e749336687f095733d0b4a3"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#ac2cbc8f49e749336687f095733d0b4a3">nifti_1_header::srow_z</a></div><div class="ttdeci">float srow_z[4]</div><div class="ttdef"><b>Definition:</b> nifti1.h:198</div></div>
<div class="ttc" id="structnifti__1__header_html_a530588bf405af52255dc064a6f451c71"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#a530588bf405af52255dc064a6f451c71">nifti_1_header::quatern_b</a></div><div class="ttdeci">float quatern_b</div><div class="ttdef"><b>Definition:</b> nifti1.h:189</div></div>
<div class="ttc" id="structnifti__1__header_html_a95ae85e5e0bba57c4b3cbd8a0b32168b"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#a95ae85e5e0bba57c4b3cbd8a0b32168b">nifti_1_header::qform_code</a></div><div class="ttdeci">short qform_code</div><div class="ttdef"><b>Definition:</b> nifti1.h:186</div></div>
<div class="ttc" id="structnifti__1__header_html_ab39ee04eb345e95dd4e5183e0f84c02b"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#ab39ee04eb345e95dd4e5183e0f84c02b">nifti_1_header::intent_p2</a></div><div class="ttdeci">float intent_p2</div><div class="ttdef"><b>Definition:</b> nifti1.h:160</div></div>
<div class="ttc" id="structnifti__1__header_html_a5c875c40271c15601b3389450fba85b3"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#a5c875c40271c15601b3389450fba85b3">nifti_1_header::intent_p1</a></div><div class="ttdeci">float intent_p1</div><div class="ttdef"><b>Definition:</b> nifti1.h:158</div></div>
<div class="ttc" id="structnifti__1__header_html_af415db2201f47d61354766245c3f2520"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#af415db2201f47d61354766245c3f2520">nifti_1_header::cal_max</a></div><div class="ttdeci">float cal_max</div><div class="ttdef"><b>Definition:</b> nifti1.h:175</div></div>
<div class="ttc" id="structnifti__1__header_html_adc0e937b2b556da163772b20da729778"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#adc0e937b2b556da163772b20da729778">nifti_1_header::slice_start</a></div><div class="ttdeci">short slice_start</div><div class="ttdef"><b>Definition:</b> nifti1.h:167</div></div>
<div class="ttc" id="structnifti__1__header_html_a45a97dd330a77ab680ef91c47a761c29"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#a45a97dd330a77ab680ef91c47a761c29">nifti_1_header::scl_slope</a></div><div class="ttdeci">float scl_slope</div><div class="ttdef"><b>Definition:</b> nifti1.h:170</div></div>
<div class="ttc" id="structnifti__1__header_html_ae5572284c9945360d4fa5c3b4e734a99"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#ae5572284c9945360d4fa5c3b4e734a99">nifti_1_header::srow_y</a></div><div class="ttdeci">float srow_y[4]</div><div class="ttdef"><b>Definition:</b> nifti1.h:197</div></div>
<div class="ttc" id="structnifti__1__header_html_af47d0d4ae23f57441edcef9594fd1495"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#af47d0d4ae23f57441edcef9594fd1495">nifti_1_header::quatern_d</a></div><div class="ttdeci">float quatern_d</div><div class="ttdef"><b>Definition:</b> nifti1.h:191</div></div>
<div class="ttc" id="nifti1__io_8c_html_a9c64a35264c605640a30af4eec6d99bc"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#a9c64a35264c605640a30af4eec6d99bc">nifti_swap_2bytes</a></div><div class="ttdeci">void nifti_swap_2bytes(size_t n, void *ar)</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:2139</div></div>
<div class="ttc" id="structnifti__1__header_html_a0d2b669f776a2b7fb84807ea2f7b4231"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#a0d2b669f776a2b7fb84807ea2f7b4231">nifti_1_header::toffset</a></div><div class="ttdeci">float toffset</div><div class="ttdef"><b>Definition:</b> nifti1.h:178</div></div>
<div class="ttc" id="structnifti__1__header_html_a962002307f10b359788cea98ebcb40b6"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#a962002307f10b359788cea98ebcb40b6">nifti_1_header::qoffset_z</a></div><div class="ttdeci">float qoffset_z</div><div class="ttdef"><b>Definition:</b> nifti1.h:194</div></div>
<div class="ttc" id="structnifti__1__header_html_ab672320f8968eb98b208b340c87515ba"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#ab672320f8968eb98b208b340c87515ba">nifti_1_header::srow_x</a></div><div class="ttdeci">float srow_x[4]</div><div class="ttdef"><b>Definition:</b> nifti1.h:196</div></div>
<div class="ttc" id="structnifti__1__header_html_a260d55840377fe1bcfb49bda5f85b76c"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#a260d55840377fe1bcfb49bda5f85b76c">nifti_1_header::slice_end</a></div><div class="ttdeci">short slice_end</div><div class="ttdef"><b>Definition:</b> nifti1.h:172</div></div>
<div class="ttc" id="structnifti__1__header_html_a70400549d1f42d7f777915273576549b"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#a70400549d1f42d7f777915273576549b">nifti_1_header::slice_duration</a></div><div class="ttdeci">float slice_duration</div><div class="ttdef"><b>Definition:</b> nifti1.h:177</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a50dc91b6264f53456387f95907bc86ee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a50dc91b6264f53456387f95907bc86ee">&#9670;&nbsp;</a></span>swap_nifti_header()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void swap_nifti_header </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/d75/structnifti__1__header.html">nifti_1_header</a> *&#160;</td>
          <td class="paramname"><em>h</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>is_nifti</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Byte swap NIFTI-1 file header in various places and ways.</p>
<p>If is_nifti, swap all (even UNUSED) fields of NIfTI header. Else, swap as a <a class="el" href="../../de/d05/structnifti__analyze75.html">nifti_analyze75</a> struct. </p>
<div class="fragment"><div class="line"><a name="l02267"></a><span class="lineno"> 2267</span>&#160;{</div><div class="line"><a name="l02268"></a><span class="lineno"> 2268</span>&#160;</div><div class="line"><a name="l02269"></a><span class="lineno"> 2269</span>&#160;   <span class="comment">/* if ANALYZE, swap as such and return */</span></div><div class="line"><a name="l02270"></a><span class="lineno"> 2270</span>&#160;   <span class="keywordflow">if</span>( ! is_nifti ) {</div><div class="line"><a name="l02271"></a><span class="lineno"> 2271</span>&#160;      <a class="code" href="../../d1/d14/nifti1__io_8c.html#a08ff63c999a17b9a7343a5918d73d414">nifti_swap_as_analyze</a>((<a class="code" href="../../de/d05/structnifti__analyze75.html">nifti_analyze75</a> *)h);</div><div class="line"><a name="l02272"></a><span class="lineno"> 2272</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l02273"></a><span class="lineno"> 2273</span>&#160;   }</div><div class="line"><a name="l02274"></a><span class="lineno"> 2274</span>&#160;</div><div class="line"><a name="l02275"></a><span class="lineno"> 2275</span>&#160;   <span class="comment">/* otherwise, swap all NIFTI fields */</span></div><div class="line"><a name="l02276"></a><span class="lineno"> 2276</span>&#160;</div><div class="line"><a name="l02277"></a><span class="lineno"> 2277</span>&#160;   <a class="code" href="../../d1/d14/nifti1__io_8c.html#a53b22afe7c9c2520e831da6044823c39">nifti_swap_4bytes</a>(1, &amp;h-&gt;<a class="code" href="../../dd/d75/structnifti__1__header.html#af1d99efbd3af0180f9335cbb1b822248">sizeof_hdr</a>);</div><div class="line"><a name="l02278"></a><span class="lineno"> 2278</span>&#160;   <a class="code" href="../../d1/d14/nifti1__io_8c.html#a53b22afe7c9c2520e831da6044823c39">nifti_swap_4bytes</a>(1, &amp;h-&gt;<a class="code" href="../../dd/d75/structnifti__1__header.html#ab37ea6af93cab84f95d97ee4fdbc3f4d">extents</a>);</div><div class="line"><a name="l02279"></a><span class="lineno"> 2279</span>&#160;   <a class="code" href="../../d1/d14/nifti1__io_8c.html#a9c64a35264c605640a30af4eec6d99bc">nifti_swap_2bytes</a>(1, &amp;h-&gt;<a class="code" href="../../dd/d75/structnifti__1__header.html#a1011d5320abdedcb710552cae92f86db">session_error</a>);</div><div class="line"><a name="l02280"></a><span class="lineno"> 2280</span>&#160;</div><div class="line"><a name="l02281"></a><span class="lineno"> 2281</span>&#160;   <a class="code" href="../../d1/d14/nifti1__io_8c.html#a9c64a35264c605640a30af4eec6d99bc">nifti_swap_2bytes</a>(8, h-&gt;<a class="code" href="../../dd/d75/structnifti__1__header.html#ace3aeebb3c10362c5c2e48cee87a7f2e">dim</a>);</div><div class="line"><a name="l02282"></a><span class="lineno"> 2282</span>&#160;   <a class="code" href="../../d1/d14/nifti1__io_8c.html#a53b22afe7c9c2520e831da6044823c39">nifti_swap_4bytes</a>(1, &amp;h-&gt;<a class="code" href="../../dd/d75/structnifti__1__header.html#a5c875c40271c15601b3389450fba85b3">intent_p1</a>);</div><div class="line"><a name="l02283"></a><span class="lineno"> 2283</span>&#160;   <a class="code" href="../../d1/d14/nifti1__io_8c.html#a53b22afe7c9c2520e831da6044823c39">nifti_swap_4bytes</a>(1, &amp;h-&gt;<a class="code" href="../../dd/d75/structnifti__1__header.html#ab39ee04eb345e95dd4e5183e0f84c02b">intent_p2</a>);</div><div class="line"><a name="l02284"></a><span class="lineno"> 2284</span>&#160;   <a class="code" href="../../d1/d14/nifti1__io_8c.html#a53b22afe7c9c2520e831da6044823c39">nifti_swap_4bytes</a>(1, &amp;h-&gt;<a class="code" href="../../dd/d75/structnifti__1__header.html#aa1eeee8a4cd325b413c5d368ec8fc534">intent_p3</a>);</div><div class="line"><a name="l02285"></a><span class="lineno"> 2285</span>&#160;</div><div class="line"><a name="l02286"></a><span class="lineno"> 2286</span>&#160;   <a class="code" href="../../d1/d14/nifti1__io_8c.html#a9c64a35264c605640a30af4eec6d99bc">nifti_swap_2bytes</a>(1, &amp;h-&gt;<a class="code" href="../../dd/d75/structnifti__1__header.html#a017e9d430b66386e569c6b9cd11059ed">intent_code</a>);</div><div class="line"><a name="l02287"></a><span class="lineno"> 2287</span>&#160;   <a class="code" href="../../d1/d14/nifti1__io_8c.html#a9c64a35264c605640a30af4eec6d99bc">nifti_swap_2bytes</a>(1, &amp;h-&gt;<a class="code" href="../../dd/d75/structnifti__1__header.html#ad5f8888fcc5fde14d3e387653721e270">datatype</a>);</div><div class="line"><a name="l02288"></a><span class="lineno"> 2288</span>&#160;   <a class="code" href="../../d1/d14/nifti1__io_8c.html#a9c64a35264c605640a30af4eec6d99bc">nifti_swap_2bytes</a>(1, &amp;h-&gt;<a class="code" href="../../dd/d75/structnifti__1__header.html#a60fc36ed5afd638fd7da425ad7ecae94">bitpix</a>);</div><div class="line"><a name="l02289"></a><span class="lineno"> 2289</span>&#160;   <a class="code" href="../../d1/d14/nifti1__io_8c.html#a9c64a35264c605640a30af4eec6d99bc">nifti_swap_2bytes</a>(1, &amp;h-&gt;<a class="code" href="../../dd/d75/structnifti__1__header.html#adc0e937b2b556da163772b20da729778">slice_start</a>);</div><div class="line"><a name="l02290"></a><span class="lineno"> 2290</span>&#160;</div><div class="line"><a name="l02291"></a><span class="lineno"> 2291</span>&#160;   <a class="code" href="../../d1/d14/nifti1__io_8c.html#a53b22afe7c9c2520e831da6044823c39">nifti_swap_4bytes</a>(8, h-&gt;<a class="code" href="../../dd/d75/structnifti__1__header.html#afa546a9f49e7e080f952927d6bcdfbbe">pixdim</a>);</div><div class="line"><a name="l02292"></a><span class="lineno"> 2292</span>&#160;</div><div class="line"><a name="l02293"></a><span class="lineno"> 2293</span>&#160;   <a class="code" href="../../d1/d14/nifti1__io_8c.html#a53b22afe7c9c2520e831da6044823c39">nifti_swap_4bytes</a>(1, &amp;h-&gt;<a class="code" href="../../dd/d75/structnifti__1__header.html#aa3a09932cda88dd765a438c9b9c46503">vox_offset</a>);</div><div class="line"><a name="l02294"></a><span class="lineno"> 2294</span>&#160;   <a class="code" href="../../d1/d14/nifti1__io_8c.html#a53b22afe7c9c2520e831da6044823c39">nifti_swap_4bytes</a>(1, &amp;h-&gt;<a class="code" href="../../dd/d75/structnifti__1__header.html#a45a97dd330a77ab680ef91c47a761c29">scl_slope</a>);</div><div class="line"><a name="l02295"></a><span class="lineno"> 2295</span>&#160;   <a class="code" href="../../d1/d14/nifti1__io_8c.html#a53b22afe7c9c2520e831da6044823c39">nifti_swap_4bytes</a>(1, &amp;h-&gt;<a class="code" href="../../dd/d75/structnifti__1__header.html#aca24a8965851296a63d13da6c7cc3456">scl_inter</a>);</div><div class="line"><a name="l02296"></a><span class="lineno"> 2296</span>&#160;   <a class="code" href="../../d1/d14/nifti1__io_8c.html#a9c64a35264c605640a30af4eec6d99bc">nifti_swap_2bytes</a>(1, &amp;h-&gt;<a class="code" href="../../dd/d75/structnifti__1__header.html#a260d55840377fe1bcfb49bda5f85b76c">slice_end</a>);</div><div class="line"><a name="l02297"></a><span class="lineno"> 2297</span>&#160;</div><div class="line"><a name="l02298"></a><span class="lineno"> 2298</span>&#160;   <a class="code" href="../../d1/d14/nifti1__io_8c.html#a53b22afe7c9c2520e831da6044823c39">nifti_swap_4bytes</a>(1, &amp;h-&gt;<a class="code" href="../../dd/d75/structnifti__1__header.html#af415db2201f47d61354766245c3f2520">cal_max</a>);</div><div class="line"><a name="l02299"></a><span class="lineno"> 2299</span>&#160;   <a class="code" href="../../d1/d14/nifti1__io_8c.html#a53b22afe7c9c2520e831da6044823c39">nifti_swap_4bytes</a>(1, &amp;h-&gt;<a class="code" href="../../dd/d75/structnifti__1__header.html#a600fb5b0c533454bbbc61b2e0696c9a8">cal_min</a>);</div><div class="line"><a name="l02300"></a><span class="lineno"> 2300</span>&#160;   <a class="code" href="../../d1/d14/nifti1__io_8c.html#a53b22afe7c9c2520e831da6044823c39">nifti_swap_4bytes</a>(1, &amp;h-&gt;<a class="code" href="../../dd/d75/structnifti__1__header.html#a70400549d1f42d7f777915273576549b">slice_duration</a>);</div><div class="line"><a name="l02301"></a><span class="lineno"> 2301</span>&#160;   <a class="code" href="../../d1/d14/nifti1__io_8c.html#a53b22afe7c9c2520e831da6044823c39">nifti_swap_4bytes</a>(1, &amp;h-&gt;<a class="code" href="../../dd/d75/structnifti__1__header.html#a0d2b669f776a2b7fb84807ea2f7b4231">toffset</a>);</div><div class="line"><a name="l02302"></a><span class="lineno"> 2302</span>&#160;   <a class="code" href="../../d1/d14/nifti1__io_8c.html#a53b22afe7c9c2520e831da6044823c39">nifti_swap_4bytes</a>(1, &amp;h-&gt;<a class="code" href="../../dd/d75/structnifti__1__header.html#a07e91b15b45a914b71ff41f93fe64e56">glmax</a>);</div><div class="line"><a name="l02303"></a><span class="lineno"> 2303</span>&#160;   <a class="code" href="../../d1/d14/nifti1__io_8c.html#a53b22afe7c9c2520e831da6044823c39">nifti_swap_4bytes</a>(1, &amp;h-&gt;<a class="code" href="../../dd/d75/structnifti__1__header.html#acc037ae9773f9e79333f0927ed3a38ce">glmin</a>);</div><div class="line"><a name="l02304"></a><span class="lineno"> 2304</span>&#160;</div><div class="line"><a name="l02305"></a><span class="lineno"> 2305</span>&#160;   <a class="code" href="../../d1/d14/nifti1__io_8c.html#a9c64a35264c605640a30af4eec6d99bc">nifti_swap_2bytes</a>(1, &amp;h-&gt;<a class="code" href="../../dd/d75/structnifti__1__header.html#a95ae85e5e0bba57c4b3cbd8a0b32168b">qform_code</a>);</div><div class="line"><a name="l02306"></a><span class="lineno"> 2306</span>&#160;   <a class="code" href="../../d1/d14/nifti1__io_8c.html#a9c64a35264c605640a30af4eec6d99bc">nifti_swap_2bytes</a>(1, &amp;h-&gt;<a class="code" href="../../dd/d75/structnifti__1__header.html#a48d14671528f3dfe0593320006877a8a">sform_code</a>);</div><div class="line"><a name="l02307"></a><span class="lineno"> 2307</span>&#160;</div><div class="line"><a name="l02308"></a><span class="lineno"> 2308</span>&#160;   <a class="code" href="../../d1/d14/nifti1__io_8c.html#a53b22afe7c9c2520e831da6044823c39">nifti_swap_4bytes</a>(1, &amp;h-&gt;<a class="code" href="../../dd/d75/structnifti__1__header.html#a530588bf405af52255dc064a6f451c71">quatern_b</a>);</div><div class="line"><a name="l02309"></a><span class="lineno"> 2309</span>&#160;   <a class="code" href="../../d1/d14/nifti1__io_8c.html#a53b22afe7c9c2520e831da6044823c39">nifti_swap_4bytes</a>(1, &amp;h-&gt;<a class="code" href="../../dd/d75/structnifti__1__header.html#a3ade0b01649a3d990ee1dfdef8c452c4">quatern_c</a>);</div><div class="line"><a name="l02310"></a><span class="lineno"> 2310</span>&#160;   <a class="code" href="../../d1/d14/nifti1__io_8c.html#a53b22afe7c9c2520e831da6044823c39">nifti_swap_4bytes</a>(1, &amp;h-&gt;<a class="code" href="../../dd/d75/structnifti__1__header.html#af47d0d4ae23f57441edcef9594fd1495">quatern_d</a>);</div><div class="line"><a name="l02311"></a><span class="lineno"> 2311</span>&#160;   <a class="code" href="../../d1/d14/nifti1__io_8c.html#a53b22afe7c9c2520e831da6044823c39">nifti_swap_4bytes</a>(1, &amp;h-&gt;<a class="code" href="../../dd/d75/structnifti__1__header.html#a6fbfa89133238e59e6220e0b778c93ef">qoffset_x</a>);</div><div class="line"><a name="l02312"></a><span class="lineno"> 2312</span>&#160;   <a class="code" href="../../d1/d14/nifti1__io_8c.html#a53b22afe7c9c2520e831da6044823c39">nifti_swap_4bytes</a>(1, &amp;h-&gt;<a class="code" href="../../dd/d75/structnifti__1__header.html#a5cfb257cbd7a4b7dde2350877cd126c5">qoffset_y</a>);</div><div class="line"><a name="l02313"></a><span class="lineno"> 2313</span>&#160;   <a class="code" href="../../d1/d14/nifti1__io_8c.html#a53b22afe7c9c2520e831da6044823c39">nifti_swap_4bytes</a>(1, &amp;h-&gt;<a class="code" href="../../dd/d75/structnifti__1__header.html#a962002307f10b359788cea98ebcb40b6">qoffset_z</a>);</div><div class="line"><a name="l02314"></a><span class="lineno"> 2314</span>&#160;</div><div class="line"><a name="l02315"></a><span class="lineno"> 2315</span>&#160;   <a class="code" href="../../d1/d14/nifti1__io_8c.html#a53b22afe7c9c2520e831da6044823c39">nifti_swap_4bytes</a>(4, h-&gt;<a class="code" href="../../dd/d75/structnifti__1__header.html#ab672320f8968eb98b208b340c87515ba">srow_x</a>);</div><div class="line"><a name="l02316"></a><span class="lineno"> 2316</span>&#160;   <a class="code" href="../../d1/d14/nifti1__io_8c.html#a53b22afe7c9c2520e831da6044823c39">nifti_swap_4bytes</a>(4, h-&gt;<a class="code" href="../../dd/d75/structnifti__1__header.html#ae5572284c9945360d4fa5c3b4e734a99">srow_y</a>);</div><div class="line"><a name="l02317"></a><span class="lineno"> 2317</span>&#160;   <a class="code" href="../../d1/d14/nifti1__io_8c.html#a53b22afe7c9c2520e831da6044823c39">nifti_swap_4bytes</a>(4, h-&gt;<a class="code" href="../../dd/d75/structnifti__1__header.html#ac2cbc8f49e749336687f095733d0b4a3">srow_z</a>);</div><div class="line"><a name="l02318"></a><span class="lineno"> 2318</span>&#160;</div><div class="line"><a name="l02319"></a><span class="lineno"> 2319</span>&#160;   return ;</div><div class="line"><a name="l02320"></a><span class="lineno"> 2320</span>&#160;}</div><div class="ttc" id="structnifti__1__header_html_acc037ae9773f9e79333f0927ed3a38ce"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#acc037ae9773f9e79333f0927ed3a38ce">nifti_1_header::glmin</a></div><div class="ttdeci">int glmin</div><div class="ttdef"><b>Definition:</b> nifti1.h:180</div></div>
<div class="ttc" id="structnifti__1__header_html_a1011d5320abdedcb710552cae92f86db"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#a1011d5320abdedcb710552cae92f86db">nifti_1_header::session_error</a></div><div class="ttdeci">short session_error</div><div class="ttdef"><b>Definition:</b> nifti1.h:152</div></div>
<div class="ttc" id="structnifti__1__header_html_a07e91b15b45a914b71ff41f93fe64e56"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#a07e91b15b45a914b71ff41f93fe64e56">nifti_1_header::glmax</a></div><div class="ttdeci">int glmax</div><div class="ttdef"><b>Definition:</b> nifti1.h:179</div></div>
<div class="ttc" id="structnifti__1__header_html_aca24a8965851296a63d13da6c7cc3456"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#aca24a8965851296a63d13da6c7cc3456">nifti_1_header::scl_inter</a></div><div class="ttdeci">float scl_inter</div><div class="ttdef"><b>Definition:</b> nifti1.h:171</div></div>
<div class="ttc" id="structnifti__1__header_html_af1d99efbd3af0180f9335cbb1b822248"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#af1d99efbd3af0180f9335cbb1b822248">nifti_1_header::sizeof_hdr</a></div><div class="ttdeci">int sizeof_hdr</div><div class="ttdef"><b>Definition:</b> nifti1.h:148</div></div>
<div class="ttc" id="structnifti__1__header_html_a6fbfa89133238e59e6220e0b778c93ef"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#a6fbfa89133238e59e6220e0b778c93ef">nifti_1_header::qoffset_x</a></div><div class="ttdeci">float qoffset_x</div><div class="ttdef"><b>Definition:</b> nifti1.h:192</div></div>
<div class="ttc" id="structnifti__1__header_html_a5cfb257cbd7a4b7dde2350877cd126c5"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#a5cfb257cbd7a4b7dde2350877cd126c5">nifti_1_header::qoffset_y</a></div><div class="ttdeci">float qoffset_y</div><div class="ttdef"><b>Definition:</b> nifti1.h:193</div></div>
<div class="ttc" id="structnifti__1__header_html_a60fc36ed5afd638fd7da425ad7ecae94"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#a60fc36ed5afd638fd7da425ad7ecae94">nifti_1_header::bitpix</a></div><div class="ttdeci">short bitpix</div><div class="ttdef"><b>Definition:</b> nifti1.h:166</div></div>
<div class="ttc" id="structnifti__1__header_html_a3ade0b01649a3d990ee1dfdef8c452c4"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#a3ade0b01649a3d990ee1dfdef8c452c4">nifti_1_header::quatern_c</a></div><div class="ttdeci">float quatern_c</div><div class="ttdef"><b>Definition:</b> nifti1.h:190</div></div>
<div class="ttc" id="structnifti__1__header_html_a48d14671528f3dfe0593320006877a8a"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#a48d14671528f3dfe0593320006877a8a">nifti_1_header::sform_code</a></div><div class="ttdeci">short sform_code</div><div class="ttdef"><b>Definition:</b> nifti1.h:187</div></div>
<div class="ttc" id="structnifti__1__header_html_a600fb5b0c533454bbbc61b2e0696c9a8"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#a600fb5b0c533454bbbc61b2e0696c9a8">nifti_1_header::cal_min</a></div><div class="ttdeci">float cal_min</div><div class="ttdef"><b>Definition:</b> nifti1.h:176</div></div>
<div class="ttc" id="structnifti__1__header_html_ad5f8888fcc5fde14d3e387653721e270"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#ad5f8888fcc5fde14d3e387653721e270">nifti_1_header::datatype</a></div><div class="ttdeci">short datatype</div><div class="ttdef"><b>Definition:</b> nifti1.h:165</div></div>
<div class="ttc" id="structnifti__1__header_html_aa1eeee8a4cd325b413c5d368ec8fc534"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#aa1eeee8a4cd325b413c5d368ec8fc534">nifti_1_header::intent_p3</a></div><div class="ttdeci">float intent_p3</div><div class="ttdef"><b>Definition:</b> nifti1.h:162</div></div>
<div class="ttc" id="structnifti__1__header_html_a017e9d430b66386e569c6b9cd11059ed"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#a017e9d430b66386e569c6b9cd11059ed">nifti_1_header::intent_code</a></div><div class="ttdeci">short intent_code</div><div class="ttdef"><b>Definition:</b> nifti1.h:164</div></div>
<div class="ttc" id="structnifti__1__header_html_ace3aeebb3c10362c5c2e48cee87a7f2e"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#ace3aeebb3c10362c5c2e48cee87a7f2e">nifti_1_header::dim</a></div><div class="ttdeci">short dim[8]</div><div class="ttdef"><b>Definition:</b> nifti1.h:157</div></div>
<div class="ttc" id="structnifti__1__header_html_aa3a09932cda88dd765a438c9b9c46503"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#aa3a09932cda88dd765a438c9b9c46503">nifti_1_header::vox_offset</a></div><div class="ttdeci">float vox_offset</div><div class="ttdef"><b>Definition:</b> nifti1.h:169</div></div>
<div class="ttc" id="structnifti__1__header_html_afa546a9f49e7e080f952927d6bcdfbbe"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#afa546a9f49e7e080f952927d6bcdfbbe">nifti_1_header::pixdim</a></div><div class="ttdeci">float pixdim[8]</div><div class="ttdef"><b>Definition:</b> nifti1.h:168</div></div>
<div class="ttc" id="nifti1__io_8c_html_a53b22afe7c9c2520e831da6044823c39"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#a53b22afe7c9c2520e831da6044823c39">nifti_swap_4bytes</a></div><div class="ttdeci">void nifti_swap_4bytes(size_t n, void *ar)</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:2156</div></div>
<div class="ttc" id="nifti1__io_8c_html_a08ff63c999a17b9a7343a5918d73d414"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#a08ff63c999a17b9a7343a5918d73d414">nifti_swap_as_analyze</a></div><div class="ttdeci">int nifti_swap_as_analyze(nifti_analyze75 *h)</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:2327</div></div>
<div class="ttc" id="structnifti__1__header_html_ac2cbc8f49e749336687f095733d0b4a3"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#ac2cbc8f49e749336687f095733d0b4a3">nifti_1_header::srow_z</a></div><div class="ttdeci">float srow_z[4]</div><div class="ttdef"><b>Definition:</b> nifti1.h:198</div></div>
<div class="ttc" id="structnifti__1__header_html_a530588bf405af52255dc064a6f451c71"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#a530588bf405af52255dc064a6f451c71">nifti_1_header::quatern_b</a></div><div class="ttdeci">float quatern_b</div><div class="ttdef"><b>Definition:</b> nifti1.h:189</div></div>
<div class="ttc" id="structnifti__1__header_html_a95ae85e5e0bba57c4b3cbd8a0b32168b"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#a95ae85e5e0bba57c4b3cbd8a0b32168b">nifti_1_header::qform_code</a></div><div class="ttdeci">short qform_code</div><div class="ttdef"><b>Definition:</b> nifti1.h:186</div></div>
<div class="ttc" id="structnifti__1__header_html_ab39ee04eb345e95dd4e5183e0f84c02b"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#ab39ee04eb345e95dd4e5183e0f84c02b">nifti_1_header::intent_p2</a></div><div class="ttdeci">float intent_p2</div><div class="ttdef"><b>Definition:</b> nifti1.h:160</div></div>
<div class="ttc" id="structnifti__1__header_html_a5c875c40271c15601b3389450fba85b3"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#a5c875c40271c15601b3389450fba85b3">nifti_1_header::intent_p1</a></div><div class="ttdeci">float intent_p1</div><div class="ttdef"><b>Definition:</b> nifti1.h:158</div></div>
<div class="ttc" id="structnifti__1__header_html_ab37ea6af93cab84f95d97ee4fdbc3f4d"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#ab37ea6af93cab84f95d97ee4fdbc3f4d">nifti_1_header::extents</a></div><div class="ttdeci">int extents</div><div class="ttdef"><b>Definition:</b> nifti1.h:151</div></div>
<div class="ttc" id="structnifti__1__header_html_af415db2201f47d61354766245c3f2520"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#af415db2201f47d61354766245c3f2520">nifti_1_header::cal_max</a></div><div class="ttdeci">float cal_max</div><div class="ttdef"><b>Definition:</b> nifti1.h:175</div></div>
<div class="ttc" id="structnifti__1__header_html_adc0e937b2b556da163772b20da729778"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#adc0e937b2b556da163772b20da729778">nifti_1_header::slice_start</a></div><div class="ttdeci">short slice_start</div><div class="ttdef"><b>Definition:</b> nifti1.h:167</div></div>
<div class="ttc" id="structnifti__1__header_html_a45a97dd330a77ab680ef91c47a761c29"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#a45a97dd330a77ab680ef91c47a761c29">nifti_1_header::scl_slope</a></div><div class="ttdeci">float scl_slope</div><div class="ttdef"><b>Definition:</b> nifti1.h:170</div></div>
<div class="ttc" id="structnifti__1__header_html_ae5572284c9945360d4fa5c3b4e734a99"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#ae5572284c9945360d4fa5c3b4e734a99">nifti_1_header::srow_y</a></div><div class="ttdeci">float srow_y[4]</div><div class="ttdef"><b>Definition:</b> nifti1.h:197</div></div>
<div class="ttc" id="structnifti__1__header_html_af47d0d4ae23f57441edcef9594fd1495"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#af47d0d4ae23f57441edcef9594fd1495">nifti_1_header::quatern_d</a></div><div class="ttdeci">float quatern_d</div><div class="ttdef"><b>Definition:</b> nifti1.h:191</div></div>
<div class="ttc" id="nifti1__io_8c_html_a9c64a35264c605640a30af4eec6d99bc"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#a9c64a35264c605640a30af4eec6d99bc">nifti_swap_2bytes</a></div><div class="ttdeci">void nifti_swap_2bytes(size_t n, void *ar)</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:2139</div></div>
<div class="ttc" id="structnifti__1__header_html_a0d2b669f776a2b7fb84807ea2f7b4231"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#a0d2b669f776a2b7fb84807ea2f7b4231">nifti_1_header::toffset</a></div><div class="ttdeci">float toffset</div><div class="ttdef"><b>Definition:</b> nifti1.h:178</div></div>
<div class="ttc" id="structnifti__analyze75_html"><div class="ttname"><a href="../../de/d05/structnifti__analyze75.html">nifti_analyze75</a></div><div class="ttdef"><b>Definition:</b> nifti1_io.h:190</div></div>
<div class="ttc" id="structnifti__1__header_html_a962002307f10b359788cea98ebcb40b6"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#a962002307f10b359788cea98ebcb40b6">nifti_1_header::qoffset_z</a></div><div class="ttdeci">float qoffset_z</div><div class="ttdef"><b>Definition:</b> nifti1.h:194</div></div>
<div class="ttc" id="structnifti__1__header_html_ab672320f8968eb98b208b340c87515ba"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#ab672320f8968eb98b208b340c87515ba">nifti_1_header::srow_x</a></div><div class="ttdeci">float srow_x[4]</div><div class="ttdef"><b>Definition:</b> nifti1.h:196</div></div>
<div class="ttc" id="structnifti__1__header_html_a260d55840377fe1bcfb49bda5f85b76c"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#a260d55840377fe1bcfb49bda5f85b76c">nifti_1_header::slice_end</a></div><div class="ttdeci">short slice_end</div><div class="ttdef"><b>Definition:</b> nifti1.h:172</div></div>
<div class="ttc" id="structnifti__1__header_html_a70400549d1f42d7f777915273576549b"><div class="ttname"><a href="../../dd/d75/structnifti__1__header.html#a70400549d1f42d7f777915273576549b">nifti_1_header::slice_duration</a></div><div class="ttdeci">float slice_duration</div><div class="ttdef"><b>Definition:</b> nifti1.h:177</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4062dff607da27712e1abbcdedd3c82e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4062dff607da27712e1abbcdedd3c82e">&#9670;&nbsp;</a></span>valid_nifti_brick_list()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int valid_nifti_brick_list </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d0/de7/structnifti__image.html">nifti_image</a> *&#160;</td>
          <td class="paramname"><em>nim</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>nbricks</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int *&#160;</td>
          <td class="paramname"><em>blist</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>disp_error</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>valid_nifti_brick_list - check sub-brick list for image</p>
<p>This function verifies that nbricks and blist are appropriate for use with this nim, based on the dimensions.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">nim</td><td><a class="el" href="../../d0/de7/structnifti__image.html" title="High level data structure for open nifti datasets in the nifti1_io API. Note that this structure is n...">nifti_image</a> to check against </td></tr>
    <tr><td class="paramname">nbricks</td><td>number of brick indices in blist </td></tr>
    <tr><td class="paramname">blist</td><td>list of brick indices to check in nim </td></tr>
    <tr><td class="paramname">disp_error</td><td>if this flag is set, report errors to user</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>1 if valid, 0 if not </dd></dl>
<div class="fragment"><div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;{</div><div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;   <span class="keywordtype">int</span> c, nsubs;</div><div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;</div><div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;   <span class="keywordflow">if</span>( !nim ){</div><div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;      <span class="keywordflow">if</span>( disp_error || <a class="code" href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a>.debug &gt; 0 )</div><div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;         fprintf(stderr,<span class="stringliteral">&quot;** valid_nifti_brick_list: missing nifti image\n&quot;</span>);</div><div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;   }</div><div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;</div><div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;   <span class="keywordflow">if</span>( nbricks &lt;= 0 || !blist ){</div><div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;      <span class="keywordflow">if</span>( disp_error || <a class="code" href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a>.debug &gt; 1 )</div><div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;         fprintf(stderr,<span class="stringliteral">&quot;** valid_nifti_brick_list: no brick list to check\n&quot;</span>);</div><div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;   }</div><div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;</div><div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;   <span class="keywordflow">if</span>( nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a054f5f2c357dd6833efd467ac202f0a5">dim</a>[0] &lt; 3 ){</div><div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;      <span class="keywordflow">if</span>( disp_error || <a class="code" href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a>.debug &gt; 1 )</div><div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;         fprintf(stderr,<span class="stringliteral">&quot;** cannot read explict brick list from %d-D dataset\n&quot;</span>,</div><div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;                 nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a054f5f2c357dd6833efd467ac202f0a5">dim</a>[0]);</div><div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;   }</div><div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;</div><div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;   <span class="comment">/* nsubs sub-brick is nt*nu*nv*nw */</span></div><div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;   <span class="keywordflow">for</span>( c = 4, nsubs = 1; c &lt;= nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a054f5f2c357dd6833efd467ac202f0a5">dim</a>[0]; c++ )</div><div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;      nsubs *= nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a054f5f2c357dd6833efd467ac202f0a5">dim</a>[c];</div><div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;</div><div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;   <span class="keywordflow">if</span>( nsubs &lt;= 0 ){</div><div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;      fprintf(stderr,<span class="stringliteral">&quot;** VNBL warning: bad dim list (%d,%d,%d,%d)\n&quot;</span>,</div><div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;                     nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a054f5f2c357dd6833efd467ac202f0a5">dim</a>[4], nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a054f5f2c357dd6833efd467ac202f0a5">dim</a>[5], nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a054f5f2c357dd6833efd467ac202f0a5">dim</a>[6], nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a054f5f2c357dd6833efd467ac202f0a5">dim</a>[7]);</div><div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;   }</div><div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;</div><div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;   <span class="keywordflow">for</span>( c = 0; c &lt; nbricks; c++ )</div><div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;      <span class="keywordflow">if</span>( (blist[c] &lt; 0) || (blist[c] &gt;= nsubs) ){</div><div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;         <span class="keywordflow">if</span>( disp_error || <a class="code" href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a>.debug &gt; 1 )</div><div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;            fprintf(stderr,</div><div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;               <span class="stringliteral">&quot;** volume index %d (#%d) is out of range [0,%d]\n&quot;</span>,</div><div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;               blist[c], c, nsubs-1);</div><div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;         <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;      }</div><div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;</div><div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;   <span class="keywordflow">return</span> 1;  <span class="comment">/* all is well */</span></div><div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;}</div><div class="ttc" id="structnifti__image_html_a054f5f2c357dd6833efd467ac202f0a5"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a054f5f2c357dd6833efd467ac202f0a5">nifti_image::dim</a></div><div class="ttdeci">int dim[8]</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:99</div></div>
<div class="ttc" id="nifti1__io_8c_html_a6e047e1dc2f826a4adff048bee8f5df7"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a></div><div class="ttdeci">static nifti_global_options g_opts</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:344</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae4827bde194fb79b17406da16216f81f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae4827bde194fb79b17406da16216f81f">&#9670;&nbsp;</a></span>valid_nifti_extensions()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int valid_nifti_extensions </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d0/de7/structnifti__image.html">nifti_image</a> *&#160;</td>
          <td class="paramname"><em>nim</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>for each extension, check code, size and data pointer </p>
<div class="fragment"><div class="line"><a name="l04663"></a><span class="lineno"> 4663</span>&#160;{</div><div class="line"><a name="l04664"></a><span class="lineno"> 4664</span>&#160;   <a class="code" href="../../d4/d55/structnifti1__extension.html">nifti1_extension</a> * ext;</div><div class="line"><a name="l04665"></a><span class="lineno"> 4665</span>&#160;   <span class="keywordtype">int</span>                c, errs;</div><div class="line"><a name="l04666"></a><span class="lineno"> 4666</span>&#160;</div><div class="line"><a name="l04667"></a><span class="lineno"> 4667</span>&#160;   <span class="keywordflow">if</span>( nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a2b9edee8e340d17e4d87b1c682ca091a">num_ext</a> &lt;= 0 || nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a9f8f5fc618182c3baa7cd0c59af69c35">ext_list</a> == NULL ){</div><div class="line"><a name="l04668"></a><span class="lineno"> 4668</span>&#160;      <span class="keywordflow">if</span>( <a class="code" href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a>.debug &gt; 2 ) fprintf(stderr,<span class="stringliteral">&quot;-d empty extension list\n&quot;</span>);</div><div class="line"><a name="l04669"></a><span class="lineno"> 4669</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l04670"></a><span class="lineno"> 4670</span>&#160;   }</div><div class="line"><a name="l04671"></a><span class="lineno"> 4671</span>&#160;</div><div class="line"><a name="l04672"></a><span class="lineno"> 4672</span>&#160;   <span class="comment">/* for each extension, check code, size and data pointer */</span></div><div class="line"><a name="l04673"></a><span class="lineno"> 4673</span>&#160;   ext = nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a9f8f5fc618182c3baa7cd0c59af69c35">ext_list</a>;</div><div class="line"><a name="l04674"></a><span class="lineno"> 4674</span>&#160;   errs = 0;</div><div class="line"><a name="l04675"></a><span class="lineno"> 4675</span>&#160;   <span class="keywordflow">for</span> ( c = 0; c &lt; nim-&gt;<a class="code" href="../../d0/de7/structnifti__image.html#a2b9edee8e340d17e4d87b1c682ca091a">num_ext</a>; c++ ){</div><div class="line"><a name="l04676"></a><span class="lineno"> 4676</span>&#160;      <span class="keywordflow">if</span>( ! <a class="code" href="../../d1/d14/nifti1__io_8c.html#affc673e2c2768319574e46169462f115">nifti_is_valid_ecode</a>(ext-&gt;ecode) ) {</div><div class="line"><a name="l04677"></a><span class="lineno"> 4677</span>&#160;         <span class="keywordflow">if</span>( <a class="code" href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a>.debug &gt; 1 )</div><div class="line"><a name="l04678"></a><span class="lineno"> 4678</span>&#160;            fprintf(stderr,<span class="stringliteral">&quot;-d ext %d, invalid code %d\n&quot;</span>, c, ext-&gt;ecode);</div><div class="line"><a name="l04679"></a><span class="lineno"> 4679</span>&#160;         errs++;</div><div class="line"><a name="l04680"></a><span class="lineno"> 4680</span>&#160;      }</div><div class="line"><a name="l04681"></a><span class="lineno"> 4681</span>&#160;</div><div class="line"><a name="l04682"></a><span class="lineno"> 4682</span>&#160;      <span class="keywordflow">if</span>( ext-&gt;esize &lt;= 0 ){</div><div class="line"><a name="l04683"></a><span class="lineno"> 4683</span>&#160;         <span class="keywordflow">if</span>( <a class="code" href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a>.debug &gt; 1 )</div><div class="line"><a name="l04684"></a><span class="lineno"> 4684</span>&#160;            fprintf(stderr,<span class="stringliteral">&quot;-d ext %d, bad size = %d\n&quot;</span>, c, ext-&gt;esize);</div><div class="line"><a name="l04685"></a><span class="lineno"> 4685</span>&#160;         errs++;</div><div class="line"><a name="l04686"></a><span class="lineno"> 4686</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( ext-&gt;esize &amp; 0xf ){</div><div class="line"><a name="l04687"></a><span class="lineno"> 4687</span>&#160;         <span class="keywordflow">if</span>( <a class="code" href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a>.debug &gt; 1 )</div><div class="line"><a name="l04688"></a><span class="lineno"> 4688</span>&#160;            fprintf(stderr,<span class="stringliteral">&quot;-d ext %d, size %d not multiple of 16\n&quot;</span>,</div><div class="line"><a name="l04689"></a><span class="lineno"> 4689</span>&#160;                    c, ext-&gt;esize);</div><div class="line"><a name="l04690"></a><span class="lineno"> 4690</span>&#160;         errs++;</div><div class="line"><a name="l04691"></a><span class="lineno"> 4691</span>&#160;      }</div><div class="line"><a name="l04692"></a><span class="lineno"> 4692</span>&#160;</div><div class="line"><a name="l04693"></a><span class="lineno"> 4693</span>&#160;      <span class="keywordflow">if</span>( ext-&gt;edata == NULL ){</div><div class="line"><a name="l04694"></a><span class="lineno"> 4694</span>&#160;         <span class="keywordflow">if</span>( <a class="code" href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a>.debug &gt; 1 ) fprintf(stderr,<span class="stringliteral">&quot;-d ext %d, missing data\n&quot;</span>, c);</div><div class="line"><a name="l04695"></a><span class="lineno"> 4695</span>&#160;         errs++;</div><div class="line"><a name="l04696"></a><span class="lineno"> 4696</span>&#160;      }</div><div class="line"><a name="l04697"></a><span class="lineno"> 4697</span>&#160;</div><div class="line"><a name="l04698"></a><span class="lineno"> 4698</span>&#160;      ext++;</div><div class="line"><a name="l04699"></a><span class="lineno"> 4699</span>&#160;   }</div><div class="line"><a name="l04700"></a><span class="lineno"> 4700</span>&#160;</div><div class="line"><a name="l04701"></a><span class="lineno"> 4701</span>&#160;   <span class="keywordflow">if</span>( errs &gt; 0 ){</div><div class="line"><a name="l04702"></a><span class="lineno"> 4702</span>&#160;      <span class="keywordflow">if</span>( <a class="code" href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a>.debug &gt; 0 )</div><div class="line"><a name="l04703"></a><span class="lineno"> 4703</span>&#160;         fprintf(stderr,<span class="stringliteral">&quot;-d had %d extension errors, none will be written\n&quot;</span>,</div><div class="line"><a name="l04704"></a><span class="lineno"> 4704</span>&#160;                 errs);</div><div class="line"><a name="l04705"></a><span class="lineno"> 4705</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l04706"></a><span class="lineno"> 4706</span>&#160;   }</div><div class="line"><a name="l04707"></a><span class="lineno"> 4707</span>&#160;</div><div class="line"><a name="l04708"></a><span class="lineno"> 4708</span>&#160;   <span class="comment">/* if we&#39;re here, we&#39;re good */</span></div><div class="line"><a name="l04709"></a><span class="lineno"> 4709</span>&#160;   <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l04710"></a><span class="lineno"> 4710</span>&#160;}</div><div class="ttc" id="structnifti__image_html_a9f8f5fc618182c3baa7cd0c59af69c35"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a9f8f5fc618182c3baa7cd0c59af69c35">nifti_image::ext_list</a></div><div class="ttdeci">nifti1_extension * ext_list</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:168</div></div>
<div class="ttc" id="nifti1__io_8c_html_affc673e2c2768319574e46169462f115"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#affc673e2c2768319574e46169462f115">nifti_is_valid_ecode</a></div><div class="ttdeci">int nifti_is_valid_ecode(int ecode)</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:4718</div></div>
<div class="ttc" id="structnifti1__extension_html"><div class="ttname"><a href="../../d4/d55/structnifti1__extension.html">nifti1_extension</a></div><div class="ttdoc">Data structure defining the fields of a header extension. </div><div class="ttdef"><b>Definition:</b> nifti1.h:293</div></div>
<div class="ttc" id="nifti1__io_8c_html_a6e047e1dc2f826a4adff048bee8f5df7"><div class="ttname"><a href="../../d1/d14/nifti1__io_8c.html#a6e047e1dc2f826a4adff048bee8f5df7">g_opts</a></div><div class="ttdeci">static nifti_global_options g_opts</div><div class="ttdef"><b>Definition:</b> nifti1_io.c:344</div></div>
<div class="ttc" id="structnifti__image_html_a2b9edee8e340d17e4d87b1c682ca091a"><div class="ttname"><a href="../../d0/de7/structnifti__image.html#a2b9edee8e340d17e4d87b1c682ca091a">nifti_image::num_ext</a></div><div class="ttdeci">int num_ext</div><div class="ttdef"><b>Definition:</b> nifti1_io.h:167</div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a6e047e1dc2f826a4adff048bee8f5df7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6e047e1dc2f826a4adff048bee8f5df7">&#9670;&nbsp;</a></span>g_opts</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">nifti_global_options g_opts</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= { </div><div class="line">        1, </div><div class="line">        0, </div><div class="line">        1  </div><div class="line">}</div></div><!-- fragment --><p>global nifti options structure - init with defaults </p>

</div>
</div>
<a id="acc75a1d8e7f1941d286aa0a41e2b8bdd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acc75a1d8e7f1941d286aa0a41e2b8bdd">&#9670;&nbsp;</a></span>gni_history</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">char* gni_history[]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>global history and version strings, for printing </p>

</div>
</div>
<a id="add56f2785b8987898a86fab47fdbe21b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#add56f2785b8987898a86fab47fdbe21b">&#9670;&nbsp;</a></span>nifti_type_list</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">nifti_type_ele nifti_type_list[]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>global nifti types structure list (per type, ordered oldest to newest) </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sat Aug 18 2018 16:22:29 for libIFT by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.14
</small></address>
</body>
</html>
