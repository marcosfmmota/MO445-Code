<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>libIFT: iftTrainImageClassifierByLogReg.c</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" async src="http://www.mathjax.org/mathjax/MathJax.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">libIFT
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">iftTrainImageClassifierByLogReg.c</div>  </div>
</div><!--header-->
<div class="contents">
<p>Trains a Logistic Regression Classifier from a set of Voxels (markers) of an Input Image.The samples from the training dataset are the markers, and their feature vectors correspond to the brightness value from each one in the Input <a class="el" href="../../db/d58/structImage.html">Image</a>. The labels from the markers are used as the true labels from the dataset's samples. The markers could be obtained using VISVA or Usis, and they are stored by the function iftWriteSeeds(). </p><dl class="section note"><dt>Note</dt><dd>See the source code in <a class="el" href="../../df/d30/iftTrainImageClassifierByLogReg_8c-example.html">iftTrainImageClassifierByLogReg.c</a> </dd></dl>
<dl class="section author"><dt>Author</dt><dd>Samuel Martins </dd></dl>
<dl class="section date"><dt>Date</dt><dd>Jul 1, 2016</dd></dl>
<div class="fragment"><div class="line"></div><div class="line"><span class="preprocessor">#include &quot;ift.h&quot;</span></div><div class="line"></div><div class="line"><span class="comment">/************************** HEADERS **************************/</span></div><div class="line">iftDict *iftGetArgs(<span class="keywordtype">int</span> argc, <span class="keyword">const</span> <span class="keywordtype">char</span> *argv[]);</div><div class="line"><span class="keywordtype">void</span> iftGetRequiredArgs(<span class="keyword">const</span> iftDict *args, <span class="keywordtype">char</span> **img_path, <span class="keywordtype">char</span> **markers_path, <span class="keywordtype">char</span> **clf_path);</div><div class="line"><span class="keywordtype">void</span> iftValidateInputs(<span class="keyword">const</span> <span class="keywordtype">char</span> *img_path, <span class="keyword">const</span> <span class="keywordtype">char</span> *markers_path, <span class="keyword">const</span> <span class="keywordtype">char</span> *out_clf_path);</div><div class="line"><span class="keywordtype">void</span> iftGetOptionalArgs(<span class="keyword">const</span> iftDict *args, <span class="keywordtype">int</span> *max_n_train, <span class="keywordtype">double</span> *smooth_factor);</div><div class="line"><span class="comment">/*************************************************************/</span></div><div class="line"></div><div class="line"><a name="_a0"></a><a class="code" href="../../d4/d89/structiftMImage.html">iftMImage</a> *iftExtractGrayFeatures(<a name="_a1"></a><a class="code" href="../../d5/dec/structiftImage.html">iftImage</a> *img)</div><div class="line">{</div><div class="line">    <a class="code" href="../../d4/d89/structiftMImage.html">iftMImage</a> *mimg = iftCreateMImage(img-&gt;xsize,img-&gt;ysize,img-&gt;zsize,2);</div><div class="line">    <a name="_a2"></a><a class="code" href="../../d7/dab/structiftAdjRel.html">iftAdjRel</a> *A;</div><div class="line"></div><div class="line">    <span class="keywordflow">if</span> (<a name="a3"></a><a class="code" href="../../da/d89/iftImage_8h.html#a10c39fd0119da8d6287098f9e1950c5d">iftIs3DImage</a>(img)){</div><div class="line">        A  = <a name="a4"></a><a class="code" href="../../df/d91/group__Image.html#ga29d6f260ed31c976873b5ffa3b530b20">iftSpheric</a>(1.0);</div><div class="line">    } <span class="keywordflow">else</span> {</div><div class="line">        A = <a name="a5"></a><a class="code" href="../../df/d91/group__Image.html#ga5cfeaa002c076c4b478789a746db7d2e">iftCircular</a>(1.0);</div><div class="line">    }</div><div class="line"></div><div class="line"><span class="preprocessor">#pragma omp parallel shared(img,mimg,A)</span></div><div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> p=0; p &lt; img-&gt;n; p++) {</div><div class="line">        <a name="_a6"></a><a class="code" href="../../da/dd3/structiftVoxel.html">iftVoxel</a> u = <a name="a7"></a><a class="code" href="../../da/d89/iftImage_8h.html#adcd74824f09b06e1a3e750be7ba3ebf8">iftGetVoxelCoord</a>(img,p);</div><div class="line">        mimg-&gt;band[0].val[p] = img-&gt;val[p];</div><div class="line">        mimg-&gt;band[1].val[p] = 0.0;</div><div class="line">    <span class="keywordtype">int</span> n = 0;</div><div class="line">        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=1; i &lt; A-&gt;n; i++){</div><div class="line">            <a class="code" href="../../da/dd3/structiftVoxel.html">iftVoxel</a> v = iftGetAdjacentVoxel(A,u,i);</div><div class="line">            <span class="keywordflow">if</span> (<a name="a8"></a><a class="code" href="../../da/d89/iftImage_8h.html#a6ff1047a81698b71b9c1135694cb3c3f">iftValidVoxel</a>(img,v)){</div><div class="line">                <span class="keywordtype">int</span> q = <a name="a9"></a><a class="code" href="../../da/d89/iftImage_8h.html#af797b50ac5f8222d63d0f43dd02e064b">iftGetVoxelIndex</a>(img,v);</div><div class="line">        mimg-&gt;band[1].val[p] += fabs(img-&gt;val[q]-img-&gt;val[p]);</div><div class="line">        n++;</div><div class="line">            }</div><div class="line">        }</div><div class="line">    mimg-&gt;band[1].val[p] /= n;</div><div class="line">    }</div><div class="line"></div><div class="line">    <a name="a10"></a><a class="code" href="../../df/d91/group__Image.html#ga6d2a950d879d5b462f2db84ec269a04f">iftDestroyAdjRel</a>(&amp;A);</div><div class="line">    <span class="keywordflow">return</span>(mimg);</div><div class="line">}</div><div class="line"></div><div class="line"></div><div class="line"><span class="keywordtype">int</span> <a name="a11"></a><a class="code" href="../../d6/d81/iftTestDict1_8c.html#ac0f2228420376f4db7e1274f2b41667c">main</a>(<span class="keywordtype">int</span> argc, <span class="keyword">const</span> <span class="keywordtype">char</span> *argv[]) {</div><div class="line">    iftDict *args = iftGetArgs(argc, argv);</div><div class="line"></div><div class="line">    <span class="comment">// mandatory args</span></div><div class="line">    <span class="keywordtype">char</span> *img_path     = NULL;</div><div class="line">    <span class="keywordtype">char</span> *markers_path = NULL;</div><div class="line">    <span class="keywordtype">char</span> *out_clf_path     = NULL;</div><div class="line"></div><div class="line">    <span class="comment">// optional args</span></div><div class="line">    <span class="keywordtype">int</span> max_n_train;</div><div class="line">    <span class="keywordtype">double</span> smooth_factor;</div><div class="line"></div><div class="line">    iftGetRequiredArgs(args, &amp;img_path, &amp;markers_path, &amp;out_clf_path);</div><div class="line">    iftGetOptionalArgs(args, &amp;max_n_train, &amp;smooth_factor);</div><div class="line"></div><div class="line">    <a class="code" href="../../d4/d7c/group__DataTypes.html#gafe0c4980c3664a7c6d61237c475439d0">timer</a> *t1 = <a name="a12"></a><a class="code" href="../../df/d63/iftCommon_8h.html#a76caefd6f01f06fe623182ccc013544e">iftTic</a>();</div><div class="line"></div><div class="line">    puts(<span class="stringliteral">&quot;- Reading Image&quot;</span>);</div><div class="line">    <a class="code" href="../../d5/dec/structiftImage.html">iftImage</a> *img = <a name="a13"></a><a class="code" href="../../da/d89/iftImage_8h.html#ab9d6ffb413c484539f5f51813f566712">iftReadImageByExt</a>(img_path);</div><div class="line"></div><div class="line">    <span class="keywordflow">if</span> (smooth_factor &gt; 0.0) {</div><div class="line">        puts(<span class="stringliteral">&quot;- Smoothing Image&quot;</span>);</div><div class="line"></div><div class="line">        <a name="_a14"></a><a class="code" href="../../d0/d79/structiftKernel.html">iftKernel</a> *K = NULL;</div><div class="line">        <span class="keywordflow">if</span>(<a class="code" href="../../da/d89/iftImage_8h.html#a10c39fd0119da8d6287098f9e1950c5d">iftIs3DImage</a>(img))</div><div class="line">            K = iftGaussianKernel(1.5, smooth_factor*<a name="a15"></a><a class="code" href="../../da/d89/iftImage_8h.html#a3ff31caa90348c2bc163738acda2fad3">iftMaximumValue</a>(img));</div><div class="line">        <span class="keywordflow">else</span></div><div class="line">            K = iftGaussianKernel2D(1.5, smooth_factor*<a class="code" href="../../da/d89/iftImage_8h.html#a3ff31caa90348c2bc163738acda2fad3">iftMaximumValue</a>(img));</div><div class="line"></div><div class="line">        <a class="code" href="../../d5/dec/structiftImage.html">iftImage</a> *smoothed = iftFastLinearFilter(img, K, 0);</div><div class="line"></div><div class="line">        iftDestroyKernel(&amp;K);</div><div class="line">        <a name="a16"></a><a class="code" href="../../da/d89/iftImage_8h.html#a00dc5e984634e16895da5139a7c3dc1e">iftDestroyImage</a>(&amp;img);</div><div class="line">        img = smoothed;</div><div class="line">    }</div><div class="line"></div><div class="line">    puts(<span class="stringliteral">&quot;- Reading Markers&quot;</span>);</div><div class="line">    <a name="_a17"></a><a class="code" href="../../d9/d21/structiftLabeledSet.html">iftLabeledSet</a> *markers = iftReadSeeds(markers_path, img);</div><div class="line"></div><div class="line">    puts(<span class="stringliteral">&quot;- Getting DataSet&quot;</span>);</div><div class="line">    </div><div class="line">    <span class="comment">/* iftMImage *mimg; */</span></div><div class="line">    <span class="comment">/* if (!iftIsColorImage(img)) { */</span></div><div class="line">    <span class="comment">/*   mimg = iftExtractGrayFeatures(img); */</span></div><div class="line">    <span class="comment">/* } else */</span></div><div class="line">    <span class="comment">/*   mimg = iftImageToMImage(img, LAB_CSPACE); */</span></div><div class="line"></div><div class="line">    <span class="comment">/* iftDataSet *Z = iftMImageSeedsToDataSet(mimg, markers); */</span></div><div class="line">    </div><div class="line">    <a name="_a18"></a><a class="code" href="../../dd/d29/structiftDataSet.html">iftDataSet</a> *Z = <a name="a19"></a><a class="code" href="../../d1/d86/iftDataSet_8h.html#a077c11fc712f8f9bf94d602082c49596">iftImageSeedsToDataSet</a>(img, markers);</div><div class="line"></div><div class="line">    <span class="keywordflow">if</span> (!<a name="a20"></a><a class="code" href="../../d5/d12/iftClustering_8h.html#aad56c6e5d6fa3c862f26fb114391437d">iftSelectSupTrainSamplesWithNoOutliers</a>(Z,max_n_train))</div><div class="line">        <a name="a21"></a><a class="code" href="../../dd/d1b/group__Dialog.html#ga9cb6e995b16e47d3fb65163055cd9102">iftExit</a>(<span class="stringliteral">&quot;Seeds do not represent a valid training set&quot;</span>, <span class="stringliteral">&quot;main&quot;</span>);</div><div class="line"></div><div class="line">    printf(<span class="stringliteral">&quot;  - n_train_samples: %d/%d, n_feats: %d, n_classes: %d\n&quot;</span>, Z-&gt;ntrainsamples, Z-&gt;nsamples, Z-&gt;nfeats, Z-&gt;nclasses);</div><div class="line"></div><div class="line">    puts(<span class="stringliteral">&quot;- Training Log Reg&quot;</span>);</div><div class="line">    <a name="_a22"></a><a class="code" href="../../d3/de3/structiftLogReg.html">iftLogReg</a> *logreg = <a name="a23"></a><a class="code" href="../../d7/d33/iftClassification_8h.html#a064c86081a626028416352439a73d0bd">iftLogRegTrain</a>(Z);</div><div class="line"></div><div class="line">    puts(<span class="stringliteral">&quot;- Saving Log Reg&quot;</span>);</div><div class="line">    <a name="a24"></a><a class="code" href="../../d7/d33/iftClassification_8h.html#a107a8e879f3eefdee72eedc4ba76ecf0">iftWriteLogReg</a>(logreg, out_clf_path);</div><div class="line"></div><div class="line">    puts(<span class="stringliteral">&quot;\nDone...&quot;</span>);</div><div class="line">    puts(<a name="a25"></a><a class="code" href="../../df/d63/iftCommon_8h.html#ae1df5bbc9e84a88bae5138947533852d">iftFormattedTime</a>(<a name="a26"></a><a class="code" href="../../df/d63/iftCommon_8h.html#a80d5d5b337126a4015c0c92255035c2a">iftCompTime</a>(t1, <a name="a27"></a><a class="code" href="../../df/d63/iftCommon_8h.html#a9acb2cc3dfa79b4dd836ac5a6a01b7a8">iftToc</a>())));</div><div class="line"></div><div class="line">    <span class="comment">// DESTROYERS</span></div><div class="line">    <a name="a28"></a><a class="code" href="../../d5/d1a/group__Dictionary.html#gad7e8aa9ef65b4b8bdc0d80007f2bb440">iftDestroyDict</a>(&amp;args);</div><div class="line">    <a class="code" href="../../da/d89/iftImage_8h.html#a00dc5e984634e16895da5139a7c3dc1e">iftDestroyImage</a>(&amp;img);</div><div class="line">    <span class="comment">//iftDestroyMImage(&amp;mimg);</span></div><div class="line">    iftDestroyLabeledSet(&amp;markers);</div><div class="line">    <a name="a29"></a><a class="code" href="../../d1/d86/iftDataSet_8h.html#aae7b9c78b75f04e57706682702809573">iftDestroyDataSet</a>(&amp;Z);</div><div class="line">    <a name="a30"></a><a class="code" href="../../d7/d33/iftClassification_8h.html#ac8a8d7801dd3296b26e63422c6ce46f0">iftDestroyLogReg</a>(&amp;logreg);</div><div class="line">    <a name="a31"></a><a class="code" href="../../de/d85/group__Memory.html#ga0838633452ae59e3d57d4bffb57e3174">iftFree</a>(img_path);</div><div class="line">    <a class="code" href="../../de/d85/group__Memory.html#ga0838633452ae59e3d57d4bffb57e3174">iftFree</a>(markers_path);</div><div class="line">    <a class="code" href="../../de/d85/group__Memory.html#ga0838633452ae59e3d57d4bffb57e3174">iftFree</a>(out_clf_path);</div><div class="line"></div><div class="line">    <span class="keywordflow">return</span> 0;</div><div class="line">}</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">/************************** SOURCES **************************/</span></div><div class="line">iftDict *iftGetArgs(<span class="keywordtype">int</span> argc, <span class="keyword">const</span> <span class="keywordtype">char</span> *argv[]) {</div><div class="line">    <span class="keywordtype">char</span> program_description[2048] = \</div><div class="line">        <span class="stringliteral">&quot;Trains a Logistic Regression Classifier from a set of Voxels (markers) of an Input Image.\n&quot;</span> \</div><div class="line">        <span class="stringliteral">&quot;The samples from the training dataset are the markers, and their feature vectors correspond to the &quot;</span> \</div><div class="line">        <span class="stringliteral">&quot;brightness value from each one in the Input Image.\n&quot;</span> \</div><div class="line">        <span class="stringliteral">&quot;The labels from the markers are used as the true labels from the dataset&#39;s samples.\n\n&quot;</span> \</div><div class="line">        <span class="stringliteral">&quot;The markers could be obtained using VISVA or Usis, and they are stored by the function iftWriteSeeds()&quot;</span>;</div><div class="line"></div><div class="line">    <a name="_a32"></a><a class="code" href="../../d1/dd5/structiftCmdLineOpt.html">iftCmdLineOpt</a> cmd_line_opts[] = {</div><div class="line">            {.<a name="a33"></a><a class="code" href="../../d1/dd5/structiftCmdLineOpt.html#a0c59b9dfbb2c794fa5ddc07829788427">short_name</a> = <span class="stringliteral">&quot;-i&quot;</span>, .long_name = <span class="stringliteral">&quot;--input-img&quot;</span>, .has_arg=<span class="keyword">true</span>, .arg_type=IFT_STR_TYPE,</div><div class="line">             .required=<span class="keyword">true</span>, .help=<span class="stringliteral">&quot;Input Image where the markers were obtained.&quot;</span>},</div><div class="line">            {.short_name = <span class="stringliteral">&quot;-m&quot;</span>, .long_name = <span class="stringliteral">&quot;--markers-path&quot;</span>, .has_arg=<span class="keyword">true</span>, .arg_type=IFT_STR_TYPE,</div><div class="line">             .required=<span class="keyword">true</span>, .help=<span class="stringliteral">&quot;File (*.txt) with the chosen markers to train the classifier.\n&quot;</span> \</div><div class="line">                                    <span class="stringliteral">&quot;Use VISVA or Usis software to get it, or the function iftWriteSeeds().&quot;</span>},</div><div class="line">            {.short_name = <span class="stringliteral">&quot;-f&quot;</span>, .long_name = <span class="stringliteral">&quot;--smooth-factor&quot;</span>, .has_arg=<span class="keyword">true</span>, .arg_type=IFT_DBL_TYPE,</div><div class="line">                    .required=<span class="keyword">false</span>, .help=<span class="stringliteral">&quot;Factor used to smooth the image (e.g., 0.3).&quot;</span>},</div><div class="line">            {.short_name = <span class="stringliteral">&quot;-o&quot;</span>, .long_name = <span class="stringliteral">&quot;--output-clf-path&quot;</span>, .has_arg=<span class="keyword">true</span>, .arg_type=IFT_STR_TYPE,</div><div class="line">             .required=<span class="keyword">true</span>, .help=<span class="stringliteral">&quot;Pathname from the trained classifier (*.logreg.zip).&quot;</span>},</div><div class="line">            {.short_name = <span class="stringliteral">&quot;-n&quot;</span>, .long_name = <span class="stringliteral">&quot;--max-num-train-markers&quot;</span>, .has_arg=<span class="keyword">true</span>, .arg_type=IFT_LONG_TYPE,</div><div class="line">             .required=<span class="keyword">false</span>, .help=<span class="stringliteral">&quot;Maximum Number of Markers used to train the Classifier.\n&quot;</span> \</div><div class="line">                                     <span class="stringliteral">&quot;Default: 500&quot;</span>}</div><div class="line">    };</div><div class="line">    <span class="keywordtype">int</span> n_opts = <span class="keyword">sizeof</span>(cmd_line_opts) / <span class="keyword">sizeof</span> (<a class="code" href="../../d1/dd5/structiftCmdLineOpt.html">iftCmdLineOpt</a>);</div><div class="line"></div><div class="line">    <span class="comment">// Parser Setup</span></div><div class="line">    <a name="_a34"></a><a class="code" href="../../d8/da4/structiftCmdLineParser.html">iftCmdLineParser</a> *parser = <a name="a35"></a><a class="code" href="../../d2/d4f/group__CommandLineParser.html#gaaeaa76d84ca529f8f89bdf23437170dc">iftCreateCmdLineParser</a>(program_description, n_opts, cmd_line_opts);</div><div class="line">    iftDict *args            = <a name="a36"></a><a class="code" href="../../d2/d4f/group__CommandLineParser.html#ga6f5e9f266210f4308cb536bda219b91f">iftParseCmdLine</a>(argc, argv, parser); <span class="comment">// getting the passed options/arguments</span></div><div class="line">    <a name="a37"></a><a class="code" href="../../d2/d4f/group__CommandLineParser.html#ga89907fd388e1659aee7e8520a8098c6b">iftDestroyCmdLineParser</a>(&amp;parser);</div><div class="line"></div><div class="line">    <span class="keywordflow">return</span> args;</div><div class="line">}</div><div class="line"></div><div class="line"></div><div class="line"><span class="keywordtype">void</span> iftGetRequiredArgs(<span class="keyword">const</span> iftDict *args, <span class="keywordtype">char</span> **img_path, <span class="keywordtype">char</span> **markers_path, <span class="keywordtype">char</span> **out_clf_path) {</div><div class="line">    *img_path     = <a name="a38"></a><a class="code" href="../../d5/d1a/group__Dictionary.html#ga8a7110c157a8323989ca9067c1b502f6">iftGetStrValFromDict</a>(<span class="stringliteral">&quot;--input-img&quot;</span>, args);</div><div class="line">    *markers_path = <a class="code" href="../../d5/d1a/group__Dictionary.html#ga8a7110c157a8323989ca9067c1b502f6">iftGetStrValFromDict</a>(<span class="stringliteral">&quot;--markers-path&quot;</span>, args);</div><div class="line">    *out_clf_path = <a class="code" href="../../d5/d1a/group__Dictionary.html#ga8a7110c157a8323989ca9067c1b502f6">iftGetStrValFromDict</a>(<span class="stringliteral">&quot;--output-clf-path&quot;</span>, args);</div><div class="line"></div><div class="line">    iftValidateInputs(*img_path, *markers_path, *out_clf_path);</div><div class="line"></div><div class="line">    puts(<span class="stringliteral">&quot;-----------------------&quot;</span>);</div><div class="line">    printf(<span class="stringliteral">&quot;- Input Image: \&quot;%s\&quot;\n&quot;</span>, *img_path);</div><div class="line">    printf(<span class="stringliteral">&quot;- Markers: \&quot;%s\&quot;\n&quot;</span>, *markers_path);</div><div class="line">    printf(<span class="stringliteral">&quot;- Output Classifier: \&quot;%s\&quot;\n&quot;</span>, *out_clf_path);</div><div class="line">    puts(<span class="stringliteral">&quot;-----------------------&quot;</span>);</div><div class="line"></div><div class="line">}</div><div class="line"></div><div class="line"></div><div class="line"><span class="keywordtype">void</span> iftValidateInputs(<span class="keyword">const</span> <span class="keywordtype">char</span> *img_path, <span class="keyword">const</span> <span class="keywordtype">char</span> *markers_path, <span class="keyword">const</span> <span class="keywordtype">char</span> *out_clf_path) {</div><div class="line">    <span class="keywordflow">if</span> (!<a name="a39"></a><a class="code" href="../../d3/dc1/group__File.html#ga60020ea008a74c4284bc995d849d795f">iftIsImageFile</a>(img_path))</div><div class="line">        <a class="code" href="../../dd/d1b/group__Dialog.html#ga9cb6e995b16e47d3fb65163055cd9102">iftExit</a>(<span class="stringliteral">&quot;Invalid Input Image: \&quot;%s\&quot;&quot;</span>, <span class="stringliteral">&quot;iftValidateInputs&quot;</span>, img_path);</div><div class="line"></div><div class="line">    <span class="keywordflow">if</span> (<a name="a40"></a><a class="code" href="../../d3/dc1/group__File.html#ga8fb4b0df65f0ff2998b093212334758a">iftFileExists</a>(markers_path)) {</div><div class="line">        <span class="keywordflow">if</span> (!<a name="a41"></a><a class="code" href="../../d2/d40/group__String.html#ga0685b3e79e7f93391704e1e8239aeaea">iftEndsWith</a>(markers_path, <span class="stringliteral">&quot;.txt&quot;</span>)) {</div><div class="line">            <a class="code" href="../../dd/d1b/group__Dialog.html#ga9cb6e995b16e47d3fb65163055cd9102">iftExit</a>(<span class="stringliteral">&quot;Invalid Extension for the Markers File: \&quot;%s\&quot;... Use *.txt&quot;</span>,</div><div class="line">                    <span class="stringliteral">&quot;iftValidateInputs&quot;</span>, markers_path);</div><div class="line">        }</div><div class="line">    }</div><div class="line">    <span class="keywordflow">else</span> <a class="code" href="../../dd/d1b/group__Dialog.html#ga9cb6e995b16e47d3fb65163055cd9102">iftExit</a>(<span class="stringliteral">&quot;Markers File \&quot;%s\&quot; does not exist&quot;</span>, <span class="stringliteral">&quot;iftValidateInputs&quot;</span>, markers_path);</div><div class="line"></div><div class="line">    <span class="keywordflow">if</span> (!<a class="code" href="../../d2/d40/group__String.html#ga0685b3e79e7f93391704e1e8239aeaea">iftEndsWith</a>(out_clf_path, <span class="stringliteral">&quot;.zip&quot;</span>)) {</div><div class="line">        <a class="code" href="../../dd/d1b/group__Dialog.html#ga9cb6e995b16e47d3fb65163055cd9102">iftExit</a>(<span class="stringliteral">&quot;Invalid Extension for the Log Reg Classifier: \&quot;%s\&quot;... ... Use *.zip&quot;</span>,</div><div class="line">                <span class="stringliteral">&quot;iftValidateInputs&quot;</span>, out_clf_path);</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="keywordtype">char</span> *parent_dir = <a name="a42"></a><a class="code" href="../../d3/dc1/group__File.html#gaea3d93068e469b54adfc14a1f9caebba">iftParentDir</a>(out_clf_path);</div><div class="line">    <span class="keywordflow">if</span> (!<a name="a43"></a><a class="code" href="../../d3/dc1/group__File.html#ga96e5b1de495d1cbb64c4c470ae8a3fcc">iftDirExists</a>(parent_dir)) {</div><div class="line">        <a name="a44"></a><a class="code" href="../../d3/dc1/group__File.html#ga605cbcc5f822c1860d5e0e03e5128910">iftMakeDir</a>(parent_dir);</div><div class="line">    }</div><div class="line">    <a class="code" href="../../de/d85/group__Memory.html#ga0838633452ae59e3d57d4bffb57e3174">iftFree</a>(parent_dir);</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordtype">void</span> iftGetOptionalArgs(<span class="keyword">const</span> iftDict *args, <span class="keywordtype">int</span> *max_n_train, <span class="keywordtype">double</span> *smooth_factor) {</div><div class="line">    <span class="keywordflow">if</span> (<a name="a45"></a><a class="code" href="../../d5/d1a/group__Dictionary.html#ga60a297f162653c21a6e4726bf74db4a8">iftDictContainKey</a>(<span class="stringliteral">&quot;--smooth-factor&quot;</span>, args, NULL)) {</div><div class="line">        *smooth_factor = <a name="a46"></a><a class="code" href="../../d5/d1a/group__Dictionary.html#ga17e3f6e929c2ffd468be1b41f498e493">iftGetDblValFromDict</a>(<span class="stringliteral">&quot;--smooth-factor&quot;</span>, args);</div><div class="line">    }</div><div class="line">    <span class="keywordflow">else</span></div><div class="line">        *smooth_factor = 0.3;</div><div class="line"></div><div class="line">    <span class="keywordflow">if</span> (<a class="code" href="../../d5/d1a/group__Dictionary.html#ga60a297f162653c21a6e4726bf74db4a8">iftDictContainKey</a>(<span class="stringliteral">&quot;--max-num-train-markers&quot;</span>, args, NULL)) {</div><div class="line">        *max_n_train = <a name="a47"></a><a class="code" href="../../d5/d1a/group__Dictionary.html#ga2b8b3d368bd5f12904743c759dfc5ff2">iftGetLongValFromDict</a>(<span class="stringliteral">&quot;--max-num-train-markers&quot;</span>, args);</div><div class="line">    }</div><div class="line">    <span class="keywordflow">else</span> *max_n_train = 500;</div><div class="line"></div><div class="line">    printf(<span class="stringliteral">&quot;- Max. Num of Train Markers/Samples: %d\n&quot;</span>, *max_n_train);</div><div class="line">    printf(<span class="stringliteral">&quot;- Smooth factor: %lf\n&quot;</span>, *smooth_factor);</div><div class="line">    puts(<span class="stringliteral">&quot;-----------------------\n&quot;</span>);</div><div class="line">}</div><div class="line"><span class="comment">/*************************************************************/</span></div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"></div></div><!-- fragment --> </div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sat Aug 18 2018 16:22:29 for libIFT by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.14
</small></address>
</body>
</html>
